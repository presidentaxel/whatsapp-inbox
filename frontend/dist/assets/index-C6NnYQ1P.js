var WI=Object.defineProperty;var vC=n=>{throw TypeError(n)};var YI=(n,e,t)=>e in n?WI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ee=(n,e,t)=>YI(n,typeof e!="symbol"?e+"":e,t),rv=(n,e,t)=>e.has(n)||vC("Cannot "+t);var u=(n,e,t)=>(rv(n,e,"read from private field"),t?t.call(n):e.get(n)),M=(n,e,t)=>e.has(n)?vC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),j=(n,e,t,s)=>(rv(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),E=(n,e,t)=>(rv(n,e,"access private method"),t);var wn=(n,e,t,s)=>({set _(i){j(n,e,i,t)},get _(){return u(n,e,s)}});function VI(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function QI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function JI(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var NS={exports:{}},ub={},AS={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=Symbol.for("react.element"),qI=Symbol.for("react.portal"),ZI=Symbol.for("react.fragment"),KI=Symbol.for("react.strict_mode"),XI=Symbol.for("react.profiler"),eD=Symbol.for("react.provider"),tD=Symbol.for("react.context"),nD=Symbol.for("react.forward_ref"),sD=Symbol.for("react.suspense"),iD=Symbol.for("react.memo"),rD=Symbol.for("react.lazy"),xC=Symbol.iterator;function aD(n){return n===null||typeof n!="object"?null:(n=xC&&n[xC]||n["@@iterator"],typeof n=="function"?n:null)}var TS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IS=Object.assign,DS={};function Oh(n,e,t){this.props=n,this.context=e,this.refs=DS,this.updater=t||TS}Oh.prototype.isReactComponent={};Oh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Oh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function PS(){}PS.prototype=Oh.prototype;function a_(n,e,t){this.props=n,this.context=e,this.refs=DS,this.updater=t||TS}var o_=a_.prototype=new PS;o_.constructor=a_;IS(o_,Oh.prototype);o_.isPureReactComponent=!0;var _C=Array.isArray,RS=Object.prototype.hasOwnProperty,l_={current:null},OS={key:!0,ref:!0,__self:!0,__source:!0};function zS(n,e,t){var s,i={},r=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)RS.call(e,s)&&!OS.hasOwnProperty(s)&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var c=Array(o),f=0;f<o;f++)c[f]=arguments[f+2];i.children=c}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Lg,type:n,key:r,ref:a,props:i,_owner:l_.current}}function oD(n,e){return{$$typeof:Lg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function c_(n){return typeof n=="object"&&n!==null&&n.$$typeof===Lg}function lD(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var jC=/\/+/g;function av(n,e){return typeof n=="object"&&n!==null&&n.key!=null?lD(""+n.key):e.toString(36)}function U1(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Lg:case qI:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+av(a,0):s,_C(i)?(t="",n!=null&&(t=n.replace(jC,"$&/")+"/"),U1(i,e,t,"",function(f){return f})):i!=null&&(c_(i)&&(i=oD(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(jC,"$&/")+"/")+n)),e.push(i)),1;if(a=0,s=s===""?".":s+":",_C(n))for(var o=0;o<n.length;o++){r=n[o];var c=s+av(r,o);a+=U1(r,e,t,c,i)}else if(c=aD(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=s+av(r,o++),a+=U1(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zg(n,e,t){if(n==null)return n;var s=[],i=0;return U1(n,s,"","",function(r){return e.call(t,r,i++)}),s}function cD(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ss={current:null},$1={transition:null},uD={ReactCurrentDispatcher:Ss,ReactCurrentBatchConfig:$1,ReactCurrentOwner:l_};function BS(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Zg,forEach:function(n,e,t){Zg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Zg(n,function(){e++}),e},toArray:function(n){return Zg(n,function(e){return e})||[]},only:function(n){if(!c_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Xe.Component=Oh;Xe.Fragment=ZI;Xe.Profiler=XI;Xe.PureComponent=a_;Xe.StrictMode=KI;Xe.Suspense=sD;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uD;Xe.act=BS;Xe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=IS({},n.props),i=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=l_.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)RS.call(e,c)&&!OS.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){o=Array(c);for(var f=0;f<c;f++)o[f]=arguments[f+2];s.children=o}return{$$typeof:Lg,type:n.type,key:i,ref:r,props:s,_owner:a}};Xe.createContext=function(n){return n={$$typeof:tD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:eD,_context:n},n.Consumer=n};Xe.createElement=zS;Xe.createFactory=function(n){var e=zS.bind(null,n);return e.type=n,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(n){return{$$typeof:nD,render:n}};Xe.isValidElement=c_;Xe.lazy=function(n){return{$$typeof:rD,_payload:{_status:-1,_result:n},_init:cD}};Xe.memo=function(n,e){return{$$typeof:iD,type:n,compare:e===void 0?null:e}};Xe.startTransition=function(n){var e=$1.transition;$1.transition={};try{n()}finally{$1.transition=e}};Xe.unstable_act=BS;Xe.useCallback=function(n,e){return Ss.current.useCallback(n,e)};Xe.useContext=function(n){return Ss.current.useContext(n)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(n){return Ss.current.useDeferredValue(n)};Xe.useEffect=function(n,e){return Ss.current.useEffect(n,e)};Xe.useId=function(){return Ss.current.useId()};Xe.useImperativeHandle=function(n,e,t){return Ss.current.useImperativeHandle(n,e,t)};Xe.useInsertionEffect=function(n,e){return Ss.current.useInsertionEffect(n,e)};Xe.useLayoutEffect=function(n,e){return Ss.current.useLayoutEffect(n,e)};Xe.useMemo=function(n,e){return Ss.current.useMemo(n,e)};Xe.useReducer=function(n,e,t){return Ss.current.useReducer(n,e,t)};Xe.useRef=function(n){return Ss.current.useRef(n)};Xe.useState=function(n){return Ss.current.useState(n)};Xe.useSyncExternalStore=function(n,e,t){return Ss.current.useSyncExternalStore(n,e,t)};Xe.useTransition=function(){return Ss.current.useTransition()};Xe.version="18.3.1";AS.exports=Xe;var _=AS.exports;const Fs=QI(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fD=_,dD=Symbol.for("react.element"),hD=Symbol.for("react.fragment"),pD=Object.prototype.hasOwnProperty,mD=fD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gD={key:!0,ref:!0,__self:!0,__source:!0};function FS(n,e,t){var s,i={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)pD.call(e,s)&&!gD.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:dD,type:n,key:r,ref:a,props:i,_owner:mD.current}}ub.Fragment=hD;ub.jsx=FS;ub.jsxs=FS;NS.exports=ub;var l=NS.exports,r2={},US={exports:{}},Si={},$S={exports:{}},HS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,G){var ne=O.length;O.push(G);e:for(;0<ne;){var de=ne-1>>>1,le=O[de];if(0<i(le,G))O[de]=G,O[ne]=le,ne=de;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var G=O[0],ne=O.pop();if(ne!==G){O[0]=ne;e:for(var de=0,le=O.length,H=le>>>1;de<H;){var me=2*(de+1)-1,q=O[me],ce=me+1,we=O[ce];if(0>i(q,ne))ce<le&&0>i(we,q)?(O[de]=we,O[ce]=ne,de=ce):(O[de]=q,O[me]=ne,de=me);else if(ce<le&&0>i(we,ne))O[de]=we,O[ce]=ne,de=ce;else break e}}return G}function i(O,G){var ne=O.sortIndex-G.sortIndex;return ne!==0?ne:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],f=[],d=1,h=null,p=3,m=!1,g=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var G=t(f);G!==null;){if(G.callback===null)s(f);else if(G.startTime<=O)s(f),G.sortIndex=G.expirationTime,e(c,G);else break;G=t(f)}}function C(O){if(w=!1,v(O),!g)if(t(c)!==null)g=!0,$(S);else{var G=t(f);G!==null&&X(C,G.startTime-O)}}function S(O,G){g=!1,w&&(w=!1,y(A),A=-1),m=!0;var ne=p;try{for(v(G),h=t(c);h!==null&&(!(h.expirationTime>G)||O&&!N());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var le=de(h.expirationTime<=G);G=n.unstable_now(),typeof le=="function"?h.callback=le:h===t(c)&&s(c),v(G)}else s(c);h=t(c)}if(h!==null)var H=!0;else{var me=t(f);me!==null&&X(C,me.startTime-G),H=!1}return H}finally{h=null,p=ne,m=!1}}var L=!1,k=null,A=-1,T=5,I=-1;function N(){return!(n.unstable_now()-I<T)}function R(){if(k!==null){var O=n.unstable_now();I=O;var G=!0;try{G=k(!0,O)}finally{G?B():(L=!1,k=null)}}else L=!1}var B;if(typeof x=="function")B=function(){x(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Y=P.port2;P.port1.onmessage=R,B=function(){Y.postMessage(null)}}else B=function(){b(R,0)};function $(O){k=O,L||(L=!0,B())}function X(O,G){A=b(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(S))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var ne=p;p=G;try{return O()}finally{p=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ne=p;p=O;try{return G()}finally{p=ne}},n.unstable_scheduleCallback=function(O,G,ne){var de=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,O){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ne+le,O={id:d++,callback:G,priorityLevel:O,startTime:ne,expirationTime:le,sortIndex:-1},ne>de?(O.sortIndex=ne,e(f,O),t(c)===null&&O===t(f)&&(w?(y(A),A=-1):w=!0,X(C,ne-de))):(O.sortIndex=le,e(c,O),g||m||(g=!0,$(S))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var G=p;return function(){var ne=p;p=G;try{return O.apply(this,arguments)}finally{p=ne}}}})(HS);$S.exports=HS;var wD=$S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD=_,Li=wD;function te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GS=new Set,sp={};function Qu(n,e){Mh(n,e),Mh(n+"Capture",e)}function Mh(n,e){for(sp[n]=e,n=0;n<e.length;n++)GS.add(e[n])}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a2=Object.prototype.hasOwnProperty,bD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CC={},MC={};function vD(n){return a2.call(MC,n)?!0:a2.call(CC,n)?!1:bD.test(n)?MC[n]=!0:(CC[n]=!0,!1)}function xD(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _D(n,e,t,s){if(e===null||typeof e>"u"||xD(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Es(n,e,t,s,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Zn[n]=new Es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Zn[e]=new Es(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Zn[n]=new Es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Zn[n]=new Es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Zn[n]=new Es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Zn[n]=new Es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Zn[n]=new Es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Zn[n]=new Es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Zn[n]=new Es(n,5,!1,n.toLowerCase(),null,!1,!1)});var u_=/[\-:]([a-z])/g;function f_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(u_,f_);Zn[e]=new Es(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(u_,f_);Zn[e]=new Es(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(u_,f_);Zn[e]=new Es(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Zn[n]=new Es(n,1,!1,n.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new Es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Zn[n]=new Es(n,1,!1,n.toLowerCase(),null,!0,!0)});function d_(n,e,t,s){var i=Zn.hasOwnProperty(e)?Zn[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_D(e,t,i,s)&&(t=null),s||i===null?vD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Co=yD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kg=Symbol.for("react.element"),jf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),o2=Symbol.for("react.profiler"),WS=Symbol.for("react.provider"),YS=Symbol.for("react.context"),p_=Symbol.for("react.forward_ref"),l2=Symbol.for("react.suspense"),c2=Symbol.for("react.suspense_list"),m_=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),VS=Symbol.for("react.offscreen"),LC=Symbol.iterator;function Xh(n){return n===null||typeof n!="object"?null:(n=LC&&n[LC]||n["@@iterator"],typeof n=="function"?n:null)}var Jt=Object.assign,ov;function m0(n){if(ov===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ov=e&&e[1]||""}return`
`+ov+n}var lv=!1;function cv(n,e){if(!n||lv)return"";lv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var s=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){s=f}n.call(e.prototype)}else{try{throw Error()}catch(f){s=f}n()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var c=`
`+i[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{lv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?m0(n):""}function jD(n){switch(n.tag){case 5:return m0(n.type);case 16:return m0("Lazy");case 13:return m0("Suspense");case 19:return m0("SuspenseList");case 0:case 2:case 15:return n=cv(n.type,!1),n;case 11:return n=cv(n.type.render,!1),n;case 1:return n=cv(n.type,!0),n;default:return""}}function u2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cf:return"Fragment";case jf:return"Portal";case o2:return"Profiler";case h_:return"StrictMode";case l2:return"Suspense";case c2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case YS:return(n.displayName||"Context")+".Consumer";case WS:return(n._context.displayName||"Context")+".Provider";case p_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case m_:return e=n.displayName||null,e!==null?e:u2(n.type)||"Memo";case No:e=n._payload,n=n._init;try{return u2(n(e))}catch{}}return null}function CD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return u2(e);case 8:return e===h_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function QS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MD(n){var e=QS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xg(n){n._valueTracker||(n._valueTracker=MD(n))}function JS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=QS(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Gw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function f2(n,e){var t=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function SC(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Bl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qS(n,e){e=e.checked,e!=null&&d_(n,"checked",e,!1)}function d2(n,e){qS(n,e);var t=Bl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?h2(n,e.type,t):e.hasOwnProperty("defaultValue")&&h2(n,e.type,Bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function EC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function h2(n,e,t){(e!=="number"||Gw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var g0=Array.isArray;function $f(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Bl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function p2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function kC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(te(92));if(g0(t)){if(1<t.length)throw Error(te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Bl(t)}}function ZS(n,e){var t=Bl(e.value),s=Bl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function NC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function KS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function m2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?KS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var e1,XS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(e1=e1||document.createElement("div"),e1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=e1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ip(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var G0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LD=["Webkit","ms","Moz","O"];Object.keys(G0).forEach(function(n){LD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),G0[e]=G0[n]})});function e3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||G0.hasOwnProperty(n)&&G0[n]?(""+e).trim():e+"px"}function t3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=e3(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var SD=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g2(n,e){if(e){if(SD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function w2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y2=null;function g_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var b2=null,Hf=null,Gf=null;function AC(n){if(n=kg(n)){if(typeof b2!="function")throw Error(te(280));var e=n.stateNode;e&&(e=mb(e),b2(n.stateNode,n.type,e))}}function n3(n){Hf?Gf?Gf.push(n):Gf=[n]:Hf=n}function s3(){if(Hf){var n=Hf,e=Gf;if(Gf=Hf=null,AC(n),e)for(n=0;n<e.length;n++)AC(e[n])}}function i3(n,e){return n(e)}function r3(){}var uv=!1;function a3(n,e,t){if(uv)return n(e,t);uv=!0;try{return i3(n,e,t)}finally{uv=!1,(Hf!==null||Gf!==null)&&(r3(),s3())}}function rp(n,e){var t=n.stateNode;if(t===null)return null;var s=mb(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(te(231,e,typeof t));return t}var v2=!1;if(wo)try{var e0={};Object.defineProperty(e0,"passive",{get:function(){v2=!0}}),window.addEventListener("test",e0,e0),window.removeEventListener("test",e0,e0)}catch{v2=!1}function ED(n,e,t,s,i,r,a,o,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(d){this.onError(d)}}var W0=!1,Ww=null,Yw=!1,x2=null,kD={onError:function(n){W0=!0,Ww=n}};function ND(n,e,t,s,i,r,a,o,c){W0=!1,Ww=null,ED.apply(kD,arguments)}function AD(n,e,t,s,i,r,a,o,c){if(ND.apply(this,arguments),W0){if(W0){var f=Ww;W0=!1,Ww=null}else throw Error(te(198));Yw||(Yw=!0,x2=f)}}function Ju(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function o3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function TC(n){if(Ju(n)!==n)throw Error(te(188))}function TD(n){var e=n.alternate;if(!e){if(e=Ju(n),e===null)throw Error(te(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return TC(i),n;if(r===s)return TC(i),e;r=r.sibling}throw Error(te(188))}if(t.return!==s.return)t=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,s=r;break}if(o===s){a=!0,s=i,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,s=i;break}if(o===s){a=!0,s=r,t=i;break}o=o.sibling}if(!a)throw Error(te(189))}}if(t.alternate!==s)throw Error(te(190))}if(t.tag!==3)throw Error(te(188));return t.stateNode.current===t?n:e}function l3(n){return n=TD(n),n!==null?c3(n):null}function c3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=c3(n);if(e!==null)return e;n=n.sibling}return null}var u3=Li.unstable_scheduleCallback,IC=Li.unstable_cancelCallback,ID=Li.unstable_shouldYield,DD=Li.unstable_requestPaint,on=Li.unstable_now,PD=Li.unstable_getCurrentPriorityLevel,w_=Li.unstable_ImmediatePriority,f3=Li.unstable_UserBlockingPriority,Vw=Li.unstable_NormalPriority,RD=Li.unstable_LowPriority,d3=Li.unstable_IdlePriority,fb=null,ha=null;function OD(n){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(fb,n,void 0,(n.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:FD,zD=Math.log,BD=Math.LN2;function FD(n){return n>>>=0,n===0?32:31-(zD(n)/BD|0)|0}var t1=64,n1=4194304;function w0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Qw(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?s=w0(o):(r&=a,r!==0&&(s=w0(r)))}else a=t&~i,a!==0?s=w0(a):r!==0&&(s=w0(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Nr(e),i=1<<t,s|=n[t],e&=~i;return s}function UD(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $D(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-Nr(r),o=1<<a,c=i[a];c===-1?(!(o&t)||o&s)&&(i[a]=UD(o,e)):c<=e&&(n.expiredLanes|=o),r&=~o}}function _2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function h3(){var n=t1;return t1<<=1,!(t1&4194240)&&(t1=64),n}function fv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Sg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Nr(e),n[e]=t}function HD(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Nr(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function y_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Nr(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var mt=0;function p3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var m3,b_,g3,w3,y3,j2=!1,s1=[],Nl=null,Al=null,Tl=null,ap=new Map,op=new Map,Io=[],GD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DC(n,e){switch(n){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":ap.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":op.delete(e.pointerId)}}function t0(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=kg(e),e!==null&&b_(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function WD(n,e,t,s,i){switch(e){case"focusin":return Nl=t0(Nl,n,e,t,s,i),!0;case"dragenter":return Al=t0(Al,n,e,t,s,i),!0;case"mouseover":return Tl=t0(Tl,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return ap.set(r,t0(ap.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,op.set(r,t0(op.get(r)||null,n,e,t,s,i)),!0}return!1}function b3(n){var e=hc(n.target);if(e!==null){var t=Ju(e);if(t!==null){if(e=t.tag,e===13){if(e=o3(t),e!==null){n.blockedOn=e,y3(n.priority,function(){g3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function H1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=C2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);y2=s,t.target.dispatchEvent(s),y2=null}else return e=kg(t),e!==null&&b_(e),n.blockedOn=t,!1;e.shift()}return!0}function PC(n,e,t){H1(n)&&t.delete(e)}function YD(){j2=!1,Nl!==null&&H1(Nl)&&(Nl=null),Al!==null&&H1(Al)&&(Al=null),Tl!==null&&H1(Tl)&&(Tl=null),ap.forEach(PC),op.forEach(PC)}function n0(n,e){n.blockedOn===e&&(n.blockedOn=null,j2||(j2=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,YD)))}function lp(n){function e(i){return n0(i,n)}if(0<s1.length){n0(s1[0],n);for(var t=1;t<s1.length;t++){var s=s1[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Nl!==null&&n0(Nl,n),Al!==null&&n0(Al,n),Tl!==null&&n0(Tl,n),ap.forEach(e),op.forEach(e),t=0;t<Io.length;t++)s=Io[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Io.length&&(t=Io[0],t.blockedOn===null);)b3(t),t.blockedOn===null&&Io.shift()}var Wf=Co.ReactCurrentBatchConfig,Jw=!0;function VD(n,e,t,s){var i=mt,r=Wf.transition;Wf.transition=null;try{mt=1,v_(n,e,t,s)}finally{mt=i,Wf.transition=r}}function QD(n,e,t,s){var i=mt,r=Wf.transition;Wf.transition=null;try{mt=4,v_(n,e,t,s)}finally{mt=i,Wf.transition=r}}function v_(n,e,t,s){if(Jw){var i=C2(n,e,t,s);if(i===null)xv(n,e,s,qw,t),DC(n,s);else if(WD(i,n,e,t,s))s.stopPropagation();else if(DC(n,s),e&4&&-1<GD.indexOf(n)){for(;i!==null;){var r=kg(i);if(r!==null&&m3(r),r=C2(n,e,t,s),r===null&&xv(n,e,s,qw,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else xv(n,e,s,null,t)}}var qw=null;function C2(n,e,t,s){if(qw=null,n=g_(s),n=hc(n),n!==null)if(e=Ju(n),e===null)n=null;else if(t=e.tag,t===13){if(n=o3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qw=n,null}function v3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PD()){case w_:return 1;case f3:return 4;case Vw:case RD:return 16;case d3:return 536870912;default:return 16}default:return 16}}var Sl=null,x_=null,G1=null;function x3(){if(G1)return G1;var n,e=x_,t=e.length,s,i="value"in Sl?Sl.value:Sl.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===i[r-s];s++);return G1=i.slice(n,1<s?1-s:void 0)}function W1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function i1(){return!0}function RC(){return!1}function Ei(n){function e(t,s,i,r,a){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?i1:RC,this.isPropagationStopped=RC,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=i1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=i1)},persist:function(){},isPersistent:i1}),e}var zh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=Ei(zh),Eg=Jt({},zh,{view:0,detail:0}),JD=Ei(Eg),dv,hv,s0,db=Jt({},Eg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==s0&&(s0&&n.type==="mousemove"?(dv=n.screenX-s0.screenX,hv=n.screenY-s0.screenY):hv=dv=0,s0=n),dv)},movementY:function(n){return"movementY"in n?n.movementY:hv}}),OC=Ei(db),qD=Jt({},db,{dataTransfer:0}),ZD=Ei(qD),KD=Jt({},Eg,{relatedTarget:0}),pv=Ei(KD),XD=Jt({},zh,{animationName:0,elapsedTime:0,pseudoElement:0}),eP=Ei(XD),tP=Jt({},zh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nP=Ei(tP),sP=Jt({},zh,{data:0}),zC=Ei(sP),iP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=aP[n])?!!e[n]:!1}function j_(){return oP}var lP=Jt({},Eg,{key:function(n){if(n.key){var e=iP[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=W1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j_,charCode:function(n){return n.type==="keypress"?W1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?W1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),cP=Ei(lP),uP=Jt({},db,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BC=Ei(uP),fP=Jt({},Eg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j_}),dP=Ei(fP),hP=Jt({},zh,{propertyName:0,elapsedTime:0,pseudoElement:0}),pP=Ei(hP),mP=Jt({},db,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gP=Ei(mP),wP=[9,13,27,32],C_=wo&&"CompositionEvent"in window,Y0=null;wo&&"documentMode"in document&&(Y0=document.documentMode);var yP=wo&&"TextEvent"in window&&!Y0,_3=wo&&(!C_||Y0&&8<Y0&&11>=Y0),FC=" ",UC=!1;function j3(n,e){switch(n){case"keyup":return wP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mf=!1;function bP(n,e){switch(n){case"compositionend":return C3(e);case"keypress":return e.which!==32?null:(UC=!0,FC);case"textInput":return n=e.data,n===FC&&UC?null:n;default:return null}}function vP(n,e){if(Mf)return n==="compositionend"||!C_&&j3(n,e)?(n=x3(),G1=x_=Sl=null,Mf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _3&&e.locale!=="ko"?null:e.data;default:return null}}var xP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $C(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!xP[n.type]:e==="textarea"}function M3(n,e,t,s){n3(s),e=Zw(e,"onChange"),0<e.length&&(t=new __("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var V0=null,cp=null;function _P(n){R3(n,0)}function hb(n){var e=Ef(n);if(JS(e))return n}function jP(n,e){if(n==="change")return e}var L3=!1;if(wo){var mv;if(wo){var gv="oninput"in document;if(!gv){var HC=document.createElement("div");HC.setAttribute("oninput","return;"),gv=typeof HC.oninput=="function"}mv=gv}else mv=!1;L3=mv&&(!document.documentMode||9<document.documentMode)}function GC(){V0&&(V0.detachEvent("onpropertychange",S3),cp=V0=null)}function S3(n){if(n.propertyName==="value"&&hb(cp)){var e=[];M3(e,cp,n,g_(n)),a3(_P,e)}}function CP(n,e,t){n==="focusin"?(GC(),V0=e,cp=t,V0.attachEvent("onpropertychange",S3)):n==="focusout"&&GC()}function MP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hb(cp)}function LP(n,e){if(n==="click")return hb(e)}function SP(n,e){if(n==="input"||n==="change")return hb(e)}function EP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ir=typeof Object.is=="function"?Object.is:EP;function up(n,e){if(Ir(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!a2.call(e,i)||!Ir(n[i],e[i]))return!1}return!0}function WC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function YC(n,e){var t=WC(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=WC(t)}}function E3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?E3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function k3(){for(var n=window,e=Gw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Gw(n.document)}return e}function M_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kP(n){var e=k3(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&E3(t.ownerDocument.documentElement,t)){if(s!==null&&M_(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=YC(t,r);var a=YC(t,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var NP=wo&&"documentMode"in document&&11>=document.documentMode,Lf=null,M2=null,Q0=null,L2=!1;function VC(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;L2||Lf==null||Lf!==Gw(s)||(s=Lf,"selectionStart"in s&&M_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Q0&&up(Q0,s)||(Q0=s,s=Zw(M2,"onSelect"),0<s.length&&(e=new __("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Lf)))}function r1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Sf={animationend:r1("Animation","AnimationEnd"),animationiteration:r1("Animation","AnimationIteration"),animationstart:r1("Animation","AnimationStart"),transitionend:r1("Transition","TransitionEnd")},wv={},N3={};wo&&(N3=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function pb(n){if(wv[n])return wv[n];if(!Sf[n])return n;var e=Sf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in N3)return wv[n]=e[t];return n}var A3=pb("animationend"),T3=pb("animationiteration"),I3=pb("animationstart"),D3=pb("transitionend"),P3=new Map,QC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wl(n,e){P3.set(n,e),Qu(e,[n])}for(var yv=0;yv<QC.length;yv++){var bv=QC[yv],AP=bv.toLowerCase(),TP=bv[0].toUpperCase()+bv.slice(1);Wl(AP,"on"+TP)}Wl(A3,"onAnimationEnd");Wl(T3,"onAnimationIteration");Wl(I3,"onAnimationStart");Wl("dblclick","onDoubleClick");Wl("focusin","onFocus");Wl("focusout","onBlur");Wl(D3,"onTransitionEnd");Mh("onMouseEnter",["mouseout","mouseover"]);Mh("onMouseLeave",["mouseout","mouseover"]);Mh("onPointerEnter",["pointerout","pointerover"]);Mh("onPointerLeave",["pointerout","pointerover"]);Qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var y0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IP=new Set("cancel close invalid load scroll toggle".split(" ").concat(y0));function JC(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,AD(s,e,void 0,n),n.currentTarget=null}function R3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,f=o.currentTarget;if(o=o.listener,c!==r&&i.isPropagationStopped())break e;JC(i,o,f),r=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,f=o.currentTarget,o=o.listener,c!==r&&i.isPropagationStopped())break e;JC(i,o,f),r=c}}}if(Yw)throw n=x2,Yw=!1,x2=null,n}function It(n,e){var t=e[A2];t===void 0&&(t=e[A2]=new Set);var s=n+"__bubble";t.has(s)||(O3(e,n,2,!1),t.add(s))}function vv(n,e,t){var s=0;e&&(s|=4),O3(t,n,s,e)}var a1="_reactListening"+Math.random().toString(36).slice(2);function fp(n){if(!n[a1]){n[a1]=!0,GS.forEach(function(t){t!=="selectionchange"&&(IP.has(t)||vv(t,!1,n),vv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[a1]||(e[a1]=!0,vv("selectionchange",!1,e))}}function O3(n,e,t,s){switch(v3(e)){case 1:var i=VD;break;case 4:i=QD;break;default:i=v_}t=i.bind(null,e,t,n),i=void 0,!v2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function xv(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=hc(o),a===null)return;if(c=a.tag,c===5||c===6){s=r=a;continue e}o=o.parentNode}}s=s.return}a3(function(){var f=r,d=g_(t),h=[];e:{var p=P3.get(n);if(p!==void 0){var m=__,g=n;switch(n){case"keypress":if(W1(t)===0)break e;case"keydown":case"keyup":m=cP;break;case"focusin":g="focus",m=pv;break;case"focusout":g="blur",m=pv;break;case"beforeblur":case"afterblur":m=pv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=OC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ZD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dP;break;case A3:case T3:case I3:m=eP;break;case D3:m=pP;break;case"scroll":m=JD;break;case"wheel":m=gP;break;case"copy":case"cut":case"paste":m=nP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=BC}var w=(e&4)!==0,b=!w&&n==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var x=f,v;x!==null;){v=x;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,y!==null&&(C=rp(x,y),C!=null&&w.push(dp(x,C,v)))),b)break;x=x.return}0<w.length&&(p=new m(p,g,null,t,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==y2&&(g=t.relatedTarget||t.fromElement)&&(hc(g)||g[yo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=f,g=g?hc(g):null,g!==null&&(b=Ju(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=f),m!==g)){if(w=OC,C="onMouseLeave",y="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(w=BC,C="onPointerLeave",y="onPointerEnter",x="pointer"),b=m==null?p:Ef(m),v=g==null?p:Ef(g),p=new w(C,x+"leave",m,t,d),p.target=b,p.relatedTarget=v,C=null,hc(d)===f&&(w=new w(y,x+"enter",g,t,d),w.target=v,w.relatedTarget=b,C=w),b=C,m&&g)t:{for(w=m,y=g,x=0,v=w;v;v=rf(v))x++;for(v=0,C=y;C;C=rf(C))v++;for(;0<x-v;)w=rf(w),x--;for(;0<v-x;)y=rf(y),v--;for(;x--;){if(w===y||y!==null&&w===y.alternate)break t;w=rf(w),y=rf(y)}w=null}else w=null;m!==null&&qC(h,p,m,w,!1),g!==null&&b!==null&&qC(h,b,g,w,!0)}}e:{if(p=f?Ef(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=jP;else if($C(p))if(L3)S=SP;else{S=MP;var L=CP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=LP);if(S&&(S=S(n,f))){M3(h,S,t,d);break e}L&&L(n,p,f),n==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&h2(p,"number",p.value)}switch(L=f?Ef(f):window,n){case"focusin":($C(L)||L.contentEditable==="true")&&(Lf=L,M2=f,Q0=null);break;case"focusout":Q0=M2=Lf=null;break;case"mousedown":L2=!0;break;case"contextmenu":case"mouseup":case"dragend":L2=!1,VC(h,t,d);break;case"selectionchange":if(NP)break;case"keydown":case"keyup":VC(h,t,d)}var k;if(C_)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Mf?j3(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(_3&&t.locale!=="ko"&&(Mf||A!=="onCompositionStart"?A==="onCompositionEnd"&&Mf&&(k=x3()):(Sl=d,x_="value"in Sl?Sl.value:Sl.textContent,Mf=!0)),L=Zw(f,A),0<L.length&&(A=new zC(A,n,null,t,d),h.push({event:A,listeners:L}),k?A.data=k:(k=C3(t),k!==null&&(A.data=k)))),(k=yP?bP(n,t):vP(n,t))&&(f=Zw(f,"onBeforeInput"),0<f.length&&(d=new zC("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:f}),d.data=k))}R3(h,e)})}function dp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Zw(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=rp(n,t),r!=null&&s.unshift(dp(n,r,i)),r=rp(n,e),r!=null&&s.push(dp(n,r,i))),n=n.return}return s}function rf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qC(n,e,t,s,i){for(var r=e._reactName,a=[];t!==null&&t!==s;){var o=t,c=o.alternate,f=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&f!==null&&(o=f,i?(c=rp(t,r),c!=null&&a.unshift(dp(t,c,o))):i||(c=rp(t,r),c!=null&&a.push(dp(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var DP=/\r\n?/g,PP=/\u0000|\uFFFD/g;function ZC(n){return(typeof n=="string"?n:""+n).replace(DP,`
`).replace(PP,"")}function o1(n,e,t){if(e=ZC(e),ZC(n)!==e&&t)throw Error(te(425))}function Kw(){}var S2=null,E2=null;function k2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var N2=typeof setTimeout=="function"?setTimeout:void 0,RP=typeof clearTimeout=="function"?clearTimeout:void 0,KC=typeof Promise=="function"?Promise:void 0,OP=typeof queueMicrotask=="function"?queueMicrotask:typeof KC<"u"?function(n){return KC.resolve(null).then(n).catch(zP)}:N2;function zP(n){setTimeout(function(){throw n})}function _v(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),lp(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);lp(e)}function Il(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function XC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Bh=Math.random().toString(36).slice(2),fa="__reactFiber$"+Bh,hp="__reactProps$"+Bh,yo="__reactContainer$"+Bh,A2="__reactEvents$"+Bh,BP="__reactListeners$"+Bh,FP="__reactHandles$"+Bh;function hc(n){var e=n[fa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[yo]||t[fa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=XC(n);n!==null;){if(t=n[fa])return t;n=XC(n)}return e}n=t,t=n.parentNode}return null}function kg(n){return n=n[fa]||n[yo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ef(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(te(33))}function mb(n){return n[hp]||null}var T2=[],kf=-1;function Yl(n){return{current:n}}function Pt(n){0>kf||(n.current=T2[kf],T2[kf]=null,kf--)}function At(n,e){kf++,T2[kf]=n.current,n.current=e}var Fl={},ds=Yl(Fl),Us=Yl(!1),Ou=Fl;function Lh(n,e){var t=n.type.contextTypes;if(!t)return Fl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function $s(n){return n=n.childContextTypes,n!=null}function Xw(){Pt(Us),Pt(ds)}function eM(n,e,t){if(ds.current!==Fl)throw Error(te(168));At(ds,e),At(Us,t)}function z3(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(te(108,CD(n)||"Unknown",i));return Jt({},t,s)}function ey(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fl,Ou=ds.current,At(ds,n),At(Us,Us.current),!0}function tM(n,e,t){var s=n.stateNode;if(!s)throw Error(te(169));t?(n=z3(n,e,Ou),s.__reactInternalMemoizedMergedChildContext=n,Pt(Us),Pt(ds),At(ds,n)):Pt(Us),At(Us,t)}var La=null,gb=!1,jv=!1;function B3(n){La===null?La=[n]:La.push(n)}function UP(n){gb=!0,B3(n)}function Vl(){if(!jv&&La!==null){jv=!0;var n=0,e=mt;try{var t=La;for(mt=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}La=null,gb=!1}catch(i){throw La!==null&&(La=La.slice(n+1)),u3(w_,Vl),i}finally{mt=e,jv=!1}}return null}var Nf=[],Af=0,ty=null,ny=0,Ji=[],qi=0,zu=null,lo=1,co="";function tc(n,e){Nf[Af++]=ny,Nf[Af++]=ty,ty=n,ny=e}function F3(n,e,t){Ji[qi++]=lo,Ji[qi++]=co,Ji[qi++]=zu,zu=n;var s=lo;n=co;var i=32-Nr(s)-1;s&=~(1<<i),t+=1;var r=32-Nr(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,lo=1<<32-Nr(e)+i|t<<i|s,co=r+n}else lo=1<<r|t<<i|s,co=n}function L_(n){n.return!==null&&(tc(n,1),F3(n,1,0))}function S_(n){for(;n===ty;)ty=Nf[--Af],Nf[Af]=null,ny=Nf[--Af],Nf[Af]=null;for(;n===zu;)zu=Ji[--qi],Ji[qi]=null,co=Ji[--qi],Ji[qi]=null,lo=Ji[--qi],Ji[qi]=null}var Ci=null,_i=null,Ft=!1,Lr=null;function U3(n,e){var t=Ki(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function nM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ci=n,_i=Il(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ci=n,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=zu!==null?{id:lo,overflow:co}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ki(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ci=n,_i=null,!0):!1;default:return!1}}function I2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function D2(n){if(Ft){var e=_i;if(e){var t=e;if(!nM(n,e)){if(I2(n))throw Error(te(418));e=Il(t.nextSibling);var s=Ci;e&&nM(n,e)?U3(s,t):(n.flags=n.flags&-4097|2,Ft=!1,Ci=n)}}else{if(I2(n))throw Error(te(418));n.flags=n.flags&-4097|2,Ft=!1,Ci=n}}}function sM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ci=n}function l1(n){if(n!==Ci)return!1;if(!Ft)return sM(n),Ft=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!k2(n.type,n.memoizedProps)),e&&(e=_i)){if(I2(n))throw $3(),Error(te(418));for(;e;)U3(n,e),e=Il(e.nextSibling)}if(sM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){_i=Il(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}_i=null}}else _i=Ci?Il(n.stateNode.nextSibling):null;return!0}function $3(){for(var n=_i;n;)n=Il(n.nextSibling)}function Sh(){_i=Ci=null,Ft=!1}function E_(n){Lr===null?Lr=[n]:Lr.push(n)}var $P=Co.ReactCurrentBatchConfig;function i0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(te(309));var s=t.stateNode}if(!s)throw Error(te(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(te(284));if(!t._owner)throw Error(te(290,n))}return n}function c1(n,e){throw n=Object.prototype.toString.call(e),Error(te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iM(n){var e=n._init;return e(n._payload)}function H3(n){function e(y,x){if(n){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function t(y,x){if(!n)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function s(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Ol(y,x),y.index=0,y.sibling=null,y}function r(y,x,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return n&&y.alternate===null&&(y.flags|=2),y}function o(y,x,v,C){return x===null||x.tag!==6?(x=Nv(v,y.mode,C),x.return=y,x):(x=i(x,v),x.return=y,x)}function c(y,x,v,C){var S=v.type;return S===Cf?d(y,x,v.props.children,C,v.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===No&&iM(S)===x.type)?(C=i(x,v.props),C.ref=i0(y,x,v),C.return=y,C):(C=K1(v.type,v.key,v.props,null,y.mode,C),C.ref=i0(y,x,v),C.return=y,C)}function f(y,x,v,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Av(v,y.mode,C),x.return=y,x):(x=i(x,v.children||[]),x.return=y,x)}function d(y,x,v,C,S){return x===null||x.tag!==7?(x=Pu(v,y.mode,C,S),x.return=y,x):(x=i(x,v),x.return=y,x)}function h(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Nv(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kg:return v=K1(x.type,x.key,x.props,null,y.mode,v),v.ref=i0(y,null,x),v.return=y,v;case jf:return x=Av(x,y.mode,v),x.return=y,x;case No:var C=x._init;return h(y,C(x._payload),v)}if(g0(x)||Xh(x))return x=Pu(x,y.mode,v,null),x.return=y,x;c1(y,x)}return null}function p(y,x,v,C){var S=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:o(y,x,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Kg:return v.key===S?c(y,x,v,C):null;case jf:return v.key===S?f(y,x,v,C):null;case No:return S=v._init,p(y,x,S(v._payload),C)}if(g0(v)||Xh(v))return S!==null?null:d(y,x,v,C,null);c1(y,v)}return null}function m(y,x,v,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(v)||null,o(x,y,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Kg:return y=y.get(C.key===null?v:C.key)||null,c(x,y,C,S);case jf:return y=y.get(C.key===null?v:C.key)||null,f(x,y,C,S);case No:var L=C._init;return m(y,x,v,L(C._payload),S)}if(g0(C)||Xh(C))return y=y.get(v)||null,d(x,y,C,S,null);c1(x,C)}return null}function g(y,x,v,C){for(var S=null,L=null,k=x,A=x=0,T=null;k!==null&&A<v.length;A++){k.index>A?(T=k,k=null):T=k.sibling;var I=p(y,k,v[A],C);if(I===null){k===null&&(k=T);break}n&&k&&I.alternate===null&&e(y,k),x=r(I,x,A),L===null?S=I:L.sibling=I,L=I,k=T}if(A===v.length)return t(y,k),Ft&&tc(y,A),S;if(k===null){for(;A<v.length;A++)k=h(y,v[A],C),k!==null&&(x=r(k,x,A),L===null?S=k:L.sibling=k,L=k);return Ft&&tc(y,A),S}for(k=s(y,k);A<v.length;A++)T=m(k,y,A,v[A],C),T!==null&&(n&&T.alternate!==null&&k.delete(T.key===null?A:T.key),x=r(T,x,A),L===null?S=T:L.sibling=T,L=T);return n&&k.forEach(function(N){return e(y,N)}),Ft&&tc(y,A),S}function w(y,x,v,C){var S=Xh(v);if(typeof S!="function")throw Error(te(150));if(v=S.call(v),v==null)throw Error(te(151));for(var L=S=null,k=x,A=x=0,T=null,I=v.next();k!==null&&!I.done;A++,I=v.next()){k.index>A?(T=k,k=null):T=k.sibling;var N=p(y,k,I.value,C);if(N===null){k===null&&(k=T);break}n&&k&&N.alternate===null&&e(y,k),x=r(N,x,A),L===null?S=N:L.sibling=N,L=N,k=T}if(I.done)return t(y,k),Ft&&tc(y,A),S;if(k===null){for(;!I.done;A++,I=v.next())I=h(y,I.value,C),I!==null&&(x=r(I,x,A),L===null?S=I:L.sibling=I,L=I);return Ft&&tc(y,A),S}for(k=s(y,k);!I.done;A++,I=v.next())I=m(k,y,A,I.value,C),I!==null&&(n&&I.alternate!==null&&k.delete(I.key===null?A:I.key),x=r(I,x,A),L===null?S=I:L.sibling=I,L=I);return n&&k.forEach(function(R){return e(y,R)}),Ft&&tc(y,A),S}function b(y,x,v,C){if(typeof v=="object"&&v!==null&&v.type===Cf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Kg:e:{for(var S=v.key,L=x;L!==null;){if(L.key===S){if(S=v.type,S===Cf){if(L.tag===7){t(y,L.sibling),x=i(L,v.props.children),x.return=y,y=x;break e}}else if(L.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===No&&iM(S)===L.type){t(y,L.sibling),x=i(L,v.props),x.ref=i0(y,L,v),x.return=y,y=x;break e}t(y,L);break}else e(y,L);L=L.sibling}v.type===Cf?(x=Pu(v.props.children,y.mode,C,v.key),x.return=y,y=x):(C=K1(v.type,v.key,v.props,null,y.mode,C),C.ref=i0(y,x,v),C.return=y,y=C)}return a(y);case jf:e:{for(L=v.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){t(y,x.sibling),x=i(x,v.children||[]),x.return=y,y=x;break e}else{t(y,x);break}else e(y,x);x=x.sibling}x=Av(v,y.mode,C),x.return=y,y=x}return a(y);case No:return L=v._init,b(y,x,L(v._payload),C)}if(g0(v))return g(y,x,v,C);if(Xh(v))return w(y,x,v,C);c1(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(t(y,x.sibling),x=i(x,v),x.return=y,y=x):(t(y,x),x=Nv(v,y.mode,C),x.return=y,y=x),a(y)):t(y,x)}return b}var Eh=H3(!0),G3=H3(!1),sy=Yl(null),iy=null,Tf=null,k_=null;function N_(){k_=Tf=iy=null}function A_(n){var e=sy.current;Pt(sy),n._currentValue=e}function P2(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Yf(n,e){iy=n,k_=Tf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Bs=!0),n.firstContext=null)}function sr(n){var e=n._currentValue;if(k_!==n)if(n={context:n,memoizedValue:e,next:null},Tf===null){if(iy===null)throw Error(te(308));Tf=n,iy.dependencies={lanes:0,firstContext:n}}else Tf=Tf.next=n;return e}var pc=null;function T_(n){pc===null?pc=[n]:pc.push(n)}function W3(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,T_(e)):(t.next=i.next,i.next=t),e.interleaved=t,bo(n,s)}function bo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ao=!1;function I_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ho(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Dl(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,ot&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,bo(n,t)}return i=s.interleaved,i===null?(e.next=e,T_(s)):(e.next=i.next,i.next=e),s.interleaved=e,bo(n,t)}function Y1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,y_(n,t)}}function rM(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ry(n,e,t,s){var i=n.updateQueue;Ao=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,f=c.next;c.next=null,a===null?r=f:a.next=f,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=f:o.next=f,d.lastBaseUpdate=c))}if(r!==null){var h=i.baseState;a=0,d=f=c=null,o=r;do{var p=o.lane,m=o.eventTime;if((s&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=n,w=o;switch(p=e,m=t,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=Jt({},h,p);break e;case 2:Ao=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(f=d=m,c=h):d=d.next=m,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Fu|=a,n.lanes=a,n.memoizedState=h}}function aM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(te(191,i));i.call(s)}}}var Ng={},pa=Yl(Ng),pp=Yl(Ng),mp=Yl(Ng);function mc(n){if(n===Ng)throw Error(te(174));return n}function D_(n,e){switch(At(mp,e),At(pp,n),At(pa,Ng),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:m2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=m2(e,n)}Pt(pa),At(pa,e)}function kh(){Pt(pa),Pt(pp),Pt(mp)}function V3(n){mc(mp.current);var e=mc(pa.current),t=m2(e,n.type);e!==t&&(At(pp,n),At(pa,t))}function P_(n){pp.current===n&&(Pt(pa),Pt(pp))}var Yt=Yl(0);function ay(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cv=[];function R_(){for(var n=0;n<Cv.length;n++)Cv[n]._workInProgressVersionPrimary=null;Cv.length=0}var V1=Co.ReactCurrentDispatcher,Mv=Co.ReactCurrentBatchConfig,Bu=0,Vt=null,jn=null,Dn=null,oy=!1,J0=!1,gp=0,HP=0;function es(){throw Error(te(321))}function O_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ir(n[t],e[t]))return!1;return!0}function z_(n,e,t,s,i,r){if(Bu=r,Vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,V1.current=n===null||n.memoizedState===null?VP:QP,n=t(s,i),J0){r=0;do{if(J0=!1,gp=0,25<=r)throw Error(te(301));r+=1,Dn=jn=null,e.updateQueue=null,V1.current=JP,n=t(s,i)}while(J0)}if(V1.current=ly,e=jn!==null&&jn.next!==null,Bu=0,Dn=jn=Vt=null,oy=!1,e)throw Error(te(300));return n}function B_(){var n=gp!==0;return gp=0,n}function $r(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Vt.memoizedState=Dn=n:Dn=Dn.next=n,Dn}function ir(){if(jn===null){var n=Vt.alternate;n=n!==null?n.memoizedState:null}else n=jn.next;var e=Dn===null?Vt.memoizedState:Dn.next;if(e!==null)Dn=e,jn=n;else{if(n===null)throw Error(te(310));jn=n,n={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Dn===null?Vt.memoizedState=Dn=n:Dn=Dn.next=n}return Dn}function wp(n,e){return typeof e=="function"?e(n):e}function Lv(n){var e=ir(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var s=jn,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,c=null,f=r;do{var d=f.lane;if((Bu&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:n(s,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(o=c=h,a=s):c=c.next=h,Vt.lanes|=d,Fu|=d}f=f.next}while(f!==null&&f!==r);c===null?a=s:c.next=o,Ir(s,e.memoizedState)||(Bs=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,Vt.lanes|=r,Fu|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Sv(n){var e=ir(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);Ir(r,e.memoizedState)||(Bs=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function Q3(){}function J3(n,e){var t=Vt,s=ir(),i=e(),r=!Ir(s.memoizedState,i);if(r&&(s.memoizedState=i,Bs=!0),s=s.queue,F_(K3.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||Dn!==null&&Dn.memoizedState.tag&1){if(t.flags|=2048,yp(9,Z3.bind(null,t,s,i,e),void 0,null),Rn===null)throw Error(te(349));Bu&30||q3(t,e,i)}return i}function q3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Z3(n,e,t,s){e.value=t,e.getSnapshot=s,X3(e)&&eE(n)}function K3(n,e,t){return t(function(){X3(e)&&eE(n)})}function X3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ir(n,t)}catch{return!0}}function eE(n){var e=bo(n,1);e!==null&&Ar(e,n,1,-1)}function oM(n){var e=$r();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:n},e.queue=n,n=n.dispatch=YP.bind(null,Vt,n),[e.memoizedState,n]}function yp(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function tE(){return ir().memoizedState}function Q1(n,e,t,s){var i=$r();Vt.flags|=n,i.memoizedState=yp(1|e,t,void 0,s===void 0?null:s)}function wb(n,e,t,s){var i=ir();s=s===void 0?null:s;var r=void 0;if(jn!==null){var a=jn.memoizedState;if(r=a.destroy,s!==null&&O_(s,a.deps)){i.memoizedState=yp(e,t,r,s);return}}Vt.flags|=n,i.memoizedState=yp(1|e,t,r,s)}function lM(n,e){return Q1(8390656,8,n,e)}function F_(n,e){return wb(2048,8,n,e)}function nE(n,e){return wb(4,2,n,e)}function sE(n,e){return wb(4,4,n,e)}function iE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function rE(n,e,t){return t=t!=null?t.concat([n]):null,wb(4,4,iE.bind(null,e,n),t)}function U_(){}function aE(n,e){var t=ir();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&O_(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function oE(n,e){var t=ir();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&O_(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function lE(n,e,t){return Bu&21?(Ir(t,e)||(t=h3(),Vt.lanes|=t,Fu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Bs=!0),n.memoizedState=t)}function GP(n,e){var t=mt;mt=t!==0&&4>t?t:4,n(!0);var s=Mv.transition;Mv.transition={};try{n(!1),e()}finally{mt=t,Mv.transition=s}}function cE(){return ir().memoizedState}function WP(n,e,t){var s=Rl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},uE(n))fE(e,t);else if(t=W3(n,e,t,s),t!==null){var i=Cs();Ar(t,n,s,i),dE(t,e,s)}}function YP(n,e,t){var s=Rl(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(uE(n))fE(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(i.hasEagerState=!0,i.eagerState=o,Ir(o,a)){var c=e.interleaved;c===null?(i.next=i,T_(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=W3(n,e,i,s),t!==null&&(i=Cs(),Ar(t,n,s,i),dE(t,e,s))}}function uE(n){var e=n.alternate;return n===Vt||e!==null&&e===Vt}function fE(n,e){J0=oy=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function dE(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,y_(n,t)}}var ly={readContext:sr,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},VP={readContext:sr,useCallback:function(n,e){return $r().memoizedState=[n,e===void 0?null:e],n},useContext:sr,useEffect:lM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Q1(4194308,4,iE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Q1(4194308,4,n,e)},useInsertionEffect:function(n,e){return Q1(4,2,n,e)},useMemo:function(n,e){var t=$r();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=$r();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=WP.bind(null,Vt,n),[s.memoizedState,n]},useRef:function(n){var e=$r();return n={current:n},e.memoizedState=n},useState:oM,useDebugValue:U_,useDeferredValue:function(n){return $r().memoizedState=n},useTransition:function(){var n=oM(!1),e=n[0];return n=GP.bind(null,n[1]),$r().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Vt,i=$r();if(Ft){if(t===void 0)throw Error(te(407));t=t()}else{if(t=e(),Rn===null)throw Error(te(349));Bu&30||q3(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,lM(K3.bind(null,s,r,n),[n]),s.flags|=2048,yp(9,Z3.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=$r(),e=Rn.identifierPrefix;if(Ft){var t=co,s=lo;t=(s&~(1<<32-Nr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=gp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=HP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},QP={readContext:sr,useCallback:aE,useContext:sr,useEffect:F_,useImperativeHandle:rE,useInsertionEffect:nE,useLayoutEffect:sE,useMemo:oE,useReducer:Lv,useRef:tE,useState:function(){return Lv(wp)},useDebugValue:U_,useDeferredValue:function(n){var e=ir();return lE(e,jn.memoizedState,n)},useTransition:function(){var n=Lv(wp)[0],e=ir().memoizedState;return[n,e]},useMutableSource:Q3,useSyncExternalStore:J3,useId:cE,unstable_isNewReconciler:!1},JP={readContext:sr,useCallback:aE,useContext:sr,useEffect:F_,useImperativeHandle:rE,useInsertionEffect:nE,useLayoutEffect:sE,useMemo:oE,useReducer:Sv,useRef:tE,useState:function(){return Sv(wp)},useDebugValue:U_,useDeferredValue:function(n){var e=ir();return jn===null?e.memoizedState=n:lE(e,jn.memoizedState,n)},useTransition:function(){var n=Sv(wp)[0],e=ir().memoizedState;return[n,e]},useMutableSource:Q3,useSyncExternalStore:J3,useId:cE,unstable_isNewReconciler:!1};function fr(n,e){if(n&&n.defaultProps){e=Jt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function R2(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Jt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var yb={isMounted:function(n){return(n=n._reactInternals)?Ju(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Cs(),i=Rl(n),r=ho(s,i);r.payload=e,t!=null&&(r.callback=t),e=Dl(n,r,i),e!==null&&(Ar(e,n,i,s),Y1(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Cs(),i=Rl(n),r=ho(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Dl(n,r,i),e!==null&&(Ar(e,n,i,s),Y1(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Cs(),s=Rl(n),i=ho(t,s);i.tag=2,e!=null&&(i.callback=e),e=Dl(n,i,s),e!==null&&(Ar(e,n,s,t),Y1(e,n,s))}};function cM(n,e,t,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!up(t,s)||!up(i,r):!0}function hE(n,e,t){var s=!1,i=Fl,r=e.contextType;return typeof r=="object"&&r!==null?r=sr(r):(i=$s(e)?Ou:ds.current,s=e.contextTypes,r=(s=s!=null)?Lh(n,i):Fl),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yb,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function uM(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&yb.enqueueReplaceState(e,e.state,null)}function O2(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},I_(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=sr(r):(r=$s(e)?Ou:ds.current,i.context=Lh(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(R2(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yb.enqueueReplaceState(i,i.state,null),ry(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Nh(n,e){try{var t="",s=e;do t+=jD(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function Ev(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function z2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var qP=typeof WeakMap=="function"?WeakMap:Map;function pE(n,e,t){t=ho(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){uy||(uy=!0,Q2=s),z2(n,e)},t}function mE(n,e,t){t=ho(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){z2(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){z2(n,e),typeof s!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function fM(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new qP;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=uR.bind(null,n,e,t),e.then(n,n))}function dM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hM(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ho(-1,1),e.tag=2,Dl(t,e,1))),t.lanes|=1),n)}var ZP=Co.ReactCurrentOwner,Bs=!1;function xs(n,e,t,s){e.child=n===null?G3(e,null,t,s):Eh(e,n.child,t,s)}function pM(n,e,t,s,i){t=t.render;var r=e.ref;return Yf(e,i),s=z_(n,e,t,s,r,i),t=B_(),n!==null&&!Bs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,vo(n,e,i)):(Ft&&t&&L_(e),e.flags|=1,xs(n,e,s,i),e.child)}function mM(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!J_(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,gE(n,e,r,s,i)):(n=K1(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:up,t(a,s)&&n.ref===e.ref)return vo(n,e,i)}return e.flags|=1,n=Ol(r,s),n.ref=e.ref,n.return=e,e.child=n}function gE(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(up(r,s)&&n.ref===e.ref)if(Bs=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(Bs=!0);else return e.lanes=n.lanes,vo(n,e,i)}return B2(n,e,t,s,i)}function wE(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Df,wi),wi|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,At(Df,wi),wi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,At(Df,wi),wi|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,At(Df,wi),wi|=s;return xs(n,e,i,t),e.child}function yE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function B2(n,e,t,s,i){var r=$s(t)?Ou:ds.current;return r=Lh(e,r),Yf(e,i),t=z_(n,e,t,s,r,i),s=B_(),n!==null&&!Bs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,vo(n,e,i)):(Ft&&s&&L_(e),e.flags|=1,xs(n,e,t,i),e.child)}function gM(n,e,t,s,i){if($s(t)){var r=!0;ey(e)}else r=!1;if(Yf(e,i),e.stateNode===null)J1(n,e),hE(e,t,s),O2(e,t,s,i),s=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,f=t.contextType;typeof f=="object"&&f!==null?f=sr(f):(f=$s(t)?Ou:ds.current,f=Lh(e,f));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||c!==f)&&uM(e,a,s,f),Ao=!1;var p=e.memoizedState;a.state=p,ry(e,s,a,i),c=e.memoizedState,o!==s||p!==c||Us.current||Ao?(typeof d=="function"&&(R2(e,t,d,s),c=e.memoizedState),(o=Ao||cM(e,t,o,s,p,c,f))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=f,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,Y3(n,e),o=e.memoizedProps,f=e.type===e.elementType?o:fr(e.type,o),a.props=f,h=e.pendingProps,p=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=sr(c):(c=$s(t)?Ou:ds.current,c=Lh(e,c));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==c)&&uM(e,a,s,c),Ao=!1,p=e.memoizedState,a.state=p,ry(e,s,a,i);var g=e.memoizedState;o!==h||p!==g||Us.current||Ao?(typeof m=="function"&&(R2(e,t,m,s),g=e.memoizedState),(f=Ao||cM(e,t,f,s,p,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),a.props=s,a.state=g,a.context=c,s=f):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return F2(n,e,t,s,r,i)}function F2(n,e,t,s,i,r){yE(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&tM(e,t,!1),vo(n,e,r);s=e.stateNode,ZP.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=Eh(e,n.child,null,r),e.child=Eh(e,null,o,r)):xs(n,e,o,r),e.memoizedState=s.state,i&&tM(e,t,!0),e.child}function bE(n){var e=n.stateNode;e.pendingContext?eM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&eM(n,e.context,!1),D_(n,e.containerInfo)}function wM(n,e,t,s,i){return Sh(),E_(i),e.flags|=256,xs(n,e,t,s),e.child}var U2={dehydrated:null,treeContext:null,retryLane:0};function $2(n){return{baseLanes:n,cachePool:null,transitions:null}}function vE(n,e,t){var s=e.pendingProps,i=Yt.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),At(Yt,i&1),n===null)return D2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,r?(s=e.mode,r=e.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=xb(a,s,0,null),n=Pu(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=$2(t),e.memoizedState=U2,n):$_(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return KP(n,e,a,s,o,i,t);if(r){r=s.fallback,a=e.mode,i=n.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Ol(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=Ol(o,r):(r=Pu(r,a,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,a=n.child.memoizedState,a=a===null?$2(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=U2,s}return r=n.child,n=r.sibling,s=Ol(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function $_(n,e){return e=xb({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function u1(n,e,t,s){return s!==null&&E_(s),Eh(e,n.child,null,t),n=$_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function KP(n,e,t,s,i,r,a){if(t)return e.flags&256?(e.flags&=-257,s=Ev(Error(te(422))),u1(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=xb({mode:"visible",children:s.children},i,0,null),r=Pu(r,i,a,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Eh(e,n.child,null,a),e.child.memoizedState=$2(a),e.memoizedState=U2,r);if(!(e.mode&1))return u1(n,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(te(419)),s=Ev(r,s,void 0),u1(n,e,a,s)}if(o=(a&n.childLanes)!==0,Bs||o){if(s=Rn,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,bo(n,i),Ar(s,n,i,-1))}return Q_(),s=Ev(Error(te(421))),u1(n,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=fR.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,_i=Il(i.nextSibling),Ci=e,Ft=!0,Lr=null,n!==null&&(Ji[qi++]=lo,Ji[qi++]=co,Ji[qi++]=zu,lo=n.id,co=n.overflow,zu=e),e=$_(e,s.children),e.flags|=4096,e)}function yM(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),P2(n.return,e,t)}function kv(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function xE(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(xs(n,e,s.children,t),s=Yt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yM(n,t,e);else if(n.tag===19)yM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(At(Yt,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&ay(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),kv(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&ay(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}kv(e,!0,t,null,r);break;case"together":kv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function J1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function vo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Fu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(te(153));if(e.child!==null){for(n=e.child,t=Ol(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ol(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function XP(n,e,t){switch(e.tag){case 3:bE(e),Sh();break;case 5:V3(e);break;case 1:$s(e.type)&&ey(e);break;case 4:D_(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;At(sy,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(At(Yt,Yt.current&1),e.flags|=128,null):t&e.child.childLanes?vE(n,e,t):(At(Yt,Yt.current&1),n=vo(n,e,t),n!==null?n.sibling:null);At(Yt,Yt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return xE(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Yt,Yt.current),s)break;return null;case 22:case 23:return e.lanes=0,wE(n,e,t)}return vo(n,e,t)}var _E,H2,jE,CE;_E=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};H2=function(){};jE=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,mc(pa.current);var r=null;switch(t){case"input":i=f2(n,i),s=f2(n,s),r=[];break;case"select":i=Jt({},i,{value:void 0}),s=Jt({},s,{value:void 0}),r=[];break;case"textarea":i=p2(n,i),s=p2(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Kw)}g2(t,s);var a;t=null;for(f in i)if(!s.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var o=i[f];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(sp.hasOwnProperty(f)?r||(r=[]):(r=r||[]).push(f,null));for(f in s){var c=s[f];if(o=i!=null?i[f]:void 0,s.hasOwnProperty(f)&&c!==o&&(c!=null||o!=null))if(f==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(r||(r=[]),r.push(f,t)),t=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(sp.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&It("scroll",n),r||o===c||(r=[])):(r=r||[]).push(f,c))}t&&(r=r||[]).push("style",t);var f=r;(e.updateQueue=f)&&(e.flags|=4)}};CE=function(n,e,t,s){t!==s&&(e.flags|=4)};function r0(n,e){if(!Ft)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function ts(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function eR(n,e,t){var s=e.pendingProps;switch(S_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(e),null;case 1:return $s(e.type)&&Xw(),ts(e),null;case 3:return s=e.stateNode,kh(),Pt(Us),Pt(ds),R_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(l1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(Z2(Lr),Lr=null))),H2(n,e),ts(e),null;case 5:P_(e);var i=mc(mp.current);if(t=e.type,n!==null&&e.stateNode!=null)jE(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(te(166));return ts(e),null}if(n=mc(pa.current),l1(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[fa]=e,s[hp]=r,n=(e.mode&1)!==0,t){case"dialog":It("cancel",s),It("close",s);break;case"iframe":case"object":case"embed":It("load",s);break;case"video":case"audio":for(i=0;i<y0.length;i++)It(y0[i],s);break;case"source":It("error",s);break;case"img":case"image":case"link":It("error",s),It("load",s);break;case"details":It("toggle",s);break;case"input":SC(s,r),It("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},It("invalid",s);break;case"textarea":kC(s,r),It("invalid",s)}g2(t,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&o1(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&o1(s.textContent,o,n),i=["children",""+o]):sp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&It("scroll",s)}switch(t){case"input":Xg(s),EC(s,r,!0);break;case"textarea":Xg(s),NC(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Kw)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=KS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[fa]=e,n[hp]=s,_E(n,e,!1,!1),e.stateNode=n;e:{switch(a=w2(t,s),t){case"dialog":It("cancel",n),It("close",n),i=s;break;case"iframe":case"object":case"embed":It("load",n),i=s;break;case"video":case"audio":for(i=0;i<y0.length;i++)It(y0[i],n);i=s;break;case"source":It("error",n),i=s;break;case"img":case"image":case"link":It("error",n),It("load",n),i=s;break;case"details":It("toggle",n),i=s;break;case"input":SC(n,s),i=f2(n,s),It("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Jt({},s,{value:void 0}),It("invalid",n);break;case"textarea":kC(n,s),i=p2(n,s),It("invalid",n);break;default:i=s}g2(t,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?t3(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XS(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&ip(n,c):typeof c=="number"&&ip(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(sp.hasOwnProperty(r)?c!=null&&r==="onScroll"&&It("scroll",n):c!=null&&d_(n,r,c,a))}switch(t){case"input":Xg(n),EC(n,s,!1);break;case"textarea":Xg(n),NC(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Bl(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?$f(n,!!s.multiple,r,!1):s.defaultValue!=null&&$f(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Kw)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ts(e),null;case 6:if(n&&e.stateNode!=null)CE(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(te(166));if(t=mc(mp.current),mc(pa.current),l1(e)){if(s=e.stateNode,t=e.memoizedProps,s[fa]=e,(r=s.nodeValue!==t)&&(n=Ci,n!==null))switch(n.tag){case 3:o1(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&o1(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[fa]=e,e.stateNode=s}return ts(e),null;case 13:if(Pt(Yt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ft&&_i!==null&&e.mode&1&&!(e.flags&128))$3(),Sh(),e.flags|=98560,r=!1;else if(r=l1(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(te(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[fa]=e}else Sh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ts(e),r=!1}else Lr!==null&&(Z2(Lr),Lr=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Yt.current&1?Cn===0&&(Cn=3):Q_())),e.updateQueue!==null&&(e.flags|=4),ts(e),null);case 4:return kh(),H2(n,e),n===null&&fp(e.stateNode.containerInfo),ts(e),null;case 10:return A_(e.type._context),ts(e),null;case 17:return $s(e.type)&&Xw(),ts(e),null;case 19:if(Pt(Yt),r=e.memoizedState,r===null)return ts(e),null;if(s=(e.flags&128)!==0,a=r.rendering,a===null)if(s)r0(r,!1);else{if(Cn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=ay(n),a!==null){for(e.flags|=128,r0(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return At(Yt,Yt.current&1|2),e.child}n=n.sibling}r.tail!==null&&on()>Ah&&(e.flags|=128,s=!0,r0(r,!1),e.lanes=4194304)}else{if(!s)if(n=ay(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),r0(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ft)return ts(e),null}else 2*on()-r.renderingStartTime>Ah&&t!==1073741824&&(e.flags|=128,s=!0,r0(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=on(),e.sibling=null,t=Yt.current,At(Yt,s?t&1|2:t&1),e):(ts(e),null);case 22:case 23:return V_(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?wi&1073741824&&(ts(e),e.subtreeFlags&6&&(e.flags|=8192)):ts(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function tR(n,e){switch(S_(e),e.tag){case 1:return $s(e.type)&&Xw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return kh(),Pt(Us),Pt(ds),R_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return P_(e),null;case 13:if(Pt(Yt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Sh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Pt(Yt),null;case 4:return kh(),null;case 10:return A_(e.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var f1=!1,cs=!1,nR=typeof WeakSet=="function"?WeakSet:Set,je=null;function If(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){tn(n,e,s)}else t.current=null}function G2(n,e,t){try{t()}catch(s){tn(n,e,s)}}var bM=!1;function sR(n,e){if(S2=Jw,n=k3(),M_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,f=0,d=0,h=n,p=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==r||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++f===i&&(o=a),p===r&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(E2={focusedElem:n,selectionRange:t},Jw=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,b=g.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:fr(e.type,w),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(C){tn(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return g=bM,bM=!1,g}function q0(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&G2(e,t,r)}i=i.next}while(i!==s)}}function bb(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function W2(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function ME(n){var e=n.alternate;e!==null&&(n.alternate=null,ME(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[fa],delete e[hp],delete e[A2],delete e[BP],delete e[FP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function LE(n){return n.tag===5||n.tag===3||n.tag===4}function vM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||LE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y2(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Kw));else if(s!==4&&(n=n.child,n!==null))for(Y2(n,e,t),n=n.sibling;n!==null;)Y2(n,e,t),n=n.sibling}function V2(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(V2(n,e,t),n=n.sibling;n!==null;)V2(n,e,t),n=n.sibling}var Wn=null,Mr=!1;function Lo(n,e,t){for(t=t.child;t!==null;)SE(n,e,t),t=t.sibling}function SE(n,e,t){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(fb,t)}catch{}switch(t.tag){case 5:cs||If(t,e);case 6:var s=Wn,i=Mr;Wn=null,Lo(n,e,t),Wn=s,Mr=i,Wn!==null&&(Mr?(n=Wn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Wn.removeChild(t.stateNode));break;case 18:Wn!==null&&(Mr?(n=Wn,t=t.stateNode,n.nodeType===8?_v(n.parentNode,t):n.nodeType===1&&_v(n,t),lp(n)):_v(Wn,t.stateNode));break;case 4:s=Wn,i=Mr,Wn=t.stateNode.containerInfo,Mr=!0,Lo(n,e,t),Wn=s,Mr=i;break;case 0:case 11:case 14:case 15:if(!cs&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&G2(t,e,a),i=i.next}while(i!==s)}Lo(n,e,t);break;case 1:if(!cs&&(If(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){tn(t,e,o)}Lo(n,e,t);break;case 21:Lo(n,e,t);break;case 22:t.mode&1?(cs=(s=cs)||t.memoizedState!==null,Lo(n,e,t),cs=s):Lo(n,e,t);break;default:Lo(n,e,t)}}function xM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new nR),e.forEach(function(s){var i=dR.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function or(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Wn=o.stateNode,Mr=!1;break e;case 3:Wn=o.stateNode.containerInfo,Mr=!0;break e;case 4:Wn=o.stateNode.containerInfo,Mr=!0;break e}o=o.return}if(Wn===null)throw Error(te(160));SE(r,a,i),Wn=null,Mr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){tn(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EE(e,n),e=e.sibling}function EE(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(or(e,n),Or(n),s&4){try{q0(3,n,n.return),bb(3,n)}catch(w){tn(n,n.return,w)}try{q0(5,n,n.return)}catch(w){tn(n,n.return,w)}}break;case 1:or(e,n),Or(n),s&512&&t!==null&&If(t,t.return);break;case 5:if(or(e,n),Or(n),s&512&&t!==null&&If(t,t.return),n.flags&32){var i=n.stateNode;try{ip(i,"")}catch(w){tn(n,n.return,w)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&qS(i,r),w2(o,a);var f=w2(o,r);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?t3(i,h):d==="dangerouslySetInnerHTML"?XS(i,h):d==="children"?ip(i,h):d_(i,d,h,f)}switch(o){case"input":d2(i,r);break;case"textarea":ZS(i,r);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?$f(i,!!r.multiple,m,!1):p!==!!r.multiple&&(r.defaultValue!=null?$f(i,!!r.multiple,r.defaultValue,!0):$f(i,!!r.multiple,r.multiple?[]:"",!1))}i[hp]=r}catch(w){tn(n,n.return,w)}}break;case 6:if(or(e,n),Or(n),s&4){if(n.stateNode===null)throw Error(te(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(w){tn(n,n.return,w)}}break;case 3:if(or(e,n),Or(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{lp(e.containerInfo)}catch(w){tn(n,n.return,w)}break;case 4:or(e,n),Or(n);break;case 13:or(e,n),Or(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(W_=on())),s&4&&xM(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(cs=(f=cs)||d,or(e,n),cs=f):or(e,n),Or(n),s&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!d&&n.mode&1)for(je=n,d=n.child;d!==null;){for(h=je=d;je!==null;){switch(p=je,m=p.child,p.tag){case 0:case 11:case 14:case 15:q0(4,p,p.return);break;case 1:If(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){tn(s,t,w)}}break;case 5:If(p,p.return);break;case 22:if(p.memoizedState!==null){jM(h);continue}}m!==null?(m.return=p,je=m):jM(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,f?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=e3("display",a))}catch(w){tn(n,n.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(w){tn(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:or(e,n),Or(n),s&4&&xM(n);break;case 21:break;default:or(e,n),Or(n)}}function Or(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(LE(t)){var s=t;break e}t=t.return}throw Error(te(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(ip(i,""),s.flags&=-33);var r=vM(n);V2(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=vM(n);Y2(n,o,a);break;default:throw Error(te(161))}}catch(c){tn(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function iR(n,e,t){je=n,kE(n)}function kE(n,e,t){for(var s=(n.mode&1)!==0;je!==null;){var i=je,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||f1;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||cs;o=f1;var f=cs;if(f1=a,(cs=c)&&!f)for(je=i;je!==null;)a=je,c=a.child,a.tag===22&&a.memoizedState!==null?CM(i):c!==null?(c.return=a,je=c):CM(i);for(;r!==null;)je=r,kE(r),r=r.sibling;je=i,f1=o,cs=f}_M(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,je=r):_M(n)}}function _M(n){for(;je!==null;){var e=je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cs||bb(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!cs)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:fr(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&aM(e,r,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}aM(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&lp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}cs||e.flags&512&&W2(e)}catch(p){tn(e,e.return,p)}}if(e===n){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function jM(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function CM(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{bb(4,e)}catch(c){tn(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){tn(e,i,c)}}var r=e.return;try{W2(e)}catch(c){tn(e,r,c)}break;case 5:var a=e.return;try{W2(e)}catch(c){tn(e,a,c)}}}catch(c){tn(e,e.return,c)}if(e===n){je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,je=o;break}je=e.return}}var rR=Math.ceil,cy=Co.ReactCurrentDispatcher,H_=Co.ReactCurrentOwner,er=Co.ReactCurrentBatchConfig,ot=0,Rn=null,hn=null,Jn=0,wi=0,Df=Yl(0),Cn=0,bp=null,Fu=0,vb=0,G_=0,Z0=null,zs=null,W_=0,Ah=1/0,_a=null,uy=!1,Q2=null,Pl=null,d1=!1,El=null,fy=0,K0=0,J2=null,q1=-1,Z1=0;function Cs(){return ot&6?on():q1!==-1?q1:q1=on()}function Rl(n){return n.mode&1?ot&2&&Jn!==0?Jn&-Jn:$P.transition!==null?(Z1===0&&(Z1=h3()),Z1):(n=mt,n!==0||(n=window.event,n=n===void 0?16:v3(n.type)),n):1}function Ar(n,e,t,s){if(50<K0)throw K0=0,J2=null,Error(te(185));Sg(n,t,s),(!(ot&2)||n!==Rn)&&(n===Rn&&(!(ot&2)&&(vb|=t),Cn===4&&Do(n,Jn)),Hs(n,s),t===1&&ot===0&&!(e.mode&1)&&(Ah=on()+500,gb&&Vl()))}function Hs(n,e){var t=n.callbackNode;$D(n,e);var s=Qw(n,n===Rn?Jn:0);if(s===0)t!==null&&IC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&IC(t),e===1)n.tag===0?UP(MM.bind(null,n)):B3(MM.bind(null,n)),OP(function(){!(ot&6)&&Vl()}),t=null;else{switch(p3(s)){case 1:t=w_;break;case 4:t=f3;break;case 16:t=Vw;break;case 536870912:t=d3;break;default:t=Vw}t=OE(t,NE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function NE(n,e){if(q1=-1,Z1=0,ot&6)throw Error(te(327));var t=n.callbackNode;if(Vf()&&n.callbackNode!==t)return null;var s=Qw(n,n===Rn?Jn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=dy(n,s);else{e=s;var i=ot;ot|=2;var r=TE();(Rn!==n||Jn!==e)&&(_a=null,Ah=on()+500,Du(n,e));do try{lR();break}catch(o){AE(n,o)}while(!0);N_(),cy.current=r,ot=i,hn!==null?e=0:(Rn=null,Jn=0,e=Cn)}if(e!==0){if(e===2&&(i=_2(n),i!==0&&(s=i,e=q2(n,i))),e===1)throw t=bp,Du(n,0),Do(n,s),Hs(n,on()),t;if(e===6)Do(n,s);else{if(i=n.current.alternate,!(s&30)&&!aR(i)&&(e=dy(n,s),e===2&&(r=_2(n),r!==0&&(s=r,e=q2(n,r))),e===1))throw t=bp,Du(n,0),Do(n,s),Hs(n,on()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(te(345));case 2:nc(n,zs,_a);break;case 3:if(Do(n,s),(s&130023424)===s&&(e=W_+500-on(),10<e)){if(Qw(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Cs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=N2(nc.bind(null,n,zs,_a),e);break}nc(n,zs,_a);break;case 4:if(Do(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var a=31-Nr(s);r=1<<a,a=e[a],a>i&&(i=a),s&=~r}if(s=i,s=on()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*rR(s/1960))-s,10<s){n.timeoutHandle=N2(nc.bind(null,n,zs,_a),s);break}nc(n,zs,_a);break;case 5:nc(n,zs,_a);break;default:throw Error(te(329))}}}return Hs(n,on()),n.callbackNode===t?NE.bind(null,n):null}function q2(n,e){var t=Z0;return n.current.memoizedState.isDehydrated&&(Du(n,e).flags|=256),n=dy(n,e),n!==2&&(e=zs,zs=t,e!==null&&Z2(e)),n}function Z2(n){zs===null?zs=n:zs.push.apply(zs,n)}function aR(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!Ir(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Do(n,e){for(e&=~G_,e&=~vb,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Nr(e),s=1<<t;n[t]=-1,e&=~s}}function MM(n){if(ot&6)throw Error(te(327));Vf();var e=Qw(n,0);if(!(e&1))return Hs(n,on()),null;var t=dy(n,e);if(n.tag!==0&&t===2){var s=_2(n);s!==0&&(e=s,t=q2(n,s))}if(t===1)throw t=bp,Du(n,0),Do(n,e),Hs(n,on()),t;if(t===6)throw Error(te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,nc(n,zs,_a),Hs(n,on()),null}function Y_(n,e){var t=ot;ot|=1;try{return n(e)}finally{ot=t,ot===0&&(Ah=on()+500,gb&&Vl())}}function Uu(n){El!==null&&El.tag===0&&!(ot&6)&&Vf();var e=ot;ot|=1;var t=er.transition,s=mt;try{if(er.transition=null,mt=1,n)return n()}finally{mt=s,er.transition=t,ot=e,!(ot&6)&&Vl()}}function V_(){wi=Df.current,Pt(Df)}function Du(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,RP(t)),hn!==null)for(t=hn.return;t!==null;){var s=t;switch(S_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Xw();break;case 3:kh(),Pt(Us),Pt(ds),R_();break;case 5:P_(s);break;case 4:kh();break;case 13:Pt(Yt);break;case 19:Pt(Yt);break;case 10:A_(s.type._context);break;case 22:case 23:V_()}t=t.return}if(Rn=n,hn=n=Ol(n.current,null),Jn=wi=e,Cn=0,bp=null,G_=vb=Fu=0,zs=Z0=null,pc!==null){for(e=0;e<pc.length;e++)if(t=pc[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}t.pending=s}pc=null}return n}function AE(n,e){do{var t=hn;try{if(N_(),V1.current=ly,oy){for(var s=Vt.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}oy=!1}if(Bu=0,Dn=jn=Vt=null,J0=!1,gp=0,H_.current=null,t===null||t.return===null){Cn=1,bp=e,hn=null;break}e:{var r=n,a=t.return,o=t,c=e;if(e=Jn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=dM(a);if(m!==null){m.flags&=-257,hM(m,a,o,r,e),m.mode&1&&fM(r,f,e),e=m,c=f;var g=e.updateQueue;if(g===null){var w=new Set;w.add(c),e.updateQueue=w}else g.add(c);break e}else{if(!(e&1)){fM(r,f,e),Q_();break e}c=Error(te(426))}}else if(Ft&&o.mode&1){var b=dM(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hM(b,a,o,r,e),E_(Nh(c,o));break e}}r=c=Nh(c,o),Cn!==4&&(Cn=2),Z0===null?Z0=[r]:Z0.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=pE(r,c,e);rM(r,y);break e;case 1:o=c;var x=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Pl===null||!Pl.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var C=mE(r,o,e);rM(r,C);break e}}r=r.return}while(r!==null)}DE(t)}catch(S){e=S,hn===t&&t!==null&&(hn=t=t.return);continue}break}while(!0)}function TE(){var n=cy.current;return cy.current=ly,n===null?ly:n}function Q_(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Rn===null||!(Fu&268435455)&&!(vb&268435455)||Do(Rn,Jn)}function dy(n,e){var t=ot;ot|=2;var s=TE();(Rn!==n||Jn!==e)&&(_a=null,Du(n,e));do try{oR();break}catch(i){AE(n,i)}while(!0);if(N_(),ot=t,cy.current=s,hn!==null)throw Error(te(261));return Rn=null,Jn=0,Cn}function oR(){for(;hn!==null;)IE(hn)}function lR(){for(;hn!==null&&!ID();)IE(hn)}function IE(n){var e=RE(n.alternate,n,wi);n.memoizedProps=n.pendingProps,e===null?DE(n):hn=e,H_.current=null}function DE(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=tR(t,e),t!==null){t.flags&=32767,hn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Cn=6,hn=null;return}}else if(t=eR(t,e,wi),t!==null){hn=t;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=n}while(e!==null);Cn===0&&(Cn=5)}function nc(n,e,t){var s=mt,i=er.transition;try{er.transition=null,mt=1,cR(n,e,t,s)}finally{er.transition=i,mt=s}return null}function cR(n,e,t,s){do Vf();while(El!==null);if(ot&6)throw Error(te(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(te(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(HD(n,r),n===Rn&&(hn=Rn=null,Jn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||d1||(d1=!0,OE(Vw,function(){return Vf(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=er.transition,er.transition=null;var a=mt;mt=1;var o=ot;ot|=4,H_.current=null,sR(n,t),EE(t,n),kP(E2),Jw=!!S2,E2=S2=null,n.current=t,iR(t),DD(),ot=o,mt=a,er.transition=r}else n.current=t;if(d1&&(d1=!1,El=n,fy=i),r=n.pendingLanes,r===0&&(Pl=null),OD(t.stateNode),Hs(n,on()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(uy)throw uy=!1,n=Q2,Q2=null,n;return fy&1&&n.tag!==0&&Vf(),r=n.pendingLanes,r&1?n===J2?K0++:(K0=0,J2=n):K0=0,Vl(),null}function Vf(){if(El!==null){var n=p3(fy),e=er.transition,t=mt;try{if(er.transition=null,mt=16>n?16:n,El===null)var s=!1;else{if(n=El,El=null,fy=0,ot&6)throw Error(te(331));var i=ot;for(ot|=4,je=n.current;je!==null;){var r=je,a=r.child;if(je.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var f=o[c];for(je=f;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:q0(8,d,r)}var h=d.child;if(h!==null)h.return=d,je=h;else for(;je!==null;){d=je;var p=d.sibling,m=d.return;if(ME(d),d===f){je=null;break}if(p!==null){p.return=m,je=p;break}je=m}}}var g=r.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}je=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,je=a;else e:for(;je!==null;){if(r=je,r.flags&2048)switch(r.tag){case 0:case 11:case 15:q0(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,je=y;break e}je=r.return}}var x=n.current;for(je=x;je!==null;){a=je;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,je=v;else e:for(a=x;je!==null;){if(o=je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:bb(9,o)}}catch(S){tn(o,o.return,S)}if(o===a){je=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,je=C;break e}je=o.return}}if(ot=i,Vl(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(fb,n)}catch{}s=!0}return s}finally{mt=t,er.transition=e}}return!1}function LM(n,e,t){e=Nh(t,e),e=pE(n,e,1),n=Dl(n,e,1),e=Cs(),n!==null&&(Sg(n,1,e),Hs(n,e))}function tn(n,e,t){if(n.tag===3)LM(n,n,t);else for(;e!==null;){if(e.tag===3){LM(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pl===null||!Pl.has(s))){n=Nh(t,n),n=mE(e,n,1),e=Dl(e,n,1),n=Cs(),e!==null&&(Sg(e,1,n),Hs(e,n));break}}e=e.return}}function uR(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Cs(),n.pingedLanes|=n.suspendedLanes&t,Rn===n&&(Jn&t)===t&&(Cn===4||Cn===3&&(Jn&130023424)===Jn&&500>on()-W_?Du(n,0):G_|=t),Hs(n,e)}function PE(n,e){e===0&&(n.mode&1?(e=n1,n1<<=1,!(n1&130023424)&&(n1=4194304)):e=1);var t=Cs();n=bo(n,e),n!==null&&(Sg(n,e,t),Hs(n,t))}function fR(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),PE(n,t)}function dR(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(te(314))}s!==null&&s.delete(e),PE(n,t)}var RE;RE=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Us.current)Bs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Bs=!1,XP(n,e,t);Bs=!!(n.flags&131072)}else Bs=!1,Ft&&e.flags&1048576&&F3(e,ny,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;J1(n,e),n=e.pendingProps;var i=Lh(e,ds.current);Yf(e,t),i=z_(null,e,s,n,i,t);var r=B_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$s(s)?(r=!0,ey(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I_(e),i.updater=yb,e.stateNode=i,i._reactInternals=e,O2(e,s,n,t),e=F2(null,e,s,!0,r,t)):(e.tag=0,Ft&&r&&L_(e),xs(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(J1(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=pR(s),n=fr(s,n),i){case 0:e=B2(null,e,s,n,t);break e;case 1:e=gM(null,e,s,n,t);break e;case 11:e=pM(null,e,s,n,t);break e;case 14:e=mM(null,e,s,fr(s.type,n),t);break e}throw Error(te(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:fr(s,i),B2(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:fr(s,i),gM(n,e,s,i,t);case 3:e:{if(bE(e),n===null)throw Error(te(387));s=e.pendingProps,r=e.memoizedState,i=r.element,Y3(n,e),ry(e,s,null,t);var a=e.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Nh(Error(te(423)),e),e=wM(n,e,s,t,i);break e}else if(s!==i){i=Nh(Error(te(424)),e),e=wM(n,e,s,t,i);break e}else for(_i=Il(e.stateNode.containerInfo.firstChild),Ci=e,Ft=!0,Lr=null,t=G3(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Sh(),s===i){e=vo(n,e,t);break e}xs(n,e,s,t)}e=e.child}return e;case 5:return V3(e),n===null&&D2(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,k2(s,i)?a=null:r!==null&&k2(s,r)&&(e.flags|=32),yE(n,e),xs(n,e,a,t),e.child;case 6:return n===null&&D2(e),null;case 13:return vE(n,e,t);case 4:return D_(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Eh(e,null,s,t):xs(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:fr(s,i),pM(n,e,s,i,t);case 7:return xs(n,e,e.pendingProps,t),e.child;case 8:return xs(n,e,e.pendingProps.children,t),e.child;case 12:return xs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,At(sy,s._currentValue),s._currentValue=a,r!==null)if(Ir(r.value,a)){if(r.children===i.children&&!Us.current){e=vo(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=ho(-1,t&-t),c.tag=2;var f=r.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),P2(r.return,t,e),o.lanes|=t;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(te(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),P2(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}xs(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Yf(e,t),i=sr(i),s=s(i),e.flags|=1,xs(n,e,s,t),e.child;case 14:return s=e.type,i=fr(s,e.pendingProps),i=fr(s.type,i),mM(n,e,s,i,t);case 15:return gE(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:fr(s,i),J1(n,e),e.tag=1,$s(s)?(n=!0,ey(e)):n=!1,Yf(e,t),hE(e,s,i),O2(e,s,i,t),F2(null,e,s,!0,n,t);case 19:return xE(n,e,t);case 22:return wE(n,e,t)}throw Error(te(156,e.tag))};function OE(n,e){return u3(n,e)}function hR(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(n,e,t,s){return new hR(n,e,t,s)}function J_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pR(n){if(typeof n=="function")return J_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===p_)return 11;if(n===m_)return 14}return 2}function Ol(n,e){var t=n.alternate;return t===null?(t=Ki(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function K1(n,e,t,s,i,r){var a=2;if(s=n,typeof n=="function")J_(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Cf:return Pu(t.children,i,r,e);case h_:a=8,i|=8;break;case o2:return n=Ki(12,t,e,i|2),n.elementType=o2,n.lanes=r,n;case l2:return n=Ki(13,t,e,i),n.elementType=l2,n.lanes=r,n;case c2:return n=Ki(19,t,e,i),n.elementType=c2,n.lanes=r,n;case VS:return xb(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case WS:a=10;break e;case YS:a=9;break e;case p_:a=11;break e;case m_:a=14;break e;case No:a=16,s=null;break e}throw Error(te(130,n==null?n:typeof n,""))}return e=Ki(a,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Pu(n,e,t,s){return n=Ki(7,n,s,e),n.lanes=t,n}function xb(n,e,t,s){return n=Ki(22,n,s,e),n.elementType=VS,n.lanes=t,n.stateNode={isHidden:!1},n}function Nv(n,e,t){return n=Ki(6,n,null,e),n.lanes=t,n}function Av(n,e,t){return e=Ki(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function mR(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fv(0),this.expirationTimes=fv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fv(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function q_(n,e,t,s,i,r,a,o,c){return n=new mR(n,e,t,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Ki(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(r),n}function gR(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jf,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function zE(n){if(!n)return Fl;n=n._reactInternals;e:{if(Ju(n)!==n||n.tag!==1)throw Error(te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($s(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(n.tag===1){var t=n.type;if($s(t))return z3(n,t,e)}return e}function BE(n,e,t,s,i,r,a,o,c){return n=q_(t,s,!0,n,i,r,a,o,c),n.context=zE(null),t=n.current,s=Cs(),i=Rl(t),r=ho(s,i),r.callback=e??null,Dl(t,r,i),n.current.lanes=i,Sg(n,i,s),Hs(n,s),n}function _b(n,e,t,s){var i=e.current,r=Cs(),a=Rl(i);return t=zE(t),e.context===null?e.context=t:e.pendingContext=t,e=ho(r,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Dl(i,e,a),n!==null&&(Ar(n,i,a,r),Y1(n,i,a)),a}function hy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function SM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Z_(n,e){SM(n,e),(n=n.alternate)&&SM(n,e)}function wR(){return null}var FE=typeof reportError=="function"?reportError:function(n){console.error(n)};function K_(n){this._internalRoot=n}jb.prototype.render=K_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(te(409));_b(n,e,null,null)};jb.prototype.unmount=K_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Uu(function(){_b(null,n,null,null)}),e[yo]=null}};function jb(n){this._internalRoot=n}jb.prototype.unstable_scheduleHydration=function(n){if(n){var e=w3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Io.length&&e!==0&&e<Io[t].priority;t++);Io.splice(t,0,n),t===0&&b3(n)}};function X_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function EM(){}function yR(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var f=hy(a);r.call(f)}}var a=BE(e,s,n,0,null,!1,!1,"",EM);return n._reactRootContainer=a,n[yo]=a.current,fp(n.nodeType===8?n.parentNode:n),Uu(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var f=hy(c);o.call(f)}}var c=q_(n,0,!1,null,null,!1,!1,"",EM);return n._reactRootContainer=c,n[yo]=c.current,fp(n.nodeType===8?n.parentNode:n),Uu(function(){_b(e,c,t,s)}),c}function Mb(n,e,t,s,i){var r=t._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var c=hy(a);o.call(c)}}_b(e,a,n,i)}else a=yR(t,e,n,i,s);return hy(a)}m3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=w0(e.pendingLanes);t!==0&&(y_(e,t|1),Hs(e,on()),!(ot&6)&&(Ah=on()+500,Vl()))}break;case 13:Uu(function(){var s=bo(n,1);if(s!==null){var i=Cs();Ar(s,n,1,i)}}),Z_(n,1)}};b_=function(n){if(n.tag===13){var e=bo(n,134217728);if(e!==null){var t=Cs();Ar(e,n,134217728,t)}Z_(n,134217728)}};g3=function(n){if(n.tag===13){var e=Rl(n),t=bo(n,e);if(t!==null){var s=Cs();Ar(t,n,e,s)}Z_(n,e)}};w3=function(){return mt};y3=function(n,e){var t=mt;try{return mt=n,e()}finally{mt=t}};b2=function(n,e,t){switch(e){case"input":if(d2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=mb(s);if(!i)throw Error(te(90));JS(s),d2(s,i)}}}break;case"textarea":ZS(n,t);break;case"select":e=t.value,e!=null&&$f(n,!!t.multiple,e,!1)}};i3=Y_;r3=Uu;var bR={usingClientEntryPoint:!1,Events:[kg,Ef,mb,n3,s3,Y_]},a0={findFiberByHostInstance:hc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vR={bundleType:a0.bundleType,version:a0.version,rendererPackageName:a0.rendererPackageName,rendererConfig:a0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Co.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=l3(n),n===null?null:n.stateNode},findFiberByHostInstance:a0.findFiberByHostInstance||wR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h1.isDisabled&&h1.supportsFiber)try{fb=h1.inject(vR),ha=h1}catch{}}Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bR;Si.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(e))throw Error(te(200));return gR(n,e,null,t)};Si.createRoot=function(n,e){if(!X_(n))throw Error(te(299));var t=!1,s="",i=FE;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=q_(n,1,!1,null,null,t,!1,s,i),n[yo]=e.current,fp(n.nodeType===8?n.parentNode:n),new K_(e)};Si.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(te(188)):(n=Object.keys(n).join(","),Error(te(268,n)));return n=l3(e),n=n===null?null:n.stateNode,n};Si.flushSync=function(n){return Uu(n)};Si.hydrate=function(n,e,t){if(!Cb(e))throw Error(te(200));return Mb(null,n,e,!0,t)};Si.hydrateRoot=function(n,e,t){if(!X_(n))throw Error(te(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",a=FE;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=BE(e,null,n,1,t??null,i,!1,r,a),n[yo]=e.current,fp(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new jb(e)};Si.render=function(n,e,t){if(!Cb(e))throw Error(te(200));return Mb(null,n,e,!1,t)};Si.unmountComponentAtNode=function(n){if(!Cb(n))throw Error(te(40));return n._reactRootContainer?(Uu(function(){Mb(null,null,n,!1,function(){n._reactRootContainer=null,n[yo]=null})}),!0):!1};Si.unstable_batchedUpdates=Y_;Si.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Cb(t))throw Error(te(200));if(n==null||n._reactInternals===void 0)throw Error(te(38));return Mb(n,e,t,!1,s)};Si.version="18.3.1-next-f1338f8080-20240426";function UE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UE)}catch(n){console.error(n)}}UE(),US.exports=Si;var ej=US.exports,kM=ej;r2.createRoot=kM.createRoot,r2.hydrateRoot=kM.hydrateRoot;var K2=function(n,e){return K2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},K2(n,e)};function $E(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K2(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var py=function(){return py=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},py.apply(this,arguments)};function Fh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function HE(n,e,t,s){var i=arguments.length,r=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,s);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(i<3?a(r):i>3?a(e,t,r):a(e,t))||r);return i>3&&r&&Object.defineProperty(e,t,r),r}function GE(n,e){return function(t,s){e(t,s,n)}}function WE(n,e,t,s,i,r){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var o=s.kind,c=o==="getter"?"get":o==="setter"?"set":"value",f=!e&&n?s.static?n:n.prototype:null,d=e||(f?Object.getOwnPropertyDescriptor(f,s.name):{}),h,p=!1,m=t.length-1;m>=0;m--){var g={};for(var w in s)g[w]=w==="access"?{}:s[w];for(var w in s.access)g.access[w]=s.access[w];g.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");r.push(a(y||null))};var b=(0,t[m])(o==="accessor"?{get:d.get,set:d.set}:d[c],g);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=a(b.get))&&(d.get=h),(h=a(b.set))&&(d.set=h),(h=a(b.init))&&i.unshift(h)}else(h=a(b))&&(o==="field"?i.unshift(h):d[c]=h)}f&&Object.defineProperty(f,s.name,d),p=!0}function YE(n,e,t){for(var s=arguments.length>2,i=0;i<e.length;i++)t=s?e[i].call(n,t):e[i].call(n);return s?t:void 0}function VE(n){return typeof n=="symbol"?n:"".concat(n)}function QE(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function JE(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Ee(n,e,t,s){function i(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(d){try{f(s.next(d))}catch(h){a(h)}}function c(d){try{f(s.throw(d))}catch(h){a(h)}}function f(d){d.done?r(d.value):i(d.value).then(o,c)}f((s=s.apply(n,e||[])).next())})}function qE(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(f){return function(d){return c([f,d])}}function c(f){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(t=0)),t;)try{if(s=1,i&&(r=f[0]&2?i.return:f[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,f[1])).done)return r;switch(i=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{s=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Lb=Object.create?function(n,e,t,s){s===void 0&&(s=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,i)}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]};function ZE(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Lb(e,n,t)}function my(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tj(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),i,r=[],a;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return r}function KE(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(tj(arguments[e]));return n}function XE(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),i=0,e=0;e<t;e++)for(var r=arguments[e],a=0,o=r.length;a<o;a++,i++)s[i]=r[a];return s}function ek(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return n.concat(r||Array.prototype.slice.call(e))}function Th(n){return this instanceof Th?(this.v=n,this):new Th(n)}function tk(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(m){return function(g){return Promise.resolve(g).then(m,h)}}function o(m,g){s[m]&&(i[m]=function(w){return new Promise(function(b,y){r.push([m,w,b,y])>1||c(m,w)})},g&&(i[m]=g(i[m])))}function c(m,g){try{f(s[m](g))}catch(w){p(r[0][3],w)}}function f(m){m.value instanceof Th?Promise.resolve(m.value.v).then(d,h):p(r[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,g){m(g),r.shift(),r.length&&c(r[0][0],r[0][1])}}function nk(n){var e,t;return e={},s("next"),s("throw",function(i){throw i}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(i,r){e[i]=n[i]?function(a){return(t=!t)?{value:Th(n[i](a)),done:!1}:r?r(a):a}:r}}function sk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof my=="function"?my(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=n[r]&&function(a){return new Promise(function(o,c){a=n[r](a),i(o,c,a.done,a.value)})}}function i(r,a,o,c){Promise.resolve(c).then(function(f){r({value:f,done:o})},a)}}function ik(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var xR=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},X2=function(n){return X2=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},X2(n)};function rk(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=X2(n),s=0;s<t.length;s++)t[s]!=="default"&&Lb(e,n,t[s]);return xR(e,n),e}function ak(n){return n&&n.__esModule?n:{default:n}}function ok(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}function lk(n,e,t,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function ck(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function uk(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(i=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");i&&(s=function(){try{i.call(this)}catch(r){return Promise.reject(r)}}),n.stack.push({value:e,dispose:s,async:t})}else t&&n.stack.push({async:!0});return e}var _R=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=n,s.suppressed=e,s};function fk(n){function e(r){n.error=n.hasError?new _R(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}var t,s=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&s===1)return s=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var r=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(r).then(i,function(a){return e(a),i()})}else s|=1}catch(a){e(a)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function dk(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,i,r,a){return s?e?".jsx":".js":i&&(!r||!a)?t:i+r+"."+a.toLowerCase()+"js"}):n}const jR={__extends:$E,__assign:py,__rest:Fh,__decorate:HE,__param:GE,__esDecorate:WE,__runInitializers:YE,__propKey:VE,__setFunctionName:QE,__metadata:JE,__awaiter:Ee,__generator:qE,__createBinding:Lb,__exportStar:ZE,__values:my,__read:tj,__spread:KE,__spreadArrays:XE,__spreadArray:ek,__await:Th,__asyncGenerator:tk,__asyncDelegator:nk,__asyncValues:sk,__makeTemplateObject:ik,__importStar:rk,__importDefault:ak,__classPrivateFieldGet:ok,__classPrivateFieldSet:lk,__classPrivateFieldIn:ck,__addDisposableResource:uk,__disposeResources:fk,__rewriteRelativeImportExtension:dk},CR=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:uk,get __assign(){return py},__asyncDelegator:nk,__asyncGenerator:tk,__asyncValues:sk,__await:Th,__awaiter:Ee,__classPrivateFieldGet:ok,__classPrivateFieldIn:ck,__classPrivateFieldSet:lk,__createBinding:Lb,__decorate:HE,__disposeResources:fk,__esDecorate:WE,__exportStar:ZE,__extends:$E,__generator:qE,__importDefault:ak,__importStar:rk,__makeTemplateObject:ik,__metadata:JE,__param:GE,__propKey:VE,__read:tj,__rest:Fh,__rewriteRelativeImportExtension:dk,__runInitializers:YE,__setFunctionName:QE,__spread:KE,__spreadArray:ek,__spreadArrays:XE,__values:my,default:jR},Symbol.toStringTag,{value:"Module"})),MR=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class nj extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class LR extends nj{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class NM extends nj{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AM extends nj{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ex;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ex||(ex={}));class SR{constructor(e,{headers:t={},customFetch:s,region:i=ex.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=MR(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ee(this,arguments,void 0,function*(t,s={}){var i;let r,a;try{const{headers:o,method:c,body:f,signal:d,timeout:h}=s;let p={},{region:m}=s;m||(m=this.region);const g=new URL(`${this.url}/${t}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let w;f&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(p["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(p["Content-Type"]="application/json",w=JSON.stringify(f)):w=f;let b=d;h&&(a=new AbortController,r=setTimeout(()=>a.abort(),h),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:w,signal:b}).catch(S=>{throw new LR(S)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new NM(y);if(!y.ok)throw new AM(y);let v=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return v==="application/json"?C=yield y.json():v==="application/octet-stream"||v==="application/pdf"?C=yield y.blob():v==="text/event-stream"?C=y:v==="multipart/form-data"?C=yield y.formData():C=yield y.text(),{data:C,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof AM||o instanceof NM?o.context:void 0}}finally{r&&clearTimeout(r)}})}}var _s={};const Uh=JI(CR);var p1={},m1={},g1={},w1={},y1={},b1={},TM;function hk(){if(TM)return b1;TM=1,Object.defineProperty(b1,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return b1.default=n,b1}var IM;function pk(){if(IM)return y1;IM=1,Object.defineProperty(y1,"__esModule",{value:!0});const e=Uh.__importDefault(hk());class t{constructor(i){var r,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(r=i.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,r){return this.headers=new Headers(this.headers),this.headers.set(i,r),this}then(i,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var f,d,h,p;let m=null,g=null,w=null,b=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?g=S:g=JSON.parse(S))}const v=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),C=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&C&&C.length>1&&(w=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,b=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const v=await c.text();try{m=JSON.parse(v),Array.isArray(m)&&c.status===404&&(g=[],m=null,b=200,y="OK")}catch{c.status===404&&v===""?(b=204,y="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,b=200,y="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:g,count:w,status:b,statusText:y}});return this.shouldThrowOnError||(o=o.catch(c=>{var f,d,h,p,m,g;let w="";const b=c==null?void 0:c.cause;if(b){const y=(f=b==null?void 0:b.message)!==null&&f!==void 0?f:"",x=(d=b==null?void 0:b.code)!==null&&d!==void 0?d:"";w=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,w+=`

Caused by: ${(p=b==null?void 0:b.name)!==null&&p!==void 0?p:"Error"}: ${y}`,x&&(w+=` (${x})`),b!=null&&b.stack&&(w+=`
${b.stack}`)}else w=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,r)}returns(){return this}overrideTypes(){return this}}return y1.default=t,y1}var DM;function mk(){if(DM)return w1;DM=1,Object.defineProperty(w1,"__esModule",{value:!0});const e=Uh.__importDefault(pk());class t extends e.default{select(i){let r=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const f=c?`${c}.order`:"order",d=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${d?`${d},`:""}${i}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:a=r}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,r,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,f=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:f="text"}={}){var d;const h=[i?"analyze":null,r?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${p}"; options=${h};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return w1.default=t,w1}var PM;function sj(){if(PM)return g1;PM=1,Object.defineProperty(g1,"__esModule",{value:!0});const e=Uh.__importDefault(mk()),t=new RegExp("[,()]");class s extends e.default{eq(r,a){return this.url.searchParams.append(r,`eq.${a}`),this}neq(r,a){return this.url.searchParams.append(r,`neq.${a}`),this}gt(r,a){return this.url.searchParams.append(r,`gt.${a}`),this}gte(r,a){return this.url.searchParams.append(r,`gte.${a}`),this}lt(r,a){return this.url.searchParams.append(r,`lt.${a}`),this}lte(r,a){return this.url.searchParams.append(r,`lte.${a}`),this}like(r,a){return this.url.searchParams.append(r,`like.${a}`),this}likeAllOf(r,a){return this.url.searchParams.append(r,`like(all).{${a.join(",")}}`),this}likeAnyOf(r,a){return this.url.searchParams.append(r,`like(any).{${a.join(",")}}`),this}ilike(r,a){return this.url.searchParams.append(r,`ilike.${a}`),this}ilikeAllOf(r,a){return this.url.searchParams.append(r,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(r,a){return this.url.searchParams.append(r,`ilike(any).{${a.join(",")}}`),this}is(r,a){return this.url.searchParams.append(r,`is.${a}`),this}in(r,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(r,`in.(${o})`),this}contains(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cs.{${a.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(a)}`),this}containedBy(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cd.{${a.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(a)}`),this}rangeGt(r,a){return this.url.searchParams.append(r,`sr.${a}`),this}rangeGte(r,a){return this.url.searchParams.append(r,`nxl.${a}`),this}rangeLt(r,a){return this.url.searchParams.append(r,`sl.${a}`),this}rangeLte(r,a){return this.url.searchParams.append(r,`nxr.${a}`),this}rangeAdjacent(r,a){return this.url.searchParams.append(r,`adj.${a}`),this}overlaps(r,a){return typeof a=="string"?this.url.searchParams.append(r,`ov.${a}`):this.url.searchParams.append(r,`ov.{${a.join(",")}}`),this}textSearch(r,a,{config:o,type:c}={}){let f="";c==="plain"?f="pl":c==="phrase"?f="ph":c==="websearch"&&(f="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(r,`${f}fts${d}.${a}`),this}match(r){return Object.entries(r).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(r,a,o){return this.url.searchParams.append(r,`not.${a}.${o}`),this}or(r,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${r})`),this}filter(r,a,o){return this.url.searchParams.append(r,`${a}.${o}`),this}}return g1.default=s,g1}var RM;function gk(){if(RM)return m1;RM=1,Object.defineProperty(m1,"__esModule",{value:!0});const e=Uh.__importDefault(sj());class t{constructor(i,{headers:r={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(r),this.schema=a,this.fetch=o}select(i,r){const{head:a=!1,count:o}=r??{},c=a?"HEAD":"GET";let f=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!f?"":(h==='"'&&(f=!f),h)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:a=!0}={}){var o;const c="POST";if(r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(f.length>0){const d=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){var f;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:r}={}){var a;const o="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var r;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return m1.default=t,m1}var OM;function ER(){if(OM)return p1;OM=1,Object.defineProperty(p1,"__esModule",{value:!0});const n=Uh,e=n.__importDefault(gk()),t=n.__importDefault(sj());class s{constructor(r,{headers:a={},schema:o,fetch:c}={}){this.url=r,this.headers=new Headers(a),this.schemaName=o,this.fetch=c}from(r){const a=new URL(`${this.url}/${r}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new s(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:o=!1,get:c=!1,count:f}={}){var d;let h;const p=new URL(`${this.url}/rpc/${r}`);let m;o||c?(h=o?"HEAD":"GET",Object.entries(a).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{p.searchParams.append(w,b)})):(h="POST",m=a);const g=new Headers(this.headers);return f&&g.set("Prefer",`count=${f}`),new t.default({method:h,url:p,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return p1.default=s,p1}Object.defineProperty(_s,"__esModule",{value:!0});var wk=_s.PostgrestError=Sk=_s.PostgrestBuilder=Mk=_s.PostgrestTransformBuilder=jk=_s.PostgrestFilterBuilder=xk=_s.PostgrestQueryBuilder=bk=_s.PostgrestClient=void 0;const $h=Uh,yk=$h.__importDefault(ER());var bk=_s.PostgrestClient=yk.default;const vk=$h.__importDefault(gk());var xk=_s.PostgrestQueryBuilder=vk.default;const _k=$h.__importDefault(sj());var jk=_s.PostgrestFilterBuilder=_k.default;const Ck=$h.__importDefault(mk());var Mk=_s.PostgrestTransformBuilder=Ck.default;const Lk=$h.__importDefault(pk());var Sk=_s.PostgrestBuilder=Lk.default;const Ek=$h.__importDefault(hk());wk=_s.PostgrestError=Ek.default;var kk=_s.default={PostgrestClient:yk.default,PostgrestQueryBuilder:vk.default,PostgrestFilterBuilder:_k.default,PostgrestTransformBuilder:Ck.default,PostgrestBuilder:Lk.default,PostgrestError:Ek.default};const kR=VI({__proto__:null,get PostgrestBuilder(){return Sk},get PostgrestClient(){return bk},get PostgrestError(){return wk},get PostgrestFilterBuilder(){return jk},get PostgrestQueryBuilder(){return xk},get PostgrestTransformBuilder(){return Mk},default:kk},[_s]),{PostgrestClient:NR,PostgrestQueryBuilder:FG,PostgrestFilterBuilder:UG,PostgrestTransformBuilder:$G,PostgrestBuilder:HG,PostgrestError:GG}=kk||kR;class AR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const TR="2.83.0",IR=`realtime-js/${TR}`,Nk="1.0.0",DR="2.0.0",zM=Nk,tx=1e4,PR=1e3,RR=100;var oc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(oc||(oc={}));var bn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(bn||(bn={}));var Qi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Qi||(Qi={}));var nx;(function(n){n.websocket="websocket"})(nx||(nx={}));var lc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(lc||(lc={}));class OR{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodePush(e){var t,s;const{event:i,topic:r,payload:a}=e,o=(t=e.ref)!==null&&t!==void 0?t:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",f=this.META_LENGTH+c.length+o.length+r.length+i.length,d=new ArrayBuffer(this.HEADER_LENGTH+f);let h=new DataView(d),p=0;h.setUint8(p++,this.KINDS.push),h.setUint8(p++,c.length),h.setUint8(p++,o.length),h.setUint8(p++,r.length),h.setUint8(p++,i.length),Array.from(c,g=>h.setUint8(p++,g.charCodeAt(0))),Array.from(o,g=>h.setUint8(p++,g.charCodeAt(0))),Array.from(r,g=>h.setUint8(p++,g.charCodeAt(0))),Array.from(i,g=>h.setUint8(p++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+a.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(a),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s,i,r;const a=e.topic,o=(t=e.ref)!==null&&t!==void 0?t:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",f=e.payload.event,d=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+a.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,f.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(o,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(a,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(f,b=>m.setUint8(g++,b.charCodeAt(0)));var w=new Uint8Array(p.byteLength+d.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(d),p.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var t,s,i,r;const a=e.topic,o=(t=e.ref)!==null&&t!==void 0?t:"",c=(s=e.join_ref)!==null&&s!==void 0?s:"",f=e.payload.event,d=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},p=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+a.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let w=new DataView(g),b=0;w.setUint8(b++,this.KINDS.userBroadcastPush),w.setUint8(b++,c.length),w.setUint8(b++,o.length),w.setUint8(b++,a.length),w.setUint8(b++,f.length),w.setUint8(b++,this.JSON_ENCODING),Array.from(c,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(o,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(a,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(f,x=>w.setUint8(b++,x.charCodeAt(0)));var y=new Uint8Array(g.byteLength+p.byteLength);return y.set(new Uint8Array(g),0),y.set(new Uint8Array(p),g.byteLength),y.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[i,r,a,o,c]=s;return t({join_ref:i,ref:r,topic:a,event:o,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),i=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(e,t,i);case this.KINDS.reply:return this._decodeReply(e,t,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodePush(e,t,s){const i=t.getUint8(1),r=t.getUint8(2),a=t.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const c=s.decode(e.slice(o,o+i));o=o+i;const f=s.decode(e.slice(o,o+r));o=o+r;const d=s.decode(e.slice(o,o+a));o=o+a;const h=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{join_ref:c,ref:null,topic:f,event:d,payload:h}}_decodeReply(e,t,s){const i=t.getUint8(1),r=t.getUint8(2),a=t.getUint8(3),o=t.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const f=s.decode(e.slice(c,c+i));c=c+i;const d=s.decode(e.slice(c,c+r));c=c+r;const h=s.decode(e.slice(c,c+a));c=c+a;const p=s.decode(e.slice(c,c+o));c=c+o;const m=JSON.parse(s.decode(e.slice(c,e.byteLength))),g={status:p,response:m};return{join_ref:f,ref:d,topic:h,event:Qi.reply,payload:g}}_decodeBroadcast(e,t,s){const i=t.getUint8(1),r=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+i));a=a+i;const c=s.decode(e.slice(a,a+r));a=a+r;const f=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{join_ref:null,ref:null,topic:o,event:c,payload:f}}_decodeUserBroadcast(e,t,s){const i=t.getUint8(1),r=t.getUint8(2),a=t.getUint8(3),o=t.getUint8(4);let c=this.HEADER_LENGTH+4;const f=s.decode(e.slice(c,c+i));c=c+i;const d=s.decode(e.slice(c,c+r));c=c+r;const h=s.decode(e.slice(c,c+a));c=c+a;const p=e.slice(c,e.byteLength),m=o===this.JSON_ENCODING?JSON.parse(s.decode(p)):p,g={type:this.BROADCAST,event:d,payload:m};return a>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST,payload:g}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class Ak{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Et||(Et={}));const BM=(n,e,t={})=>{var s;const i=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((r,a)=>(r[a]=zR(a,n,e,i),r),{}):{}},zR=(n,e,t,s)=>{const i=e.find(o=>o.name===n),r=i==null?void 0:i.type,a=t[n];return r&&!s.includes(r)?Tk(r,a):sx(a)},Tk=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return $R(e,t)}switch(n){case Et.bool:return BR(e);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return FR(e);case Et.json:case Et.jsonb:return UR(e);case Et.timestamp:return HR(e);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return sx(e);default:return sx(e)}},sx=n=>n,BR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},FR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},UR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},$R=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let r;const a=n.slice(1,t);try{r=JSON.parse("["+a+"]")}catch{r=a?a.split(","):[]}return r.map(o=>Tk(e,o))}return n},HR=n=>typeof n=="string"?n.replace(" ","T"):n,Ik=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Tv{constructor(e,t,s={},i=tx){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var FM;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(FM||(FM={}));class X0{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:r,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=X0.syncState(this.state,i,r,a),this.pendingDiffs.forEach(c=>{this.state=X0.syncDiff(this.state,c,r,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},i=>{const{onJoin:r,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=X0.syncDiff(this.state,i,r,a),o())}),this.onJoin((i,r,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:a})}),this.onLeave((i,r,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,i){const r=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(r,(f,d)=>{a[f]||(c[f]=d)}),this.map(a,(f,d)=>{const h=r[f];if(h){const p=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),g=d.filter(b=>m.indexOf(b.presence_ref)<0),w=h.filter(b=>p.indexOf(b.presence_ref)<0);g.length>0&&(o[f]=g),w.length>0&&(c[f]=w)}else o[f]=d}),this.syncDiff(r,{joins:o,leaves:c},s,i)}static syncDiff(e,t,s,i){const{joins:r,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(r,(o,c)=>{var f;const d=(f=e[o])!==null&&f!==void 0?f:[];if(e[o]=this.cloneDeep(c),d.length>0){const h=e[o].map(m=>m.presence_ref),p=d.filter(m=>h.indexOf(m.presence_ref)<0);e[o].unshift(...p)}s(o,d,c)}),this.map(a,(o,c)=>{let f=e[o];if(!f)return;const d=c.map(h=>h.presence_ref);f=f.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=f,i(o,f,c),f.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const i=e[s];return"metas"in i?t[s]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[s]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var UM;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(UM||(UM={}));var ep;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ep||(ep={}));var ja;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ja||(ja={}));class ij{constructor(e,t={config:{}},s){var i,r;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Tv(this,Qi.join,this.params,this.timeout),this.rejoinTimer=new Ak(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new X0(this),this.broadcastEndpointURL=Ik(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==bn.closed){const{config:{broadcast:a,presence:o,private:c}}=this.params,f=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[ep.PRESENCE]&&this.bindings[ep.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(ja.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(ja.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){e==null||e(ja.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,y=[];for(let x=0;x<b;x++){const v=w[x],{filter:{event:C,schema:S,table:L,filter:k}}=v,A=m&&m[x];if(A&&A.event===C&&A.schema===S&&A.table===L&&A.filter===k)y.push(Object.assign(Object.assign({},v),{id:A.id}));else{this.unsubscribe(),this.state=bn.errored,e==null||e(ja.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ja.SUBSCRIBED);return}}).receive("error",m=>{this.state=bn.errored,e==null||e(ja.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ja.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===bn.joined&&e===ep.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var i;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const f=await o.json();c=f.error||f.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var a,o,c;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&r("ok"),f.receive("ok",()=>r("ok")),f.receive("error",()=>r("error")),f.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qi.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Tv(this,Qi.leave,{},e),s.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const i=new AbortController,r=setTimeout(()=>i.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Tv(this,e,t,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>RR){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var i,r;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:f,join:d}=Qi;if(s&&[o,c,f,d].indexOf(a)>=0&&s!==this._joinRef())return;let p=this._onMessage(a,t,s);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,w,b;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(w=m.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(m=>m.callback(p,s)):(r=this.bindings[a])===null||r===void 0||r.filter(m=>{var g,w,b,y,x,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const C=m.id,S=(g=m.filter)===null||g===void 0?void 0:g.event;return C&&((w=t.ids)===null||w===void 0?void 0:w.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(x=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:w,table:b,commit_timestamp:y,type:x,errors:v}=g;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(g))}m.callback(p,s)})}_isClosed(){return this.state===bn.closed}_isJoined(){return this.state===bn.joined}_isJoining(){return this.state===bn.joining}_isLeaving(){return this.state===bn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:s};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===s&&ij.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qi.close,{},e)}_onError(e){this._on(Qi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=BM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=BM(e.columns,e.old_record)),t}}const Iv=()=>{},v1={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},GR=[1e3,2e3,5e3,1e4],WR=1e4,YR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VR{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tx,this.transport=null,this.heartbeatIntervalMs=v1.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Iv,this.ref=0,this.reconnectTimer=null,this.vsn=zM,this.logger=Iv,this.conn=null,this.sendBuffer=[],this.serializer=new OR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${nx.websocket}`,this.httpEndpoint=Ik(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case oc.connecting:return lc.Connecting;case oc.open:return lc.Open;case oc.closing:return lc.Closing;default:return lc.Closed}}isConnected(){return this.connectionState()===lc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(r=>r.topic===s);if(i)return i;{const r=new ij(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:s,payload:i,ref:r}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${r})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(PR,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},v1.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:r,ref:a}=t,o=a?`(${a})`:"",c=r.status||"";this.log("receive",`${c} ${s} ${i} ${o}`.trim(),r),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(i,r,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===oc.open||this.conn.readyState===oc.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${s}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([YR],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:IR};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Qi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ak(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},v1.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,i,r,a,o,c,f,d,h,p,m;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:tx,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:v1.HEARTBEAT_INTERVAL,this.worker=(r=e==null?void 0:e.worker)!==null&&r!==void 0?r:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Iv,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:zM,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:g=>GR[g-1]||WR,this.vsn){case Nk:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(g,w)=>w(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,w)=>w(JSON.parse(g));break;case DR:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class rj extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QR extends rj{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ix extends rj{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const aj=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),JR=()=>Response,rx=n=>{if(Array.isArray(n))return n.map(t=>rx(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const i=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=rx(s)}),e},qR=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Dv=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},ZR=(n,e,t)=>Ee(void 0,void 0,void 0,function*(){const s=yield JR();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const r=n.status||500,a=(i==null?void 0:i.statusCode)||r+"";e(new QR(Dv(i),r,a))}).catch(i=>{e(new ix(Dv(i),i))}):e(new ix(Dv(n),n))}),KR=(n,e,t,s)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?i:(qR(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s)):i.body=s,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Ag(n,e,t,s,i,r){return Ee(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,KR(e,s,i,r)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>ZR(c,o,s))})})}function vp(n,e,t,s){return Ee(this,void 0,void 0,function*(){return Ag(n,"GET",e,t,s)})}function dr(n,e,t,s,i){return Ee(this,void 0,void 0,function*(){return Ag(n,"POST",e,s,i,t)})}function ax(n,e,t,s,i){return Ee(this,void 0,void 0,function*(){return Ag(n,"PUT",e,s,i,t)})}function XR(n,e,t,s){return Ee(this,void 0,void 0,function*(){return Ag(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function oj(n,e,t,s,i){return Ee(this,void 0,void 0,function*(){return Ag(n,"DELETE",e,s,i,t)})}class e9{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}var Dk;class t9{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Dk]="BlobDownloadBuilder",this.promise=null}asStream(){return new e9(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}Dk=Symbol.toStringTag;const n9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$M={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s9{constructor(e,t={},s,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=aj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,i){return Ee(this,void 0,void 0,function*(){try{let r;const a=Object.assign(Object.assign({},$M),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),c&&r.append("metadata",this.encodeMetadata(c)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.has("cacheControl")||r.append("cacheControl",a.cacheControl),c&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(c))):(r=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const f=this._removeEmptyFolders(t),d=this._getFinalPath(f),h=yield(e=="PUT"?ax:dr)(this.fetch,`${this.url}/object/${d}`,r,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:h.Id,fullPath:h.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}upload(e,t,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,i){return Ee(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),a=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const f=Object.assign({upsert:$M.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",f.cacheControl)):(c=s,d["cache-control"]=`max-age=${f.cacheControl}`,d["content-type"]=f.contentType);const h=yield ax(this.fetch,o.toString(),c,{headers:d});return{data:{path:r,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Wt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const r=yield dr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),a=new URL(this.url+r.url),o=a.searchParams.get("token");if(!o)throw new rj("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ee(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}copy(e,t,s){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield dr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,s){return Ee(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield dr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${a}`)},{data:r,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,s){return Ee(this,void 0,void 0,function*(){try{const i=yield dr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${r}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=r?`?${r}`:"",o=this._getFinalPath(e),c=()=>vp(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new t9(c,this.shouldThrowOnError)}info(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield vp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:rx(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}exists(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield XR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s)&&s instanceof ix){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${f}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ee(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},n9),t),{prefix:e||""});return{data:yield dr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}listV2(e,t){return Ee(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield dr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Pk="2.83.0",Rk={"X-Client-Info":`storage-js/${Pk}`};class i9{constructor(e,t={},s,i){this.shouldThrowOnError=!1;const r=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rk),t),this.fetch=aj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ee(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield vp(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}getBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield vp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}createBucket(e){return Ee(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Ee(this,void 0,void 0,function*(){try{return{data:yield ax(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class r9{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rk),t),this.fetch=aj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}listBuckets(e){return Ee(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),i=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield vp(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}}const lj={"X-Client-Info":`storage-js/${Pk}`,"Content-Type":"application/json"};class Ok extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vi(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Pv extends Ok{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a9 extends Ok{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var HM;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(HM||(HM={}));const cj=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),o9=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},GM=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),l9=(n,e,t)=>Ee(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const i=n.status||500,r=n;if(typeof r.json=="function")r.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Pv(GM(a),i,o))}).catch(()=>{const a=i+"",o=r.statusText||`HTTP ${i} error`;e(new Pv(o,i,a))});else{const a=i+"",o=r.statusText||`HTTP ${i} error`;e(new Pv(o,i,a))}}else e(new a9(GM(n),n))}),c9=(n,e,t,s)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return s?(o9(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s)):i.body=s,Object.assign(Object.assign({},i),t)):i};function u9(n,e,t,s,i,r){return Ee(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,c9(e,s,i,r)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const f=c.headers.get("content-type");return!f||!f.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>l9(c,o,s))})})}function xi(n,e,t,s,i){return Ee(this,void 0,void 0,function*(){return u9(n,"POST",e,s,i,t)})}class f9{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lj),t),this.fetch=cj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield xi(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Ee(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vi(s))return{data:null,error:s};throw s}})}listIndexes(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Ee(this,void 0,void 0,function*(){try{return{data:(yield xi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vi(s))return{data:null,error:s};throw s}})}}class d9{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lj),t),this.fetch=cj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield xi(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}getVectors(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}listVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield xi(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}queryVectors(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield xi(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}}class h9{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lj),t),this.fetch=cj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield xi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}getBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}listBuckets(){return Ee(this,arguments,void 0,function*(e={}){try{return{data:yield xi(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield xi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vi(t))return{data:null,error:t};throw t}})}}class p9 extends h9{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new m9(this.url,this.headers,e,this.fetch)}}class m9 extends f9{constructor(e,t,s,i){super(e,t,i),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ee(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ee(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ee(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ee(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new g9(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class g9 extends d9{constructor(e,t,s,i,r){super(e,t,r),this.vectorBucketName=s,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ee(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ee(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ee(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ee(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ee(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class w9 extends i9{constructor(e,t={},s,i){super(e,t,s,i)}from(e){return new s9(this.url,this.headers,e,this.fetch)}get vectors(){return new p9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new r9(this.url+"/iceberg",this.headers,this.fetch)}}const y9="2.83.0";let b0="";typeof Deno<"u"?b0="deno":typeof document<"u"?b0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?b0="react-native":b0="node";const b9={"X-Client-Info":`supabase-js-${b0}/${y9}`},v9={headers:b9},x9={schema:"public"},_9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j9={},C9=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),M9=()=>Headers,L9=(n,e,t)=>{const s=C9(t),i=M9();return async(r,a)=>{var o;const c=(o=await e())!==null&&o!==void 0?o:n;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),s(r,Object.assign(Object.assign({},a),{headers:f}))}};function S9(n){return n.endsWith("/")?n:n+"/"}function E9(n,e){var t,s;const{db:i,auth:r,realtime:a,global:o}=n,{db:c,auth:f,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),r),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function k9(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S9(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const zk="2.83.0",hf=30*1e3,ox=3,Rv=ox*hf,N9="http://localhost:9999",A9="supabase.auth.token",T9={"X-Client-Info":`gotrue-js/${zk}`},lx="X-Supabase-Api-Version",Bk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D9=10*60*1e3;class xp extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ke(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class P9 extends xp{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function R9(n){return ke(n)&&n.name==="AuthApiError"}class cc extends xp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ql extends xp{constructor(e,t,s,i){super(e,s,i),this.name=t,this.status=s}}class Qs extends Ql{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function O9(n){return ke(n)&&n.name==="AuthSessionMissingError"}class af extends Ql{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class x1 extends Ql{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _1 extends Ql{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z9(n){return ke(n)&&n.name==="AuthImplicitGrantRedirectError"}class WM extends Ql{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cx extends Ql{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ov(n){return ke(n)&&n.name==="AuthRetryableFetchError"}class YM extends Ql{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ux extends Ql{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),VM=` 	
\r=`.split(""),B9=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<VM.length;e+=1)n[VM[e].charCodeAt(0)]=-2;for(let e=0;e<gy.length;e+=1)n[gy[e].charCodeAt(0)]=e;return n})();function QM(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(gy[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(gy[s]),e.queuedBits-=6}}function Fk(n,e,t){const s=B9[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function JM(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=a=>{$9(a,s,t)};for(let a=0;a<n.length;a+=1)Fk(n.charCodeAt(a),i,r);return e.join("")}function F9(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function U9(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}F9(s,e)}}function $9(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Qf(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Fk(n.charCodeAt(i),t,s);return new Uint8Array(e)}function H9(n){const e=[];return U9(n,t=>e.push(t)),new Uint8Array(e)}function gc(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};return n.forEach(i=>QM(i,t,s)),QM(null,t,s),e.join("")}function G9(n){return Math.round(Date.now()/1e3)+n}function W9(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",Xl={tested:!1,writable:!1},Uk=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xl.tested)return Xl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xl.tested=!0,Xl.writable=!0}catch{Xl.tested=!0,Xl.writable=!1}return Xl.writable};function Y9(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return t.searchParams.forEach((s,i)=>{e[i]=s}),e}const $k=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),V9=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",pf=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ec=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},So=async(n,e)=>{await n.removeItem(e)};class Sb{constructor(){this.promise=new Sb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Sb.promiseConstructor=Promise;function zv(n){const e=n.split(".");if(e.length!==3)throw new ux("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!I9.test(e[s]))throw new ux("JWT not in base64url format");return{header:JSON.parse(JM(e[0])),payload:JSON.parse(JM(e[1])),signature:Qf(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q9(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function J9(n,e){return new Promise((s,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const a=await n(r);if(!e(r,null,a)){s(a);return}}catch(a){if(!e(r,a)){i(a);return}}})()})}function q9(n){return("0"+n.toString(16)).substr(-2)}function Z9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,q9).join("")}async function K9(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(s);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function X9(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await K9(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function of(n,e,t=!1){const s=Z9();let i=s;t&&(i+="/PASSWORD_RECOVERY"),await pf(n,`${e}-code-verifier`,i);const r=await X9(s);return[r,s===r?"plain":"s256"]}const eO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tO(n){const e=n.headers.get(lx);if(!e||!e.match(eO))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nO(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function sO(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lf(n){if(!iO.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bv(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rO(n,e){return new Proxy(n,{get:(t,s,i)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,i)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,i)}})}function qM(n){return JSON.parse(JSON.stringify(n))}const sc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),aO=[502,503,504];async function ZM(n){var e;if(!V9(n))throw new cx(sc(n),0);if(aO.includes(n.status))throw new cx(sc(n),n.status);let t;try{t=await n.json()}catch(r){throw new cc(sc(r),r)}let s;const i=tO(n);if(i&&i.getTime()>=Bk["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new YM(sc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0))throw new YM(sc(t),n.status,t.weak_password.reasons);throw new P9(sc(t),n.status||500,s)}const oO=(n,e,t,s)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};async function Oe(n,e,t,s){var i;const r=Object.assign({},s==null?void 0:s.headers);r[lx]||(r[lx]=Bk["2024-01-01"].name),s!=null&&s.jwt&&(r.Authorization=`Bearer ${s.jwt}`);const a=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await lO(n,e,t+o,{headers:r,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function lO(n,e,t,s,i,r){const a=oO(e,s,i,r);let o;try{o=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new cx(sc(c),0)}if(o.ok||await ZM(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await ZM(c)}}function lr(n){var e;let t=null;fO(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=G9(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function KM(n){const e=lr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Po(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function cO(n){return{data:n,error:null}}function uO(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:r}=n,a=Fh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:r},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function XM(n){return n}function fO(n){return n.access_token&&n.refresh_token&&n.expires_in}const Fv=["global","local","others"];class dO{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=$k(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Fv[0]){if(Fv.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fv.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Po})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Fh(e,["options"]),i=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:uO,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Po})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,i,r,a,o,c;try{const f={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:XM});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);f[`${b}Page`]=w}),f.total=parseInt(p)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(ke(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){lf(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Po})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){lf(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Po})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){lf(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Po})}catch(s){if(ke(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){lf(e.userId);try{const{data:t,error:s}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:s}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){lf(e.userId),lf(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,i,r,a,o,c;try{const f={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:XM});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);f[`${b}Page`]=w}),f.total=parseInt(p)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(ke(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ke(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}}function eL(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const cf={debug:!!(globalThis&&Uk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hO extends Hk{}async function pO(n,e,t){cf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),cf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){cf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{cf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw cf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new hO(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(cf.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function mO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Gk(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function gO(n){return parseInt(n,16)}function wO(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function yO(n){var e;const{chainId:t,domain:s,expirationTime:i,issuedAt:r=new Date,nonce:a,notBefore:o,requestId:c,resources:f,scheme:d,uri:h,version:p}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const m=Gk(n.address),g=d?`${d}://${s}`:s,w=n.statement?`${n.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${m}

${w}`;let y=`URI: ${h}
Version: ${p}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${r.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),c&&(y+=`
Request ID: ${c}`),f){let x=`
Resources:`;for(const v of f){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}y+=x}return`${b}
${y}`}class dn extends Error{constructor({message:e,code:t,cause:s,name:i}){var r;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(r=i??(s instanceof Error?s.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=t}}class wy extends dn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function bO({error:n,options:e}){var t,s,i;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=r.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=r.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new dn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return r.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new dn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new dn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(Wk(a)){if(r.rp.id!==a)return new dn({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function vO({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new dn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(Wk(s)){if(t.rpId!==s)return new dn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class xO{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _O=new xO;function jO(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,i=Fh(n,["challenge","user","excludeCredentials"]),r=Qf(e).buffer,a=Object.assign(Object.assign({},t),{id:Qf(t.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:r,user:a});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const f=s[c];o.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:Qf(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return o}function CO(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=Fh(n,["challenge","allowCredentials"]),i=Qf(e).buffer,r=Object.assign(Object.assign({},s),{challenge:i});if(t&&t.length>0){r.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const o=t[a];r.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Qf(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return r}function MO(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:gc(new Uint8Array(n.response.attestationObject)),clientDataJSON:gc(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function LO(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:gc(new Uint8Array(i.authenticatorData)),clientDataJSON:gc(new Uint8Array(i.clientDataJSON)),signature:gc(new Uint8Array(i.signature)),userHandle:i.userHandle?gc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Wk(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function tL(){var n,e;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function SO(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wy("Browser returned unexpected credential type",e)}:{data:null,error:new wy("Empty credential response",e)}}catch(e){return{data:null,error:bO({error:e,options:n})}}}async function EO(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wy("Browser returned unexpected credential type",e)}:{data:null,error:new wy("Empty credential response",e)}}catch(e){return{data:null,error:vO({error:e,options:n})}}}const kO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yy(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),s={};for(const i of n)if(i)for(const r in i){const a=i[r];if(a!==void 0)if(Array.isArray(a))s[r]=a;else if(t(a))s[r]=a;else if(e(a)){const o=s[r];e(o)?s[r]=yy(o,a):s[r]=yy(a)}else s[r]=a}return s}function AO(n,e){return yy(kO,n,e||{})}function TO(n,e){return yy(NO,n,e||{})}class IO{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:i},r){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:o};const c=i??_O.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=AO(a.webauthn.credential_options.publicKey,r==null?void 0:r.create),{data:d,error:h}=await SO({publicKey:f,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const f=TO(a.webauthn.credential_options.publicKey,r==null?void 0:r.request),{data:d,error:h}=await EO(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new cc("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!t)return{data:null,error:new xp("rpId is required for WebAuthn authentication")};try{if(!tL())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:i},{request:r});if(!a)return{data:null,error:o};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:s,credential_response:c.credential_response}})}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new cc("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!t)return{data:null,error:new xp("rpId is required for WebAuthn registration")};try{if(!tL())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:i},{create:r});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new cc("Unexpected error in register",a)}}}}mO();const DO={url:N9,storageKey:A9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:T9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nL(n,e,t){return await t()}const uf={};class _p{get jwks(){var e,t;return(t=(e=uf[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){uf[this.storageKey]=Object.assign(Object.assign({},uf[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=uf[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){uf[this.storageKey]=Object.assign(Object.assign({},uf[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},DO),e);if(this.storageKey=r.storageKey,this.instanceID=(t=_p.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,_p.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&zn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new dO({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=$k(r.fetch),this.lock=r.lock||nL,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:zn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=pO:this.lock=nL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Uk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eL(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=eL(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${zk}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(zn()&&(t=Y9(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),zn()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:r}=await this._getSessionFromURL(t,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),z9(r)){const c=(e=r.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ke(t)?this._returnResult({error:t}):this._returnResult({error:new cc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,i;try{const r=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:lr}),{data:a,error:o}=r;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var t,s,i;try{let r;if("email"in e){const{email:d,password:h,options:p}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await of(this.storage,this.storageKey)),r=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},xform:lr})}else if("phone"in e){const{phone:d,password:h,options:p}=e;r=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:lr})}else throw new x1("You must provide either an email or phone number and a password");const{data:a,error:o}=r;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:a,options:o}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KM})}else if("phone"in e){const{phone:r,password:a,options:o}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KM})}else throw new x1("You must provide either an email or phone number and a password");const{data:s,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!s||!s.session||!s.user){const r=new af;return this._returnResult({data:{user:null,session:null},error:r})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,i,r,a,o,c,f,d,h,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:w,wallet:b,statement:y,options:x}=e;let v;if(zn())if(typeof b=="object")v=b;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")v=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=b}const C=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=Gk(S[0]);let k=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!k){const T=await v.request({method:"eth_chainId"});k=gO(T)}const A={domain:C.host,address:L,statement:y,uri:C.href,version:"1",chainId:k,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=x==null?void 0:x.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=yO(A),g=await v.request({method:"personal_sign",params:[wO(m),L]})}try{const{data:w,error:b}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:lr});if(b)throw b;if(!w||!w.session||!w.user){const y=new af;return this._returnResult({data:{user:null,session:null},error:y})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(ke(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var t,s,i,r,a,o,c,f,d,h,p,m;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:b,wallet:y,statement:x,options:v}=e;let C;if(zn())if(typeof y=="object")C=y;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))C=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const S=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in C&&C.signIn){const L=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let k;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")k=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)k=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)g=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),w=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((f=v==null?void 0:v.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const L=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=L}}try{const{data:b,error:y}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:gc(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:lr});if(y)throw y;if(!b||!b.session||!b.user){const x=new af;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(ke(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const t=await ec(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/");try{const{data:r,error:a}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:lr});if(await So(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!r||!r.session||!r.user){const o=new af;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:a})}catch(r){if(ke(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:t,provider:s,token:i,access_token:r,nonce:a}=e,o=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:lr}),{data:c,error:f}=o;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c||!c.session||!c.user){const d=new af;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:f})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,i,r,a;try{if("email"in e){const{email:o,options:c}=e;let f=null,d=null;this.flowType==="pkce"&&([f,d]=await of(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:o,options:c}=e,{data:f,error:d}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:d})}throw new x1("You must provide either an email or phone number.")}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,s;try{let i,r;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:lr});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,s,i,r,a;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await of(this.storage,this.storageKey));const f=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:cO});return!((r=f.data)===null||r===void 0)&&r.url&&zn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Qs;const{error:i}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ke(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:r}=e,{error:a}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:s,type:i,options:r}=e,{data:a,error:o}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new x1("You must provide either an email or phone number and a type")}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ec(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Rv:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await ec(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Bv()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=rO(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Po}):await this._useSession(async t=>{var s,i,r;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qs}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Po})})}catch(t){if(ke(t))return O9(t)&&(await this._removeSession(),await So(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:i,error:r}=s;if(r)throw r;if(!i.session)throw new Qs;const a=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await of(this.storage,this.storageKey));const{data:f,error:d}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Po});if(d)throw d;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(s){if(ke(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qs;const t=Date.now()/1e3;let s=t,i=!0,r=null;const{payload:a}=zv(e.access_token);if(a.exp&&(s=a.exp,i=s<=t),i){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};r=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;r={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(t){if(ke(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Qs;const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ke(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!zn())throw new _1("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _1(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new WM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _1("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new WM("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:r,refresh_token:a,expires_in:o,expires_at:c,token_type:f}=e;if(!r||!o||!a||!f)throw new _1("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let p=d+h;c&&(p=parseInt(c));const m=p-d;m*1e3<=hf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=p-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,d);const{data:w,error:b}=await this._getUser(r);if(b)throw b;const y={provider_token:s,provider_refresh_token:i,access_token:r,expires_in:h,expires_at:p,refresh_token:a,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(s){if(ke(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ec(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:i,error:r}=t;if(r)return this._returnResult({error:r});const a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(R9(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await So(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=W9(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,i;try{const{data:{session:r},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await of(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:i}=await this._useSession(async r=>{var a,o,c,f,d;const{data:h,error:p}=r;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(f=h.session)===null||f===void 0?void 0:f.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return zn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ke(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:i,data:{session:r}}=t;if(i)throw i;const{options:a,provider:o,token:c,access_token:f,nonce:d}=e,h=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=r==null?void 0:r.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:c,access_token:f,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lr}),{data:p,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new af}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,i;const{data:r,error:a}=t;if(a)throw a;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await J9(async i=>(i>0&&await Q9(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lr})),(i,r)=>{const a=200*Math.pow(2,i);return r&&Ov(r)&&Date.now()+a-s<hf})}catch(s){if(this._debug(t,"error",s),ke(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),zn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await ec(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ec(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await pf(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Bv()}else if(i&&!i.user&&!i.user){const a=await ec(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await So(this.storage,this.storageKey+"-user"),await pf(this.storage,this.storageKey,i)):i.user=Bv()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const r=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Rv;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Rv}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Ov(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Sb;const{data:r,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!r.session)throw new Qs;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const o={data:r.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(r){if(this._debug(i,"error",r),ke(r)){const a={data:null,error:r};return Ov(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){r.push(c)}});if(await Promise.all(a),r.length>0){for(let o=0;o<r.length;o+=1)console.error(r[o]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await pf(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const r=qM(i);await pf(this.storage,this.storageKey,r)}else{const i=qM(t);await pf(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await So(this.storage,this.storageKey),await So(this.storage,this.storageKey+"-code-verifier"),await So(this.storage,this.storageKey+"-user"),this.userStorage&&await So(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),hf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/hf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${hf}ms, refresh threshold is ${ox} ticks`),i<=ox&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Hk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const i=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[r,a]=await of(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(s!=null&&s.queryParams){const r=new URLSearchParams(s.queryParams);i.push(r.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;return r?this._returnResult({data:null,error:r}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,i;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:f}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?MO(e.webauthn.credential_response):LO(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const a=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:jO(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:CO(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(r),r.status==="verified"&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=zv(s.access_token);let a=null;r.aal&&(a=r.aal);let o=a;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(o="aal2");const f=r.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;return i?this._returnResult({data:null,error:i}):s?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Qs})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Qs});const a=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&zn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(s){if(ke(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Qs});const a=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&zn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(s){if(ke(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Qs})})}catch(e){if(ke(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;return i?this._returnResult({data:null,error:i}):s?await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Qs})})}catch(t){if(ke(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+D9>i)return s;const{data:r,error:a}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,s=r.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});s=m.session.access_token}const{header:i,payload:r,signature:a,raw:{header:o,payload:c}}=zv(s);t!=null&&t.allowExpired||nO(r.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:r,header:i,signature:a},error:null}}const d=sO(i.alg),h=await crypto.subtle.importKey("jwk",f,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,H9(`${o}.${c}`)))throw new ux("Invalid JWT signature");return{data:{claims:r,header:i,signature:a},error:null}}catch(s){if(ke(s))return this._returnResult({data:null,error:s});throw s}}}_p.nextInstanceID={};const PO=_p;class RO extends PO{constructor(e){super(e)}}class OO{constructor(e,t,s){var i,r,a;this.supabaseUrl=e,this.supabaseKey=t;const o=k9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,f={db:x9,realtime:j9,auth:Object.assign(Object.assign({},_9),{storageKey:c}),global:v9},d=E9(s??{},f);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=d.global.headers)!==null&&r!==void 0?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=L9(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new NR(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new w9(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new SR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:r,storageKey:a,flowType:o,lock:c,debug:f,throwOnError:d},h,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RO({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:r,flowType:o,lock:c,debug:f,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new VR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zO=(n,e,t)=>new OO(n,e,t);function BO(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}BO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const FO="https://txsblxqismjlsgsojdvc.supabase.co",UO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4c2JseHFpc21qbHNnc29qZHZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MDY1ODYsImV4cCI6MjA3OTA4MjU4Nn0.fe7WFdjwkrcrShvV-UAf7vTH1w3uLwOM1LTKxjbQLIY",it=zO(FO,UO);function $O(){var o;const n=(navigator.userAgent||navigator.vendor||window.opera||"").toLowerCase(),t=/android|webos|iphone|ipod|blackberry|iemobile|opera mini/.test(n),s=((o=navigator.userAgentData)==null?void 0:o.mobile)===!0,i="ontouchstart"in window||navigator.maxTouchPoints>0,a=Math.min(window.innerWidth,window.innerHeight)<=820;return t||s||i&&a}function HO(){const n=navigator.userAgent.toLowerCase();return(n.includes("ipad")||n.includes("android")&&!n.includes("mobile"))&&window.innerWidth>=768&&window.innerWidth<=1224}function Yk(){return $O()?"mobile":HO()?"tablet":"desktop"}const Vk="lmdcvtc_",uj=`${Vk}auth`,fj=`${Vk}session`;function GO(n){try{return btoa(JSON.stringify(n))}catch(e){return console.error("Erreur d'encodage:",e),null}}function sL(n){try{return JSON.parse(atob(n))}catch(e){return console.error("Erreur de dcodage:",e),null}}function Qk(n,e=!0){if(!n)return!1;const t={session:n,timestamp:Date.now(),rememberMe:e};try{const s=GO(t);return e?localStorage.setItem(uj,s):sessionStorage.setItem(fj,s),!0}catch(s){return console.error("Erreur de sauvegarde:",s),!1}}function WO(){try{const n=localStorage.getItem(uj);if(n){const t=sL(n);if(t&&t.session){if(Date.now()-t.timestamp<2592e6)return t.session;fx()}}const e=sessionStorage.getItem(fj);if(e){const t=sL(e);return(t==null?void 0:t.session)||null}return null}catch(n){return console.error("Erreur de rcupration:",n),null}}function fx(){try{return localStorage.removeItem(uj),sessionStorage.removeItem(fj),!0}catch(n){return console.error("Erreur de suppression:",n),!1}}const YO="discussion_prefs_v1";function iL(){try{const n=localStorage.getItem(YO);return n?JSON.parse(n):{theme:"system",wallpaper:"default",wallpaperDoodles:!0,spellCheck:!0,emojiReplace:!0,enterToSend:!0}}catch{return{theme:"system",wallpaper:"default",wallpaperDoodles:!0,spellCheck:!0,emojiReplace:!0,enterToSend:!0}}}function Uv(n){const e=document.documentElement;if(n==="system"){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;e.setAttribute("data-theme",t?"dark":"light")}else e.setAttribute("data-theme",n)}function rL(n,e){const t=document.documentElement,s={default:null,teal:"#075e54",blue:"#1a2332",grey:"#2a2a2a",purple:"#3d2a4d",brown:"#3a2a1a",red:"#4a1a1a","dark-teal":"#0a3d2a"};if(n==="default")t.style.setProperty("--chat-wallpaper-color","transparent"),t.style.setProperty("--chat-wallpaper-opacity","0"),t.style.setProperty("--chat-wallpaper-pattern","none");else{const i=s[n];i&&(t.style.setProperty("--chat-wallpaper-color",i),t.style.setProperty("--chat-wallpaper-opacity","0.15"),e?t.style.setProperty("--chat-wallpaper-pattern",`url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='doodles' patternUnits='userSpaceOnUse' width='100' height='100'%3E%3Ccircle cx='20' cy='20' r='2' fill='rgba(255,255,255,0.08)'/%3E%3Ccircle cx='80' cy='40' r='1.5' fill='rgba(255,255,255,0.06)'/%3E%3Ccircle cx='50' cy='70' r='1' fill='rgba(255,255,255,0.04)'/%3E%3Ccircle cx='30' cy='90' r='1.5' fill='rgba(255,255,255,0.05)'/%3E%3Ccircle cx='70' cy='10' r='1' fill='rgba(255,255,255,0.04)'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23doodles)'/%3E%3C/svg%3E")`):t.style.setProperty("--chat-wallpaper-pattern","none"))}}function Tg(){const[n,e]=_.useState(()=>{const t=iL();return Uv(t.theme),rL(t.wallpaper,t.wallpaperDoodles),t});return _.useEffect(()=>{const t=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{n.theme==="system"&&Uv("system")};return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[n.theme]),_.useEffect(()=>{const t=()=>{const i=iL();e(i),Uv(i.theme),rL(i.wallpaper,i.wallpaperDoodles)};window.addEventListener("storage",t);const s=()=>t();return window.addEventListener("prefsUpdated",s),()=>{window.removeEventListener("storage",t),window.removeEventListener("prefsUpdated",s)}},[]),n}function Jk(n,e){return function(){return n.apply(e,arguments)}}const{toString:VO}=Object.prototype,{getPrototypeOf:dj}=Object,{iterator:Eb,toStringTag:qk}=Symbol,kb=(n=>e=>{const t=VO.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rr=n=>(n=n.toLowerCase(),e=>kb(e)===n),Nb=n=>e=>typeof e===n,{isArray:Hh}=Array,Ih=Nb("undefined");function Ig(n){return n!==null&&!Ih(n)&&n.constructor!==null&&!Ih(n.constructor)&&Gs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Zk=Rr("ArrayBuffer");function QO(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Zk(n.buffer),e}const JO=Nb("string"),Gs=Nb("function"),Kk=Nb("number"),Dg=n=>n!==null&&typeof n=="object",qO=n=>n===!0||n===!1,X1=n=>{if(kb(n)!=="object")return!1;const e=dj(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(qk in n)&&!(Eb in n)},ZO=n=>{if(!Dg(n)||Ig(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},KO=Rr("Date"),XO=Rr("File"),ez=Rr("Blob"),tz=Rr("FileList"),nz=n=>Dg(n)&&Gs(n.pipe),sz=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Gs(n.append)&&((e=kb(n))==="formdata"||e==="object"&&Gs(n.toString)&&n.toString()==="[object FormData]"))},iz=Rr("URLSearchParams"),[rz,az,oz,lz]=["ReadableStream","Request","Response","Headers"].map(Rr),cz=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pg(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),Hh(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(Ig(n))return;const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let o;for(s=0;s<a;s++)o=r[s],e.call(null,n[o],o,n)}}function Xk(n,e){if(Ig(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eN=n=>!Ih(n)&&n!==wc;function dx(){const{caseless:n,skipUndefined:e}=eN(this)&&this||{},t={},s=(i,r)=>{const a=n&&Xk(t,r)||r;X1(t[a])&&X1(i)?t[a]=dx(t[a],i):X1(i)?t[a]=dx({},i):Hh(i)?t[a]=i.slice():(!e||!Ih(i))&&(t[a]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Pg(arguments[i],s);return t}const uz=(n,e,t,{allOwnKeys:s}={})=>(Pg(e,(i,r)=>{t&&Gs(i)?n[r]=Jk(i,t):n[r]=i},{allOwnKeys:s}),n),fz=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),dz=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},hz=(n,e,t,s)=>{let i,r,a;const o={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)a=i[r],(!s||s(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&dj(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},pz=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},mz=n=>{if(!n)return null;if(Hh(n))return n;let e=n.length;if(!Kk(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},gz=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&dj(Uint8Array)),wz=(n,e)=>{const s=(n&&n[Eb]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},yz=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},bz=Rr("HTMLFormElement"),vz=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),aL=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),xz=Rr("RegExp"),tN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Pg(t,(i,r)=>{let a;(a=e(i,r,n))!==!1&&(s[r]=a||i)}),Object.defineProperties(n,s)},_z=n=>{tN(n,(e,t)=>{if(Gs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Gs(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},jz=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return Hh(n)?s(n):s(String(n).split(e)),t},Cz=()=>{},Mz=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Lz(n){return!!(n&&Gs(n.append)&&n[qk]==="FormData"&&n[Eb])}const Sz=n=>{const e=new Array(10),t=(s,i)=>{if(Dg(s)){if(e.indexOf(s)>=0)return;if(Ig(s))return s;if(!("toJSON"in s)){e[i]=s;const r=Hh(s)?[]:{};return Pg(s,(a,o)=>{const c=t(a,i+1);!Ih(c)&&(r[o]=c)}),e[i]=void 0,r}}return s};return t(n,0)},Ez=Rr("AsyncFunction"),kz=n=>n&&(Dg(n)||Gs(n))&&Gs(n.then)&&Gs(n.catch),nN=((n,e)=>n?setImmediate:e?((t,s)=>(wc.addEventListener("message",({source:i,data:r})=>{i===wc&&r===t&&s.length&&s.shift()()},!1),i=>{s.push(i),wc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Gs(wc.postMessage)),Nz=typeof queueMicrotask<"u"?queueMicrotask.bind(wc):typeof process<"u"&&process.nextTick||nN,Az=n=>n!=null&&Gs(n[Eb]),F={isArray:Hh,isArrayBuffer:Zk,isBuffer:Ig,isFormData:sz,isArrayBufferView:QO,isString:JO,isNumber:Kk,isBoolean:qO,isObject:Dg,isPlainObject:X1,isEmptyObject:ZO,isReadableStream:rz,isRequest:az,isResponse:oz,isHeaders:lz,isUndefined:Ih,isDate:KO,isFile:XO,isBlob:ez,isRegExp:xz,isFunction:Gs,isStream:nz,isURLSearchParams:iz,isTypedArray:gz,isFileList:tz,forEach:Pg,merge:dx,extend:uz,trim:cz,stripBOM:fz,inherits:dz,toFlatObject:hz,kindOf:kb,kindOfTest:Rr,endsWith:pz,toArray:mz,forEachEntry:wz,matchAll:yz,isHTMLForm:bz,hasOwnProperty:aL,hasOwnProp:aL,reduceDescriptors:tN,freezeMethods:_z,toObjectSet:jz,toCamelCase:vz,noop:Cz,toFiniteNumber:Mz,findKey:Xk,global:wc,isContextDefined:eN,isSpecCompliantForm:Lz,toJSONObject:Sz,isAsyncFn:Ez,isThenable:kz,setImmediate:nN,asap:Nz,isIterable:Az};function Ge(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}F.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const sN=Ge.prototype,iN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{iN[n]={value:n}});Object.defineProperties(Ge,iN);Object.defineProperty(sN,"isAxiosError",{value:!0});Ge.from=(n,e,t,s,i,r)=>{const a=Object.create(sN);F.toFlatObject(n,a,function(d){return d!==Error.prototype},f=>f!=="isAxiosError");const o=n&&n.message?n.message:"Error",c=e==null&&n?n.code:e;return Ge.call(a,o,c,t,s,i),n&&a.cause==null&&Object.defineProperty(a,"cause",{value:n,configurable:!0}),a.name=n&&n.name||"Error",r&&Object.assign(a,r),a};const Tz=null;function hx(n){return F.isPlainObject(n)||F.isArray(n)}function rN(n){return F.endsWith(n,"[]")?n.slice(0,-2):n}function oL(n,e,t){return n?n.concat(e).map(function(i,r){return i=rN(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function Iz(n){return F.isArray(n)&&!n.some(hx)}const Dz=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Ab(n,e,t){if(!F.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=F.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!F.isUndefined(b[w])});const s=t.metaTokens,i=t.visitor||d,r=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(i))throw new TypeError("visitor must be a function");function f(g){if(g===null)return"";if(F.isDate(g))return g.toISOString();if(F.isBoolean(g))return g.toString();if(!c&&F.isBlob(g))throw new Ge("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(g)||F.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,w,b){let y=g;if(g&&!b&&typeof g=="object"){if(F.endsWith(w,"{}"))w=s?w:w.slice(0,-2),g=JSON.stringify(g);else if(F.isArray(g)&&Iz(g)||(F.isFileList(g)||F.endsWith(w,"[]"))&&(y=F.toArray(g)))return w=rN(w),y.forEach(function(v,C){!(F.isUndefined(v)||v===null)&&e.append(a===!0?oL([w],C,r):a===null?w:w+"[]",f(v))}),!1}return hx(g)?!0:(e.append(oL(b,w,r),f(g)),!1)}const h=[],p=Object.assign(Dz,{defaultVisitor:d,convertValue:f,isVisitable:hx});function m(g,w){if(!F.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(g),F.forEach(g,function(y,x){(!(F.isUndefined(y)||y===null)&&i.call(e,y,F.isString(x)?x.trim():x,w,p))===!0&&m(y,w?w.concat(x):[x])}),h.pop()}}if(!F.isObject(n))throw new TypeError("data must be an object");return m(n),e}function lL(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function hj(n,e){this._pairs=[],n&&Ab(n,this,e)}const aN=hj.prototype;aN.append=function(e,t){this._pairs.push([e,t])};aN.toString=function(e){const t=e?function(s){return e.call(this,s,lL)}:lL;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Pz(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function oN(n,e,t){if(!e)return n;const s=t&&t.encode||Pz;F.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=F.isURLSearchParams(e)?e.toString():new hj(e,t).toString(s),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class cL{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(s){s!==null&&e(s)})}}const lN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rz=typeof URLSearchParams<"u"?URLSearchParams:hj,Oz=typeof FormData<"u"?FormData:null,zz=typeof Blob<"u"?Blob:null,Bz={isBrowser:!0,classes:{URLSearchParams:Rz,FormData:Oz,Blob:zz},protocols:["http","https","file","blob","url","data"]},pj=typeof window<"u"&&typeof document<"u",px=typeof navigator=="object"&&navigator||void 0,Fz=pj&&(!px||["ReactNative","NativeScript","NS"].indexOf(px.product)<0),Uz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$z=pj&&window.location.href||"http://localhost",Hz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pj,hasStandardBrowserEnv:Fz,hasStandardBrowserWebWorkerEnv:Uz,navigator:px,origin:$z},Symbol.toStringTag,{value:"Module"})),us={...Hz,...Bz};function Gz(n,e){return Ab(n,new us.classes.URLSearchParams,{visitor:function(t,s,i,r){return us.isNode&&F.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Wz(n){return F.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Yz(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function cN(n){function e(t,s,i,r){let a=t[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=r>=t.length;return a=!a&&F.isArray(i)?i.length:a,c?(F.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!o):((!i[a]||!F.isObject(i[a]))&&(i[a]=[]),e(t,s,i[a],r)&&F.isArray(i[a])&&(i[a]=Yz(i[a])),!o)}if(F.isFormData(n)&&F.isFunction(n.entries)){const t={};return F.forEachEntry(n,(s,i)=>{e(Wz(s),i,t,0)}),t}return null}function Vz(n,e,t){if(F.isString(n))try{return(e||JSON.parse)(n),F.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Rg={transitional:lN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=F.isObject(e);if(r&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return i?JSON.stringify(cN(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Gz(e,this.formSerializer).toString();if((o=F.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ab(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),Vz(e)):e}],transformResponse:[function(e){const t=this.transitional||Rg.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(s&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Ge.from(o,Ge.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:us.classes.FormData,Blob:us.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],n=>{Rg.headers[n]={}});const Qz=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jz=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),s=a.substring(i+1).trim(),!(!t||e[t]&&Qz[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},uL=Symbol("internals");function o0(n){return n&&String(n).trim().toLowerCase()}function ew(n){return n===!1||n==null?n:F.isArray(n)?n.map(ew):String(n)}function qz(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const Zz=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function $v(n,e,t,s,i){if(F.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!F.isString(e)){if(F.isString(s))return e.indexOf(s)!==-1;if(F.isRegExp(s))return s.test(e)}}function Kz(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Xz(n,e){const t=F.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,a){return this[s].call(this,e,i,r,a)},configurable:!0})})}let Ws=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(o,c,f){const d=o0(c);if(!d)throw new Error("header name must be a non-empty string");const h=F.findKey(i,d);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||c]=ew(o))}const a=(o,c)=>F.forEach(o,(f,d)=>r(f,d,c));if(F.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(F.isString(e)&&(e=e.trim())&&!Zz(e))a(Jz(e),t);else if(F.isObject(e)&&F.isIterable(e)){let o={},c,f;for(const d of e){if(!F.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[f=d[0]]=(c=o[f])?F.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(o,t)}else e!=null&&r(t,e,s);return this}get(e,t){if(e=o0(e),e){const s=F.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return qz(i);if(F.isFunction(t))return t.call(this,i,s);if(F.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=o0(e),e){const s=F.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||$v(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(a){if(a=o0(a),a){const o=F.findKey(s,a);o&&(!t||$v(s,s[o],o,t))&&(delete s[o],i=!0)}}return F.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||$v(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return F.forEach(this,(i,r)=>{const a=F.findKey(s,r);if(a){t[a]=ew(i),delete t[r];return}const o=e?Kz(r):String(r).trim();o!==r&&delete t[r],t[o]=ew(i),s[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return F.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&F.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[uL]=this[uL]={accessors:{}}).accessors,i=this.prototype;function r(a){const o=o0(a);s[o]||(Xz(i,a),s[o]=!0)}return F.isArray(e)?e.forEach(r):r(e),this}};Ws.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Ws.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});F.freezeMethods(Ws);function Hv(n,e){const t=this||Rg,s=e||t,i=Ws.from(s.headers);let r=s.data;return F.forEach(n,function(o){r=o.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function uN(n){return!!(n&&n.__CANCEL__)}function Gh(n,e,t){Ge.call(this,n??"canceled",Ge.ERR_CANCELED,e,t),this.name="CanceledError"}F.inherits(Gh,Ge,{__CANCEL__:!0});function fN(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new Ge("Request failed with status code "+t.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function e8(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function t8(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),d=s[r];a||(a=f),t[i]=c,s[i]=f;let h=r,p=0;for(;h!==i;)p+=t[h++],h=h%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),f-a<e)return;const m=d&&f-d;return m?Math.round(p*1e3/m):void 0}}function n8(n,e){let t=0,s=1e3/e,i,r;const a=(f,d=Date.now())=>{t=d,i=null,r&&(clearTimeout(r),r=null),n(...f)};return[(...f)=>{const d=Date.now(),h=d-t;h>=s?a(f,d):(i=f,r||(r=setTimeout(()=>{r=null,a(i)},s-h)))},()=>i&&a(i)]}const by=(n,e,t=3)=>{let s=0;const i=t8(50,250);return n8(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,c=a-s,f=i(c),d=a<=o;s=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:f||void 0,estimated:f&&o&&d?(o-a)/f:void 0,event:r,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(h)},t)},fL=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},dL=n=>(...e)=>F.asap(()=>n(...e)),s8=us.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,us.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(us.origin),us.navigator&&/(msie|trident)/i.test(us.navigator.userAgent)):()=>!0,i8=us.hasStandardBrowserEnv?{write(n,e,t,s,i,r,a){if(typeof document>"u")return;const o=[`${n}=${encodeURIComponent(e)}`];F.isNumber(t)&&o.push(`expires=${new Date(t).toUTCString()}`),F.isString(s)&&o.push(`path=${s}`),F.isString(i)&&o.push(`domain=${i}`),r===!0&&o.push("secure"),F.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function r8(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function a8(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function dN(n,e,t){let s=!r8(e);return n&&(s||t==!1)?a8(n,e):e}const hL=n=>n instanceof Ws?{...n}:n;function $u(n,e){e=e||{};const t={};function s(f,d,h,p){return F.isPlainObject(f)&&F.isPlainObject(d)?F.merge.call({caseless:p},f,d):F.isPlainObject(d)?F.merge({},d):F.isArray(d)?d.slice():d}function i(f,d,h,p){if(F.isUndefined(d)){if(!F.isUndefined(f))return s(void 0,f,h,p)}else return s(f,d,h,p)}function r(f,d){if(!F.isUndefined(d))return s(void 0,d)}function a(f,d){if(F.isUndefined(d)){if(!F.isUndefined(f))return s(void 0,f)}else return s(void 0,d)}function o(f,d,h){if(h in e)return s(f,d);if(h in n)return s(void 0,f)}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,d,h)=>i(hL(f),hL(d),h,!0)};return F.forEach(Object.keys({...n,...e}),function(d){const h=c[d]||i,p=h(n[d],e[d],d);F.isUndefined(p)&&h!==o||(t[d]=p)}),t}const hN=n=>{const e=$u({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:a,auth:o}=e;if(e.headers=a=Ws.from(a),e.url=oN(dN(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),F.isFormData(t)){if(us.hasStandardBrowserEnv||us.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(F.isFunction(t.getHeaders)){const c=t.getHeaders(),f=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{f.includes(d.toLowerCase())&&a.set(d,h)})}}if(us.hasStandardBrowserEnv&&(s&&F.isFunction(s)&&(s=s(e)),s||s!==!1&&s8(e.url))){const c=i&&r&&i8.read(r);c&&a.set(i,c)}return e},o8=typeof XMLHttpRequest<"u",l8=o8&&function(n){return new Promise(function(t,s){const i=hN(n);let r=i.data;const a=Ws.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:f}=i,d,h,p,m,g;function w(){m&&m(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const v=Ws.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:v,config:n,request:b};fN(function(k){t(k),w()},function(k){s(k),w()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(s(new Ge("Request aborted",Ge.ECONNABORTED,n,b)),b=null)},b.onerror=function(C){const S=C&&C.message?C.message:"Network Error",L=new Ge(S,Ge.ERR_NETWORK,n,b);L.event=C||null,s(L),b=null},b.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||lN;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),s(new Ge(C,S.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,n,b)),b=null},r===void 0&&a.setContentType(null),"setRequestHeader"in b&&F.forEach(a.toJSON(),function(C,S){b.setRequestHeader(S,C)}),F.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),f&&([p,g]=by(f,!0),b.addEventListener("progress",p)),c&&b.upload&&([h,m]=by(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=v=>{b&&(s(!v||v.type?new Gh(null,n,b):v),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const x=e8(i.url);if(x&&us.protocols.indexOf(x)===-1){s(new Ge("Unsupported protocol "+x+":",Ge.ERR_BAD_REQUEST,n));return}b.send(r||null)})},c8=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const r=function(f){if(!i){i=!0,o();const d=f instanceof Error?f:this.reason;s.abort(d instanceof Ge?d:new Gh(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,r(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(r):f.removeEventListener("abort",r)}),n=null)};n.forEach(f=>f.addEventListener("abort",r));const{signal:c}=s;return c.unsubscribe=()=>F.asap(o),c}},u8=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},f8=async function*(n,e){for await(const t of d8(n))yield*u8(t,e)},d8=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},pL=(n,e,t,s)=>{const i=f8(n,e);let r=0,a,o=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:f,value:d}=await i.next();if(f){o(),c.close();return}let h=d.byteLength;if(t){let p=r+=h;t(p)}c.enqueue(new Uint8Array(d))}catch(f){throw o(f),f}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},mL=64*1024,{isFunction:j1}=F,h8=(({Request:n,Response:e})=>({Request:n,Response:e}))(F.global),{ReadableStream:gL,TextEncoder:wL}=F.global,yL=(n,...e)=>{try{return!!n(...e)}catch{return!1}},p8=n=>{n=F.merge.call({skipUndefined:!0},h8,n);const{fetch:e,Request:t,Response:s}=n,i=e?j1(e):typeof fetch=="function",r=j1(t),a=j1(s);if(!i)return!1;const o=i&&j1(gL),c=i&&(typeof wL=="function"?(g=>w=>g.encode(w))(new wL):async g=>new Uint8Array(await new t(g).arrayBuffer())),f=r&&o&&yL(()=>{let g=!1;const w=new t(us.origin,{body:new gL,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!w}),d=a&&o&&yL(()=>F.isReadableStream(new s("").body)),h={stream:d&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!h[g]&&(h[g]=(w,b)=>{let y=w&&w[g];if(y)return y.call(w);throw new Ge(`Response type '${g}' is not supported`,Ge.ERR_NOT_SUPPORT,b)})});const p=async g=>{if(g==null)return 0;if(F.isBlob(g))return g.size;if(F.isSpecCompliantForm(g))return(await new t(us.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(F.isArrayBufferView(g)||F.isArrayBuffer(g))return g.byteLength;if(F.isURLSearchParams(g)&&(g=g+""),F.isString(g))return(await c(g)).byteLength},m=async(g,w)=>{const b=F.toFiniteNumber(g.getContentLength());return b??p(w)};return async g=>{let{url:w,method:b,data:y,signal:x,cancelToken:v,timeout:C,onDownloadProgress:S,onUploadProgress:L,responseType:k,headers:A,withCredentials:T="same-origin",fetchOptions:I}=hN(g),N=e||fetch;k=k?(k+"").toLowerCase():"text";let R=c8([x,v&&v.toAbortSignal()],C),B=null;const P=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let Y;try{if(L&&f&&b!=="get"&&b!=="head"&&(Y=await m(A,y))!==0){let de=new t(w,{method:"POST",body:y,duplex:"half"}),le;if(F.isFormData(y)&&(le=de.headers.get("content-type"))&&A.setContentType(le),de.body){const[H,me]=fL(Y,by(dL(L)));y=pL(de.body,mL,H,me)}}F.isString(T)||(T=T?"include":"omit");const $=r&&"credentials"in t.prototype,X={...I,signal:R,method:b.toUpperCase(),headers:A.normalize().toJSON(),body:y,duplex:"half",credentials:$?T:void 0};B=r&&new t(w,X);let O=await(r?N(B,I):N(w,X));const G=d&&(k==="stream"||k==="response");if(d&&(S||G&&P)){const de={};["status","statusText","headers"].forEach(q=>{de[q]=O[q]});const le=F.toFiniteNumber(O.headers.get("content-length")),[H,me]=S&&fL(le,by(dL(S),!0))||[];O=new s(pL(O.body,mL,H,()=>{me&&me(),P&&P()}),de)}k=k||"text";let ne=await h[F.findKey(h,k)||"text"](O,g);return!G&&P&&P(),await new Promise((de,le)=>{fN(de,le,{data:ne,headers:Ws.from(O.headers),status:O.status,statusText:O.statusText,config:g,request:B})})}catch($){throw P&&P(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,g,B),{cause:$.cause||$}):Ge.from($,$&&$.code,g,B)}}},m8=new Map,pN=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:i}=e,r=[s,i,t];let a=r.length,o=a,c,f,d=m8;for(;o--;)c=r[o],f=d.get(c),f===void 0&&d.set(c,f=o?new Map:p8(e)),d=f;return f};pN();const mj={http:Tz,xhr:l8,fetch:{get:pN}};F.forEach(mj,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const bL=n=>`- ${n}`,g8=n=>F.isFunction(n)||n===null||n===!1;function w8(n,e){n=F.isArray(n)?n:[n];const{length:t}=n;let s,i;const r={};for(let a=0;a<t;a++){s=n[a];let o;if(i=s,!g8(s)&&(i=mj[(o=String(s)).toLowerCase()],i===void 0))throw new Ge(`Unknown adapter '${o}'`);if(i&&(F.isFunction(i)||(i=i.get(e))))break;r[o||"#"+a]=i}if(!i){const a=Object.entries(r).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(bL).join(`
`):" "+bL(a[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const mN={getAdapter:w8,adapters:mj};function Gv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Gh(null,n)}function vL(n){return Gv(n),n.headers=Ws.from(n.headers),n.data=Hv.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),mN.getAdapter(n.adapter||Rg.adapter,n)(n).then(function(s){return Gv(n),s.data=Hv.call(n,n.transformResponse,s),s.headers=Ws.from(s.headers),s},function(s){return uN(s)||(Gv(n),s&&s.response&&(s.response.data=Hv.call(n,n.transformResponse,s.response),s.response.headers=Ws.from(s.response.headers))),Promise.reject(s)})}const gN="1.13.2",Tb={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Tb[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const xL={};Tb.transitional=function(e,t,s){function i(r,a){return"[Axios v"+gN+"] Transitional option '"+r+"'"+a+(s?". "+s:"")}return(r,a,o)=>{if(e===!1)throw new Ge(i(a," has been removed"+(t?" in "+t:"")),Ge.ERR_DEPRECATED);return t&&!xL[a]&&(xL[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};Tb.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function y8(n,e,t){if(typeof n!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],a=e[r];if(a){const o=n[r],c=o===void 0||a(o,r,n);if(c!==!0)throw new Ge("option "+r+" must be "+c,Ge.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ge("Unknown option "+r,Ge.ERR_BAD_OPTION)}}const tw={assertOptions:y8,validators:Tb},zr=tw.validators;let Ru=class{constructor(e){this.defaults=e||{},this.interceptors={request:new cL,response:new cL}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$u(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&tw.assertOptions(s,{silentJSONParsing:zr.transitional(zr.boolean),forcedJSONParsing:zr.transitional(zr.boolean),clarifyTimeoutError:zr.transitional(zr.boolean)},!1),i!=null&&(F.isFunction(i)?t.paramsSerializer={serialize:i}:tw.assertOptions(i,{encode:zr.function,serialize:zr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tw.assertOptions(t,{baseUrl:zr.spelling("baseURL"),withXsrfToken:zr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&F.merge(r.common,r[t.method]);r&&F.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),t.headers=Ws.concat(a,r);const o=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(c=c&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const f=[];this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});let d,h=0,p;if(!c){const g=[vL.bind(this),void 0];for(g.unshift(...o),g.push(...f),p=g.length,d=Promise.resolve(t);h<p;)d=d.then(g[h++],g[h++]);return d}p=o.length;let m=t;for(;h<p;){const g=o[h++],w=o[h++];try{m=g(m)}catch(b){w.call(this,b);break}}try{d=vL.call(this,m)}catch(g){return Promise.reject(g)}for(h=0,p=f.length;h<p;)d=d.then(f[h++],f[h++]);return d}getUri(e){e=$u(this.defaults,e);const t=dN(e.baseURL,e.url,e.allowAbsoluteUrls);return oN(t,e.params,e.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(e){Ru.prototype[e]=function(t,s){return this.request($u(s||{},{method:e,url:t,data:(s||{}).data}))}});F.forEach(["post","put","patch"],function(e){function t(s){return function(r,a,o){return this.request($u(o||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}Ru.prototype[e]=t(),Ru.prototype[e+"Form"]=t(!0)});let b8=class wN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const a=new Promise(o=>{s.subscribe(o),r=o}).then(i);return a.cancel=function(){s.unsubscribe(r)},a},e(function(r,a,o){s.reason||(s.reason=new Gh(r,a,o),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wN(function(i){e=i}),cancel:e}}};function v8(n){return function(t){return n.apply(null,t)}}function x8(n){return F.isObject(n)&&n.isAxiosError===!0}const mx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mx).forEach(([n,e])=>{mx[e]=n});function yN(n){const e=new Ru(n),t=Jk(Ru.prototype.request,e);return F.extend(t,Ru.prototype,e,{allOwnKeys:!0}),F.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return yN($u(n,i))},t}const ln=yN(Rg);ln.Axios=Ru;ln.CanceledError=Gh;ln.CancelToken=b8;ln.isCancel=uN;ln.VERSION=gN;ln.toFormData=Ab;ln.AxiosError=Ge;ln.Cancel=ln.CanceledError;ln.all=function(e){return Promise.all(e)};ln.spread=v8;ln.isAxiosError=x8;ln.mergeConfig=$u;ln.AxiosHeaders=Ws;ln.formToJSON=n=>cN(F.isHTMLForm(n)?new FormData(n):n);ln.getAdapter=mN.getAdapter;ln.HttpStatusCode=mx;ln.default=ln;const{Axios:VG,AxiosError:QG,CanceledError:JG,isCancel:qG,CancelToken:ZG,VERSION:KG,all:XG,Cancel:eW,isAxiosError:tW,spread:nW,toFormData:sW,AxiosHeaders:iW,HttpStatusCode:rW,formToJSON:aW,getAdapter:oW,mergeConfig:lW}=ln,_L=n=>n!=null&&n.endsWith("/")?n.slice(0,-1):n,_8=()=>{var e;const n=_L("https://whatsapp.lamaisonduchauffeurvtc.fr/api");return n||(typeof window<"u"&&((e=window.location)!=null&&e.origin)?`${_L(window.location.origin)}/api`:"")},oe=ln.create({baseURL:_8()});oe.interceptors.request.use(async n=>{var e,t,s;(e=n.url)!=null&&e.includes("send-template")&&console.log(" [AXIOS] Requte send-template intercepte:",{url:n.url,method:n.method,baseURL:n.baseURL,data:n.data});try{const{data:{session:i},error:r}=await it.auth.getSession();if(r)return console.warn(" Error getting session in axios interceptor:",r),console.warn("   Request URL:",n.url),n;if(!i)return console.warn(" No session found in axios interceptor for request:",n.url),n;if(!i.access_token)return console.warn(" Session exists but no access_token for request:",n.url),console.warn("   Session data:",{user:(t=i.user)==null?void 0:t.id,expires_at:i.expires_at,expires_in:i.expires_in}),n;n.headers.Authorization=`Bearer ${i.access_token}`,(s=n.url)!=null&&s.includes("send-template")&&console.log(" [AXIOS] Token ajout  la requte send-template")}catch(i){console.error(" Error in axios request interceptor:",i)}return n},n=>(console.error(" [AXIOS] Erreur dans l'intercepteur de requte:",n),Promise.reject(n)));oe.interceptors.response.use(n=>{var e,t;return(t=(e=n.config)==null?void 0:e.url)!=null&&t.includes("send-template")&&console.log(" [AXIOS] Rponse reue pour send-template:",{status:n.status,data:n.data}),n},async n=>{var e,t,s,i,r,a,o,c;return(t=(e=n.config)==null?void 0:e.url)!=null&&t.includes("send-template")&&console.error(" [AXIOS] Erreur pour send-template:",{status:(s=n.response)==null?void 0:s.status,statusText:(i=n.response)==null?void 0:i.statusText,data:(r=n.response)==null?void 0:r.data,message:n.message,url:(a=n.config)==null?void 0:a.url,baseURL:(o=n.config)==null?void 0:o.baseURL}),((c=n.response)==null?void 0:c.status)===401&&console.warn(" 401 Unauthorized - Session may have expired"),Promise.reject(n)});const nw=Object.freeze(Object.defineProperty({__proto__:null,api:oe},Symbol.toStringTag,{value:"Module"})),bN=(n,e={})=>{const t=new URLSearchParams;return t.append("account_id",n),e.limit&&t.append("limit",e.limit),e.cursor&&t.append("cursor",e.cursor),oe.get(`/conversations?${t.toString()}`)},yc=n=>oe.post(`/conversations/${n}/read`),j8=n=>oe.post(`/conversations/${n}/unread`),C8=(n,e)=>oe.post(`/conversations/${n}/favorite`,{favorite:e}),vN=(n,e)=>oe.post(`/conversations/${n}/bot`,{enabled:e}),M8=(n,e)=>oe.post("/conversations/find-or-create",{account_id:n,phone_number:e}),xN=()=>oe.get("/accounts"),L8=n=>oe.post("/accounts",n),S8=n=>oe.delete(`/accounts/${n}`),E8=(n,e)=>oe.patch(`/accounts/${n}/google-drive`,e),k8=n=>oe.get("/auth/google-drive/init",{params:{account_id:n}}),N8=n=>oe.delete(`/accounts/${n}/google-drive/disconnect`),A8=(n,e="root")=>oe.get(`/accounts/${n}/google-drive/folders`,{params:{parent_id:e}}),T8=(n,e=100)=>oe.post(`/accounts/${n}/google-drive/backfill?limit=${e}`),gj=()=>oe.get("/contacts"),I8=n=>oe.post("/contacts",n),D8=(n,e)=>oe.put(`/contacts/${n}`,e),P8=n=>oe.delete(`/contacts/${n}`),R8=(n,e)=>oe.get(`/contacts/${n}/whatsapp-info`,{params:{account_id:e}});function Pn(n){if(!n)return"";const e=String(n).replace(/\D/g,"");if(!e)return n;if(e.startsWith("33")&&e.length===11){const s="33",i=e.substring(2),r=i[0],o=i.substring(1).match(/.{1,2}/g)||[],c=[r,...o].join(" ");return`(+${s}) ${c}`}if(e.length>10){const s=e.substring(0,2),i=e.substring(2);if(i.length>0){const r=i[0],o=i.substring(1).match(/.{1,2}/g)||[],c=[r,...o].join(" ");return`(+${s}) ${c}`}}return(e.match(/.{1,2}/g)||[]).join(" ")}function O8(n){if(!n)return null;let e;return typeof n=="string"?n.endsWith("Z")||n.match(/[+-]\d{2}:\d{2}$/)?e=new Date(n):n.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?e=new Date(n+"Z"):e=new Date(n):typeof n=="number"?e=new Date(n):e=n,isNaN(e.getTime())?null:e}function _N(n){return O8(n)}function v0(n,e={}){return n?n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris",...e}):""}function Jf(n,e={}){return n?n.toLocaleDateString("fr-FR",{timeZone:"Europe/Paris",...e}):""}function z8(n){const e=_N(n);if(!e)return"";const t=new Date,s=24*60*60*1e3,i=Jf(e,{year:"numeric",month:"2-digit",day:"2-digit"}),r=t.toLocaleDateString("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit"}),[a,o,c]=i.split("/").map(Number),[f,d,h]=r.split("/").map(Number),p=new Date(c,o-1,a),m=new Date(h,d-1,f),g=new Date(m.getTime()-s),w=p.getTime()===m.getTime(),b=p.getTime()===g.getTime();return w?v0(e):b?"Hier":Math.floor((m.getTime()-p.getTime())/s)<7?Jf(e,{weekday:"short"}):Jf(e,{day:"2-digit",month:"2-digit",year:"numeric"})}function jp(n){const e=_N(n);if(!e)return"";const t=new Date,s=24*60*60*1e3,i=Jf(e,{year:"numeric",month:"2-digit",day:"2-digit"}),r=t.toLocaleDateString("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit"}),[a,o,c]=i.split("/").map(Number),[f,d,h]=r.split("/").map(Number),p=new Date(c,o-1,a),m=new Date(h,d-1,f),g=new Date(m.getTime()-s),w=p.getTime()===m.getTime(),b=p.getTime()===g.getTime();return w?v0(e):b?"Hier "+v0(e):Math.floor((m.getTime()-p.getTime())/s)<7?`${Jf(e,{weekday:"short"})} ${v0(e)}`:Jf(e,{day:"2-digit",month:"2-digit",year:"numeric"})+" "+v0(e)}function B8({data:n,selectedId:e,onSelect:t,onRefresh:s,emptyLabel:i="Aucune conversation"}){const[r,a]=_.useState({open:!1,x:0,y:0,conversation:null}),o=_.useRef(null);_.useEffect(()=>{const d=()=>a(h=>({...h,open:!1}));return window.addEventListener("click",d),window.addEventListener("scroll",d,!0),()=>{window.removeEventListener("click",d),window.removeEventListener("scroll",d,!0)}},[]);const c=(d,h)=>{d.preventDefault(),d.stopPropagation();const p=200,m=100,g=Math.min(d.clientX,window.innerWidth-p),w=Math.min(d.clientY,window.innerHeight-m);a({open:!0,x:g,y:w,conversation:h})},f=async()=>{if(r.conversation)try{await j8(r.conversation.id),s==null||s()}catch(d){console.error("Error marking conversation as unread:",d)}finally{a({open:!1,x:0,y:0,conversation:null})}};return n.length?l.jsxs("div",{className:"conversation-list",ref:o,children:[n.map(d=>{var m,g;const h=((m=d.contacts)==null?void 0:m.display_name)||((g=d.contacts)==null?void 0:g.whatsapp_number)||d.client_number,p=d.updated_at?z8(d.updated_at):"";return l.jsxs("div",{className:`conversation-item ${e===d.id?"active":""}`,onClick:()=>t(d),onContextMenu:w=>c(w,d),children:[l.jsxs("div",{className:"conversation-item__header",children:[l.jsxs("div",{className:"conversation-name",children:[h,d.is_favorite&&l.jsx("span",{className:"favorite-dot",children:""})]}),l.jsxs("div",{className:"conversation-item__header-meta",children:[l.jsx("span",{className:`bot-pill ${d.bot_enabled?"bot-pill--on":"bot-pill--off"}`,children:d.bot_enabled?"Bot":"Humain"}),l.jsx("span",{className:"conversation-time",children:p})]})]}),l.jsxs("div",{className:"conversation-meta",children:[l.jsx("span",{children:Pn(d.client_number)}),d.unread_count>0&&l.jsx("span",{className:"badge",children:d.unread_count})]})]},d.id)}),r.open&&l.jsx("div",{className:"context-menu",style:{top:r.y,left:r.x},onClick:d=>d.stopPropagation(),children:l.jsx("button",{onClick:f,children:"Marquer comme non lu"})})]}):l.jsx("div",{className:"conversation-list empty",children:i})}var jN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jL=Fs.createContext&&Fs.createContext(jN),zl=function(){return zl=Object.assign||function(n){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zl.apply(this,arguments)},F8=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};function CN(n){return n&&n.map(function(e,t){return Fs.createElement(e.tag,zl({key:t},e.attr),CN(e.child))})}function ue(n){return function(e){return Fs.createElement(U8,zl({attr:zl({},n.attr)},e),CN(n.child))}}function U8(n){var e=function(t){var s=n.attr,i=n.size,r=n.title,a=F8(n,["attr","size","title"]),o=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Fs.createElement("svg",zl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,a,{className:c,style:zl(zl({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),r&&Fs.createElement("title",null,r),n.children)};return jL!==void 0?Fs.createElement(jL.Consumer,null,function(t){return e(t)}):e(jN)}function $8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(n)}function MN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(n)}function fs(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(n)}function H8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(n)}function wj(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(n)}function G8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(n)}function LN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(n)}function tr(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(n)}function yj(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(n)}function W8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(n)}function SN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(n)}function vy(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(n)}function CL(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"}}]})(n)}function Y8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(n)}function EN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(n)}function C1(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(n)}function Sr(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(n)}function V8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}}]})(n)}function To(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(n)}function Q8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(n)}function J8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(n)}function Ys(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(n)}function ML(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}},{tag:"polyline",attr:{points:"13 2 13 9 20 9"}}]})(n)}function sw(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}}]})(n)}function q8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"4"}},{tag:"line",attr:{x1:"1.05",y1:"12",x2:"7",y2:"12"}},{tag:"line",attr:{x1:"17.01",y1:"12",x2:"22.96",y2:"12"}}]})(n)}function kN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(n)}function LL(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(n)}function xy(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"}},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"}}]})(n)}function iw(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(n)}function Dr(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(n)}function bj(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(n)}function x0(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(n)}function gx(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(n)}function Z8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(n)}function K8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(n)}function NN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(n)}function AN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(n)}function TN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(n)}function Hu(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}}]})(n)}function _y(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(n)}function X8(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(n)}function IN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"}}]})(n)}function e5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(n)}function Pf(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(n)}function t5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(n)}function uo(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(n)}function DN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(n)}function vj(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(n)}function xo(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(n)}function mi(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(n)}function Ib(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(n)}function jy(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(n)}function n5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"}}]})(n)}function s5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"}},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"}},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"}},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"}},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"}}]})(n)}function PN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(n)}function RN(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"}}]})(n)}function i5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(n)}function r5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(n)}function a5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(n)}function fo(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(n)}function o5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 7 4 4 20 4 20 7"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"15",y2:"20"}},{tag:"line",attr:{x1:"12",y1:"4",x2:"12",y2:"20"}}]})(n)}function l5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"17 8 12 3 7 8"}},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"}}]})(n)}function c5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"polyline",attr:{points:"17 11 19 13 23 9"}}]})(n)}function u5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(n)}function Wh(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(n)}function Yh(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(n)}function Og(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"}},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}}]})(n)}function f5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(n)}function Ms(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(n)}function d5(n){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(n)}function h5(n){return ue({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]})(n)}function p5(n){return ue({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]})(n)}function ON(n){return ue({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"}}]})(n)}const rw=(n,e={})=>{const t=new URLSearchParams;e.limit&&t.append("limit",e.limit),e.before&&t.append("before",e.before);const s=t.toString();return oe.get(`/messages/${n}${s?`?${s}`:""}`)},wx=n=>oe.post("/messages/send",n),zN=n=>oe.post("/messages/send-media",n),SL=n=>oe.post("/messages/send-interactive",n),m5=n=>oe.post("/messages/reactions/add",n),g5=n=>oe.post("/messages/reactions/remove",n),w5=(n,e)=>oe.post(`/messages/${n}/delete`,e),y5=n=>oe.delete(`/messages/${n}`),M1=n=>oe.get(`/messages/price/${n}`),EL=n=>oe.get(`/messages/templates/${n}`),b5=(n,e)=>oe.post(`/messages/send-template/${n}`,e),v5=n=>oe.post("/messages/send-with-auto-template",n),x5=n=>oe.post(`/messages/check-media/${n}`),_5=(n,e="image",t=100)=>oe.get(`/messages/media-gallery/${n}`,{params:{media_type:e,limit:t}}),j5=(n,e="image",t=500)=>oe.get(`/messages/media-gallery-account/${n}`,{params:{media_type:e,limit:t}}),C5=n=>oe.post(`/messages/${n}/pin`),M5=n=>oe.post(`/messages/${n}/unpin`);function yx(n){return[].concat(n)}function xj(n){return n.startsWith(":")}function BN(n){return Db(n)&&(n==="*"||n.length>1&&":>~.+*".includes(n.slice(0,1))||HN(n))}function FN(n,e){return(Db(e)||typeof e=="number")&&!$N(n)&&!xj(n)&&!UN(n)}function UN(n){return n.startsWith("@media")}function L5(n){return n==="."}function $N(n){return n==="--"}function Db(n){return n+""===n}function HN(n){return Db(n)&&(n.startsWith("&")||xj(n))}function Cy(n,e=""){return n.filter(Boolean).join(e)}function GN(n,e){let t=0;if(e.length===0)return t.toString();for(let s=0;s<e.length;s++){const i=e.charCodeAt(s);t=(t<<5)-t+i,t=t&t}return`${n??"cl"}_${t.toString(36)}`}function S5(n,e){return n==="content"?`"${e}"`:e}function E5(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kL(n,e){return`${n}:${e}`}function k5(n){return n?`.${n}`:""}function N5(n,e){return n?`${n}
${e}`:e}var WN=class YN{constructor(e,t,s,i){this.sheet=e,this.property=t,this.value=s,this.selector=i,this.property=t,this.value=s,this.joined=kL(t,s);const r=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:GN(this.sheet.name,this.joined),this.key=Cy([this.joined,r,this.hash])}toString(){let e=bx(this.selector.preconditions,{right:this.hash});return e=bx(this.selector.postconditions,{left:e}),`${e} {${YN.genRule(this.property,this.value)}}`}static genRule(e,t){const s=E5(e);return kL(s,S5(e,t))+";"}};function bx(n,{left:e="",right:t=""}={}){const s=n.reduce((i,r)=>xj(r)?i+r:HN(r)?i+r.slice(1):Cy([i,r]," "),e);return Cy([s,k5(t)]," ")}var A5=class aw{constructor(e,t=null,{preconditions:s,postconditions:i}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=s?yx(s):[],this.postconditions=i?yx(i):[],this.setScope(t)}setScope(e){return e?(this.scopeClassName||(this.scopeName=e,this.scopeClassName=GN(this.sheet.name,e+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(e){return new aw(this.sheet,e,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(e){return new aw(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(e)})}addPostcondition(e){return new aw(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(e)})}createRule(e,t){return new WN(this.sheet,e,t,this)}},T5=class{constructor(n,e){this.name=n,this.rootNode=e,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${n}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(n){this.style=N5(this.style,n)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if(typeof document>"u"||this.isApplied()||this.rootNode===null)return this.styleTag;const n=document.createElement("style");return n.type="text/css",n.id=this.id,(this.rootNode??document.head).appendChild(n),n}addRule(n){const e=this.storedClasses[n.key];return Db(e)?e:(this.storedClasses[n.key]=n.hash,this.storedStyles[n.hash]=[n.property,n.value],this.append(n.toString()),n.hash)}};function _j(n,e){for(const t in n)e(t.trim(),n[t])}function tt(...n){const e=n.reduce((t,s)=>(s instanceof Set?t.push(...s):typeof s=="string"?t.push(s):Array.isArray(s)?t.push(tt(...s)):typeof s=="object"&&Object.entries(s).forEach(([i,r])=>{r&&t.push(i)}),t),[]);return Cy(e," ").trim()}function I5(n,e){const t=new T5(n,e);return{create:s,getStyle:t.getStyle.bind(t),isApplied:t.isApplied.bind(t)};function s(i){const r={};return VN(t,i,new A5(t)).forEach(([o,c,f])=>{Pb(t,c,f).forEach(d=>{a(o,d)})}),t.apply(),r;function a(o,c){r[o]=r[o]??new Set,r[o].add(c)}}}function VN(n,e,t){const s=[];return _j(e,(i,r)=>{if(BN(i))return VN(n,r,t.addPrecondition(i)).forEach(a=>s.push(a));s.push([i,e[i],t.addScope(i)])}),s}function Pb(n,e,t){const s=new Set;return _j(e,(i,r)=>{let a=[];if(BN(i))a=Pb(n,r,t.addPostcondition(i));else if(L5(i))a=yx(r);else if(UN(i))a=P5(n,r,i,t);else if($N(i))a=D5(n,r,t);else if(FN(i,r)){const o=t.createRule(i,r);n.addRule(o),s.add(o.hash)}return QN(a,s)}),s}function QN(n,e){return n.forEach(t=>e.add(t)),e}function D5(n,e,t){const s=new Set,i=[];if(_j(e,(r,a)=>{if(FN(r,a)){i.push(WN.genRule(r,a));return}const o=Pb(n,a??{},t);QN(o,s)}),!t.scopeClassName)return s;if(i.length){const r=i.join(" ");n.append(`${bx(t.preconditions,{right:t.scopeClassName})} {${r}}`)}return s.add(t.scopeClassName),s}function P5(n,e,t,s){n.append(t+" {");const i=Pb(n,e,s);return n.append("}"),i}function NL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function R5(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=z5(n))||e){t&&(n=t);var s=0;return function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Rt.apply(null,arguments)}function O5(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,vx(n,e)}function JN(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function vx(n,e){return vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},vx(n,e)}function z5(n,e){if(n){if(typeof n=="string")return NL(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?NL(n,e):void 0}}var rt;(function(n){n.hiddenOnSearch="epr-hidden-on-search",n.searchActive="epr-search-active",n.hidden="epr-hidden",n.visible="epr-visible",n.active="epr-active",n.emoji="epr-emoji",n.category="epr-emoji-category",n.label="epr-emoji-category-label",n.categoryContent="epr-emoji-category-content",n.emojiHasVariations="epr-emoji-has-variations",n.scrollBody="epr-body",n.emojiList="epr-emoji-list",n.external="__EmojiPicker__",n.emojiPicker="EmojiPickerReact",n.open="epr-open",n.vertical="epr-vertical",n.horizontal="epr-horizontal",n.variationPicker="epr-emoji-variation-picker",n.darkTheme="epr-dark-theme",n.autoTheme="epr-auto-theme"})(rt||(rt={}));function rr(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.map(function(s){return"."+s}).join("")}var Ut=I5("epr",null),ow={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},jj=Ut.create({hidden:Rt({".":rt.hidden},ow)}),B5=_.memo(function(){return _.createElement("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:Ut.getStyle()}})}),qu=Ut.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:Rt({".":rt.hiddenOnSearch},ow)},":has(input:placeholder-shown)":{visibleOnSearchOnly:ow}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:Rt({".":"epr-visible-on-search-only"},ow)}});function Ul(n,e){var t,s;return{".epr-dark-theme":(t={},t[n]=e,t),".epr-auto-theme":(s={},s[n]={"@media (prefers-color-scheme: dark)":e},s)}}function qN(n,e){var t,s,i=(t=n.customEmojis)!=null?t:[],r=(s=e.customEmojis)!=null?s:[];return n.open===e.open&&n.emojiVersion===e.emojiVersion&&n.reactionsDefaultOpen===e.reactionsDefaultOpen&&n.searchPlaceHolder===e.searchPlaceHolder&&n.searchPlaceholder===e.searchPlaceholder&&n.defaultSkinTone===e.defaultSkinTone&&n.skinTonesDisabled===e.skinTonesDisabled&&n.autoFocusSearch===e.autoFocusSearch&&n.emojiStyle===e.emojiStyle&&n.theme===e.theme&&n.suggestedEmojisMode===e.suggestedEmojisMode&&n.lazyLoadEmojis===e.lazyLoadEmojis&&n.className===e.className&&n.height===e.height&&n.width===e.width&&n.style===e.style&&n.searchDisabled===e.searchDisabled&&n.skinTonePickerLocation===e.skinTonePickerLocation&&i.length===r.length}var F5=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"],tp={};setTimeout(function(){Bb.reduce(function(n,e){return ZN(e),n},tp)});function ZN(n){var e=Bg(n).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("");e.forEach(function(t){var s;tp[t]=(s=tp[t])!=null?s:{},tp[t][qn(n)]=n})}function AL(n,e){e===void 0&&(e=0);var t=_.useState(n),s=t[0],i=t[1],r=_.useRef(null);function a(o){return new Promise(function(c){var f;r.current&&clearTimeout(r.current),r.current=(f=window)==null?void 0:f.setTimeout(function(){i(o),c(o)},e)})}return[s,a]}function U5(){var n=FB();return function(e){return n.has(e)}}function KN(){var n=_.useRef({}),e=BB();return _.useMemo(function(){var t=parseFloat(""+e);return!e||Number.isNaN(t)?n.current:Bb.reduce(function(s,i){return H5(i,t)&&(s[qn(i)]=!0),s},n.current)},[e])}function $5(){var n=KN(),e=U5();return function(s){var i=Sj(qn(s));return!!(n[i]||e(i))}}function H5(n,e){return hB(n)>e}function G5(n){_.useEffect(function(){n(!0)},[n])}var Cp;(function(n){n.RECENT="recent",n.FREQUENT="frequent"})(Cp||(Cp={}));var ji;(function(n){n.NATIVE="native",n.APPLE="apple",n.TWITTER="twitter",n.GOOGLE="google",n.FACEBOOK="facebook"})(ji||(ji={}));var Mp;(function(n){n.DARK="dark",n.LIGHT="light",n.AUTO="auto"})(Mp||(Mp={}));var Er;(function(n){n.NEUTRAL="neutral",n.LIGHT="1f3fb",n.MEDIUM_LIGHT="1f3fc",n.MEDIUM="1f3fd",n.MEDIUM_DARK="1f3fe",n.DARK="1f3ff"})(Er||(Er={}));var Ke;(function(n){n.SUGGESTED="suggested",n.CUSTOM="custom",n.SMILEYS_PEOPLE="smileys_people",n.ANIMALS_NATURE="animals_nature",n.FOOD_DRINK="food_drink",n.TRAVEL_PLACES="travel_places",n.ACTIVITIES="activities",n.OBJECTS="objects",n.SYMBOLS="symbols",n.FLAGS="flags"})(Ke||(Ke={}));var Dh;(function(n){n.SEARCH="SEARCH",n.PREVIEW="PREVIEW"})(Dh||(Dh={}));function W5(n){var e=n.children,t=KN(),s=EB(),i=zB(),r=_.useRef(tp),a=_.useRef(!1),o=_.useRef(!1),c=_.useRef(t),f=AL(Date.now(),200),d=AL("",100),h=_.useState(!1),p=_.useState(s),m=_.useState(null),g=_.useState(new Set),w=_.useState(null),b=_.useState(i),y=_.useState(!1),x=y[0],v=y[1],C=_.useState([]),S=_.useState(null);return G5(v),_.createElement(ki.Provider,{value:{activeCategoryState:m,activeSkinTone:p,disallowClickRef:a,disallowMouseRef:o,disallowedEmojisRef:c,emojiVariationPickerState:w,emojisThatFailedToLoadState:g,filterRef:r,isPastInitialLoad:x,searchTerm:d,skinToneFanOpenState:h,suggestedUpdateState:f,reactionsModeState:b,visibleCategoriesState:C,emojiSizeState:S}},e)}var ki=_.createContext({activeCategoryState:[null,function(){}],activeSkinTone:[Er.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise(function(){})}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}],visibleCategoriesState:[[],function(){return[]}],emojiSizeState:[null,function(){}]});function Cj(){var n=_.useContext(ki),e=n.filterRef;return e}function Y5(){var n=_.useContext(ki),e=n.disallowClickRef;return e}function Mj(){var n=_.useContext(ki),e=n.disallowMouseRef;return e}function Zu(){var n=_.useContext(ki),e=n.reactionsModeState;return e}function Rb(){var n=_.useContext(ki),e=n.searchTerm;return e}function Ob(){var n=_.useContext(ki),e=n.activeSkinTone;return e}function XN(){var n=_.useContext(ki),e=n.emojisThatFailedToLoadState;return e}function Vh(){var n=_.useContext(ki),e=n.emojiVariationPickerState;return e}function zg(){var n=_.useContext(ki),e=n.skinToneFanOpenState;return e}function Lj(){var n=_.useContext(ki),e=n.visibleCategoriesState;return e}function eA(){var n=_.useContext(ki),e=n.emojiSizeState;return e}function tA(){var n=_.useContext(ki),e=n.suggestedUpdateState,t=e[0],s=e[1];return[t,function(){s(Date.now())}]}var Ii,V5=[Ke.SUGGESTED,Ke.CUSTOM,Ke.SMILEYS_PEOPLE,Ke.ANIMALS_NATURE,Ke.FOOD_DRINK,Ke.TRAVEL_PLACES,Ke.ACTIVITIES,Ke.OBJECTS,Ke.SYMBOLS,Ke.FLAGS],Q5={name:"Recently Used",category:Ke.SUGGESTED},nA=(Ii={},Ii[Ke.SUGGESTED]={category:Ke.SUGGESTED,name:"Frequently Used"},Ii[Ke.CUSTOM]={category:Ke.CUSTOM,name:"Custom Emojis"},Ii[Ke.SMILEYS_PEOPLE]={category:Ke.SMILEYS_PEOPLE,name:"Smileys & People"},Ii[Ke.ANIMALS_NATURE]={category:Ke.ANIMALS_NATURE,name:"Animals & Nature"},Ii[Ke.FOOD_DRINK]={category:Ke.FOOD_DRINK,name:"Food & Drink"},Ii[Ke.TRAVEL_PLACES]={category:Ke.TRAVEL_PLACES,name:"Travel & Places"},Ii[Ke.ACTIVITIES]={category:Ke.ACTIVITIES,name:"Activities"},Ii[Ke.OBJECTS]={category:Ke.OBJECTS,name:"Objects"},Ii[Ke.SYMBOLS]={category:Ke.SYMBOLS,name:"Symbols"},Ii[Ke.FLAGS]={category:Ke.FLAGS,name:"Flags"},Ii);function sA(n){return V5.map(function(e){return Rt({},nA[e],n&&n[e]&&n[e])})}function zb(n){return n.category}function iA(n){return n.name}function J5(n,e){var t;n===void 0&&(n=[]),e===void 0&&(e={});var s={};e.suggestionMode===Cp.RECENT&&(s[Ke.SUGGESTED]=Q5);var i=sA(s);return(t=n)!=null&&t.length?n.map(function(r){return typeof r=="string"?TL(r,s[r]):Rt({},TL(r.category,s[r.category]),r)}):i}function TL(n,e){return e===void 0&&(e={}),Object.assign(nA[n],e)}var q5="https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/",Z5="https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/",K5="https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/",X5="https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";function eB(n){switch(n){case ji.TWITTER:return K5;case ji.GOOGLE:return X5;case ji.FACEBOOK:return Z5;case ji.APPLE:default:return q5}}var tB=[],nB=[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["shaking face"],u:"1fae8",a:"15.0"},{n:["head shaking horizontally"],u:"1f642-200d-2194-fe0f",a:"15.1"},{n:["head shaking vertically"],u:"1f642-200d-2195-fe0f",a:"15.1"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["pink heart"],u:"1fa77",a:"15.0"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["light blue heart"],u:"1fa75",a:"15.0"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["grey heart"],u:"1fa76",a:"15.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["leftwards pushing hand"],u:"1faf7",v:["1faf7-1f3fb","1faf7-1f3fc","1faf7-1f3fd","1faf7-1f3fe","1faf7-1f3ff"],a:"15.0"},{n:["rightwards pushing hand"],u:"1faf8",v:["1faf8-1f3fb","1faf8-1f3fc","1faf8-1f3fd","1faf8-1f3fe","1faf8-1f3ff"],a:"15.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person walking facing right"],u:"1f6b6-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-27a1-fe0f","1f6b6-1f3fc-200d-27a1-fe0f","1f6b6-1f3fd-200d-27a1-fe0f","1f6b6-1f3fe-200d-27a1-fe0f","1f6b6-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman walking facing right"],u:"1f6b6-200d-2640-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man walking facing right"],u:"1f6b6-200d-2642-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person kneeling facing right"],u:"1f9ce-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-27a1-fe0f","1f9ce-1f3fc-200d-27a1-fe0f","1f9ce-1f3fd-200d-27a1-fe0f","1f9ce-1f3fe-200d-27a1-fe0f","1f9ce-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman kneeling facing right"],u:"1f9ce-200d-2640-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man kneeling facing right"],u:"1f9ce-200d-2642-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["person with white cane facing right"],u:"1f9d1-200d-1f9af-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["man with white cane facing right"],u:"1f468-200d-1f9af-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9af-200d-27a1-fe0f","1f468-1f3fc-200d-1f9af-200d-27a1-fe0f","1f468-1f3fd-200d-1f9af-200d-27a1-fe0f","1f468-1f3fe-200d-1f9af-200d-27a1-fe0f","1f468-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane facing right"],u:"1f469-200d-1f9af-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9af-200d-27a1-fe0f","1f469-1f3fc-200d-1f9af-200d-27a1-fe0f","1f469-1f3fd-200d-1f9af-200d-27a1-fe0f","1f469-1f3fe-200d-1f9af-200d-27a1-fe0f","1f469-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["person in motorized wheelchair facing right"],u:"1f9d1-200d-1f9bc-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["man in motorized wheelchair facing right"],u:"1f468-200d-1f9bc-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair facing right"],u:"1f469-200d-1f9bc-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["person in manual wheelchair facing right"],u:"1f9d1-200d-1f9bd-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["man in manual wheelchair facing right"],u:"1f468-200d-1f9bd-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair facing right"],u:"1f469-200d-1f9bd-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person running facing right"],u:"1f3c3-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-27a1-fe0f","1f3c3-1f3fc-200d-27a1-fe0f","1f3c3-1f3fd-200d-27a1-fe0f","1f3c3-1f3fe-200d-27a1-fe0f","1f3c3-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman running facing right"],u:"1f3c3-200d-2640-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man running facing right"],u:"1f3c3-200d-2642-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["family adult adult child","family: adult, adult, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult adult child child","family: adult, adult, child, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["family adult child","family: adult, child"],u:"1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult child child","family: adult, child, child"],u:"1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["footprints"],u:"1f463",a:"0.6"}],sB=[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["moose"],u:"1face",a:"15.0"},{n:["donkey"],u:"1facf",a:"15.0"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["wing"],u:"1fabd",a:"15.0"},{n:["black bird"],u:"1f426-200d-2b1b",a:"15.0"},{n:["goose"],u:"1fabf",a:"15.0"},{n:["phoenix"],u:"1f426-200d-1f525",a:"15.1"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["jellyfish"],u:"1fabc",a:"15.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["hyacinth"],u:"1fabb",a:"15.0"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"},{n:["mushroom"],u:"1f344",a:"0.6"}],iB=[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["lime"],u:"1f34b-200d-1f7e9",a:"15.1"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["ginger root"],u:"1fada",a:"15.0"},{n:["pea pod"],u:"1fadb",a:"15.0"},{n:["brown mushroom"],u:"1f344-200d-1f7eb",a:"15.1"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],rB=[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],aB=[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],oB=[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["folding hand fan"],u:"1faad",a:"15.0"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["hair pick"],u:"1faae",a:"15.0"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue workers helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["maracas"],u:"1fa87",a:"15.0"},{n:["flute"],u:"1fa88",a:"15.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["broken chain"],u:"26d3-fe0f-200d-1f4a5",a:"15.1"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],lB=[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["khanda"],u:"1faaf",a:"15.0"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["wireless"],u:"1f6dc",a:"15.0"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],cB=[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","land islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthlemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","cte divoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","runion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","so tom & prncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","trkiye flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}],My={custom:tB,smileys_people:nB,animals_nature:sB,food_drink:iB,travel_places:rB,activities:aB,objects:oB,symbols:lB,flags:cB},Ly=[Er.NEUTRAL,Er.LIGHT,Er.MEDIUM_LIGHT,Er.MEDIUM,Er.MEDIUM_DARK,Er.DARK],uB=Object.entries(Er).reduce(function(n,e){var t=e[0],s=e[1];return n[s]=t,n},{}),fB=Ly.reduce(function(n,e){var t;return Object.assign(n,(t={},t[e]=e,t))},{}),Xi;(function(n){n.name="n",n.unified="u",n.variations="v",n.added_in="a",n.imgUrl="imgUrl"})(Xi||(Xi={}));var rA="epr_suggested";function aA(n){try{var e,t,s;if(!((e=window)!=null&&e.localStorage))return[];var i=JSON.parse((t=(s=window)==null?void 0:s.localStorage.getItem(rA))!=null?t:"[]");return n===Cp.FREQUENT?i.sort(function(r,a){return a.count-r.count}):i}catch{return[]}}function dB(n,e){var t=aA(),s=qn(n,e),i=qn(n),r=t.find(function(c){var f=c.unified;return f===s}),a;r?a=[r].concat(t.filter(function(c){return c!==r})):(r={unified:s,original:i,count:0},a=[r].concat(t)),r.count++,a.length=Math.min(a.length,14);try{var o;(o=window)==null||o.localStorage.setItem(rA,JSON.stringify(a))}catch{}}function Bg(n){var e;return(e=n[Xi.name])!=null?e:[]}function hB(n){return parseFloat(n[Xi.added_in])}function xx(n){return n?Bg(n)[0]:""}function Sj(n){var e=n.split("-"),t=e.splice(1,1),s=t[0];return fB[s]?e.join("-"):n}function qn(n,e){var t,s=n[Xi.unified];return!e||!Qh(n)?s:(t=pB(n,e))!=null?t:s}function oA(){var n=PB(),e=tA(),t=e[0],s=Fs.useMemo(function(){var i,r=(i=aA(n))!=null?i:[];return r.map(function(a){return Ph(a.unified)}).filter(Boolean)},[t,n]);return function(r){var a;return r===Ke.SUGGESTED?s:(a=My[r])!=null?a:[]}}function lA(n,e){return""+eB(e)+n+".png"}function Fg(n){var e;return(e=n[Xi.variations])!=null?e:[]}function Qh(n){return Fg(n).length>0}function pB(n,e){return e?Fg(n).find(function(t){return t.includes(e)}):qn(n)}function Ph(n){if(n){if(qf[n])return qf[n];var e=Sj(n);return qf[e]}}var Bb=Object.values(My).flat();function mB(n){My[Ke.CUSTOM].length=0,n.forEach(function(e){var t=gB(e);My[Ke.CUSTOM].push(t),!qf[t[Xi.unified]]&&(Bb.push(t),qf[t[Xi.unified]]=t,ZN(t))})}function gB(n){var e;return e={},e[Xi.name]=n.names.map(function(t){return t.toLowerCase()}),e[Xi.unified]=n.id.toLowerCase(),e[Xi.added_in]="0",e[Xi.imgUrl]=n.imgUrl,e}var qf={};setTimeout(function(){Bb.reduce(function(n,e){return n[qn(e)]=e,Qh(e)&&Fg(e).forEach(function(t){n[t]=e}),n},qf)});function wB(n){var e=n.split("-"),t=e[1];return Ly.includes(t)?t:null}var yB=["2640-fe0f","2642-fe0f","2695-fe0f"],Sy="Search",bB="No results found",cA=" found. Use up and down arrow keys to navigate.",vB="1 result"+cA,xB="%n results"+cA;function IL(n){var e,t;n===void 0&&(n={});var s=uA(),i=Object.assign(s.previewConfig,(e=n.previewConfig)!=null?e:{}),r=Object.assign(s,n),a=J5(n.categories,{suggestionMode:r.suggestedEmojisMode});r.hiddenEmojis.forEach(function(c){r.unicodeToHide.add(c)}),mB((t=r.customEmojis)!=null?t:[]);var o=r.searchDisabled?Dh.PREVIEW:r.skinTonePickerLocation;return Rt({},r,{categories:a,previewConfig:i,skinTonePickerLocation:o})}function uA(){return{autoFocusSearch:!0,categories:sA(),className:"",customEmojis:[],defaultSkinTone:Er.NEUTRAL,emojiStyle:ji.APPLE,emojiVersion:null,getEmojiUrl:lA,height:450,lazyLoadEmojis:!1,previewConfig:Rt({},_B),searchDisabled:!1,searchPlaceHolder:Sy,searchPlaceholder:Sy,skinTonePickerLocation:Dh.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:Cp.FREQUENT,theme:Mp.LIGHT,unicodeToHide:new Set(yB),width:350,reactionsDefaultOpen:!1,reactions:F5,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var _B={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},jB=["children"],fA=_.createContext(uA());function CB(n){var e=n.children,t=JN(n,jB),s=MB(t);return _.createElement(fA.Provider,{value:s},e)}function MB(n){var e,t=_.useState(function(){return IL(n)}),s=t[0],i=t[1];return _.useEffect(function(){qN(s,n)||i(IL(n))},[(e=n.customEmojis)==null?void 0:e.length,n.open,n.emojiVersion,n.reactionsDefaultOpen,n.searchPlaceHolder,n.searchPlaceholder,n.defaultSkinTone,n.skinTonesDisabled,n.autoFocusSearch,n.emojiStyle,n.theme,n.suggestedEmojisMode,n.lazyLoadEmojis,n.className,n.height,n.width,n.searchDisabled,n.skinTonePickerLocation,n.allowExpandReactions]),s}function sn(){return _.useContext(fA)}var dA=Fs.createContext({});function hA(){var n=Fs.useContext(dA);return n}function LB(n){var e=Fs.useRef({onEmojiClick:n.onEmojiClick||L1,onReactionClick:n.onReactionClick||n.onEmojiClick,onSkinToneChange:n.onSkinToneChange||L1});return Fs.useEffect(function(){e.current.onEmojiClick=n.onEmojiClick||L1,e.current.onReactionClick=n.onReactionClick||n.onEmojiClick},[n.onEmojiClick,n.onReactionClick]),Fs.useEffect(function(){e.current.onSkinToneChange=n.onSkinToneChange||L1},[n.onSkinToneChange]),e}function L1(){}var Lp;(function(n){n.REACTIONS="reactions",n.PICKER="picker"})(Lp||(Lp={}));function SB(){var n,e=sn(),t=e.searchPlaceHolder,s=e.searchPlaceholder;return(n=[t,s].find(function(i){return i!==Sy}))!=null?n:Sy}function EB(){var n=sn(),e=n.defaultSkinTone;return e}function pA(){var n=sn(),e=n.allowExpandReactions;return e}function mA(){var n=sn(),e=n.skinTonesDisabled;return e}function Ku(){var n=sn(),e=n.emojiStyle;return e}function kB(){var n=sn(),e=n.autoFocusSearch;return e}function Ej(){var n=sn(),e=n.categories;return e}function NB(){var n=sn(),e=n.customEmojis;return e}function AB(){var n=sn(),e=n.open;return e}function TB(n){var e=hA(),t=e.current,s=Zu(),i=s[1],r=t.onEmojiClick||function(){},a=t.onReactionClick;return n===Lp.REACTIONS&&a?function(){for(var o=arguments.length,c=new Array(o),f=0;f<o;f++)c[f]=arguments[f];return a.apply(void 0,c.concat([{collapseToReactions:function(){i(function(h){return h})}}]))}:function(){for(var o=arguments.length,c=new Array(o),f=0;f<o;f++)c[f]=arguments[f];r.apply(void 0,c.concat([{collapseToReactions:function(){i(!0)}}]))}}function IB(){var n=hA(),e=n.current;return e.onSkinToneChange||function(){}}function gA(){var n=sn(),e=n.previewConfig;return e}function DB(){var n=sn(),e=n.theme;return e}function PB(){var n=sn(),e=n.suggestedEmojisMode;return e}function wA(){var n=sn(),e=n.lazyLoadEmojis;return e}function RB(){var n=sn(),e=n.className;return e}function OB(){var n=sn(),e=n.height,t=n.width,s=n.style;return Rt({height:DL(e),width:DL(t)},s)}function zB(){var n=sn(),e=n.reactionsDefaultOpen;return e}function BB(){var n=sn(),e=n.emojiVersion;return e}function yA(){var n=sn(),e=n.searchDisabled;return e}function bA(){var n=sn(),e=n.skinTonePickerLocation;return e}function FB(){var n=sn(),e=n.unicodeToHide;return e}function UB(){var n=sn(),e=n.reactions;return e}function Xu(){var n=sn(),e=n.getEmojiUrl;return e}function DL(n){return typeof n=="number"?n+"px":n}function $B(n){var e=n>0,t=n>1;return e?t?xB.replace("%n",n.toString()):vB:bB}function Fb(){var n=Rb(),e=n[0];return!!e}function Ni(n){n&&requestAnimationFrame(function(){n.focus()})}function vA(n){if(n){var e=n.previousElementSibling;Ni(e)}}function xA(n){if(n){var e=n.nextElementSibling;Ni(e)}}function _A(n){if(n){var e=n.firstElementChild;Ni(e)}}function Sp(){return document.activeElement}function HB(n){var e=n.children,t=_.useRef(null),s=_.useRef(null),i=_.useRef(null),r=_.useRef(null),a=_.useRef(null),o=_.useRef(null),c=_.useRef(null),f=_.useRef(null),d=_.useRef(null);return _.createElement(jA.Provider,{value:{AnchoredEmojiRef:s,BodyRef:i,EmojiListRef:r,CategoryNavigationRef:c,PickerMainRef:t,SearchInputRef:a,SkinTonePickerRef:o,VariationPickerRef:f,ReactionsRef:d}},e)}var jA=_.createContext({AnchoredEmojiRef:_.createRef(),BodyRef:_.createRef(),CategoryNavigationRef:_.createRef(),EmojiListRef:_.createRef(),PickerMainRef:_.createRef(),SearchInputRef:_.createRef(),SkinTonePickerRef:_.createRef(),VariationPickerRef:_.createRef(),ReactionsRef:_.createRef()});function Mo(){return _.useContext(jA)}function CA(){return Mo().EmojiListRef}function Jh(){return Mo().PickerMainRef}function Ub(){return Mo().AnchoredEmojiRef}function MA(){var n=Ub();return function(e){e===null&&n.current!==null&&Ni(n.current),n.current=e}}function Ai(){return Mo().BodyRef}function GB(){return Mo().ReactionsRef}function Jl(){return Mo().SearchInputRef}function kj(){return Mo().SkinTonePickerRef}function Nj(){return Mo().CategoryNavigationRef}function WB(){return Mo().VariationPickerRef}function LA(n,e){e===void 0&&(e=0);var t=BA(n);t&&requestAnimationFrame(function(){t.scrollTop=e})}function YB(n,e){var t=BA(n);t&&requestAnimationFrame(function(){t.scrollTop=t.scrollTop+e})}function VB(){var n=Ai();return _.useCallback(function(e){requestAnimationFrame(function(){n.current&&(n.current.scrollTop=e)})},[n])}function $b(n){if(!(!n||!TF(n))&&!n.closest(rr(rt.variationPicker))){var e=UA(n),t=FA(n);YB(e,-(Pj(ql(n))-t))}}function Hb(n){var e=Bj(n);Ni(e),$b(e)}function QB(n){var e=Bj(n);Ni(e),e==null||e.click()}function JB(n){Ni(WA(n))}function qB(n){if(n){var e=YA(n);if(!e)return Hb(Wb(n));Ni(e),$b(e)}}function ZB(n){if(n){var e=zj(n);if(!e)return JB(Gb(n));Ni(e),$b(e)}}function KB(n,e){if(n){var t=eF(n);if(!t)return e();Ni(t),$b(t)}}function XB(n){if(n){var e=tF(n);return Ni(e)}}function eF(n){if(!n)return null;var e=VA(n),t=ql(e),s=RA(e,n),i=Rh(t),r=i.indexOf(n),a=r%s;if(r===-1)return null;if(i[r-s])return i[r-s];var o=Gb(t);if(!o)return null;var c=Rh(o),f=c.length%s-1;if(a>f)return c.at(-1);for(var d=c.length-1;d>=0;d--)if(d%s===a)return c[d];return c.at(-1)}function tF(n){var e;if(!n)return null;var t=VA(n),s=ql(t),i=RA(t,n),r=Rh(s),a=r.indexOf(n);if(a===-1)return null;var o=i-a%i-1,c=a+o+1;if(r[c]){for(var f=a+i;f%i>=0;f--)if(r[f])return r[f]}var d=a%i,h=Wb(s),p=Rh(h);return p[d]?p[d]:(e=p.at(0))!=null?e:null}function ef(){var n=Vh(),e=n[0],t=n[1],s=zg(),i=s[0],r=s[1],a=_.useCallback(function(){e&&t(null),i&&r(!1)},[e,i,t,r]);return a}function SA(){var n=Vh(),e=n[0],t=zg(),s=t[0];return function(){return!!e||s}}function nF(){var n=Mj();return function(){n.current=!0}}function EA(){var n=Mj();return function(){n.current=!1}}function kA(){var n=Mj();return function(){return n.current}}function sF(){var n=Ai(),e=EA(),t=kA();_.useEffect(function(){var s=n.current;s==null||s.addEventListener("mousemove",i,{passive:!0});function i(){t()&&e()}return function(){s==null||s.removeEventListener("mousemove",i)}},[n,e,t])}function tf(){var n=Jl();return _.useCallback(function(){Ni(n.current)},[n])}function iF(){var n=kj();return _.useCallback(function(){n.current&&_A(n.current)},[n])}function NA(){var n=Nj();return _.useCallback(function(){n.current&&_A(n.current)},[n])}function rF(){var n=Cj();return function e(t){if(typeof t=="function")return e(t(n.current));n.current=t}}function AA(){var n=Aj(),e=Jl(),t=tf();return function(){e.current&&(e.current.value=""),n(""),t()}}function aF(){var n=Jl(),e=Aj();return function(s){n.current?(n.current.value=""+n.current.value+s,e(PL(n.current.value))):e(PL(s))}}function oF(){var n=Jl(),e=Cj(),t=rF(),s=Aj(),i=Rb(),r=i[0],a=hF(e.current,r);return{onChange:o,searchTerm:r,SearchInputRef:n,statusSearchResults:a};function o(c){var f=e.current,d=c.toLowerCase();if(f!=null&&f[d]||d.length<=1)return s(d);var h=dF(d,f);if(!h)return s(d);t(function(p){var m;return Object.assign(p,(m={},m[d]=lF(h,d),m))}),s(d)}}function Aj(){var n=Rb(),e=n[1],t=Jh();return function(i){requestAnimationFrame(function(){e(i&&(i==null?void 0:i.toLowerCase())).then(function(){LA(t.current,0)})})}}function lF(n,e){var t={};for(var s in n){var i=n[s];cF(i,e)&&(t[s]=i)}return t}function cF(n,e){return Bg(n).some(function(t){return t.includes(e)})}function uF(){var n=Cj(),e=n.current,t=Rb(),s=t[0];return function(i){return fF(i,e,s)}}function fF(n,e,t){var s;return!e||!t?!1:!((s=e[t])!=null&&s[n])}function dF(n,e){if(!e)return null;if(e[n])return e[n];var t=Object.keys(e).sort(function(s,i){return i.length-s.length}).find(function(s){return n.includes(s)});return t?e[t]:null}function PL(n){return!n||typeof n!="string"?"":n.trim().toLowerCase()}function hF(n,e){var t;if(!(n!=null&&n[e]))return"";var s=((t=Object.entries(n==null?void 0:n[e]))==null?void 0:t.length)||0;return $B(s)}function TA(){var n=MA(),e=Vh(),t=e[1];return function(i){var r=Dj(i),a=r[0];a&&(n(i),t(a))}}function Tj(){var n=bA();return n===Dh.SEARCH}function IA(){var n=bA();return n===Dh.PREVIEW}var pn;(function(n){n.ArrowDown="ArrowDown",n.ArrowUp="ArrowUp",n.ArrowLeft="ArrowLeft",n.ArrowRight="ArrowRight",n.Escape="Escape",n.Enter="Enter",n.Space=" "})(pn||(pn={}));function pF(){mF(),gF(),wF(),yF(),bF()}function mF(){var n=Jh(),e=AA(),t=VB(),s=Jl(),i=tf(),r=SA(),a=nF(),o=ef(),c=_.useMemo(function(){return function(d){var h=d.key;switch(a(),h){case pn.Escape:if(d.preventDefault(),r()){o();return}e(),t(0),i();break}}},[t,e,o,i,r,a]);_.useEffect(function(){var f=n.current;if(f)return f.addEventListener("keydown",c),function(){f.removeEventListener("keydown",c)}},[n,s,t,c])}function gF(){var n=iF(),e=Jh(),t=Ai(),s=Jl(),i=zg(),r=i[1],a=DA(),o=Tj(),c=_.useMemo(function(){return function(d){var h=d.key;switch(h){case pn.ArrowRight:if(!o)return;d.preventDefault(),r(!0),n();break;case pn.ArrowDown:d.preventDefault(),a();break;case pn.Enter:d.preventDefault(),QB(t.current);break}}},[n,a,r,t,o]);_.useEffect(function(){var f=s.current;if(f)return f.addEventListener("keydown",c),function(){f.removeEventListener("keydown",c)}},[e,s,c])}function wF(){var n=kj(),e=tf(),t=Jl(),s=DA(),i=zg(),r=i[0],a=i[1],o=IA(),c=Tj(),f=Ij(),d=_.useMemo(function(){return function(p){var m=p.key;if(c)switch(m){case pn.ArrowLeft:if(p.preventDefault(),!r)return e();RL(e);break;case pn.ArrowRight:if(p.preventDefault(),!r)return e();OL();break;case pn.ArrowDown:p.preventDefault(),r&&a(!1),s();break;default:f(p);break}if(o)switch(m){case pn.ArrowUp:if(p.preventDefault(),!r)return e();RL(e);break;case pn.ArrowDown:if(p.preventDefault(),!r)return e();OL();break;default:f(p);break}}},[r,e,a,s,f,o,c]);_.useEffect(function(){var h=n.current;if(h)return h.addEventListener("keydown",d),function(){h.removeEventListener("keydown",d)}},[n,t,r,d])}function yF(){var n=tf(),e=Nj(),t=Ai(),s=Ij(),i=_.useMemo(function(){return function(a){var o=a.key;switch(o){case pn.ArrowUp:a.preventDefault(),n();break;case pn.ArrowRight:a.preventDefault(),xA(Sp());break;case pn.ArrowLeft:a.preventDefault(),vA(Sp());break;case pn.ArrowDown:a.preventDefault(),Hb(t.current);break;default:s(a);break}}},[t,n,s]);_.useEffect(function(){var r=e.current;if(r)return r.addEventListener("keydown",i),function(){r.removeEventListener("keydown",i)}},[e,t,i])}function bF(){var n=Ai(),e=vF(),t=TA(),s=SA(),i=ef(),r=Ij(),a=_.useMemo(function(){return function(c){var f=c.key,d=Tr(Sp());switch(f){case pn.ArrowRight:c.preventDefault(),qB(d);break;case pn.ArrowLeft:c.preventDefault(),ZB(d);break;case pn.ArrowDown:if(c.preventDefault(),s()){i();break}XB(d);break;case pn.ArrowUp:if(c.preventDefault(),s()){i();break}KB(d,e);break;case pn.Space:c.preventDefault(),t(c.target);break;default:r(c);break}}},[e,r,t,s,i]);_.useEffect(function(){var o=n.current;if(o)return o.addEventListener("keydown",a),function(){o.removeEventListener("keydown",a)}},[n,a])}function DA(){var n=NA(),e=Fb(),t=Ai();return _.useCallback(function(){return e?Hb(t.current):n()},[t,n,e])}function vF(){var n=tf(),e=NA(),t=Fb();return _.useCallback(function(){return t?n():e()},[n,t,e])}function RL(n){var e=Sp();e&&(kF(e)||n(),xA(e))}function OL(){var n=Sp();n&&vA(n)}function Ij(){var n=aF(),e=tf(),t=yA(),s=ef();return function(r){var a=r.key;xF(r)||t||a.match(/(^[a-zA-Z0-9]$){1}/)&&(r.preventDefault(),s(),e(),n(a))}}function xF(n){var e=n.metaKey,t=n.ctrlKey,s=n.altKey;return e||t||s}function _F(n,e,t,s,i,r,a,o){if(n&&e!==ji.NATIVE){var c=qn(n);_x.has(c)||!r||!a||setTimeout(function(){var f=i+r.top,d=t+s,h=f>=d&&f<d+a.emojiSize*2;h&&PA(o,n,e)})}}function PA(n,e,t){if(e){var s=qn(e);_x.has(s)||(_x.add(s),Fg(e).concat(s).forEach(function(i){var r=n(i,t);jF(r)}))}}var _x=new Set;function jF(n){var e=new Image;e.src=n}function CF(){var n=Ai(),e=Ku(),t=Xu();_.useEffect(function(){if(e===ji.NATIVE)return;var s=n.current;return s==null||s.addEventListener("focusin",i),function(){s==null||s.removeEventListener("focusin",i)};function i(r){var a=Tr(r.target);if(a){var o=Dj(a),c=o[0];c&&Qh(c)&&PA(t,c,e)}}},[n,e,t])}var MF=["width","height"],jx=40;function LF(n){var e=n.children;return _.createElement(W5,null,_.createElement(SF,null,e))}function SF(n){var e,t=n.children,s=Zu(),i=s[0],r=DB(),a=Fb(),o=Jh(),c=RB(),f=OB();pF(),CF();var d=f||{},h=d.width,p=d.height,m=JN(d,MF);return _.createElement("aside",{className:tt(l0.main,l0.baseVariables,r===Mp.DARK&&l0.darkTheme,r===Mp.AUTO&&l0.autoThemeDark,(e={},e[rt.searchActive]=a,e),i&&l0.reactionsMenu,c),ref:o,style:Rt({},m,!i&&{height:p,width:h})},t)}var zL={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},l0=Ut.create({main:{".":["epr-main",rt.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"height 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-search-border-color":"var(--epr-search-input-bg-color)","--epr-search-border-color-active":"var(--epr-highlight-color)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":jx+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#00000000"}},autoThemeDark:{".":rt.autoTheme,"@media (prefers-color-scheme: dark)":{"--":zL}},darkTheme:{".":rt.darkTheme,"--":zL},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function RA(n,e){if(!n||!e)return 0;var t=n.getBoundingClientRect().width,s=e.getBoundingClientRect().width;return Math.floor(t/s)}function EF(n,e,t){if(!n||!e.length)return null;var s=n.getBoundingClientRect().top,i=n.getBoundingClientRect().bottom,r=s+OA(n),a=e.find(function(o){var c=o.getBoundingClientRect().top,f=o.getBoundingClientRect().bottom,d=o.clientHeight*t,h=c+d,p=f-d;return h<r?!1:h>=s&&h<=i||p>=s&&p<=i});return a||null}function kF(n){return!!n.nextElementSibling}function OA(n){if(!n)return jx;var e=n.querySelector(rr(rt.label));if(e){var t=e.getBoundingClientRect().height;if(t>0)return t}return jx}var Ep="button"+rr(rt.emoji),NF=[Ep,rr(rt.visible),":not("+rr(rt.hidden)+")"].join("");function Tr(n){var e;return(e=n==null?void 0:n.closest(Ep))!=null?e:null}function Dj(n){var e=$A(n),t=Rj(n);if(!e)return[];var s=Ph(t??e);return s?[s,t]:[]}function AF(n){var e;return!!(n!=null&&n.matches(Ep)||!(n==null||(e=n.parentElement)==null)&&e.matches(Ep))}function BL(n){var e;return(e=n==null?void 0:n.clientHeight)!=null?e:0}function zA(n){if(!n)return 0;var e=Tr(n),t=ql(e),s=Pj(t);return FL(e)+FL(t)+s}function Pj(n){var e,t;if(!n)return 0;var s=n.querySelector(rr(rt.categoryContent));return((e=n==null?void 0:n.clientHeight)!=null?e:0)-((t=s==null?void 0:s.clientHeight)!=null?t:0)}function TF(n){return n?FA(n)<Pj(ql(n)):!1}function BA(n){return n?n.matches(rr(rt.scrollBody))?n:n.querySelector(rr(rt.scrollBody)):null}function FA(n){var e,t;return n?zA(n)-((e=(t=UA(n))==null?void 0:t.scrollTop)!=null?e:0):0}function UA(n){var e;return n&&(e=n.closest(rr(rt.scrollBody)))!=null?e:null}function IF(n){var e=Tr(n),t=ql(e);return UL(e)+UL(t)}function FL(n){var e;return(e=n==null?void 0:n.offsetTop)!=null?e:0}function UL(n){var e;return(e=n==null?void 0:n.offsetLeft)!=null?e:0}function Rj(n){var e;return(e=DF(Tr(n),"unified"))!=null?e:null}function $A(n){var e=Rj(n);return e?Sj(e):null}function HA(n){return n?{unified:Rj(n),originalUnified:$A(n)}:{unified:null,originalUnified:null}}function DF(n,e){var t;return(t=PF(n)[e])!=null?t:null}function PF(n){var e;return(e=n==null?void 0:n.dataset)!=null?e:{}}function Oj(n){return n.classList.contains(rt.visible)}function GA(n){return n?n.classList.contains(rt.hidden):!0}function Rh(n){return n?Array.from(n.querySelectorAll(NF)):[]}function WA(n){if(!n)return null;var e=Rh(n),t=e.slice(-1),s=t[0];return s?Oj(s)?s:zj(s):null}function YA(n){var e=n.nextElementSibling;return e?Oj(e)?e:YA(e):Bj(Wb(n))}function zj(n){var e=n.previousElementSibling;return e?Oj(e)?e:zj(e):WA(Gb(n))}function Bj(n){if(!n)return null;var e=Rh(n);return EF(n,e,.1)}function Gb(n){var e=ql(n);if(!e)return null;var t=e.previousElementSibling;return t?GA(t)?Gb(t):t:null}function Wb(n){var e=ql(n);if(!e)return null;var t=e.nextElementSibling;return t?GA(t)?Wb(t):t:null}function ql(n){return n?n.closest(rr(rt.category)):null}function VA(n){return n?n.closest(rr(rt.categoryContent)):null}function QA(n){return n.split("-").map(function(e){return String.fromCodePoint(parseInt(e,16))}).join("")}function RF(n){return n.category===Ke.CUSTOM}function JA(n){return n.imgUrl!==void 0}function qA(n,e){var t=_.useRef(),s=TA(),i=Y5(),r=Vh(),a=r[1],o=ef(),c=Ob(),f=c[0],d=TB(e),h=tA(),p=h[1],m=Xu(),g=Ku(),w=_.useCallback(function(v){if(!i.current){o();var C=$L(v),S=C[0],L=C[1];if(!(!S||!L)){var k=wB(L)||f;p(),dB(S,k),d(OF(S,k,g,m),v)}}},[f,o,i,d,p,m,g]),b=_.useCallback(function(v){var C;t.current&&clearTimeout(t.current);var S=$L(v),L=S[0];!L||!Qh(L)||(t.current=(C=window)==null?void 0:C.setTimeout(function(){i.current=!0,t.current=void 0,o(),s(v.target),a(L)},500))},[i,o,s,a]),y=_.useCallback(function(){t.current?(clearTimeout(t.current),t.current=void 0):i.current&&requestAnimationFrame(function(){i.current=!1})},[i]);_.useEffect(function(){if(n.current){var x=n.current;return x.addEventListener("click",w,{passive:!0}),x.addEventListener("mousedown",b,{passive:!0}),x.addEventListener("mouseup",y,{passive:!0}),function(){x==null||x.removeEventListener("click",w),x==null||x.removeEventListener("mousedown",b),x==null||x.removeEventListener("mouseup",y)}}},[n,w,b,y])}function $L(n){var e=n==null?void 0:n.target;return AF(e)?Dj(e):[]}function OF(n,e,t,s){var i=Bg(n);if(JA(n)){var r=qn(n);return{activeSkinTone:e,emoji:r,getImageUrl:function(){return n.imgUrl},imageUrl:n.imgUrl,isCustom:!0,names:i,unified:r,unifiedWithoutSkinTone:r}}var a=qn(n,e);return{activeSkinTone:e,emoji:QA(a),getImageUrl:function(c){return c===void 0&&(c=t??ji.APPLE),s(a,c)},imageUrl:s(a,t??ji.APPLE),isCustom:!1,names:i,unified:a,unifiedWithoutSkinTone:qn(n)}}function Ug(n){return _.createElement("button",Object.assign({type:"button"},n,{className:tt(zF.button,n.className)}),n.children)}var zF=Ut.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function BF(n){var e,t=n.emojiNames,s=n.unified,i=n.hidden,r=n.hiddenOnSearch,a=n.showVariations,o=a===void 0?!0:a,c=n.hasVariations,f=n.children,d=n.className,h=n.noBackground,p=h===void 0?!1:h,m=n.style;return _.createElement(Ug,{className:tt(Wv.emoji,i&&jj.hidden,r&&qu.hiddenOnSearch,(e={},e[rt.visible]=!i&&!r,e),!!(c&&o)&&Wv.hasVariations,p&&Wv.noBackground,d),"data-unified":s,"aria-label":FF(t),"data-full-name":t,style:m},f)}function FF(n){var e;return n[0].match("flag-")&&(e=n[1])!=null?e:n[0]}var Wv=Ut.create({emoji:{".":rt.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":rt.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),Ey=Ut.create({external:{".":rt.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function HL(n){var e=n.emojiName,t=n.style,s=n.lazyLoad,i=s===void 0?!1:s,r=n.imgUrl,a=n.onError,o=n.className;return _.createElement("img",{src:r,alt:e,className:tt(UF.emojiImag,Ey.external,Ey.common,o),loading:i?"lazy":"eager",onError:a,style:t})}var UF=Ut.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function $F(n){var e=n.unified,t=n.style,s=n.className;return _.createElement("span",{className:tt(HF.nativeEmoji,Ey.common,Ey.external,s),"data-unified":e,style:t},QA(e))}var HF=Ut.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function Cx(n){var e=n.emoji,t=n.unified,s=n.emojiStyle,i=n.size,r=n.lazyLoad,a=n.getEmojiUrl,o=a===void 0?lA:a,c=n.className,f=XN(),d=f[1],h={};i&&(h.width=h.height=h.fontSize=i+"px");var p=e||Ph(t);if(!p)return null;if(JA(p))return _.createElement(HL,{style:h,emojiName:t,emojiStyle:ji.NATIVE,lazyLoad:r,imgUrl:p.imgUrl,onError:m,className:c});return _.createElement(_.Fragment,null,s===ji.NATIVE?_.createElement($F,{unified:t,style:h,className:c}):_.createElement(HL,{style:h,emojiName:xx(p),emojiStyle:s,lazyLoad:r,imgUrl:o(t,s),onError:m,className:c}));function m(){d(function(g){return new Set(g).add(t)})}}function Yb(n){var e=n.emoji,t=n.unified,s=n.hidden,i=n.hiddenOnSearch,r=n.emojiStyle,a=n.showVariations,o=a===void 0?!0:a,c=n.size,f=n.lazyLoad,d=n.getEmojiUrl,h=n.className,p=n.noBackground,m=p===void 0?!1:p,g=n.style,w=Qh(e);return _.createElement(BF,{hasVariations:w,showVariations:o,hidden:s,hiddenOnSearch:i,emojiNames:Bg(e),unified:t,noBackground:m,style:g},_.createElement(Cx,{unified:t,emoji:e,size:c,emojiStyle:r,lazyLoad:f,getEmojiUrl:d,className:h}))}var GF="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=";function WF(){var n=Zu(),e=n[1];return _.createElement(Ug,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:tt(YF.plusSign),onClick:function(){return e(!1)}})}var YF=Ut.create(Rt({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url("+GF+")",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},Ul("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function VF(){var n=Zu(),e=n[0],t=GB(),s=UB();qA(t,Lp.REACTIONS);var i=Ku(),r=pA(),a=Xu();return e?_.createElement("ul",{className:tt(GL.list,!e&&jj.hidden),ref:t},s.map(function(o){return _.createElement("li",{key:o},_.createElement(Yb,{emoji:Ph(o),emojiStyle:i,unified:o,showVariations:!1,className:tt(GL.emojiButton),noBackground:!0,getEmojiUrl:a}))}),r?_.createElement("li",null,_.createElement(WF,null)):null):null}var GL=Ut.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function QF(n){var e=ef(),t=_.useState(0),s=t[0],i=t[1];return _.useEffect(function(){var r=n.current;if(!r)return;r.addEventListener("scroll",a,{passive:!0});function a(){var o;i((o=r==null?void 0:r.scrollTop)!=null?o:0),e()}return function(){r==null||r.removeEventListener("scroll",a)}},[n,e]),s}function JF(n){var e=n.scrollTop,t=n.clientHeight,s=n.topOffset,i=n.style,r=n.dimensions;if(!i||!r)return!1;var a=s+i.top,o=a+r.emojiSize,c=o+r.emojiSize*2>=e&&a<=e+t+r.emojiSize;return!c}function qF(n,e){return n?{top:Math.floor(e/n.emojisPerRow)*n.emojiSize,left:e%n.emojisPerRow*n.emojiSize}:void 0}var ZF=40;function KF(n){var e=CA(),t=Zu(),s=t[0],i=Jh(),r=_.useRef(),a=Lj(),o=a[0],c=eA(),f=c[0],d=_.useState(),h=d[0],p=d[1],m=_.useCallback(function(){var g=e.current;if(g){var w=g.querySelector(Ep),b=w==null?void 0:w.clientHeight;b&&(r.current=b);var y=f||b||r.current||ZF,x=g.clientWidth;if(!(x===0||y===0)){var v=Math.max(1,Math.floor(x/y)),C=Math.ceil(n/v),S=C*y;p({categoryHeight:S,emojisPerRow:v,emojiSize:y})}}},[e,n,f]);return _.useEffect(function(){m()},[n,s,m,o.length]),_.useEffect(function(){var g=i.current;if(g){var w=function(y){var x=y,v=x.propertyName;(v==="width"||v==="max-width"||v==="min-width"||v==="height"||v==="max-height"||v==="min-height")&&(typeof queueMicrotask=="function"?queueMicrotask(function(){return m()}):requestAnimationFrame(function(){return m()}))};return g.addEventListener("transitionend",w,{passive:!0}),function(){g.removeEventListener("transitionend",w)}}},[i,m]),h}function XF(){var n=XN(),e=n[0],t=uF();return function(s){var i=qn(s),r=e.has(i),a=t(i);return{failedToLoad:r,filteredOut:a,hidden:r||a}}}function eU(n){var e=n.categoryEmojis,t=n.topOffset,s=n.onHeightReady,i=n.scrollTop,r=n.isCategoryVisible,a=XF(),o=wA(),c=Ku(),f=Ob(),d=f[0],h=$5(),p=Xu(),m=!mA(),g=Ai(),w=0,b=e.filter(function(C){var S=h(C),L=a(C),k=L.failedToLoad,A=L.filteredOut,T=L.hidden;return!k&&!A&&!T&&!S}),y=KF(b.length);_.useEffect(function(){y&&s(y.categoryHeight)},[y,s,b.length]);var x=function(S){var L,k;return y&&g.current&&JF({scrollTop:i,clientHeight:(L=(k=g.current)==null?void 0:k.clientHeight)!=null?L:0,topOffset:t,style:S,dimensions:y})},v=b.reduce(function(C,S,L){var k=qn(S,d),A=qF(y,L);if(x(A)){var T,I;return w++,_F(S,c,i,(T=(I=g.current)==null?void 0:I.clientHeight)!=null?T:0,t,A,y,p),C}return r?(C.push(_.createElement(Yb,{showVariations:m,key:k,emoji:S,unified:k,emojiStyle:c,lazyLoad:o,getEmojiUrl:p,style:Rt({},A,{position:"absolute"})})),C):(w++,C)},[]);return{virtualizedCounter:w,emojis:v,dimensions:y}}function tU(n){var e=n.categoryConfig,t=n.children,s=n.hidden,i=n.hiddenOnSearch,r=n.height,a=zb(e),o=iA(e);return _.createElement("li",{className:tt(Yv.category,s&&jj.hidden,i&&qu.hiddenOnSearch),"data-name":a,"aria-label":o},_.createElement("h2",{className:tt(Yv.label)},o),_.createElement("div",{className:tt(Yv.categoryContent),style:{height:r}},t))}var Yv=Ut.create({category:{".":rt.category,minHeight:"calc(var(--epr-emoji-fullsize) + var(--epr-category-label-height))",position:"relative"},categoryContent:{".":rt.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":rt.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}});function nU(){var n=Ej(),e=oA(),t=Ku(),s=Xu(),i=wA(),r=Ob(),a=r[0],o=eA(),c=o[0],f=o[1],d=_.useRef(null);if(_.useLayoutEffect(function(){d.current&&f(d.current.clientHeight)}),c)return null;var h=n[0],p=e(zb(h))[0],m=p?qn(p,a):"";return p?_.createElement("div",{ref:d},_.createElement(Yb,{emoji:p,unified:m,emojiStyle:t,getEmojiUrl:s,lazyLoad:i,showVariations:!1,hidden:!1,style:{opacity:0,pointerEvents:"none",position:"absolute",top:0,left:0,zIndex:-1,height:"var(--epr-emoji-fullsize)",width:"var(--epr-emoji-fullsize)"}})):null}function sU(n){var e=n.scrollTop,t=Ej(),s=_.useState({}),i=s[0],r=s[1],a=CA(),o=oA(),c=OA(a.current),f=0;return _.createElement("ul",{className:tt(rU.emojiList),ref:a},_.createElement(nU,null),t.map(function(d){var h=zb(d),p=f,m=i[h];return m&&(f+=m+c),_.createElement(_.Suspense,{key:h},_.createElement(iU,{categoryEmojis:o(h),categoryConfig:d,topOffset:p,onHeightReady:function(w){i[h]!==w&&r(function(b){var y;return Rt({},b,(y={},y[h]=w,y))})},scrollTop:e}))}))}function iU(n){var e=n.categoryEmojis,t=n.categoryConfig,s=n.topOffset,i=n.onHeightReady,r=n.scrollTop,a=Lj(),o=a[0],c=eU({categoryEmojis:e,topOffset:s,onHeightReady:i,scrollTop:r,isCategoryVisible:o.includes(t.category)}),f=c.virtualizedCounter,d=c.emojis,h=c.dimensions;return _.createElement(tU,{categoryConfig:t,height:h==null?void 0:h.categoryHeight,hidden:!d.length&&f===0},d)}var rU=Ut.create({emojiList:{".":rt.emojiList,listStyle:"none",margin:"0",padding:"0"}}),aU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=",Zf;(function(n){n[n.Up=0]="Up",n[n.Down=1]="Down"})(Zf||(Zf={}));function oU(){var n=Ub(),e=WB(),t=Vh(),s=t[0],i=Ku(),r=cU(e),a=r.getTop,o=r.getMenuDirection,c=MA(),f=lU(e),d=Xu(),h=Tr(n.current),p=!!(s&&h&&Qh(s)&&h.classList.contains(rt.emojiHasVariations));_.useEffect(function(){p&&Hb(e.current)},[e,p,n]);var m,g;return!p&&n.current?c(null):(m=a(),g=f()),_.createElement("div",{ref:e,className:tt(S1.variationPicker,o()===Zf.Down&&S1.pointingUp,p&&S1.visible),style:{top:m}},p&&s?[qn(s)].concat(Fg(s)).slice(0,6).map(function(w){return _.createElement(Yb,{key:w,emoji:s,unified:w,emojiStyle:i,showVariations:!1,getEmojiUrl:d})}):null,_.createElement("div",{className:tt(S1.pointer),style:g}))}function lU(n){var e=Ub();return function(){var s={};if(!n.current)return s;if(e.current){var i=Tr(e.current),r=IF(i);if(!i)return s;s.left=r+(i==null?void 0:i.clientWidth)/2}return s}}function cU(n){var e=Ub(),t=Ai(),s=Zf.Up;return{getMenuDirection:i,getTop:r};function i(){return s}function r(){s=Zf.Up;var a=0;if(!n.current)return 0;var o=BL(n.current);if(e.current){var c,f=t.current,d=Tr(e.current),h=BL(d);a=zA(d);var p=(c=f==null?void 0:f.scrollTop)!=null?c:0;p>a-o&&(s=Zf.Down,a+=h+o)}return a-o}}var S1=Ut.create(Rt({variationPicker:{".":rt.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url("+aU+")"}},Ul("pointer",{backgroundPosition:"-25px 0"})));function uU(){var n=Ai(),e=QF(n);return qA(n,Lp.PICKER),sF(),_.createElement("div",{className:tt(fU.body,qu.hiddenOnReactions),ref:n},_.createElement(oU,null),_.createElement(sU,{scrollTop:e}))}var fU=Ut.create({body:{".":rt.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function dU(n,e){if(!n||!e)return 0;var t=n.getBoundingClientRect(),s=e.getBoundingClientRect();return s.height-(t.y-s.y)}function hU(n,e){var t=Ai(),s=kA(),i=EA();_.useEffect(function(){if(!n)return;var r=t.current;r==null||r.addEventListener("keydown",c,{passive:!0}),r==null||r.addEventListener("mouseover",f,!0),r==null||r.addEventListener("focus",a,!0),r==null||r.addEventListener("mouseout",o,{passive:!0}),r==null||r.addEventListener("blur",o,!0);function a(d){var h=Tr(d.target);if(!h)return o();var p=HA(h),m=p.unified,g=p.originalUnified;if(!m||!g)return o();e({unified:m,originalUnified:g})}function o(d){if(d){var h=d.relatedTarget;if(!Tr(h))return e(null)}e(null)}function c(d){d.key==="Escape"&&e(null)}function f(d){if(!s()){var h=Tr(d.target);if(h){var p=dU(h,r),m=h.getBoundingClientRect().height;if(p<m)return pU(h,e);Ni(h)}}}return function(){r==null||r.removeEventListener("mouseover",f),r==null||r.removeEventListener("mouseout",o),r==null||r.removeEventListener("focus",a,!0),r==null||r.removeEventListener("blur",o,!0),r==null||r.removeEventListener("keydown",c)}},[t,n,e,s,i])}function pU(n,e){var t,s=HA(n),i=s.unified,r=s.originalUnified;!i||!r||((t=document.activeElement)==null||t.blur==null||t.blur(),e({unified:i,originalUnified:r}))}var E1,kp;(function(n){n.ROW="FlexRow",n.COLUMN="FlexColumn"})(kp||(kp={}));function ZA(n){var e=n.children,t=n.className,s=n.style,i=s===void 0?{}:s,r=n.direction,a=r===void 0?kp.ROW:r;return _.createElement("div",{style:Rt({},i),className:tt(WL.flex,t,WL[a])},e)}var WL=Ut.create((E1={flex:{display:"flex"}},E1[kp.ROW]={flexDirection:"row"},E1[kp.COLUMN]={flexDirection:"column"},E1));function mU(n){var e=n.className,t=n.style,s=t===void 0?{}:t;return _.createElement("div",{style:Rt({flex:1},s),className:tt(e)})}function gU(n){var e=n.children,t=n.className,s=n.style;return _.createElement("div",{style:Rt({},s,{position:"absolute"}),className:t},e)}function Vb(n){var e=n.children,t=n.className,s=n.style;return _.createElement("div",{style:Rt({},s,{position:"relative"}),className:t},e)}function wU(n){var e=n.isOpen,t=n.onClick,s=n.isActive,i=n.skinToneVariation,r=n.style;return _.createElement(Ug,{style:r,onClick:t,className:tt("epr-tone-"+i,Vv.tone,!e&&Vv.closedTone,s&&Vv.active),"aria-pressed":s,"aria-label":"Skin tone "+uB[i]})}var Vv=Ut.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}}),_0=28;function yU(){return _.createElement(Vb,{style:{height:_0}},_.createElement(gU,{style:{bottom:0,right:0}},_.createElement(KA,{direction:Np.VERTICAL})))}function KA(n){var e=n.direction,t=e===void 0?Np.HORIZONTAL:e,s=kj(),i=mA(),r=zg(),a=r[0],o=r[1],c=Ob(),f=c[0],d=c[1],h=IB(),p=ef(),m=tf();if(i)return null;var g=_0*Ly.length+"px",w=a?g:_0+"px",b=t===Np.VERTICAL;return _.createElement(Vb,{className:tt(c0.skinTones,b&&c0.vertical,a&&c0.open,b&&a&&c0.verticalShadow),style:b?{flexBasis:w,height:w}:{flexBasis:w}},_.createElement("div",{className:tt(c0.select),ref:s},Ly.map(function(y,x){var v=y===f;return _.createElement(wU,{key:y,skinToneVariation:y,isOpen:a,style:{transform:tt(b?"translateY(-"+x*(a?_0:0)+"px)":"translateX(-"+x*(a?_0:0)+"px)",a&&v&&"scale(1.3)")},isActive:v,onClick:function(){a?(d(y),h(y),m()):o(!0),p()}})})))}var Np;(function(n){n.VERTICAL="epr-vertical",n.HORIZONTAL="epr-horizontal"})(Np||(Np={}));var c0=Ut.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function bU(){var n=gA(),e=IA(),t=Zu(),s=t[0];return n.showPreview?_.createElement(ZA,{className:tt(np.preview,qu.hiddenOnReactions,s&&np.hideOnReactions)},_.createElement(vU,null),_.createElement(mU,null),e?_.createElement(yU,null):null):null}function vU(){var n,e=gA(),t=_.useState(null),s=t[0],i=t[1],r=Ku(),a=Vh(),o=a[0],c=Xu();hU(e.showPreview,i);var f=Ph((n=s==null?void 0:s.unified)!=null?n:s==null?void 0:s.originalUnified),d=f!=null&&s!=null;return _.createElement(h,null);function h(){var p=o??Ph(e.defaultEmoji);if(!p)return null;var m=o?xx(o):e.defaultCaption;return _.createElement(_.Fragment,null,_.createElement("div",null,d?_.createElement(Cx,{unified:s==null?void 0:s.unified,emoji:f,emojiStyle:r,size:45,getEmojiUrl:c,className:tt(np.emoji)}):p?_.createElement(Cx,{unified:qn(p),emoji:p,emojiStyle:r,size:45,getEmojiUrl:c,className:tt(np.emoji)}):null),_.createElement("div",{className:tt(np.label)},d?xx(f):m))}}var np=Ut.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"},hideOnReactions:{opacity:"0",transition:"opacity 0.5s ease-in-out"}});function xU(n){var e;return(e=n==null?void 0:n.getAttribute("data-name"))!=null?e:null}function _U(n){var e=n.setActiveCategory,t=n.setVisibleCategories,s=Ai();_.useEffect(function(){var i=new Map,r=new Map,a=s.current,o=new IntersectionObserver(function(c){if(a){for(var f=R5(c),d;!(d=f()).done;){var h=d.value,p=xU(h.target);p&&(i.set(p,h.intersectionRatio),r.set(p,h.isIntersecting))}var m=Array.from(i),g=m.filter(function(S){var L=S[0],k=S[1];return k>0||r.get(L)}).map(function(S){var L=S[0];return L});t(g);var w=m[m.length-1];if((w==null?void 0:w[1])==1)return e(w[0]);for(var b=0,y=m;b<y.length;b++){var x=y[b],v=x[0],C=x[1];if(C){e(v);break}}}},{root:a,threshold:[0,1]});return a==null||a.querySelectorAll(rr(rt.category)).forEach(function(c){o.observe(c)}),function(){o.disconnect()}},[s,e,t])}function jU(){var n=Ai(),e=Jh();return function(s){var i;if(n.current){var r=(i=n.current)==null?void 0:i.querySelector('[data-name="'+s+'"]');if(r){var a=r.offsetTop||0;LA(e.current,a)}}}}function CU(){var n=NB();return n?n.length===0:!1}var MU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+";function LU(n){var e,t=n.isActiveCategory,s=n.category,i=n.allowNavigation,r=n.categoryConfig,a=n.onClick;return _.createElement(Ug,{tabIndex:i?0:-1,className:tt(EU.catBtn,qu.categoryBtn,"epr-icn-"+s,(e={},e[rt.active]=t,e)),onClick:a,"aria-label":iA(r),"aria-selected":t,role:"tab","aria-controls":"epr-category-nav-id"})}var YL={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},SU={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},VL={":not(.epr-search-active)":{catBtn:{":hover":YL,"&.epr-active":YL}}},EU=Ut.create(Rt({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url("+MU+")",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},Ul("catBtn",SU),{".epr-dark-theme":Rt({},VL),".epr-auto-theme":Rt({},VL)}));function kU(){var n=_.useState(null),e=n[0],t=n[1],s=Lj(),i=s[1],r=jU();_U({setActiveCategory:t,setVisibleCategories:i});var a=Fb(),o=Ej(),c=Nj(),f=CU();return _.createElement("div",{className:tt(NU.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:c},o.map(function(d){var h=zb(d),p=h===e;if(RF(d)&&f)return null;var m=!a&&!p;return _.createElement(LU,{key:h,category:h,isActiveCategory:p,allowNavigation:m,categoryConfig:d,onClick:function(){r(h),setTimeout(function(){t(h)},10)}})}))}var NU=Ut.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),XA="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function AU(){var n=AA();return _.createElement(Ug,{className:tt(QL.btnClearSearch,qu.visibleOnSearchOnly),onClick:n,"aria-label":"Clear",title:"Clear"},_.createElement("div",{className:tt(QL.icnClearnSearch)}))}var TU={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},QL=Ut.create(Rt({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+XA+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Ul("icnClearnSearch",{backgroundPositionY:"-40px"}),Ul("btnClearSearch",TU))),IU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+";function DU(){return _.createElement("div",{className:tt(PU.icnSearch)})}var PU=Ut.create(Rt({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url("+IU+")"}},Ul("icnSearch",{backgroundPositionY:"-20px"})));function RU(){var n=yA(),e=Tj();return n?null:_.createElement(ZA,{className:tt(lw.overlay)},_.createElement(OU,null),e?_.createElement(KA,null):null)}function OU(){var n=ef(),e=Jl(),t=SB(),s=kB(),i=oF(),r=i.statusSearchResults,a=i.searchTerm,o=i.onChange,c=e==null?void 0:e.current,f=c==null?void 0:c.value;return _.createElement(Vb,{className:tt(lw.searchContainer)},_.createElement("input",{autoFocus:s,"aria-label":"Type to search for an emoji",onFocus:n,className:tt(lw.search),type:"text","aria-controls":"epr-search-id",placeholder:t,onChange:function(h){var p,m;o((p=h==null||(m=h.target)==null?void 0:m.value)!=null?p:f)},ref:e}),a?_.createElement("div",{role:"status",className:tt("epr-status-search-results",lw.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},r):null,_.createElement(DU,null),_.createElement(AU,null))}var lw=Ut.create(Rt({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-border-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color-active)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+XA+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Ul("icnClearnSearch",{backgroundPositionY:"-40px"}),Ul("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function zU(){return _.createElement(Vb,{className:tt("epr-header",qu.hiddenOnReactions)},_.createElement(RU,null),_.createElement(kU,null))}function BU(n){return _.createElement(HB,null,_.createElement(B5,null),_.createElement(CB,Object.assign({},n),_.createElement(FU,null)))}function FU(){var n=Zu(),e=n[0],t=pA(),s=_.useState(!e),i=s[0],r=s[1],a=AB();return _.useEffect(function(){e&&!t||i||r(!0)},[i,t,e]),a?_.createElement(LF,null,_.createElement(VF,null),_.createElement(UU,{renderAll:i})):null}function UU(n){var e=n.renderAll;return e?_.createElement(_.Fragment,null,_.createElement(zU,null),_.createElement(uU,null),_.createElement(bU,null)):null}var $U=_.memo(BU,qN),HU=function(n){O5(e,n);function e(s){var i;return i=n.call(this,s)||this,i.state={hasError:!1},i}e.getDerivedStateFromError=function(){return{hasError:!0}};var t=e.prototype;return t.componentDidCatch=function(i,r){console.error("Emoji Picker React failed to render:",i,r)},t.render=function(){return this.state.hasError?null:this.props.children},e}(_.Component);function Fj(n){var e=LB({onEmojiClick:n.onEmojiClick,onReactionClick:n.onReactionClick,onSkinToneChange:n.onSkinToneChange});return _.createElement(HU,null,_.createElement(dA.Provider,{value:e},_.createElement($U,Object.assign({},n))))}function GU({message:n,conversation:e,onReactionChange:t,forceOpen:s=!1}){const[i,r]=_.useState(!1),a=_.useRef(null),o=n.reactions||[],c={};o.forEach(h=>{c[h.emoji]||(c[h.emoji]=[]),c[h.emoji].push(h)});const f=async h=>{const p=o.find(m=>m.emoji===h);try{p?await g5({message_id:n.id,emoji:h}):await m5({message_id:n.id,emoji:h}),r(!1),t==null||t()}catch(m){console.error("Error managing reaction:",m)}};_.useEffect(()=>{function h(p){a.current&&!a.current.contains(p.target)&&r(!1)}if(i)return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[i]),_.useEffect(()=>{r(s)},[s]);const d=Object.keys(c).length>0;return l.jsxs("div",{className:"message-reactions",ref:a,children:[d&&l.jsx("div",{className:"message-reactions__list",children:Object.entries(c).map(([h,p])=>l.jsxs("button",{className:"message-reaction",onClick:()=>f(h),title:`${p.length} raction${p.length>1?"s":""}`,children:[l.jsx("span",{className:"message-reaction__emoji",children:h}),p.length>1&&l.jsx("span",{className:"message-reaction__count",children:p.length})]},h))}),i&&l.jsx("div",{className:"message-reactions__picker-container visible",ref:a,children:l.jsx("div",{className:"message-reactions__picker message-reactions__picker--emoji",children:l.jsx(Fj,{onEmojiClick:h=>{h!=null&&h.emoji&&f(h.emoji)},theme:"dark",width:280,height:320})})})]})}function k1(n){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M464 128L240 384l-96-96m0 96l-96-96m320-160L232 284"}}]})(n)}function WU(n){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M416 128L192 384l-96-96"}}]})(n)}function YU({status:n,isOwnMessage:e,conversation:t,messageTimestamp:s,message:i,onResend:r}){const[a,o]=_.useState(!1);if(e)switch((n||"sent").toLowerCase()){case"pending":return l.jsx("span",{className:"message-status message-status--sent",title:"Envoi en cours...",children:l.jsx(WU,{})});case"read":return l.jsx("span",{className:"message-status message-status--read",title:"Lu",children:l.jsx(k1,{})});case"delivered":return l.jsx("span",{className:"message-status message-status--delivered",title:"Dlivr",children:l.jsx(k1,{})});case"sent":return l.jsx("span",{className:"message-status message-status--sent",title:"Envoy",children:l.jsx(k1,{})});case"failed":case"error":const f=i==null?void 0:i.error_message;return l.jsxs("div",{className:"message-status-container",onMouseEnter:()=>f&&o(!0),onMouseLeave:()=>o(!1),onClick:d=>d.stopPropagation(),children:[l.jsxs("button",{className:"message-status message-status--failed message-status--resend",title:f||"Message non envoy - Cliquez pour renvoyer",onClick:d=>{d.stopPropagation(),r&&i&&r(i)},children:[l.jsx("span",{className:"message-status__error-icon",children:""}),l.jsx("span",{className:"message-status__resend-text",children:"Renvoyer"}),l.jsx(DN,{className:"message-status__resend-icon"})]}),f&&a&&l.jsxs("div",{className:"message-status__error-tooltip",children:[l.jsxs("div",{className:"message-status__error-tooltip-header",children:[l.jsx(bj,{}),l.jsx("span",{children:"Dtails de l'erreur"})]}),l.jsx("div",{className:"message-status__error-tooltip-content",children:f})]})]});default:return l.jsx("span",{className:"message-status message-status--sent",title:"Envoy",children:l.jsx(k1,{})})}return null}const bs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Mx=[.001,0,0,.001,0,0],Qv=1.35,gi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ro={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ap="pdfjs_internal_editor_",$e={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},VU={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Lx={TRIANGLES:1,LATTICE:2},yn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},cw={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},un={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},mf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Qb={ERRORS:0,WARNINGS:1,INFOS:5},Tp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},u0={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},QU={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Jb=Qb.WARNINGS;function JU(n){Number.isInteger(n)&&(Jb=n)}function qU(){return Jb}function qb(n){Jb>=Qb.INFOS&&console.info(`Info: ${n}`)}function Be(n){Jb>=Qb.WARNINGS&&console.warn(`Warning: ${n}`)}function St(n){throw new Error(n)}function st(n,e){n||St(e)}function ZU(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function eT(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=n7(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return ZU(s)?s:null}function tT(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&eT(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Fe(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const nf=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class JL extends nf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Jv extends nf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Sx extends nf{constructor(e){super(e,"InvalidPDFException")}}class ky extends nf{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class KU extends nf{constructor(e){super(e,"FormatError")}}class $l extends nf{constructor(e){super(e,"AbortException")}}function nT(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&St("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function $g(n){typeof n!="string"&&St("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function XU(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function e7(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function t7(){try{return new Function(""),!0}catch{return!1}}class Ln{static get isLittleEndian(){return Fe(this,"isLittleEndian",e7())}static get isEvalSupported(){return Fe(this,"isEvalSupported",t7())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Fe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Fe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Fe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Fe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const qv=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var po,uw,Ex;class ge{static makeHexColor(e,t,s){return`#${qv[e]}${qv[t]}${qv[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],a=t[2],o=t[3],c=t[4],f=t[5];for(let d=0;d<6;d+=2){const h=e[s+d],p=e[s+d+1];e[s+d]=h*i+p*a+c,e[s+d+1]=h*r+p*o+f}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],a=t[2],o=t[3],c=t[4],f=t[5],d=e[0],h=e[1],p=e[2],m=e[3];let g=i*d+c,w=g,b=i*p+c,y=b,x=o*h+f,v=x,C=o*m+f,S=C;if(r!==0||a!==0){const L=r*d,k=r*p,A=a*h,T=a*m;g+=A,y+=A,b+=T,w+=T,x+=L,S+=L,C+=k,v+=k}s[0]=Math.min(s[0],g,b,w,y),s[1]=Math.min(s[1],x,C,v,S),s[2]=Math.max(s[2],g,b,w,y),s[3]=Math.max(s[3],x,C,v,S)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],a=e[3],o=s**2+i**2,c=s*r+i*a,f=r**2+a**2,d=(o+f)/2,h=Math.sqrt(d**2-(o*f-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,i,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,a,o,c,f){f[0]=Math.min(f[0],e,o),f[1]=Math.min(f[1],t,c),f[2]=Math.max(f[2],e,o),f[3]=Math.max(f[3],t,c),E(this,po,Ex).call(this,e,s,r,o,t,i,a,c,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),f),E(this,po,Ex).call(this,e,s,r,o,t,i,a,c,3*(-t+3*(i-a)+c),6*(t-2*i+a),3*(i-t),f)}}po=new WeakSet,uw=function(e,t,s,i,r,a,o,c,f,d){if(f<=0||f>=1)return;const h=1-f,p=f*f,m=p*f,g=h*(h*(h*e+3*f*t)+3*p*s)+m*i,w=h*(h*(h*r+3*f*a)+3*p*o)+m*c;d[0]=Math.min(d[0],g),d[1]=Math.min(d[1],w),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],w)},Ex=function(e,t,s,i,r,a,o,c,f,d,h,p){if(Math.abs(f)<1e-12){Math.abs(d)>=1e-12&&E(this,po,uw).call(this,e,t,s,i,r,a,o,c,-h/d,p);return}const m=d**2-4*h*f;if(m<0)return;const g=Math.sqrt(m),w=2*f;E(this,po,uw).call(this,e,t,s,i,r,a,o,c,(-d+g)/w,p),E(this,po,uw).call(this,e,t,s,i,r,a,o,c,(-d-g)/w,p)},M(ge,po);function n7(n){return decodeURIComponent(escape(n))}let Zv=null,qL=null;function s7(n){return Zv||(Zv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qL=new Map([["","t"]])),n.replaceAll(Zv,(e,t,s)=>t?t.normalize("NFKC"):qL.get(s))}function sT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),nT(n)}const Rf="pdfjs_internal_id_";function i7(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const a=r.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function vs(n,e,t){return Math.min(Math.max(n,e),t)}function iT(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(nT(n))}function r7(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):$g(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Ip{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Ip.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const f of r.children)i(f)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class rT{static setupStorage(e,t,s,i,r){const a=i.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,f=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,f]of Object.entries(a))if(f!=null)switch(c){case"class":f.length&&e.setAttribute(c,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,f)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var h,p;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}o&&c.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);a.append(m),o&&Ip.shouldBuildText(i.name)&&f.push(m)}return{textDivs:f}}const d=[[i,-1,a]];for(;d.length>0;){const[m,g,w]=d.at(-1);if(g+1===m.children.length){d.pop();continue}const b=m.children[++d.at(-1)[1]];if(b===null)continue;const{name:y}=b;if(y==="#text"){const v=document.createTextNode(b.value);f.push(v),w.append(v);continue}const x=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,y):document.createElement(y);if(w.append(x),b.attributes&&this.setAttributes({html:x,element:b,storage:t,intent:r,linkService:s}),((p=b.children)==null?void 0:p.length)>0)d.push([b,-1,x]);else if(b.value){const v=document.createTextNode(b.value);o&&Ip.shouldBuildText(y)&&f.push(v),x.append(v)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ba="http://www.w3.org/2000/svg",uc=class uc{};ee(uc,"CSS",96),ee(uc,"PDF",72),ee(uc,"PDF_TO_CSS_UNITS",uc.CSS/uc.PDF);let Hl=uc;async function Hg(n,e="text"){if(j0(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Gg{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let d,h,p,m;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,p=0,m=1;break;case 90:d=0,h=1,p=1,m=0;break;case 270:d=0,h=-1,p=-1,m=0;break;case 0:d=1,h=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let g,w,b,y;d===0?(g=Math.abs(f-e[1])*s+r,w=Math.abs(c-e[0])*s+a,b=(e[3]-e[1])*s,y=(e[2]-e[0])*s):(g=Math.abs(c-e[0])*s+r,w=Math.abs(f-e[1])*s+a,b=(e[2]-e[0])*s,y=(e[3]-e[1])*s),this.transform=[d*s,h*s,p*s,m*s,g-d*s*c-p*s*f,w-h*s*c-m*s*f],this.width=b,this.height=y}get rawDims(){const e=this.viewBox;return Fe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Gg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return ge.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];ge.applyTransform(t,this.transform);const s=[e[2],e[3]];return ge.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return ge.applyInverseTransform(s,this.transform),s}}class Uj extends nf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Zb(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function $j(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function a7(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function o7(n,e="document.pdf"){if(typeof n!="string")return e;if(Zb(n))return Be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},r=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(r.test(a))return i(a);if(s.searchParams.size>0){const o=Array.from(s.searchParams.values()).reverse();for(const f of o)if(r.test(f))return i(f);const c=Array.from(s.searchParams.keys()).reverse();for(const f of c)if(r.test(f))return i(f)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return i(c[0])}return e}class ZL{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(e){e in this.started&&Be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function j0(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ar(n){n.preventDefault()}function nn(n){n.preventDefault(),n.stopPropagation()}function l7(n){console.log("Deprecated API usage: "+n)}var Rp;class Ny{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Rp)||j(this,Rp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Rp).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const f=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,f==="-"?(a+=d,o+=h):f==="+"&&(a-=d,o-=h),new Date(Date.UTC(s,i,r,a,o,c))}}Rp=new WeakMap,M(Ny,Rp);function c7(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Gg({viewBox:r,userUnit:1,scale:e,rotation:t})}function Wg(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Be(`Not a valid color format: "${n}"`),[0,0,0])}function u7(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Wg(s))}e.remove()}function Gt(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform();return[e,t,s,i,r,a]}function Br(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[e,t,s,i,r,a]}function Gu(n,e,t=!1,s=!0){if(e instanceof Gg){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:a}=n,o=Ln.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,f=`var(--total-scale-factor) * ${r}px`,d=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=o?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class ma{constructor(){const{pixelRatio:e}=ma;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let a=1/0,o=1/0,c=1/0;s=ma.capPixels(s,r),s>0&&(a=Math.sqrt(s/(e*t))),i!==-1&&(o=i/e,c=i/t);const f=Math.min(a,o,c);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const kx=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class f7{static get isDarkMode(){var e;return Fe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class d7{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Fe(this,"commentForegroundColor",Wg(s))}}function h7(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function KL(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,r=Math.max(t,s,i),a=Math.min(t,s,i),o=(r+a)/2;if(r===a)e[0]=e[1]=0;else{const c=r-a;switch(e[1]=o<.5?c/(r+a):c/(2-r-a),r){case t:e[0]=((s-i)/c+(s<i?6:0))*60;break;case s:e[0]=((i-t)/c+2)*60;break;case i:e[0]=((t-s)/c+4)*60;break}}e[2]=o}function Nx(n,e){const t=n[0],s=n[1],i=n[2],r=(1-Math.abs(2*i-1))*s,a=r*(1-Math.abs(t/60%2-1)),o=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=r+o,e[2]=o;break;case 2:e[0]=o,e[1]=r+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=r+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=r+o;break;case 5:case 6:e[0]=r+o,e[1]=o,e[2]=a+o;break}}function XL(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function eS(n,e,t){Nx(n,t),t.map(XL);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];Nx(e,t),t.map(XL);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const tS=new Map;function p7(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=tS.get(t);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),a=i.subarray(3,6);KL(n,a);const o=i.subarray(6,9);KL(e,o);const c=o[2]<.5,f=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),eS(a,o,r)<f){let d,h;c?(d=a[2],h=1):(d=0,h=a[2]);const p=.005;for(;h-d>p;){const m=a[2]=(d+h)/2;c===eS(a,o,r)<f?d=m:h=m}a[2]=c?h:d}return Nx(a,r),s=ge.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),tS.set(t,s),s}function aT({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const a=n.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const f=a[o];r.append(document.createTextNode(f)),o<c-1&&r.append(document.createElement("br"))}i.append(r)}else rT.render({xfaHtml:n,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),s.append(i)}function oT(n){const e=new Path2D;if(!n)return e;for(let t=0,s=n.length;t<s;)switch(n[t++]){case u0.moveTo:e.moveTo(n[t++],n[t++]);break;case u0.lineTo:e.lineTo(n[t++],n[t++]);break;case u0.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case u0.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case u0.closePath:e.closePath();break;default:Be(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var Oo,zo,Ri,Oi,Op,Bo,Xf,ed,zp,Wy,lT,Qn,cT,uT,gf,C0;const Ca=class Ca{constructor(e){M(this,Qn);M(this,Oo,null);M(this,zo,null);M(this,Ri);M(this,Oi,null);M(this,Op,null);M(this,Bo,null);M(this,Xf,null);M(this,ed,null);j(this,Ri,e),u(Ca,zp)||j(Ca,zp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=j(this,Oo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Ri)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ar,{signal:t}),e.addEventListener("pointerdown",E(Ca,Wy,lT),{signal:t}));const s=j(this,Oi,document.createElement("div"));s.className="buttons",e.append(s);const i=u(this,Ri).toolbarPosition;if(i){const{style:r}=e,a=u(this,Ri)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Oo)}hide(){var e;u(this,Oo).classList.add("hidden"),(e=u(this,zo))==null||e.hideDropdown()}show(){var e,t;u(this,Oo).classList.remove("hidden"),(e=u(this,Op))==null||e.shown(),(t=u(this,Bo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,Ri),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",u(Ca,zp)[e]),E(this,Qn,gf).call(this,s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),u(this,Oi).append(s)}async addAltText(e){const t=await e.render();E(this,Qn,gf).call(this,t),u(this,Oi).append(t,u(this,Qn,C0)),j(this,Op,e)}addComment(e,t=null){if(u(this,Bo))return;const s=e.renderForToolbar();if(!s)return;E(this,Qn,gf).call(this,s);const i=j(this,Xf,u(this,Qn,C0));t?(u(this,Oi).insertBefore(s,t),u(this,Oi).insertBefore(i,t)):u(this,Oi).append(s,i),j(this,Bo,e),e.toolbar=this}addColorPicker(e){if(u(this,zo))return;j(this,zo,e);const t=e.renderButton();E(this,Qn,gf).call(this,t),u(this,Oi).append(t,u(this,Qn,C0))}async addEditSignatureButton(e){const t=j(this,ed,await e.renderEditButton(u(this,Ri)));E(this,Qn,gf).call(this,t),u(this,Oi).append(t,u(this,Qn,C0))}removeButton(e){var t,s;switch(e){case"comment":(t=u(this,Bo))==null||t.removeToolbarCommentButton(),j(this,Bo,null),(s=u(this,Xf))==null||s.remove(),j(this,Xf,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,s){if(!t&&e==="comment")return;const i=u(this,Oi).querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){u(this,ed)&&(u(this,ed).title=e)}remove(){var e;u(this,Oo).remove(),(e=u(this,zo))==null||e.destroy(),j(this,zo,null)}};Oo=new WeakMap,zo=new WeakMap,Ri=new WeakMap,Oi=new WeakMap,Op=new WeakMap,Bo=new WeakMap,Xf=new WeakMap,ed=new WeakMap,zp=new WeakMap,Wy=new WeakSet,lT=function(e){e.stopPropagation()},Qn=new WeakSet,cT=function(e){u(this,Ri)._focusEventsAllowed=!1,nn(e)},uT=function(e){u(this,Ri)._focusEventsAllowed=!0,nn(e)},gf=function(e){const t=u(this,Ri)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",E(this,Qn,cT).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,Qn,uT).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ar,{signal:t}),!0)},C0=function(){const e=document.createElement("div");return e.className="divider",e},M(Ca,Wy),M(Ca,zp,null);let Ax=Ca;var Bp,bc,Sa,_o,fT,dT,Tx;class m7{constructor(e){M(this,_o);M(this,Bp,null);M(this,bc,null);M(this,Sa);j(this,Sa,e)}show(e,t,s){const[i,r]=E(this,_o,dT).call(this,t,s),{style:a}=u(this,bc)||j(this,bc,E(this,_o,fT).call(this));e.append(u(this,bc)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,bc).remove()}}Bp=new WeakMap,bc=new WeakMap,Sa=new WeakMap,_o=new WeakSet,fT=function(){const e=j(this,bc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,Sa)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ar,{signal:t});const s=j(this,Bp,document.createElement("div"));return s.className="buttons",e.append(s),u(this,Sa).hasCommentManager()&&E(this,_o,Tx).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,Sa).commentSelection("floating_button")}),E(this,_o,Tx).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,Sa).highlightSelection("floating_button")}),e},dT=function(e,t){let s=0,i=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){i=o,s=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,s]},Tx=function(e,t,s,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const a=document.createElement("span");r.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",s);const o=u(this,Sa)._signal;o instanceof AbortSignal&&!o.aborted&&(r.addEventListener("contextmenu",ar,{signal:o}),r.addEventListener("click",i,{signal:o})),u(this,Bp).append(r)};function hT(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var vc,xc,td,_c;const wt=class wt{static initializeAndAddPointerId(e){(u(wt,xc)||j(wt,xc,new Set)).add(e)}static setPointer(e,t){u(wt,vc)||j(wt,vc,t),u(wt,_c)??j(wt,_c,e)}static setTimeStamp(e){j(wt,td,e)}static isSamePointerId(e){return u(wt,vc)===e}static isSamePointerIdOrRemove(e){var t;return u(wt,vc)===e?!0:((t=u(wt,xc))==null||t.delete(e),!1)}static isSamePointerType(e){return u(wt,_c)===e}static isInitializedAndDifferentPointerType(e){return u(wt,_c)!==null&&!wt.isSamePointerType(e)}static isSameTimeStamp(e){return u(wt,td)===e}static isUsingMultiplePointers(){var e;return((e=u(wt,xc))==null?void 0:e.size)>=1}static clearPointerType(){j(wt,_c,null)}static clearPointerIds(){j(wt,vc,NaN),j(wt,xc,null)}static clearTimeStamp(){j(wt,td,NaN)}};vc=new WeakMap,xc=new WeakMap,td=new WeakMap,_c=new WeakMap,M(wt,vc,NaN),M(wt,xc,null),M(wt,td,NaN),M(wt,_c,null);let ss=wt;var Yy;class g7{constructor(){M(this,Yy,0)}get id(){return`${Ap}${wn(this,Yy)._++}`}}Yy=new WeakMap;var nd,Fp,is,sd,fw;const Xj=class Xj{constructor(){M(this,sd);M(this,nd,sT());M(this,Fp,0);M(this,is,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return E(this,sd,fw).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return E(this,sd,fw).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,sd,fw).call(this,e,s)}async getFromId(e){u(this,is)||j(this,is,new Map);const t=u(this,is).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,is)||j(this,is,new Map);let s=u(this,is).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${u(this,nd)}_${wn(this,Fp)._++}`,refCounter:1,isSvg:!1},u(this,is).set(e,s),u(this,is).set(s.id,s),s}getSvgUrl(e){const t=u(this,is).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;u(this,is)||j(this,is,new Map);const t=u(this,is).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,nd)}_`)}};nd=new WeakMap,Fp=new WeakMap,is=new WeakMap,sd=new WeakSet,fw=async function(e,t){u(this,is)||j(this,is,new Map);let s=u(this,is).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${u(this,nd)}_${wn(this,Fp)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Hg(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=Xj._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((f,d)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,f()},a.onload=async()=>{const h=s.svgUrl=a.result;o.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=d});a.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Be(i),s=null}return u(this,is).set(e,s),s&&u(this,is).set(s.id,s),s};let Ix=Xj;var rn,Fo,Up,Ht;class w7{constructor(e=128){M(this,rn,[]);M(this,Fo,!1);M(this,Up);M(this,Ht,-1);j(this,Up,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),u(this,Fo))return;const c={cmd:e,undo:t,post:s,type:r};if(u(this,Ht)===-1){u(this,rn).length>0&&(u(this,rn).length=0),j(this,Ht,0),u(this,rn).push(c);return}if(a&&u(this,rn)[u(this,Ht)].type===r){o&&(c.undo=u(this,rn)[u(this,Ht)].undo),u(this,rn)[u(this,Ht)]=c;return}const f=u(this,Ht)+1;f===u(this,Up)?u(this,rn).splice(0,1):(j(this,Ht,f),f<u(this,rn).length&&u(this,rn).splice(f)),u(this,rn).push(c)}undo(){if(u(this,Ht)===-1)return;j(this,Fo,!0);const{undo:e,post:t}=u(this,rn)[u(this,Ht)];e(),t==null||t(),j(this,Fo,!1),j(this,Ht,u(this,Ht)-1)}redo(){if(u(this,Ht)<u(this,rn).length-1){j(this,Ht,u(this,Ht)+1),j(this,Fo,!0);const{cmd:e,post:t}=u(this,rn)[u(this,Ht)];e(),t==null||t(),j(this,Fo,!1)}}hasSomethingToUndo(){return u(this,Ht)!==-1}hasSomethingToRedo(){return u(this,Ht)<u(this,rn).length-1}cleanType(e){if(u(this,Ht)!==-1){for(let t=u(this,Ht);t>=0;t--)if(u(this,rn)[t].type!==e){u(this,rn).splice(t+1,u(this,Ht)-t),j(this,Ht,t);return}u(this,rn).length=0,j(this,Ht,-1)}}destroy(){j(this,rn,null)}}rn=new WeakMap,Fo=new WeakMap,Up=new WeakMap,Ht=new WeakMap;var Vy,pT;class Yg{constructor(e){M(this,Vy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ln.platform;for(const[s,i,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,Vy,pT).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(i.bind(e,...a,t)(),r||nn(t))}}Vy=new WeakSet,pT=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Qy=class Qy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return u7(e),Fe(this,"_colors",e)}convert(e){const t=Wg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,a)=>r===t[a]))return Qy._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?ge.makeHexColor(...t):e}};ee(Qy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Dx=Qy;var id,qs,rd,qt,xn,ad,zi,od,Bi,rs,Uo,$o,ld,Ho,Hr,Fi,jc,$p,Hp,cd,Gp,Gr,Go,ud,Wo,Wr,Jy,Yo,fd,Wp,Vo,Cc,dd,Qo,Yp,fn,ht,Ea,Jo,qo,Vp,hd,Qp,Zo,Yr,ka,Jp,qp,Ui,fe,dw,Px,mT,gT,M0,wT,yT,bT,Rx,vT,xT,_T,jT,ps,va,CT,MT,Ox,LT,L0,zx;const zf=class zf{constructor(e,t,s,i,r,a,o,c,f,d,h,p,m,g,w,b){M(this,fe);M(this,id,new AbortController);M(this,qs,null);M(this,rd,null);M(this,qt,new Map);M(this,xn,new Map);M(this,ad,null);M(this,zi,null);M(this,od,null);M(this,Bi,new w7);M(this,rs,null);M(this,Uo,null);M(this,$o,null);M(this,ld,0);M(this,Ho,new Set);M(this,Hr,null);M(this,Fi,null);M(this,jc,new Set);ee(this,"_editorUndoBar",null);M(this,$p,!1);M(this,Hp,!1);M(this,cd,!1);M(this,Gp,null);M(this,Gr,null);M(this,Go,null);M(this,ud,null);M(this,Wo,!1);M(this,Wr,null);M(this,Jy,new g7);M(this,Yo,!1);M(this,fd,!1);M(this,Wp,!1);M(this,Vo,null);M(this,Cc,null);M(this,dd,null);M(this,Qo,null);M(this,Yp,null);M(this,fn,$e.NONE);M(this,ht,new Set);M(this,Ea,null);M(this,Jo,null);M(this,qo,null);M(this,Vp,null);M(this,hd,null);M(this,Qp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,Zo,[0,0]);M(this,Yr,null);M(this,ka,null);M(this,Jp,null);M(this,qp,null);M(this,Ui,null);const y=this._signal=u(this,id).signal;j(this,ka,e),j(this,Jp,t),j(this,qp,s),j(this,ad,i),j(this,rs,r),j(this,Jo,a),j(this,hd,c),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:y}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),o._on("setpreference",this.onSetPreference.bind(this),{signal:y}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:y}),window.addEventListener("pointerdown",()=>{j(this,fd,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{j(this,fd,!1)},{capture:!0,signal:y}),E(this,fe,wT).call(this),E(this,fe,jT).call(this),E(this,fe,Rx).call(this),j(this,zi,c.annotationStorage),j(this,Gp,c.filterFactory),j(this,qo,f),j(this,ud,d||null),j(this,$p,h),j(this,Hp,p),j(this,cd,m),j(this,Yp,g||null),this.viewParameters={realScale:Hl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=b!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=zf.prototype,t=a=>u(a,ka).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Yg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ka).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ka).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,a,o,c,f;(e=u(this,Ui))==null||e.resolve(),j(this,Ui,null),(t=u(this,id))==null||t.abort(),j(this,id,null),this._signal=null;for(const d of u(this,xn).values())d.destroy();u(this,xn).clear(),u(this,qt).clear(),u(this,jc).clear(),(s=u(this,Qo))==null||s.clear(),j(this,qs,null),u(this,ht).clear(),u(this,Bi).destroy(),(i=u(this,ad))==null||i.destroy(),(r=u(this,rs))==null||r.destroy(),(a=u(this,Jo))==null||a.destroy(),(o=u(this,Wr))==null||o.hide(),j(this,Wr,null),(c=u(this,dd))==null||c.destroy(),j(this,dd,null),j(this,rd,null),u(this,Gr)&&(clearTimeout(u(this,Gr)),j(this,Gr,null)),u(this,Yr)&&(clearTimeout(u(this,Yr)),j(this,Yr,null)),(f=this._editorUndoBar)==null||f.destroy(),j(this,hd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Yp)}get useNewAltTextFlow(){return u(this,Hp)}get useNewAltTextWhenAddingImage(){return u(this,cd)}get hcmFilter(){return Fe(this,"hcmFilter",u(this,qo)?u(this,Gp).addHCMFilter(u(this,qo).foreground,u(this,qo).background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(u(this,ka)).direction)}get _highlightColors(){return Fe(this,"_highlightColors",u(this,ud)?new Map(u(this,ud).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Fe(this,"highlightColors",null);const t=new Map,s=!!u(this,qo);for(const[i,r]of e){const a=i.endsWith("_HCM");if(s&&a){t.set(i.replace("_HCM",""),r);continue}!s&&!a&&t.set(i,r)}return Fe(this,"highlightColors",t)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),j(this,$o,e)}setMainHighlightColorPicker(e){j(this,dd,e)}editAltText(e,t=!1){var s;(s=u(this,ad))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!u(this,rs)}editComment(e,t,s,i){var r;(r=u(this,rs))==null||r.showDialog(this,e,t,s,i)}selectComment(e,t){const s=u(this,xn).get(e),i=s==null?void 0:s.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,rs))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,rs))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,rs))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var i;(i=u(this,rs))==null||i.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=u(this,rs))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,rs))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,xn).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){var t;(t=u(this,Jo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Jo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":j(this,cd,t);break}}onPageChanging({pageNumber:e}){j(this,ld,e-1)}focusMainContainer(){u(this,ka).focus()}findParent(e,t){for(const s of u(this,xn).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){u(this,Jp).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,jc).add(e)}removeShouldRescale(e){u(this,jc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Hl.PDF_TO_CSS_UNITS;for(const s of u(this,jc))s.onScaleChanging();(t=u(this,$o))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:o}=s,c=s.toString(),d=E(this,fe,dw).call(this,s).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;s.empty();const p=E(this,fe,Px).call(this,d),m=u(this,fn)===$e.NONE,g=()=>{const w=p==null?void 0:p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:o,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(w==null||w.editComment())};if(m){this.switchToMode($e.HIGHLIGHT,g);return}g()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,zi))return null;const t=`${Ap}${e}`,s=u(this,zi).getRawValue(t);return s&&u(this,zi).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&u(this,zi)&&!u(this,zi).has(e.id)&&u(this,zi).setValue(e.id,e)}a11yAlert(e,t=null){const s=u(this,qp);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Wo)&&(j(this,Wo,!1),E(this,fe,M0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,ht))if(t.div.contains(e)){j(this,Cc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Cc))return;const[e,t]=u(this,Cc);j(this,Cc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,fe,Rx).call(this),this.setEditingState(!0)}removeEditListeners(){E(this,fe,vT).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of u(this,Fi))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of u(this,Fi))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=u(this,qs))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of u(this,ht)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of u(this,Fi))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Be(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const f=await i.deserialize(c);if(!f)return;r.push(f)}const a=()=>{for(const c of r)E(this,fe,Ox).call(this,c);E(this,fe,zx).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){Be(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,fn)!==$e.NONE&&!this.isEditorHandlingKeyboard&&zf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Wo)&&(j(this,Wo,!1),E(this,fe,M0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(E(this,fe,yT).call(this),E(this,fe,xT).call(this),E(this,fe,ps).call(this,{isEditing:u(this,fn)!==$e.NONE,isEmpty:E(this,fe,L0).call(this),hasSomethingToUndo:u(this,Bi).hasSomethingToUndo(),hasSomethingToRedo:u(this,Bi).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,fe,bT).call(this),E(this,fe,_T).call(this),E(this,fe,ps).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Fi)){j(this,Fi,e);for(const t of u(this,Fi))E(this,fe,va).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Jy).id}get currentLayer(){return u(this,xn).get(u(this,ld))}getLayer(e){return u(this,xn).get(e)}get currentPageIndex(){return u(this,ld)}addLayer(e){u(this,xn).set(e.pageIndex,e),u(this,Yo)?e.enable():e.disable()}removeLayer(e){u(this,xn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,r=!1,a=!1){var o,c,f,d,h,p;if(u(this,fn)!==e&&!(u(this,Ui)&&(await u(this,Ui).promise,!u(this,Ui)))){if(j(this,Ui,Promise.withResolvers()),(o=u(this,$o))==null||o.commitOrRemove(),u(this,fn)===$e.POPUP&&((c=u(this,rs))==null||c.hideSidebar()),(f=u(this,rs))==null||f.destroyPopup(),j(this,fn,e),e===$e.NONE){this.setEditingState(!1),E(this,fe,MT).call(this);for(const m of u(this,qt).values())m.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),u(this,Ui).resolve();return}for(const m of u(this,qt).values())m.addStandaloneCommentButton();e===$e.SIGNATURE&&await((h=u(this,Jo))==null?void 0:h.loadSignatures()),s&&ss.clearPointerType(),this.setEditingState(!0),await E(this,fe,CT).call(this),this.unselectAll();for(const m of u(this,xn).values())m.updateMode(e);if(e===$e.POPUP){u(this,rd)||j(this,rd,await u(this,hd).getAnnotationsByType(new Set(u(this,Fi).map(w=>w._editorType))));const m=new Set,g=[];for(const w of u(this,qt).values()){const{annotationElementId:b,hasComment:y,deleted:x}=w;b&&m.add(b),y&&!x&&g.push(w.getData())}for(const w of u(this,rd)){const{id:b,popupRef:y,contentsObj:x}=w;y&&(x!=null&&x.str)&&!m.has(b)&&!u(this,Ho).has(b)&&g.push(w)}(p=u(this,rs))==null||p.showSidebar(g)}if(!t){i&&this.addNewEditorFromKeyboard(),u(this,Ui).resolve();return}for(const m of u(this,qt).values())m.uid===t?(this.setSelected(m),a?m.editComment():r?m.enterInEditMode():m.focus()):m.unselect();u(this,Ui).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,fn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Fi)){switch(e){case nt.CREATE:this.currentLayer.addNewEditor(t);return;case nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Vp)||j(this,Vp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of u(this,ht))s.updateParams(e,t);else for(const s of u(this,Fi))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of u(this,qt).values())a.editorType===e&&a.show(t);(((r=u(this,Vp))==null?void 0:r.get(nt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,fe,va).call(this,[[nt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Wp)!==e){j(this,Wp,e);for(const t of u(this,xn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,qt).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,qt).get(e)}addEditor(e){u(this,qt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(u(this,Gr)&&clearTimeout(u(this,Gr)),j(this,Gr,setTimeout(()=>{this.focusMainContainer(),j(this,Gr,null)},0))),u(this,qt).delete(e.id),e.annotationElementId&&((t=u(this,Qo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Ho).has(e.annotationElementId))&&((s=u(this,zi))==null||s.remove(e.id))}addDeletedAnnotationElement(e){u(this,Ho).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Ho).has(e)}removeDeletedAnnotationElement(e){u(this,Ho).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,qs)!==e&&(j(this,qs,e),e&&E(this,fe,va).call(this,e.propertiesToUpdate))}updateUI(e){u(this,fe,LT)===e&&E(this,fe,va).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,fe,va).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,ht).has(e)){u(this,ht).delete(e),e.unselect(),E(this,fe,ps).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,ht).add(e),e.select(),E(this,fe,va).call(this,e.propertiesToUpdate),E(this,fe,ps).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=u(this,$o))==null||t.commitOrRemove();for(const s of u(this,ht))s!==e&&s.unselect();u(this,ht).clear(),u(this,ht).add(e),e.select(),E(this,fe,va).call(this,e.propertiesToUpdate),E(this,fe,ps).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,ht).has(e)}get firstSelectedEditor(){return u(this,ht).values().next().value}unselect(e){e.unselect(),u(this,ht).delete(e),E(this,fe,ps).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,ht).size!==0}get isEnterHandled(){return u(this,ht).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Bi).undo(),E(this,fe,ps).call(this,{hasSomethingToUndo:u(this,Bi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,fe,L0).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Bi).redo(),E(this,fe,ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Bi).hasSomethingToRedo(),isEmpty:E(this,fe,L0).call(this)})}addCommands(e){u(this,Bi).add(e),E(this,fe,ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,fe,L0).call(this)})}cleanUndoStack(e){u(this,Bi).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,ht)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)E(this,fe,Ox).call(this,a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,qs))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,qs)||this.hasSelection}selectAll(){for(const e of u(this,ht))e.commit();E(this,fe,zx).call(this,u(this,qt).values())}unselectAll(){var e;if(!(u(this,qs)&&(u(this,qs).commitOrRemove(),u(this,fn)!==$e.NONE))&&!((e=u(this,$o))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,ht))t.unselect();u(this,ht).clear(),E(this,fe,ps).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;u(this,Zo)[0]+=e,u(this,Zo)[1]+=t;const[i,r]=u(this,Zo),a=[...u(this,ht)],o=1e3;u(this,Yr)&&clearTimeout(u(this,Yr)),j(this,Yr,setTimeout(()=>{j(this,Yr,null),u(this,Zo)[0]=u(this,Zo)[1]=0,this.addCommands({cmd:()=>{for(const c of a)u(this,qt).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of a)u(this,qt).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),j(this,Hr,new Map);for(const e of u(this,ht))u(this,Hr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Hr))return!1;this.disableUserSelect(!1);const e=u(this,Hr);j(this,Hr,null);let t=!1;for(const[{x:i,y:r,pageIndex:a},o]of e)o.newX=i,o.newY=r,o.newPageIndex=a,t||(t=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(i,r,a,o)=>{if(u(this,qt).has(i.id)){const c=u(this,xn).get(o);c?i._setParentAndPosition(c,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of e)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Hr))for(const s of u(this,Hr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,ht).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,qs)===e}getActive(){return u(this,qs)}getMode(){return u(this,fn)}isEditingMode(){return u(this,fn)!==$e.NONE}get imageManager(){return Fe(this,"imageManager",new Ix)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,d=t.rangeCount;f<d;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(f,d,h,p)=>({x:(d-i)/a,y:1-(f+h-s)/r,width:p/a,height:h/r});break;case"180":o=(f,d,h,p)=>({x:1-(f+h-s)/r,y:1-(d+p-i)/a,width:h/r,height:p/a});break;case"270":o=(f,d,h,p)=>({x:1-(d+p-i)/a,y:(f-s)/r,width:p/a,height:h/r});break;default:o=(f,d,h,p)=>({x:(f-s)/r,y:(d-i)/a,width:h/r,height:p/a});break}const c=[];for(let f=0,d=t.rangeCount;f<d;f++){const h=t.getRangeAt(f);if(!h.collapsed)for(const{x:p,y:m,width:g,height:w}of h.getClientRects())g===0||w===0||c.push(o(p,m,g,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,od)||j(this,od,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,od))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=u(this,od))==null?void 0:i.get(e.data.id);if(!t)return;const s=u(this,zi).getRawValue(t);s&&(u(this,fn)===$e.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=u(this,Qo))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),u(this,Qo).delete(e))}addMissingCanvas(e,t){(u(this,Qo)||j(this,Qo,new Map)).set(e,t)}};id=new WeakMap,qs=new WeakMap,rd=new WeakMap,qt=new WeakMap,xn=new WeakMap,ad=new WeakMap,zi=new WeakMap,od=new WeakMap,Bi=new WeakMap,rs=new WeakMap,Uo=new WeakMap,$o=new WeakMap,ld=new WeakMap,Ho=new WeakMap,Hr=new WeakMap,Fi=new WeakMap,jc=new WeakMap,$p=new WeakMap,Hp=new WeakMap,cd=new WeakMap,Gp=new WeakMap,Gr=new WeakMap,Go=new WeakMap,ud=new WeakMap,Wo=new WeakMap,Wr=new WeakMap,Jy=new WeakMap,Yo=new WeakMap,fd=new WeakMap,Wp=new WeakMap,Vo=new WeakMap,Cc=new WeakMap,dd=new WeakMap,Qo=new WeakMap,Yp=new WeakMap,fn=new WeakMap,ht=new WeakMap,Ea=new WeakMap,Jo=new WeakMap,qo=new WeakMap,Vp=new WeakMap,hd=new WeakMap,Qp=new WeakMap,Zo=new WeakMap,Yr=new WeakMap,ka=new WeakMap,Jp=new WeakMap,qp=new WeakMap,Ui=new WeakMap,fe=new WeakSet,dw=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Px=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of u(this,xn).values())if(s.hasTextLayer(e))return s;return null},mT=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,fe,dw).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(u(this,Wr)||j(this,Wr,new m7(this)),u(this,Wr).show(s,i,this.direction==="ltr"))},gT=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){u(this,Ea)&&((r=u(this,Wr))==null||r.hide(),j(this,Ea,null),E(this,fe,ps).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,Ea))return;const i=E(this,fe,dw).call(this,e).closest(".textLayer");if(!i){u(this,Ea)&&((a=u(this,Wr))==null||a.hide(),j(this,Ea,null),E(this,fe,ps).call(this,{hasSelectedText:!1}));return}if((o=u(this,Wr))==null||o.hide(),j(this,Ea,t),E(this,fe,ps).call(this,{hasSelectedText:!0}),!(u(this,fn)!==$e.HIGHLIGHT&&u(this,fn)!==$e.NONE)&&(u(this,fn)===$e.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),j(this,Wo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,fn)===$e.HIGHLIGHT?E(this,fe,Px).call(this,i):null;if(c==null||c.toggleDrawing(),u(this,fd)){const f=new AbortController,d=this.combinedSignal(f),h=p=>{p.type==="pointerup"&&p.button!==0||(f.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&E(this,fe,M0).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),E(this,fe,M0).call(this,"main_toolbar")}},M0=function(e=""){u(this,fn)===$e.HIGHLIGHT?this.highlightSelection(e):u(this,$p)&&E(this,fe,mT).call(this)},wT=function(){document.addEventListener("selectionchange",E(this,fe,gT).bind(this),{signal:this._signal})},yT=function(){if(u(this,Go))return;j(this,Go,new AbortController);const e=this.combinedSignal(u(this,Go));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},bT=function(){var e;(e=u(this,Go))==null||e.abort(),j(this,Go,null)},Rx=function(){if(u(this,Vo))return;j(this,Vo,new AbortController);const e=this.combinedSignal(u(this,Vo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},vT=function(){var e;(e=u(this,Vo))==null||e.abort(),j(this,Vo,null)},xT=function(){if(u(this,Uo))return;j(this,Uo,new AbortController);const e=this.combinedSignal(u(this,Uo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_T=function(){var e;(e=u(this,Uo))==null||e.abort(),j(this,Uo,null)},jT=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ps=function(e){Object.entries(e).some(([s,i])=>u(this,Qp)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Qp),e)}),u(this,fn)===$e.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,fe,va).call(this,[[nt.HIGHLIGHT_FREE,!0]]))},va=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},CT=async function(){if(!u(this,Yo)){j(this,Yo,!0);const e=[];for(const t of u(this,xn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,qt).values())t.enable()}},MT=function(){if(this.unselectAll(),u(this,Yo)){j(this,Yo,!1);for(const e of u(this,xn).values())e.disable();for(const e of u(this,qt).values())e.disable()}},Ox=function(e){const t=u(this,xn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},LT=function(){let e=null;for(e of u(this,ht));return e},L0=function(){if(u(this,qt).size===0)return!0;if(u(this,qt).size===1)for(const e of u(this,qt).values())return e.isEmpty();return!1},zx=function(e){for(const t of u(this,ht))t.unselect();u(this,ht).clear();for(const t of e)t.isEmpty()||(u(this,ht).add(t),t.select());E(this,fe,ps).call(this,{hasSelectedEditor:this.hasSelection})},ee(zf,"TRANSLATE_SMALL",1),ee(zf,"TRANSLATE_BIG",10);let Wu=zf;var Sn,Vr,hr,pd,Qr,Zs,md,Jr,As,Na,Mc,qr,Ko,kr,S0,hw;const ms=class ms{constructor(e){M(this,kr);M(this,Sn,null);M(this,Vr,!1);M(this,hr,null);M(this,pd,null);M(this,Qr,null);M(this,Zs,null);M(this,md,!1);M(this,Jr,null);M(this,As,null);M(this,Na,null);M(this,Mc,null);M(this,qr,!1);j(this,As,e),j(this,qr,e._uiManager.useNewAltTextFlow),u(ms,Ko)||j(ms,Ko,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ms._l10n??(ms._l10n=e)}async render(){const e=j(this,hr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=j(this,pd,document.createElement("span"));e.append(t),u(this,qr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(ms,Ko).missing),t.setAttribute("data-l10n-id",u(ms,Ko)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=u(this,As)._uiManager._signal;e.addEventListener("contextmenu",ar,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),u(this,As)._uiManager.editAltText(u(this,As)),u(this,qr)&&u(this,As)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,kr,S0)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(j(this,md,!0),i(r))},{signal:s}),await E(this,kr,hw).call(this),e}finish(){u(this,hr)&&(u(this,hr).focus({focusVisible:u(this,md)}),j(this,md,!1))}isEmpty(){return u(this,qr)?u(this,Sn)===null:!u(this,Sn)&&!u(this,Vr)}hasData(){return u(this,qr)?u(this,Sn)!==null||!!u(this,Na):this.isEmpty()}get guessedText(){return u(this,Na)}async setGuessedText(e){u(this,Sn)===null&&(j(this,Na,e),j(this,Mc,await ms._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,kr,hw).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,qr)||u(this,Sn)){(t=u(this,Jr))==null||t.remove(),j(this,Jr,null);return}if(!u(this,Jr)){const s=j(this,Jr,document.createElement("div"));s.className="noAltTextBadge",u(this,As).div.append(s)}u(this,Jr).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Sn);return!e&&u(this,Na)===t&&(t=u(this,Mc)),{altText:t,decorative:u(this,Vr),guessedText:u(this,Na),textWithDisclaimer:u(this,Mc)}}get data(){return{altText:u(this,Sn),decorative:u(this,Vr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(j(this,Na,s),j(this,Mc,i)),!(u(this,Sn)===e&&u(this,Vr)===t)&&(r||(j(this,Sn,e),j(this,Vr,t)),E(this,kr,hw).call(this))}toggle(e=!1){u(this,hr)&&(!e&&u(this,Zs)&&(clearTimeout(u(this,Zs)),j(this,Zs,null)),u(this,hr).disabled=!e)}shown(){u(this,As)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,kr,S0)}})}destroy(){var e,t;(e=u(this,hr))==null||e.remove(),j(this,hr,null),j(this,pd,null),j(this,Qr,null),(t=u(this,Jr))==null||t.remove(),j(this,Jr,null)}};Sn=new WeakMap,Vr=new WeakMap,hr=new WeakMap,pd=new WeakMap,Qr=new WeakMap,Zs=new WeakMap,md=new WeakMap,Jr=new WeakMap,As=new WeakMap,Na=new WeakMap,Mc=new WeakMap,qr=new WeakMap,Ko=new WeakMap,kr=new WeakSet,S0=function(){return u(this,Sn)&&"added"||u(this,Sn)===null&&this.guessedText&&"review"||"missing"},hw=async function(){var i,r,a;const e=u(this,hr);if(!e)return;if(u(this,qr)){if(e.classList.toggle("done",!!u(this,Sn)),e.setAttribute("data-l10n-id",u(ms,Ko)[u(this,kr,S0)]),(i=u(this,pd))==null||i.setAttribute("data-l10n-id",u(ms,Ko)[`${u(this,kr,S0)}-label`]),!u(this,Sn)){(r=u(this,Qr))==null||r.remove();return}}else{if(!u(this,Sn)&&!u(this,Vr)){e.classList.remove("done"),(a=u(this,Qr))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Qr);if(!t){j(this,Qr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,As).id}`;const o=100,c=u(this,As)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,Zs)),j(this,Zs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{j(this,Zs,setTimeout(()=>{j(this,Zs,null),u(this,Qr).classList.add("show"),u(this,As)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var f;u(this,Zs)&&(clearTimeout(u(this,Zs)),j(this,Zs,null)),(f=u(this,Qr))==null||f.classList.remove("show")},{signal:c})}u(this,Vr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Sn)),t.parentNode||e.append(t);const s=u(this,As).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},M(ms,Ko,null),ee(ms,"_l10n",null);let Ay=ms;var Fn,$i,Lc,Nt,Zp,Sc,pr,Ec,kc,Nc,Kp,Bx;class N1{constructor(e){M(this,Kp);M(this,Fn,null);M(this,$i,null);M(this,Lc,!1);M(this,Nt,null);M(this,Zp,null);M(this,Sc,null);M(this,pr,null);M(this,Ec,null);M(this,kc,!1);M(this,Nc,null);j(this,Nt,e)}renderForToolbar(){const e=j(this,$i,document.createElement("button"));return e.className="comment",E(this,Kp,Bx).call(this,e,!1)}renderForStandalone(){const e=j(this,Fn,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,Nt).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(u(this,Nt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=u(this,Nt).commentButtonColor;i&&(s.backgroundColor=i)}return E(this,Kp,Bx).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Fn)??u(this,$i))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Fn))return;const e=u(this,Nt).commentButtonColor;e&&(u(this,Fn).style.backgroundColor=e),u(this,Nt)._uiManager.updatePopupColor(u(this,Nt))}get commentButtonWidth(){var e;return(((e=u(this,Fn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,Nt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Nc))return u(this,Nc);if(!u(this,Fn))return null;const{x:e,y:t,height:s}=u(this,Fn).getBoundingClientRect(),{x:i,y:r,width:a,height:o}=u(this,Nt).parent.boundingClientRect;return[(e-i)/a,(t+s-r)/o]}set commentPopupPositionInLayer(e){j(this,Nc,e)}hasDefaultPopupPosition(){return u(this,Nc)===null}removeStandaloneCommentButton(){var e;(e=u(this,Fn))==null||e.remove(),j(this,Fn,null)}removeToolbarCommentButton(){var e;(e=u(this,$i))==null||e.remove(),j(this,$i,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Fn)&&(u(this,Fn).classList.toggle("selected",e),u(this,Fn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=u(this,Nt).commentButtonPosition;const{width:d,height:h,x:p,y:m}=u(this,Nt);s=p+s*d,i=m+i*h}const r=u(this,Nt).parent.boundingClientRect,{x:a,y:o,width:c,height:f}=r;u(this,Nt)._uiManager.editComment(u(this,Nt),a+s*c,o+i*f,{...e,parentDimensions:r})}finish(){u(this,$i)&&(u(this,$i).focus({focusVisible:u(this,Lc)}),j(this,Lc,!1))}isDeleted(){return u(this,kc)||u(this,pr)===""}isEmpty(){return u(this,pr)===null}hasBeenEdited(){return this.isDeleted()||u(this,pr)!==u(this,Zp)}serialize(){return this.data}get data(){return{text:u(this,pr),richText:u(this,Sc),date:u(this,Ec),deleted:this.isDeleted()}}set data(e){if(e!==u(this,pr)&&j(this,Sc,null),e===null){j(this,pr,""),j(this,kc,!0);return}j(this,pr,e),j(this,Ec,new Date),j(this,kc,!1)}setInitialText(e,t=null){j(this,Zp,e),this.data=e,j(this,Ec,null),j(this,Sc,t)}shown(){}destroy(){var e,t;(e=u(this,$i))==null||e.remove(),j(this,$i,null),(t=u(this,Fn))==null||t.remove(),j(this,Fn,null),j(this,pr,""),j(this,Sc,null),j(this,Ec,null),j(this,Nt,null),j(this,Lc,!1),j(this,kc,!1)}}Fn=new WeakMap,$i=new WeakMap,Lc=new WeakMap,Nt=new WeakMap,Zp=new WeakMap,Sc=new WeakMap,pr=new WeakMap,Ec=new WeakMap,kc=new WeakMap,Nc=new WeakMap,Kp=new WeakSet,Bx=function(e,t){if(!u(this,Nt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,Nt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=u(this,Nt)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",ar,{signal:s}),t&&(e.addEventListener("focusin",r=>{u(this,Nt)._focusEventsAllowed=!1,nn(r)},{capture:!0,signal:s}),e.addEventListener("focusout",r=>{u(this,Nt)._focusEventsAllowed=!0,nn(r)},{capture:!0,signal:s})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),e===u(this,$i)?this.edit():u(this,Nt).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(j(this,Lc,!0),i(r))},{signal:s}),e.addEventListener("pointerenter",()=>{u(this,Nt).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{u(this,Nt).toggleComment(!1,!1)},{signal:s}),e};var gd,Ac,Xp,em,tm,nm,sm,Aa,Tc,Ta,Ic,Ia,Gl,ST,ET,kT;const eC=class eC{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){M(this,Gl);M(this,gd);M(this,Ac,!1);M(this,Xp,null);M(this,em);M(this,tm);M(this,nm);M(this,sm);M(this,Aa,null);M(this,Tc);M(this,Ta,null);M(this,Ic);M(this,Ia,null);j(this,gd,e),j(this,Xp,s),j(this,em,t),j(this,tm,i),j(this,nm,r),j(this,sm,a),j(this,Ic,new AbortController),j(this,Tc,AbortSignal.any([o,u(this,Ic).signal])),e.addEventListener("touchstart",E(this,Gl,ST).bind(this),{passive:!1,signal:u(this,Tc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ma.pixelRatio}destroy(){var e,t;(e=u(this,Ic))==null||e.abort(),j(this,Ic,null),(t=u(this,Aa))==null||t.abort(),j(this,Aa,null)}};gd=new WeakMap,Ac=new WeakMap,Xp=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,sm=new WeakMap,Aa=new WeakMap,Tc=new WeakMap,Ta=new WeakMap,Ic=new WeakMap,Ia=new WeakMap,Gl=new WeakSet,ST=function(e){var i,r,a;if((i=u(this,em))!=null&&i.call(this))return;if(e.touches.length===1){if(u(this,Aa))return;const o=j(this,Aa,new AbortController),c=AbortSignal.any([u(this,Tc),o.signal]),f=u(this,gd),d={capture:!0,signal:c,passive:!1},h=p=>{var m;p.pointerType==="touch"&&((m=u(this,Aa))==null||m.abort(),j(this,Aa,null))};f.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(nn(p),h(p))},d),f.addEventListener("pointerup",h,d),f.addEventListener("pointercancel",h,d);return}if(!u(this,Ia)){j(this,Ia,new AbortController);const o=AbortSignal.any([u(this,Tc),u(this,Ia).signal]),c=u(this,gd),f={signal:o,capture:!1,passive:!1};c.addEventListener("touchmove",E(this,Gl,ET).bind(this),f);const d=E(this,Gl,kT).bind(this);c.addEventListener("touchend",d,f),c.addEventListener("touchcancel",d,f),f.capture=!0,c.addEventListener("pointerdown",nn,f),c.addEventListener("pointermove",nn,f),c.addEventListener("pointercancel",nn,f),c.addEventListener("pointerup",nn,f),(r=u(this,tm))==null||r.call(this)}if(nn(e),e.touches.length!==2||(a=u(this,Xp))!=null&&a.call(this)){j(this,Ta,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),j(this,Ta,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},ET=function(e){var C;if(!u(this,Ta)||e.touches.length!==2)return;nn(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:a,screenY:o}=s,c=u(this,Ta),{touch0X:f,touch0Y:d,touch1X:h,touch1Y:p}=c,m=h-f,g=p-d,w=a-i,b=o-r,y=Math.hypot(w,b)||1,x=Math.hypot(m,g)||1;if(!u(this,Ac)&&Math.abs(x-y)<=eC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=a,c.touch1Y=o,!u(this,Ac)){j(this,Ac,!0);return}const v=[(i+a)/2,(r+o)/2];(C=u(this,nm))==null||C.call(this,v,x,y)},kT=function(e){var t;e.touches.length>=2||(u(this,Ia)&&(u(this,Ia).abort(),j(this,Ia,null),(t=u(this,sm))==null||t.call(this)),u(this,Ta)&&(nn(e),j(this,Ta,null),j(this,Ac,!1)))};let Ty=eC;var Dc,mr,zt,Ct,Da,wd,Xo,im,Un,Pc,Pa,Hi,el,rm,Rc,Ks,am,Oc,Ra,Zr,yd,bd,Gi,zc,om,qy,Pe,Fx,lm,Ux,pw,NT,AT,$x,mw,Hx,TT,IT,DT,Gx,PT,Wx,RT,OT,zT,Yx,E0;const Ue=class Ue{constructor(e){M(this,Pe);M(this,Dc,null);M(this,mr,null);M(this,zt,null);M(this,Ct,null);M(this,Da,null);M(this,wd,!1);M(this,Xo,null);M(this,im,"");M(this,Un,null);M(this,Pc,null);M(this,Pa,null);M(this,Hi,null);M(this,el,null);M(this,rm,"");M(this,Rc,!1);M(this,Ks,null);M(this,am,!1);M(this,Oc,!1);M(this,Ra,!1);M(this,Zr,null);M(this,yd,0);M(this,bd,0);M(this,Gi,null);M(this,zc,null);ee(this,"isSelected",!1);ee(this,"_isCopy",!1);ee(this,"_editToolbar",null);ee(this,"_initialOptions",Object.create(null));ee(this,"_initialData",null);ee(this,"_isVisible",!0);ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);M(this,om,!1);M(this,qy,Ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=Wu.TRANSLATE_SMALL,s=Wu.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new Yg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new y7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ue._l10n??(Ue._l10n=e),Ue._l10nResizer||(Ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ue._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){St("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,om)}set _isDraggable(e){var t;j(this,om,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,qy)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(E(this,Pe,E0).call(this),(t=u(this,Hi))==null||t.remove(),j(this,Hi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Rc)?j(this,Rc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){E(this,Pe,Fx).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Ks)||j(this,Ks,[this.x,this.y,this.width,this.height]),E(this,Pe,Fx).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Ks)||j(this,Ks,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,f]=this.getBaseTranslation();a+=c,o+=f;const{style:d}=s;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Ks)&&(u(this,Ks)[0]!==this.x||u(this,Ks)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Ks)&&(u(this,Ks)[2]!==this.width||u(this,Ks)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ue,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:a,width:o,height:c}=this;if(o*=s,c*=i,r*=s,a*=i,this._mustFixPosition)switch(e){case 0:r=vs(r,0,s-o),a=vs(a,0,i-c);break;case 90:r=vs(r,0,s-c),a=vs(a,o,i);break;case 180:r=vs(r,o,s),a=vs(a,c,i);break;case 270:r=vs(r,c,s),a=vs(a,0,i-o);break}this.x=r/=s,this.y=a/=i;const[f,d]=this.getBaseTranslation();r+=f,a+=d,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=Ue,lm,Ux).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=Ue,lm,Ux).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,zt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Oc))return this._editToolbar;this._editToolbar=new Ax(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,zt))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,zt)||(Ay.initialize(Ue._l10n),j(this,zt,new Ay(this)),u(this,Dc)&&(u(this,zt).data=u(this,Dc),j(this,Dc,null))),u(this,zt)}get altTextData(){var e;return(e=u(this,zt))==null?void 0:e.data}set altTextData(e){u(this,zt)&&(u(this,zt).data=e)}get guessedAltText(){var e;return(e=u(this,zt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,zt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,zt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,zt)&&!u(this,zt).isEmpty()}hasAltTextData(){var e;return((e=u(this,zt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,Ct))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,Ct)||j(this,Ct,new N1(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,Da)){this._uiManager.isEditingMode()&&u(this,Da).classList.remove("hidden");return}this.hasComment&&(j(this,Da,u(this,Ct).renderForStandalone()),this.div.append(u(this,Da)))}}removeStandaloneCommentButton(){u(this,Ct).removeStandaloneCommentButton(),j(this,Da,null)}hideStandaloneCommentButton(){var e;(e=u(this,Da))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=u(this,Ct);return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,Ct)||j(this,Ct,new N1(this)),u(this,Ct).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(u(this,Ct)||j(this,Ct,new N1(this)),u(this,Ct).setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=u(this,Ct))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,Ct))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,Ct)&&!u(this,Ct).isEmpty()&&!u(this,Ct).isDeleted()}async editComment(e){u(this,Ct)||j(this,Ct,new N1(this)),u(this,Ct).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,Ct).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[a]=this.pageTranslation,o=a+r+1,c=i-100,f=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,f,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,Ct).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,wd)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,Pe,Wx).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),hT(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,zc)||j(this,zc,new Ty({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,Pe,TT).bind(this),onPinching:E(this,Pe,IT).bind(this),onPinchEnd:E(this,Pe,DT).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Ln.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(j(this,Rc,!0),this._isDraggable){E(this,Pe,PT).call(this,e);return}E(this,Pe,Gx).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Zr)&&clearTimeout(u(this,Zr)),j(this,Zr,setTimeout(()=>{var e;j(this,Zr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,f=e/i,d=t/i,h=this.x*r,p=this.y*a,m=this.width*r,g=this.height*a;switch(s){case 0:return[h+f+o,a-p-d-g+c,h+f+m+o,a-p-d+c];case 90:return[h+d+o,a-p+f+c,h+d+g+o,a-p+f+m+c];case 180:return[h-f-m+o,a-p+d+c,h-f+o,a-p+d+g+c];case 270:return[h-d-g+o,a-p-f-m+c,h-d+o,a-p-f+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,a]=e,o=r-s,c=a-i;switch(this.rotation){case 0:return[s,t-a,o,c];case 90:return[s,t-i,c,o];case 180:return[r,t-i,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ue._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,Ct))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:r,richText:a},uid:o,pageIndex:c,creationDate:f,modificationDate:d}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:f,modificationDate:s||d,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),j(this,Oc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),j(this,Oc,!1),!0):!1}isInEditMode(){return u(this,Oc)}shouldGetKeyboardEvents(){return u(this,Ra)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&i>0&&e<r&&s>0}rebuild(){E(this,Pe,Wx).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,j(i,Dc,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,a]=i.pageDimensions,[o,c,f,d]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/r,i.y=c/a,i.width=f/r,i.height=d/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,s;if((e=u(this,el))==null||e.abort(),j(this,el,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,Zr)&&(clearTimeout(u(this,Zr)),j(this,Zr,null)),E(this,Pe,E0).call(this),this.removeEditToolbar(),u(this,Gi)){for(const i of u(this,Gi).values())clearTimeout(i);j(this,Gi,null)}this.parent=null,(t=u(this,zc))==null||t.destroy(),j(this,zc,null),(s=u(this,Hi))==null||s.remove(),j(this,Hi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Pe,NT).call(this),u(this,Un).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,r,a]=this.getPDFRect();return[Ue._round(s+(r-s)*e),Ue._round(i+(a-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,Ct).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,Ct).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,Ct).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,Ct).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=u(this,Ct))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),j(this,Pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Un).children;if(!u(this,mr)){j(this,mr,Array.from(t));const a=E(this,Pe,RT).bind(this),o=E(this,Pe,OT).bind(this),c=this._uiManager._signal;for(const f of u(this,mr)){const d=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:c}),f.addEventListener("blur",o,{signal:c}),f.addEventListener("focus",E(this,Pe,zT).bind(this,d),{signal:c}),f.setAttribute("data-l10n-id",Ue._l10nResizer[d])}}const s=u(this,mr)[0];let i=0;for(const a of t){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(u(this,mr).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)u(this,Un).append(u(this,Un).firstElementChild);else if(r>i)for(let o=0;o<r-i;o++)u(this,Un).firstElementChild.before(u(this,Un).lastElementChild);let a=0;for(const o of t){const f=u(this,mr)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ue._l10nResizer[f])}}E(this,Pe,Yx).call(this,0),j(this,Ra,!0),u(this,Un).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ra)&&E(this,Pe,Hx).call(this,u(this,rm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,Pe,E0).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=u(this,zt))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=u(this,Un))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=u(this,zt))==null||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,am)}set isEditing(e){j(this,am,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Gi)||j(this,Gi,new Map);const{action:s}=e;let i=u(this,Gi).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,Gi).delete(s),u(this,Gi).size===0&&j(this,Gi,null)},Ue._telemetryTimeout),u(this,Gi).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),j(this,wd,!1)}disable(){this.div&&(this.div.tabIndex=-1),j(this,wd,!0)}updateFakeAnnotationElement(e){if(!u(this,Hi)&&!this.deleted){j(this,Hi,e.addFakeAnnotation(this));return}if(this.deleted){u(this,Hi).remove(),j(this,Hi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,Hi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Dc=new WeakMap,mr=new WeakMap,zt=new WeakMap,Ct=new WeakMap,Da=new WeakMap,wd=new WeakMap,Xo=new WeakMap,im=new WeakMap,Un=new WeakMap,Pc=new WeakMap,Pa=new WeakMap,Hi=new WeakMap,el=new WeakMap,rm=new WeakMap,Rc=new WeakMap,Ks=new WeakMap,am=new WeakMap,Oc=new WeakMap,Ra=new WeakMap,Zr=new WeakMap,yd=new WeakMap,bd=new WeakMap,Gi=new WeakMap,zc=new WeakMap,om=new WeakMap,qy=new WeakMap,Pe=new WeakSet,Fx=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},lm=new WeakSet,Ux=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},pw=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},NT=function(){if(u(this,Un))return;j(this,Un,document.createElement("div")),u(this,Un).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");u(this,Un).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",E(this,Pe,AT).bind(this,s),{signal:t}),i.addEventListener("contextmenu",ar,{signal:t}),i.tabIndex=-1}this.div.prepend(u(this,Un))},AT=function(e,t){var d;t.preventDefault();const{isMac:s}=Ln.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=u(this,zt))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,j(this,Pc,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Pe,Hx).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",nn,{passive:!1,signal:a}),window.addEventListener("contextmenu",ar,{signal:a}),j(this,Pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var h;r.abort(),this.parent.togglePointerEvents(!0),(h=u(this,zt))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,E(this,Pe,mw).call(this)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})},$x=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},mw=function(){if(!u(this,Pa))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=u(this,Pa);j(this,Pa,null);const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===s&&c===i||this.addCommands({cmd:E(this,Pe,$x).bind(this,r,a,o,c),undo:E(this,Pe,$x).bind(this,e,t,s,i),mustExec:!0})},Hx=function(e,t){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,f=Ue.MIN_SIZE/s,d=Ue.MIN_SIZE/i,h=E(this,Pe,pw).call(this,this.rotation),p=($,X)=>[h[0]*$+h[2]*X,h[1]*$+h[3]*X],m=E(this,Pe,pw).call(this,360-this.rotation),g=($,X)=>[m[0]*$+m[2]*X,m[1]*$+m[3]*X];let w,b,y=!1,x=!1;switch(e){case"topLeft":y=!0,w=($,X)=>[0,0],b=($,X)=>[$,X];break;case"topMiddle":w=($,X)=>[$/2,0],b=($,X)=>[$/2,X];break;case"topRight":y=!0,w=($,X)=>[$,0],b=($,X)=>[0,X];break;case"middleRight":x=!0,w=($,X)=>[$,X/2],b=($,X)=>[0,X/2];break;case"bottomRight":y=!0,w=($,X)=>[$,X],b=($,X)=>[0,0];break;case"bottomMiddle":w=($,X)=>[$/2,X],b=($,X)=>[$/2,0];break;case"bottomLeft":y=!0,w=($,X)=>[0,X],b=($,X)=>[$,0];break;case"middleLeft":x=!0,w=($,X)=>[0,X/2],b=($,X)=>[$,X/2];break}const v=w(o,c),C=b(o,c);let S=p(...C);const L=Ue._round(r+S[0]),k=Ue._round(a+S[1]);let A=1,T=1,I,N;if(t.fromKeyboard)({deltaX:I,deltaY:N}=t);else{const{screenX:$,screenY:X}=t,[O,G]=u(this,Pc);[I,N]=this.screenToPageTranslation($-O,X-G),u(this,Pc)[0]=$,u(this,Pc)[1]=X}if([I,N]=g(I/s,N/i),y){const $=Math.hypot(o,c);A=T=Math.max(Math.min(Math.hypot(C[0]-v[0]-I,C[1]-v[1]-N)/$,1/o,1/c),f/o,d/c)}else x?A=vs(Math.abs(C[0]-v[0]-I),f,1)/o:T=vs(Math.abs(C[1]-v[1]-N),d,1)/c;const R=Ue._round(o*A),B=Ue._round(c*T);S=p(...b(R,B));const P=L-S[0],Y=k-S[1];u(this,Ks)||j(this,Ks,[this.x,this.y,this.width,this.height]),this.width=R,this.height=B,this.x=P,this.y=Y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},TT=function(){var e;j(this,Pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,zt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},IT=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const a=E(this,Pe,pw).call(this,this.rotation),o=(L,k)=>[a[0]*L+a[2]*k,a[1]*L+a[3]*k],[c,f]=this.parentDimensions,d=this.x,h=this.y,p=this.width,m=this.height,g=Ue.MIN_SIZE/c,w=Ue.MIN_SIZE/f;r=Math.max(Math.min(r,1/p,1/m),g/p,w/m);const b=Ue._round(p*r),y=Ue._round(m*r);if(b===p&&y===m)return;u(this,Ks)||j(this,Ks,[d,h,p,m]);const x=o(p/2,m/2),v=Ue._round(d+x[0]),C=Ue._round(h+x[1]),S=o(b/2,y/2);this.x=v-S[0],this.y=C-S[1],this.width=b,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},DT=function(){var e;(e=u(this,zt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,Pe,mw).call(this)},Gx=function(e){const{isMac:t}=Ln.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},PT=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},o=f=>{i.abort(),j(this,Xo,null),j(this,Rc,!1),this._uiManager.endDragSession()||E(this,Pe,Gx).call(this,f),s&&this._onStopDragging()};t&&(j(this,yd,e.clientX),j(this,bd,e.clientY),j(this,Xo,e.pointerId),j(this,im,e.pointerType),window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:p}=f;if(p!==u(this,Xo)){nn(f);return}const[m,g]=this.screenToPageTranslation(d-u(this,yd),h-u(this,bd));j(this,yd,d),j(this,bd,h),this._uiManager.dragSelectedEditors(m,g)},a),window.addEventListener("touchmove",nn,a),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,im)&&(u(this,zc)||f.isPrimary)&&o(f),nn(f)},a));const c=f=>{if(!u(this,Xo)||u(this,Xo)===f.pointerId){o(f);return}nn(f)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Wx=function(){if(u(this,el)||!this.div)return;j(this,el,new AbortController);const e=this._uiManager.combinedSignal(u(this,el));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},RT=function(e){Ue._resizerKeyboardManager.exec(this,e)},OT=function(e){var t;u(this,Ra)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Un)&&E(this,Pe,E0).call(this)},zT=function(e){j(this,rm,u(this,Ra)?e:"")},Yx=function(e){if(u(this,mr))for(const t of u(this,mr))t.tabIndex=e},E0=function(){j(this,Ra,!1),E(this,Pe,Yx).call(this,-1),E(this,Pe,mw).call(this)},M(Ue,lm),ee(Ue,"_l10n",null),ee(Ue,"_l10nResizer",null),ee(Ue,"_borderLineWidth",-1),ee(Ue,"_colorManager",new Dx),ee(Ue,"_zIndex",1),ee(Ue,"_telemetryTimeout",1e3);let Tt=Ue;class y7 extends Tt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const nS=3285377520,Di=4294901760,Fr=65535;class BT{constructor(e){this.h1=e?e&4294967295:nS,this.h2=e?e&4294967295:nS}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,b=e.length;w<b;w++){const y=e.charCodeAt(w);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,c=0,f=this.h1,d=this.h2;const h=3432918353,p=461845907,m=h&Fr,g=p&Fr;for(let w=0;w<i;w++)w&1?(o=a[w],o=o*h&Di|o*m&Fr,o=o<<15|o>>>17,o=o*p&Di|o*g&Fr,f^=o,f=f<<13|f>>>19,f=f*5+3864292196):(c=a[w],c=c*h&Di|c*m&Fr,c=c<<15|c>>>17,c=c*p&Di|c*g&Fr,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&Di|o*m&Fr,o=o<<15|o>>>17,o=o*p&Di|o*g&Fr,i&1?f^=o:d^=o}this.h1=f,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Di|e*36045&Fr,t=t*4283543511&Di|((t<<16|e>>>16)*2950163797&Di)>>>16,e^=t>>>1,e=e*444984403&Di|e*60499&Fr,t=t*3301882366&Di|((t<<16|e>>>16)*3120437893&Di)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Vx=Object.freeze({map:null,hash:"",transfer:void 0});var Bc,Fc,Oa,$n,Zy,FT;class Hj{constructor(){M(this,Zy);M(this,Bc,!1);M(this,Fc,null);M(this,Oa,null);M(this,$n,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=u(this,$n).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return u(this,$n).get(e)}remove(e){const t=u(this,$n).get(e);if(t!==void 0&&(t instanceof Tt&&u(this,Oa).delete(t.annotationElementId),u(this,$n).delete(e),u(this,$n).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of u(this,$n).values())if(s instanceof Tt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=u(this,$n).get(e);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(i=!0,s[r]=a);else i=!0,u(this,$n).set(e,t);i&&E(this,Zy,FT).call(this),t instanceof Tt&&((u(this,Oa)||j(this,Oa,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,$n).has(e)}get size(){return u(this,$n).size}resetModified(){u(this,Bc)&&(j(this,Bc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new UT(this)}get serializable(){if(u(this,$n).size===0)return Vx;const e=new Map,t=new BT,s=[],i=Object.create(null);let r=!1;for(const[a,o]of u(this,$n)){const c=o instanceof Tt?o.serialize(!1,i):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Vx}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const r of u(this,$n).values()){if(!(r instanceof Tt)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const a=r.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[f,d]of Object.entries(a)){if(f==="type")continue;let h=c.get(f);h||(h=new Map,c.set(f,h));const p=h.get(d)??0;h.set(d,p+1)}}if((i>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:s}),!e)return null;for(const[r,a]of t)e[r]=a.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){j(this,Fc,null)}updateEditor(e,t){var i;const s=(i=u(this,Oa))==null?void 0:i.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,Oa))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,Fc))return u(this,Fc);const e=[];if(u(this,Oa))for(const t of u(this,Oa).values())t.serialize()&&e.push(t.annotationElementId);return j(this,Fc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,$n).entries()}}Bc=new WeakMap,Fc=new WeakMap,Oa=new WeakMap,$n=new WeakMap,Zy=new WeakSet,FT=function(){u(this,Bc)||(j(this,Bc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var cm;class UT extends Hj{constructor(t){super();M(this,cm);const{map:s,hash:i,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);j(this,cm,{map:a,hash:i,transfer:r})}get print(){St("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,cm)}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}cm=new WeakMap;var vd;class b7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){M(this,vd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,vd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||u(this,vd).has(e.loadedName))){if(st(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=e,o=new FontFace(i,r,a);this.addNativeFontFace(o);try{await o.load(),u(this,vd).add(i),s==null||s(e)}catch{Be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}St("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Be(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Fe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Fe(this,"isSyncFontLoadingSupported",bs||Ln.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(st(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(C,S){return C.charCodeAt(S)<<24|C.charCodeAt(S+1)<<16|C.charCodeAt(S+2)<<8|C.charCodeAt(S+3)&255}function i(C,S,L,k){const A=C.substring(0,S),T=C.substring(S+L);return A+k+T}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let f=0;function d(C,S){if(++f>30){Be("Load test font never loaded."),S();return}if(c.font="30px "+C,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(d.bind(null,C,S))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,h.length,h);const g=16,w=1482184792;let b=s(p,g);for(r=0,a=h.length-3;r<a;r+=4)b=b-w+s(h,r)|0;r<h.length&&(b=b-w+s(h+"XXX",r)|0),p=i(p,g,4,XU(b));const y=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(x);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const C of[e.loadedName,h]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=C,v.append(S)}this._document.body.append(v),d(h,()=>{v.remove(),t.complete()})}}vd=new WeakMap;var yt;class v7{constructor(e,t=null,s,i){M(this,yt);this.compiledGlyphs=Object.create(null),j(this,yt,e),this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${iT(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(a){Be(`getPathGenerator - ignoring character: "${a}".`)}const r=oT(i==null?void 0:i.path);return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}get black(){return u(this,yt).black}get bold(){return u(this,yt).bold}get disableFontFace(){return u(this,yt).disableFontFace??!1}set disableFontFace(e){Fe(this,"disableFontFace",!!e)}get fontExtraProperties(){return u(this,yt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,yt).isInvalidPDFjsFont}get isType3Font(){return u(this,yt).isType3Font}get italic(){return u(this,yt).italic}get missingFile(){return u(this,yt).missingFile}get remeasure(){return u(this,yt).remeasure}get vertical(){return u(this,yt).vertical}get ascent(){return u(this,yt).ascent}get defaultWidth(){return u(this,yt).defaultWidth}get descent(){return u(this,yt).descent}get bbox(){return u(this,yt).bbox}set bbox(e){Fe(this,"bbox",e)}get fontMatrix(){return u(this,yt).fontMatrix}get fallbackName(){return u(this,yt).fallbackName}get loadedName(){return u(this,yt).loadedName}get mimetype(){return u(this,yt).mimetype}get name(){return u(this,yt).name}get data(){return u(this,yt).data}clearData(){u(this,yt).clearData()}get cssFontInfo(){return u(this,yt).cssFontInfo}get systemFontInfo(){return u(this,yt).systemFontInfo}get defaultVMetrics(){return u(this,yt).defaultVMetrics}}yt=new WeakMap;var xd,_d,um,jd,gw;const Bf=class Bf{constructor(e){M(this,jd);M(this,xd);M(this,_d);M(this,um);j(this,xd,e),j(this,_d,new DataView(u(this,xd))),j(this,um,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const f of Bf.strings){const d=t.encode(e[f]);s[f]=d,i+=4+d.length}const r=new ArrayBuffer(i),a=new Uint8Array(r),o=new DataView(r);let c=0;for(const f of Bf.strings){const d=s[f],h=d.length;o.setUint32(c,h),a.set(d,c+4),c+=4+h}return st(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return E(this,jd,gw).call(this,0)}get fontWeight(){return E(this,jd,gw).call(this,1)}get italicAngle(){return E(this,jd,gw).call(this,2)}};xd=new WeakMap,_d=new WeakMap,um=new WeakMap,jd=new WeakSet,gw=function(e){st(e<Bf.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=u(this,_d).getUint32(t)+4;const s=u(this,_d).getUint32(t);return u(this,um).decode(new Uint8Array(u(this,xd),t+4,s))},ee(Bf,"strings",["fontFamily","fontWeight","italicAngle"]);let Iy=Bf;var tl,Kr,Uc,$c,k0;const Ff=class Ff{constructor(e){M(this,$c);M(this,tl);M(this,Kr);M(this,Uc);j(this,tl,e),j(this,Kr,new DataView(u(this,tl))),j(this,Uc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let i=0;for(const p of Ff.strings){const m=t.encode(e[p]);s[p]=m,i+=4+m.length}i+=4;let r,a,o=1+i;e.style&&(r=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+r.length+4+a.length);const c=new ArrayBuffer(o),f=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const p of Ff.strings){const m=s[p],g=m.length;i+=4+g,d.setUint32(h,g),f.set(m,h+4),h+=4+g}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,r.length),f.set(r,h+4),h+=4+r.length,d.setUint32(h,a.length),f.set(a,h+4),h+=4+a.length),st(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return u(this,Kr).getUint8(0)!==0}get css(){return E(this,$c,k0).call(this,0)}get loadedName(){return E(this,$c,k0).call(this,1)}get baseFontName(){return E(this,$c,k0).call(this,2)}get src(){return E(this,$c,k0).call(this,3)}get style(){let e=1;e+=4+u(this,Kr).getUint32(e);const t=u(this,Kr).getUint32(e),s=u(this,Uc).decode(new Uint8Array(u(this,tl),e+4,t));e+=4+t;const i=u(this,Kr).getUint32(e),r=u(this,Uc).decode(new Uint8Array(u(this,tl),e+4,i));return{style:s,weight:r}}};tl=new WeakMap,Kr=new WeakMap,Uc=new WeakMap,$c=new WeakSet,k0=function(e){st(e<Ff.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=u(this,Kr).getUint32(t)+4;const s=u(this,Kr).getUint32(t);return u(this,Uc).decode(new Uint8Array(u(this,tl),t+4,s))},ee(Ff,"strings",["css","loadedName","baseFontName","src"]);let Dy=Ff;var Cd,Md,Ld,Sd,Xs,Xr,fm,bt,en,cr,ww,N0;const He=class He{constructor({data:e,extra:t}){M(this,en);M(this,Xr);M(this,fm);M(this,bt);j(this,Xr,e),j(this,fm,new TextDecoder),j(this,bt,new DataView(u(this,Xr))),t&&Object.assign(this,t)}get black(){return E(this,en,cr).call(this,0)}get bold(){return E(this,en,cr).call(this,1)}get disableFontFace(){return E(this,en,cr).call(this,2)}get fontExtraProperties(){return E(this,en,cr).call(this,3)}get isInvalidPDFjsFont(){return E(this,en,cr).call(this,4)}get isType3Font(){return E(this,en,cr).call(this,5)}get italic(){return E(this,en,cr).call(this,6)}get missingFile(){return E(this,en,cr).call(this,7)}get remeasure(){return E(this,en,cr).call(this,8)}get vertical(){return E(this,en,cr).call(this,9)}get ascent(){return E(this,en,ww).call(this,0)}get defaultWidth(){return E(this,en,ww).call(this,1)}get descent(){return E(this,en,ww).call(this,2)}get bbox(){let e=u(He,Md);if(u(this,bt).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(u(this,bt).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=u(He,Ld);if(u(this,bt).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(u(this,bt).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=u(He,Sd);if(u(this,bt).getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(u(this,bt).getInt16(e,!0)),e+=2;return s}get fallbackName(){return E(this,en,N0).call(this,0)}get loadedName(){return E(this,en,N0).call(this,1)}get mimetype(){return E(this,en,N0).call(this,2)}get name(){return E(this,en,N0).call(this,3)}get data(){let e=u(He,Xs);const t=u(this,bt).getUint32(e);e+=4+t;const s=u(this,bt).getUint32(e);e+=4+s;const i=u(this,bt).getUint32(e);e+=4+i;const r=u(this,bt).getUint32(e);if(r!==0)return new Uint8Array(u(this,Xr),e+4,r)}clearData(){let e=u(He,Xs);const t=u(this,bt).getUint32(e);e+=4+t;const s=u(this,bt).getUint32(e);e+=4+s;const i=u(this,bt).getUint32(e);e+=4+i;const r=u(this,bt).getUint32(e);new Uint8Array(u(this,Xr),e+4,r).fill(0),u(this,bt).setUint32(e,0)}get cssFontInfo(){let e=u(He,Xs);const t=u(this,bt).getUint32(e);e+=4+t;const s=u(this,bt).getUint32(e);e+=4+s;const i=u(this,bt).getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(u(this,Xr),e+4,i)),new Iy(r.buffer)}get systemFontInfo(){let e=u(He,Xs);const t=u(this,bt).getUint32(e);e+=4+t;const s=u(this,bt).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(u(this,Xr),e+4,s)),new Dy(i.buffer)}static write(e){const t=e.systemFontInfo?Dy.write(e.systemFontInfo):null,s=e.cssFontInfo?Iy.write(e.cssFontInfo):null,i=new TextEncoder,r={};let a=0;for(const w of He.strings)r[w]=i.encode(e[w]),a+=4+r[w].length;const o=u(He,Xs)+4+a+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(o),f=new Uint8Array(c),d=new DataView(c);let h=0;const p=He.bools.length;let m=0,g=0;for(let w=0;w<p;w++){const b=e[He.bools[w]];m|=(b===void 0?0:b?2:1)<<g,g+=2,(g===8||w===p-1)&&(d.setUint8(h++,m),m=0,g=0)}st(h===u(He,Cd),"FontInfo.write: Boolean properties offset mismatch");for(const w of He.numbers)d.setFloat64(h,e[w]),h+=8;if(st(h===u(He,Md),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const w of e.bbox)d.setInt16(h,w,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(st(h===u(He,Ld),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const w of e.fontMatrix)d.setFloat64(h,w,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(st(h===u(He,Sd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const w of e.defaultVMetrics)d.setInt16(h,w,!0),h+=2}else d.setUint8(h++,0),h+=3*2;st(h===u(He,Xs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(u(He,Xs),0),h+=4;for(const w of He.strings){const b=r[w],y=b.length;d.setUint32(h,y),f.set(b,h+4),h+=4+y}if(d.setUint32(u(He,Xs),h-u(He,Xs)-4),!t)d.setUint32(h,0),h+=4;else{const w=t.byteLength;d.setUint32(h,w),st(h+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),h+4),h+=4+w}if(!s)d.setUint32(h,0),h+=4;else{const w=s.byteLength;d.setUint32(h,w),st(h+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),h+4),h+=4+w}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),f.set(e.data,h+4),h+=4+e.data.length),st(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Cd=new WeakMap,Md=new WeakMap,Ld=new WeakMap,Sd=new WeakMap,Xs=new WeakMap,Xr=new WeakMap,fm=new WeakMap,bt=new WeakMap,en=new WeakSet,cr=function(e){st(e<He.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=u(this,bt).getUint8(t)>>s&3;return i===0?void 0:i===2},ww=function(e){return st(e<He.numbers.length,"Invalid number index"),u(this,bt).getFloat64(u(He,Cd)+e*8)},N0=function(e){st(e<He.strings.length,"Invalid string index");let t=u(He,Xs)+4;for(let r=0;r<e;r++)t+=u(this,bt).getUint32(t)+4;const s=u(this,bt).getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(u(this,Xr),t+4,s)),u(this,fm).decode(i)},ee(He,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ee(He,"numbers",["ascent","defaultWidth","descent"]),ee(He,"strings",["fallbackName","loadedName","mimetype","name"]),M(He,Cd,Math.ceil(He.bools.length*2/8)),M(He,Md,u(He,Cd)+He.numbers.length*8),M(He,Ld,u(He,Md)+1+2*4),M(He,Sd,u(He,Ld)+1+8*6),M(He,Xs,u(He,Sd)+1+2*3);let Qx=He;var dm,hm,pm,mm,gm,wm,ym,bm;const kt=class kt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,s=null,i=[],r=[],a=[],o=[],c=null,f=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,s=e[2],a=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],i=e[2],r=e[3],o=e[4]||[],s=e[6],f=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(i.length/2),h=Math.floor(r.length/3),p=a.length,m=o.length;let g=0;for(const S of o)g+=1,g=Math.ceil(g/4)*4,g+=4+S.coords.length*4,g+=4+S.colors.length*4,S.verticesPerRow!==void 0&&(g+=4);const w=20+d*8+h*3+p*8+(s?16:0)+(f?3:0)+g,b=new ArrayBuffer(w),y=new DataView(b),x=new Uint8Array(b);y.setUint8(u(kt,dm),t),y.setUint8(u(kt,hm),s?1:0),y.setUint8(u(kt,pm),f?1:0),y.setUint8(u(kt,mm),c),y.setUint32(u(kt,gm),d,!0),y.setUint32(u(kt,wm),h,!0),y.setUint32(u(kt,ym),p,!0),y.setUint32(u(kt,bm),m,!0);let v=20;new Float32Array(b,v,d*2).set(i),v+=d*8,x.set(r,v),v+=h*3;for(const[S,L]of a)y.setFloat32(v,S,!0),v+=4,y.setUint32(v,parseInt(L.slice(1),16),!0),v+=4;if(s)for(const S of s)y.setFloat32(v,S,!0),v+=4;f&&(x.set(f,v),v+=3);for(let S=0;S<o.length;S++){const L=o[S];y.setUint8(v,L.type),v+=1,v=Math.ceil(v/4)*4,y.setUint32(v,L.coords.length,!0),v+=4,new Int32Array(b,v,L.coords.length).set(L.coords),v+=L.coords.length*4,y.setUint32(v,L.colors.length,!0),v+=4,new Int32Array(b,v,L.colors.length).set(L.colors),v+=L.colors.length*4,L.verticesPerRow!==void 0&&(y.setUint32(v,L.verticesPerRow,!0),v+=4)}return b}getIR(){const e=this.view,t=this.data[u(kt,dm)],s=!!this.data[u(kt,hm)],i=!!this.data[u(kt,pm)],r=e.getUint32(u(kt,gm),!0),a=e.getUint32(u(kt,wm),!0),o=e.getUint32(u(kt,ym),!0),c=e.getUint32(u(kt,bm),!0);let f=20;const d=new Float32Array(this.buffer,f,r*2);f+=r*8;const h=new Uint8Array(this.buffer,f,a*3);f+=a*3;const p=[];for(let b=0;b<o;++b){const y=e.getFloat32(f,!0);f+=4;const x=e.getUint32(f,!0);f+=4,p.push([y,`#${x.toString(16).padStart(6,"0")}`])}let m=null;if(s){m=[];for(let b=0;b<4;++b)m.push(e.getFloat32(f,!0)),f+=4}let g=null;i&&(g=new Uint8Array(this.buffer,f,3),f+=3);const w=[];for(let b=0;b<c;++b){const y=e.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const x=e.getUint32(f,!0);f+=4;const v=new Int32Array(this.buffer,f,x);f+=x*4;const C=e.getUint32(f,!0);f+=4;const S=new Int32Array(this.buffer,f,C);f+=C*4;const L={type:y,coords:v,colors:S};y===Lx.LATTICE&&(L.verticesPerRow=e.getUint32(f,!0),f+=4),w.push(L)}if(t===1)return["RadialAxial","axial",m,p,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,p,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(t===3){const b=this.data[u(kt,mm)];let y=null;if(d.length>0){let x=d[0],v=d[0],C=d[1],S=d[1];for(let L=0;L<d.length;L+=2){const k=d[L],A=d[L+1];x=x>k?k:x,C=C>A?A:C,v=v<k?k:v,S=S<A?A:S}y=[x,C,v,S]}return["Mesh",b,d,h,w,y,m,g]}throw new Error(`Unsupported pattern kind: ${t}`)}};dm=new WeakMap,hm=new WeakMap,pm=new WeakMap,mm=new WeakMap,gm=new WeakMap,wm=new WeakMap,ym=new WeakMap,bm=new WeakMap,M(kt,dm,0),M(kt,hm,1),M(kt,pm,2),M(kt,mm,3),M(kt,gm,4),M(kt,wm,8),M(kt,ym,12),M(kt,bm,16);let Jx=kt;var Ed;class x7{constructor(e){M(this,Ed);j(this,Ed,e)}static write(e){let t,s;return Ln.isFloat16ArraySupported?(s=new ArrayBuffer(e.length*2),t=new Float16Array(s)):(s=new ArrayBuffer(e.length*4),t=new Float32Array(s)),t.set(e),s}get path(){return Ln.isFloat16ArraySupported?new Float16Array(u(this,Ed)):new Float32Array(u(this,Ed))}}Ed=new WeakMap;function _7(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(bs)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function j7(n){if(bs&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return $g(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function A1(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const qx=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,C7=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",M7=i7.bind(null,qx,C7);var za,Ky;class L7{constructor(){M(this,za,new Map);M(this,Ky,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};u(this,Ky).then(()=>{for(const[i]of u(this,za))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Be("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}u(this,za).set(t,i)}removeEventListener(e,t){const s=u(this,za).get(t);s==null||s(),u(this,za).delete(t)}terminate(){for(const[,e]of u(this,za))e==null||e();u(this,za).clear()}}za=new WeakMap,Ky=new WeakMap;const T1={DATA:1,ERROR:2},cn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function sS(){}function ks(n){if(n instanceof $l||n instanceof Sx||n instanceof JL||n instanceof ky||n instanceof Jv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||St('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new $l(n.message);case"InvalidPDFException":return new Sx(n.message);case"PasswordException":return new JL(n.message,n.code);case"ResponseException":return new ky(n.message,n.status,n.missing);case"UnknownErrorException":return new Jv(n.message,n.details)}return new Jv(n.message,n.toString())}var kd,nr,$T,HT,GT,yw;class A0{constructor(e,t,s){M(this,nr);M(this,kd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,nr,$T).bind(this),{signal:u(this,kd).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:f=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:f.desiredSize},i),d.promise},pull:f=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,c.postMessage({sourceName:a,targetName:o,stream:cn.PULL,streamId:r,desiredSize:f.desiredSize}),d.promise},cancel:f=>{st(f instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:cn.CANCEL,streamId:r,reason:ks(f)}),d.promise}},s)}destroy(){var e;(e=u(this,kd))==null||e.abort(),j(this,kd,null)}}kd=new WeakMap,nr=new WeakSet,$T=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,nr,GT).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===T1.DATA)i.resolve(e.data);else if(e.callback===T1.ERROR)i.reject(ks(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:s,targetName:i,callback:T1.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:i,callback:T1.ERROR,callbackId:e.callbackId,reason:ks(a)})});return}if(e.streamId){E(this,nr,HT).call(this,e);return}t(e.data)},HT=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(f,d=1,h){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:cn.ENQUEUE,streamId:t,chunk:f},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:cn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(f){st(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:cn.ERROR,streamId:t,reason:ks(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cn.START_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:s,targetName:i,stream:cn.START_COMPLETE,streamId:t,reason:ks(f)})})},GT=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case cn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ks(e.reason));break;case cn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ks(e.reason));break;case cn.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:cn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||sS).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cn.PULL_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:s,targetName:i,stream:cn.PULL_COMPLETE,streamId:t,reason:ks(f)})});break;case cn.ENQUEUE:if(st(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case cn.CLOSE:if(st(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),E(this,nr,yw).call(this,a,t);break;case cn.ERROR:st(a,"error should have stream controller"),a.controller.error(ks(e.reason)),E(this,nr,yw).call(this,a,t);break;case cn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ks(e.reason)),E(this,nr,yw).call(this,a,t);break;case cn.CANCEL:if(!o)break;const c=ks(e.reason);Promise.try(o.onCancel||sS,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cn.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:s,targetName:i,stream:cn.CANCEL_COMPLETE,streamId:t,reason:ks(f)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},yw=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var vm;class WT{constructor({enableHWA:e=!1}){M(this,vm,!1);j(this,vm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!u(this,vm)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){St("Abstract method `_createCanvas` called.")}}vm=new WeakMap;class S7 extends WT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class YT{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){St("Abstract method `_fetch` called.")}}class iS extends YT{async _fetch(e){const t=await Hg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):$g(t)}}class VT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Hc,Nd,Ba,Fa,as,Gc,Wc,ye,ns,T0,wf,bw,yf,QT,Zx,bf,I0,D0,Kx,P0;class E7 extends VT{constructor({docId:t,ownerDocument:s=globalThis.document}){super();M(this,ye);M(this,Hc);M(this,Nd);M(this,Ba);M(this,Fa);M(this,as);M(this,Gc);M(this,Wc,0);j(this,Fa,t),j(this,as,s)}addFilter(t){if(!t)return"none";let s=u(this,ye,ns).get(t);if(s)return s;const[i,r,a]=E(this,ye,bw).call(this,t),o=t.length===1?i:`${i}${r}${a}`;if(s=u(this,ye,ns).get(o),s)return u(this,ye,ns).set(t,s),s;const c=`g_${u(this,Fa)}_transfer_map_${wn(this,Wc)._++}`,f=E(this,ye,yf).call(this,c);u(this,ye,ns).set(t,f),u(this,ye,ns).set(o,f);const d=E(this,ye,bf).call(this,c);return E(this,ye,D0).call(this,i,r,a,d),f}addHCMFilter(t,s){var g;const i=`${t}-${s}`,r="base";let a=u(this,ye,T0).get(r);if((a==null?void 0:a.key)===i||(a?((g=a.filter)==null||g.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},u(this,ye,T0).set(r,a)),!t||!s))return a.url;const o=E(this,ye,P0).call(this,t);t=ge.makeHexColor(...o);const c=E(this,ye,P0).call(this,s);if(s=ge.makeHexColor(...c),u(this,ye,wf).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const f=new Array(256);for(let w=0;w<=255;w++){const b=w/255;f[w]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=f.join(","),h=`g_${u(this,Fa)}_hcm_filter`,p=a.filter=E(this,ye,bf).call(this,h);E(this,ye,D0).call(this,d,d,d,p),E(this,ye,Zx).call(this,p);const m=(w,b)=>{const y=o[w]/255,x=c[w]/255,v=new Array(b+1);for(let C=0;C<=b;C++)v[C]=y+C/b*(x-y);return v.join(",")};return E(this,ye,D0).call(this,m(0,5),m(1,5),m(2,5),p),a.url=E(this,ye,yf).call(this,h),a.url}addAlphaFilter(t){let s=u(this,ye,ns).get(t);if(s)return s;const[i]=E(this,ye,bw).call(this,[t]),r=`alpha_${i}`;if(s=u(this,ye,ns).get(r),s)return u(this,ye,ns).set(t,s),s;const a=`g_${u(this,Fa)}_alpha_map_${wn(this,Wc)._++}`,o=E(this,ye,yf).call(this,a);u(this,ye,ns).set(t,o),u(this,ye,ns).set(r,o);const c=E(this,ye,bf).call(this,a);return E(this,ye,Kx).call(this,i,c),o}addLuminosityFilter(t){let s=u(this,ye,ns).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=E(this,ye,bw).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=u(this,ye,ns).get(r),s)return u(this,ye,ns).set(t,s),s;const a=`g_${u(this,Fa)}_luminosity_map_${wn(this,Wc)._++}`,o=E(this,ye,yf).call(this,a);u(this,ye,ns).set(t,o),u(this,ye,ns).set(r,o);const c=E(this,ye,bf).call(this,a);return E(this,ye,QT).call(this,c),t&&E(this,ye,Kx).call(this,i,c),o}addHighlightHCMFilter(t,s,i,r,a){var x;const o=`${s}-${i}-${r}-${a}`;let c=u(this,ye,T0).get(t);if((c==null?void 0:c.key)===o||(c?((x=c.filter)==null||x.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},u(this,ye,T0).set(t,c)),!s||!i))return c.url;const[f,d]=[s,i].map(E(this,ye,P0).bind(this));let h=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,g]=[r,a].map(E(this,ye,P0).bind(this));p<h&&([h,p,m,g]=[p,h,g,m]),u(this,ye,wf).style.color="";const w=(v,C,S)=>{const L=new Array(256),k=(p-h)/S,A=v/255,T=(C-v)/(255*S);let I=0;for(let N=0;N<=S;N++){const R=Math.round(h+N*k),B=A+N*T;for(let P=I;P<=R;P++)L[P]=B;I=R+1}for(let N=I;N<256;N++)L[N]=L[I-1];return L.join(",")},b=`g_${u(this,Fa)}_hcm_${t}_filter`,y=c.filter=E(this,ye,bf).call(this,b);return E(this,ye,Zx).call(this,y),E(this,ye,D0).call(this,w(m[0],g[0],5),w(m[1],g[1],5),w(m[2],g[2],5),y),c.url=E(this,ye,yf).call(this,b),c.url}destroy(t=!1){var s,i,r,a;t&&((s=u(this,Gc))!=null&&s.size)||((i=u(this,Ba))==null||i.parentNode.parentNode.remove(),j(this,Ba,null),(r=u(this,Nd))==null||r.clear(),j(this,Nd,null),(a=u(this,Gc))==null||a.clear(),j(this,Gc,null),j(this,Wc,0))}}Hc=new WeakMap,Nd=new WeakMap,Ba=new WeakMap,Fa=new WeakMap,as=new WeakMap,Gc=new WeakMap,Wc=new WeakMap,ye=new WeakSet,ns=function(){return u(this,Nd)||j(this,Nd,new Map)},T0=function(){return u(this,Gc)||j(this,Gc,new Map)},wf=function(){if(!u(this,Ba)){const t=u(this,as).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=u(this,as).createElementNS(ba,"svg");i.setAttribute("width",0),i.setAttribute("height",0),j(this,Ba,u(this,as).createElementNS(ba,"defs")),t.append(i),i.append(u(this,Ba)),u(this,as).body.append(t)}return u(this,Ba)},bw=function(t){if(t.length===1){const f=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=f[p]/255;const h=d.join(",");return[h,h,h]}const[s,i,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let f=0;f<256;f++)a[f]=s[f]/255,o[f]=i[f]/255,c[f]=r[f]/255;return[a.join(","),o.join(","),c.join(",")]},yf=function(t){if(u(this,Hc)===void 0){j(this,Hc,"");const s=u(this,as).URL;s!==u(this,as).baseURI&&(Zb(s)?Be('#createUrl: ignore "data:"-URL for performance reasons.'):j(this,Hc,tT(s,"")))}return`url(${u(this,Hc)}#${t})`},QT=function(t){const s=u(this,as).createElementNS(ba,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Zx=function(t){const s=u(this,as).createElementNS(ba,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},bf=function(t){const s=u(this,as).createElementNS(ba,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),u(this,ye,wf).append(s),s},I0=function(t,s,i){const r=u(this,as).createElementNS(ba,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},D0=function(t,s,i,r){const a=u(this,as).createElementNS(ba,"feComponentTransfer");r.append(a),E(this,ye,I0).call(this,a,"feFuncR",t),E(this,ye,I0).call(this,a,"feFuncG",s),E(this,ye,I0).call(this,a,"feFuncB",i)},Kx=function(t,s){const i=u(this,as).createElementNS(ba,"feComponentTransfer");s.append(i),E(this,ye,I0).call(this,i,"feFuncA",t)},P0=function(t){return u(this,ye,wf).style.color=t,Wg(getComputedStyle(u(this,ye,wf)).getPropertyValue("color"))};class JT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){St("Abstract method `_fetch` called.")}}class rS extends JT{async _fetch(e){const t=await Hg(e,"arraybuffer");return new Uint8Array(t)}}class qT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){St("Abstract method `_fetch` called.")}}class aS extends qT{async _fetch(e){const t=await Hg(e,"arraybuffer");return new Uint8Array(t)}}bs&&Be("Please use the `legacy` build in Node.js environments.");async function Gj(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class k7 extends VT{}class N7 extends WT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class A7 extends YT{async _fetch(e){return Gj(e)}}class T7 extends JT{async _fetch(e){return Gj(e)}}class I7 extends qT{async _fetch(e){return Gj(e)}}const ff="__forcedDependency",{floor:oS,ceil:lS}=Math;function I1(n,e,t,s,i,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],r)}const Xx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Ad,nl;class D7{constructor(e,t){M(this,Ad);M(this,nl);j(this,Ad,e),j(this,nl,t)}get length(){return u(this,Ad).length}isEmpty(e){return u(this,Ad)[e]===Xx}minX(e){return u(this,nl)[e*4+0]/256}minY(e){return u(this,nl)[e*4+1]/256}maxX(e){return(u(this,nl)[e*4+2]+1)/256}maxY(e){return(u(this,nl)[e*4+3]+1)/256}}Ad=new WeakMap,nl=new WeakMap;const D1=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Ts,Is,Yc,gr,Vc,Ua,pt,vt,$a,Ds,xm,Td,Qc,Jc,Ha,os,ea,_m,e4;class P7{constructor(e,t,s=!1){M(this,_m);M(this,Ts,{__proto__:null});M(this,Is,{__proto__:null,transform:[],moveText:[],sameLineText:[],[ff]:[]});M(this,Yc,new Map);M(this,gr,[]);M(this,Vc,[]);M(this,Ua,[[1,0,0,1,0,0]]);M(this,pt,[-1/0,-1/0,1/0,1/0]);M(this,vt,new Float64Array([1/0,1/0,-1/0,-1/0]));M(this,$a,-1);M(this,Ds,new Set);M(this,xm,new Map);M(this,Td,new Map);M(this,Qc);M(this,Jc);M(this,Ha);M(this,os);M(this,ea);j(this,Qc,e.width),j(this,Jc,e.height),E(this,_m,e4).call(this,t),s&&j(this,ea,new Map)}growOperationsCount(e){e>=u(this,os).length&&E(this,_m,e4).call(this,e,u(this,os))}save(e){return j(this,Ts,{__proto__:u(this,Ts)}),j(this,Is,{__proto__:u(this,Is),transform:{__proto__:u(this,Is).transform},moveText:{__proto__:u(this,Is).moveText},sameLineText:{__proto__:u(this,Is).sameLineText},[ff]:{__proto__:u(this,Is)[ff]}}),j(this,pt,{__proto__:u(this,pt)}),u(this,gr).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(u(this,Ts));if(t===null)return this;j(this,Ts,t),j(this,Is,Object.getPrototypeOf(u(this,Is))),j(this,pt,Object.getPrototypeOf(u(this,pt)));const s=u(this,gr).pop();return s!==void 0&&((i=D1(u(this,ea),e))==null||i.dependencies.add(s),u(this,os)[e]=u(this,os)[s]),this}recordOpenMarker(e){return u(this,gr).push(e),this}getOpenMarker(){return u(this,gr).length===0?null:u(this,gr).at(-1)}recordCloseMarker(e){var s;const t=u(this,gr).pop();return t!==void 0&&((s=D1(u(this,ea),e))==null||s.dependencies.add(t),u(this,os)[e]=u(this,os)[t]),this}beginMarkedContent(e){return u(this,Vc).push(e),this}endMarkedContent(e){var s;const t=u(this,Vc).pop();return t!==void 0&&((s=D1(u(this,ea),e))==null||s.dependencies.add(t),u(this,os)[e]=u(this,os)[t]),this}pushBaseTransform(e){return u(this,Ua).push(ge.multiplyByDOMMatrix(u(this,Ua).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Ua).length>1&&u(this,Ua).pop(),this}recordSimpleData(e,t){return u(this,Ts)[e]=t,this}recordIncrementalData(e,t){return u(this,Is)[e].push(t),this}resetIncrementalData(e,t){return u(this,Is)[e].length=0,this}recordNamedData(e,t){return u(this,Yc).set(e,t),this}recordSimpleDataFromNamed(e,t,s){u(this,Ts)[e]=u(this,Yc).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(ff,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,Ts)&&this.recordFutureForcedDependency(t,u(this,Ts)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,Ds))this.recordFutureForcedDependency(ff,e);return this}resetBBox(e){return u(this,$a)!==e&&(j(this,$a,e),u(this,vt)[0]=1/0,u(this,vt)[1]=1/0,u(this,vt)[2]=-1/0,u(this,vt)[3]=-1/0),this}recordClipBox(e,t,s,i,r,a){const o=ge.multiplyByDOMMatrix(u(this,Ua).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];ge.axialAlignedBoundingBox([s,r,i,a],o,c);const f=ge.intersect(u(this,pt),c);return f?(u(this,pt)[0]=f[0],u(this,pt)[1]=f[1],u(this,pt)[2]=f[2],u(this,pt)[3]=f[3]):(u(this,pt)[0]=u(this,pt)[1]=1/0,u(this,pt)[2]=u(this,pt)[3]=-1/0),this}recordBBox(e,t,s,i,r,a){const o=u(this,pt);if(o[0]===1/0)return this;const c=ge.multiplyByDOMMatrix(u(this,Ua).at(-1),t.getTransform());if(o[0]===-1/0)return ge.axialAlignedBoundingBox([s,r,i,a],c,u(this,vt)),this;const f=[1/0,1/0,-1/0,-1/0];return ge.axialAlignedBoundingBox([s,r,i,a],c,f),u(this,vt)[0]=Math.min(u(this,vt)[0],Math.max(f[0],o[0])),u(this,vt)[1]=Math.min(u(this,vt)[1],Math.max(f[1],o[1])),u(this,vt)[2]=Math.max(u(this,vt)[2],Math.min(f[2],o[2])),u(this,vt)[3]=Math.max(u(this,vt)[3],Math.min(f[3],o[3])),this}recordCharacterBBox(e,t,s,i=1,r=0,a=0,o){const c=s.bbox;let f,d;if(c&&(f=c[2]!==c[0]&&c[3]!==c[1]&&u(this,Td).get(s),f!==!1&&(d=[0,0,0,0],ge.axialAlignedBoundingBox(c,s.fontMatrix,d),(i!==1||r!==0||a!==0)&&ge.scaleMinMax([i,0,0,-i,r,a],d),f)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return c&&d&&f===void 0&&(f=d[0]<=r-h.actualBoundingBoxLeft&&d[2]>=r+h.actualBoundingBoxRight&&d[1]<=a-h.actualBoundingBoxAscent&&d[3]>=a+h.actualBoundingBoxDescent,u(this,Td).set(s,f),f)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,r-h.actualBoundingBoxLeft,r+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,vt)[0]=Math.max(0,u(this,pt)[0]),u(this,vt)[1]=Math.max(0,u(this,pt)[1]),u(this,vt)[2]=Math.min(u(this,Qc),u(this,pt)[2]),u(this,vt)[3]=Math.min(u(this,Jc),u(this,pt)[3]),this}getSimpleIndex(e){return u(this,Ts)[e]}recordDependencies(e,t){const s=u(this,Ds),i=u(this,Ts),r=u(this,Is);for(const a of t)a in u(this,Ts)?s.add(i[a]):a in r&&r[a].forEach(s.add,s);return this}recordNamedDependency(e,t){return u(this,Yc).has(t)&&u(this,Ds).add(u(this,Yc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[ff]),u(this,ea)){const s=D1(u(this,ea),e),{dependencies:i}=s;u(this,Ds).forEach(i.add,i),u(this,gr).forEach(i.add,i),u(this,Vc).forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(u(this,$a)===e){const s=oS(u(this,vt)[0]*256/u(this,Qc)),i=oS(u(this,vt)[1]*256/u(this,Jc)),r=lS(u(this,vt)[2]*256/u(this,Qc)),a=lS(u(this,vt)[3]*256/u(this,Jc));I1(u(this,Ha),e,s,i,r,a);for(const o of u(this,Ds))o!==e&&I1(u(this,Ha),o,s,i,r,a);for(const o of u(this,gr))o!==e&&I1(u(this,Ha),o,s,i,r,a);for(const o of u(this,Vc))o!==e&&I1(u(this,Ha),o,s,i,r,a);t||(u(this,Ds).clear(),j(this,$a,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(u(this,Ds));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,$a)===e&&(j(this,$a,-1),u(this,pt)[0]=Math.max(u(this,pt)[0],u(this,vt)[0]),u(this,pt)[1]=Math.max(u(this,pt)[1],u(this,vt)[1]),u(this,pt)[2]=Math.min(u(this,pt)[2],u(this,vt)[2]),u(this,pt)[3]=Math.min(u(this,pt)[3],u(this,vt)[3]),t||u(this,Ds).clear()),this}_takePendingDependencies(){const e=u(this,Ds);return j(this,Ds,new Set),e}_extractOperation(e){const t=u(this,xm).get(e);return u(this,xm).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,Ds).add(t)}take(){return u(this,Td).clear(),new D7(u(this,os),u(this,Ha))}takeDebugMetadata(){return u(this,ea)}}Ts=new WeakMap,Is=new WeakMap,Yc=new WeakMap,gr=new WeakMap,Vc=new WeakMap,Ua=new WeakMap,pt=new WeakMap,vt=new WeakMap,$a=new WeakMap,Ds=new WeakMap,xm=new WeakMap,Td=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Ha=new WeakMap,os=new WeakMap,ea=new WeakMap,_m=new WeakSet,e4=function(e,t){const s=new ArrayBuffer(e*4);j(this,Ha,new Uint8ClampedArray(s)),j(this,os,new Uint32Array(s)),t&&t.length>0?(u(this,os).set(t),u(this,os).fill(Xx,t.length)):u(this,os).fill(Xx)};var Mt,Zt,wr,Id,Dd;const tC=class tC{constructor(e,t,s){M(this,Mt);M(this,Zt);M(this,wr);M(this,Id,0);M(this,Dd,0);if(e instanceof tC&&u(e,wr)===!!s)return e;j(this,Mt,e),j(this,Zt,t),j(this,wr,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return wn(this,Dd)._++,u(this,Mt).save(u(this,Zt)),this}restore(e){return u(this,Dd)>0&&(u(this,Mt).restore(u(this,Zt)),wn(this,Dd)._--),this}recordOpenMarker(e){return wn(this,Id)._++,this}getOpenMarker(){return u(this,Id)>0?u(this,Zt):u(this,Mt).getOpenMarker()}recordCloseMarker(e){return wn(this,Id)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,Mt).pushBaseTransform(e),this}popBaseTransform(){return u(this,Mt).popBaseTransform(),this}recordSimpleData(e,t){return u(this,Mt).recordSimpleData(e,u(this,Zt)),this}recordIncrementalData(e,t){return u(this,Mt).recordIncrementalData(e,u(this,Zt)),this}resetIncrementalData(e,t){return u(this,Mt).resetIncrementalData(e,u(this,Zt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return u(this,Mt).recordSimpleDataFromNamed(e,t,u(this,Zt)),this}recordFutureForcedDependency(e,t){return u(this,Mt).recordFutureForcedDependency(e,u(this,Zt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,Mt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,Mt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,wr)||u(this,Mt).resetBBox(u(this,Zt)),this}recordClipBox(e,t,s,i,r,a){return u(this,wr)||u(this,Mt).recordClipBox(u(this,Zt),t,s,i,r,a),this}recordBBox(e,t,s,i,r,a){return u(this,wr)||u(this,Mt).recordBBox(u(this,Zt),t,s,i,r,a),this}recordCharacterBBox(e,t,s,i,r,a,o){return u(this,wr)||u(this,Mt).recordCharacterBBox(u(this,Zt),t,s,i,r,a,o),this}recordFullPageBBox(e){return u(this,wr)||u(this,Mt).recordFullPageBBox(u(this,Zt)),this}getSimpleIndex(e){return u(this,Mt).getSimpleIndex(e)}recordDependencies(e,t){return u(this,Mt).recordDependencies(u(this,Zt),t),this}recordNamedDependency(e,t){return u(this,Mt).recordNamedDependency(u(this,Zt),t),this}recordOperation(e){return u(this,Mt).recordOperation(u(this,Zt),!0),this}recordShowTextOperation(e){return u(this,Mt).recordShowTextOperation(u(this,Zt),!0),this}bboxToClipBoxDropOperation(e){return u(this,wr)||u(this,Mt).bboxToClipBoxDropOperation(u(this,Zt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Mt=new WeakMap,Zt=new WeakMap,wr=new WeakMap,Id=new WeakMap,Dd=new WeakMap;let Py=tC;const Pi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Yn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function t4(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class Wj{isModifyingCurrentTransform(){return!1}getPattern(){St("Abstract method `getPattern` called.")}}class R7 extends Wj{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let s,i=this._p0,r=this._p1;if(t&&(i=i.slice(),r=r.slice(),ge.applyTransform(i,t),ge.applyTransform(r,t)),this._type==="axial")s=e.createLinearGradient(i[0],i[1],r[0],r[1]);else if(this._type==="radial"){let a=this._r0,o=this._r1;if(t){const c=new Float32Array(2);ge.singularValueDecompose2dScale(t,c),a*=c[0],o*=c[0]}s=e.createRadialGradient(i[0],i[1],a,r[0],r[1],o)}for(const a of this._colorStops)s.addColorStop(a[0],a[1]);return s}getPattern(e,t,s,i){let r;if(i===Yn.STROKE||i===Yn.FILL){if(this.isOriginBased()){let p=ge.transform(s,t.baseTransform);this.matrix&&(p=ge.transform(p,this.matrix));const m=.001,g=Math.hypot(p[0],p[1]),w=Math.hypot(p[2],p[3]),b=(p[0]*p[2]+p[1]*p[3])/(g*w);if(Math.abs(b)<m)if(this.isRadial()){if(Math.abs(g-w)<m)return this._createGradient(e,p)}else return this._createGradient(e,p)}const a=t.current.getClippedPathBoundingBox(i,Gt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,f=t.cachedCanvases.getCanvas("pattern",o,c),d=f.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),s=ge.transform(s,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),t4(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(f.canvas,"no-repeat");const h=new DOMMatrix(s);r.setTransform(h)}else t4(e,this._bbox),r=this._createGradient(e);return r}}function Kv(n,e,t,s,i,r,a,o){const c=e.coords,f=e.colors,d=n.data,h=n.width*4;let p;c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p),c[s+1]>c[i+1]&&(p=s,s=i,i=p,p=a,a=o,o=p),c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p);const m=(c[t]+e.offsetX)*e.scaleX,g=(c[t+1]+e.offsetY)*e.scaleY,w=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY;if(g>=x)return;const v=f[r],C=f[r+1],S=f[r+2],L=f[a],k=f[a+1],A=f[a+2],T=f[o],I=f[o+1],N=f[o+2],R=Math.round(g),B=Math.round(x);let P,Y,$,X,O,G,ne,de;for(let le=R;le<=B;le++){if(le<b){const we=le<g?0:(g-le)/(g-b);P=m-(m-w)*we,Y=v-(v-L)*we,$=C-(C-k)*we,X=S-(S-A)*we}else{let we;le>x?we=1:b===x?we=0:we=(b-le)/(b-x),P=w-(w-y)*we,Y=L-(L-T)*we,$=k-(k-I)*we,X=A-(A-N)*we}let H;le<g?H=0:le>x?H=1:H=(g-le)/(g-x),O=m-(m-y)*H,G=v-(v-T)*H,ne=C-(C-I)*H,de=S-(S-N)*H;const me=Math.round(Math.min(P,O)),q=Math.round(Math.max(P,O));let ce=h*le+me*4;for(let we=me;we<=q;we++)H=(P-we)/(P-O),H<0?H=0:H>1&&(H=1),d[ce++]=Y-(Y-G)*H|0,d[ce++]=$-($-ne)*H|0,d[ce++]=X-(X-de)*H|0,d[ce++]=255}}function O7(n,e,t){const s=e.coords,i=e.colors;let r,a;switch(e.type){case Lx.LATTICE:const o=e.verticesPerRow,c=Math.floor(s.length/o)-1,f=o-1;for(r=0;r<c;r++){let d=r*o;for(let h=0;h<f;h++,d++)Kv(n,t,s[d],s[d+1],s[d+o],i[d],i[d+1],i[d+o]),Kv(n,t,s[d+o+1],s[d+1],s[d+o],i[d+o+1],i[d+1],i[d+o])}break;case Lx.TRIANGLES:for(r=0,a=s.length;r<a;r+=3)Kv(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class z7 extends Wj{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=f/h,g=d/p,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/m,scaleY:1/g},b=h+2*2,y=p+2*2,x=s.getCanvas("mesh",b,y),v=x.context,C=v.createImageData(h,p);if(t){const L=C.data;for(let k=0,A=L.length;k<A;k+=4)L[k]=t[0],L[k+1]=t[1],L[k+2]=t[2],L[k+3]=255}for(const L of this._figures)O7(C,L,w);return v.putImageData(C,2,2),{canvas:x.canvas,offsetX:o-2*m,offsetY:c-2*g,scaleX:m,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){t4(e,this._bbox);const r=new Float32Array(2);if(i===Yn.SHADING)ge.singularValueDecompose2dScale(Gt(e),r);else if(this.matrix){ge.singularValueDecompose2dScale(this.matrix,r);const[o,c]=r;ge.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=o,r[1]*=c}else ge.singularValueDecompose2dScale(t.baseTransform,r);const a=this._createMeshCanvas(r,i===Yn.SHADING?null:this._background,t.cachedCanvases);return i!==Yn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class B7 extends Wj{getPattern(){return"hotpink"}}function F7(n){switch(n[0]){case"RadialAxial":return new R7(n);case"Mesh":return new z7(n);case"Dummy":return new B7}throw new Error(`Unknown IR type: ${n[0]}`)}const cS={COLORED:1,UNCOLORED:2},Xy=class Xy{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){var G,ne;const{bbox:s,operatorList:i,paintType:r,tilingType:a,color:o,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:d}=this;f=Math.abs(f),d=Math.abs(d),qb("TilingType: "+a);const h=s[0],p=s[1],m=s[2],g=s[3],w=m-h,b=g-p,y=new Float32Array(2);ge.singularValueDecompose2dScale(this.matrix,y);const[x,v]=y;ge.singularValueDecompose2dScale(this.baseTransform,y);const C=x*y[0],S=v*y[1];let L=w,k=b,A=!1,T=!1;const I=Math.ceil(f*C),N=Math.ceil(d*S),R=Math.ceil(w*C),B=Math.ceil(b*S);I>=R?L=f:A=!0,N>=B?k=d:T=!0;const P=this.getSizeAndScale(L,this.ctx.canvas.width,C),Y=this.getSizeAndScale(k,this.ctx.canvas.height,S),$=e.cachedCanvases.getCanvas("pattern",P.size,Y.size),X=$.context,O=c.createCanvasGraphics(X,t);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,r,o),X.translate(-P.scale*h,-Y.scale*p),O.transform(0,P.scale,0,0,Y.scale,0,0),X.save(),(G=O.dependencyTracker)==null||G.save(),this.clipBbox(O,h,p,m,g),O.baseTransform=Gt(O.ctx),O.executeOperatorList(i),O.endDrawing(),(ne=O.dependencyTracker)==null||ne.restore(),X.restore(),A||T){const de=$.canvas;A&&(L=f),T&&(k=d);const le=this.getSizeAndScale(L,this.ctx.canvas.width,C),H=this.getSizeAndScale(k,this.ctx.canvas.height,S),me=le.size,q=H.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",me,q),we=ce.context,Qe=A?Math.floor(w/f):0,dt=T?Math.floor(b/d):0;for(let Je=0;Je<=Qe;Je++)for(let Q=0;Q<=dt;Q++)we.drawImage(de,me*Je,q*Q,me,q,0,0,me,q);return{canvas:ce.canvas,scaleX:le.scale,scaleY:H.scale,offsetX:h,offsetY:p}}return{canvas:$.canvas,scaleX:P.scale,scaleY:Y.scale,offsetX:h,offsetY:p}}getSizeAndScale(e,t,s){const i=Math.max(Xy.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const a=i-t,o=r-s;e.ctx.rect(t,s,a,o),ge.axialAlignedBoundingBox([t,s,i,r],Gt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case cS.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=r.fillColor=a,i.strokeStyle=r.strokeColor=o;break;case cS.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new KU(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,r){let a=s;i!==Yn.SHADING&&(a=ge.transform(a,t.baseTransform),this.matrix&&(a=ge.transform(a,this.matrix)));const o=this.createPatternCanvas(t,r);let c=new DOMMatrix(a);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const f=e.createPattern(o.canvas,"repeat");return f.setTransform(c),f}};ee(Xy,"MAX_PATTERN_SIZE",3e3);let n4=Xy;function U7({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Ln.isLittleEndian?4278190080:255,[c,f]=a?[r,o]:[o,r],d=s>>3,h=s&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let g=0;g<i;g++){for(const b=e+d;e<b;e++){const y=e<p?n[e]:255;t[m++]=y&128?f:c,t[m++]=y&64?f:c,t[m++]=y&32?f:c,t[m++]=y&16?f:c,t[m++]=y&8?f:c,t[m++]=y&4?f:c,t[m++]=y&2?f:c,t[m++]=y&1?f:c}if(h===0)continue;const w=e<p?n[e++]:255;for(let b=0;b<h;b++)t[m++]=w&1<<7-b?f:c}return{srcPos:e,destPos:m}}const uS=16,fS=100,$7=15,dS=10,Os=16,Xv=new DOMMatrix,yi=new Float32Array(2),Of=new Float32Array([1/0,1/0,-1/0,-1/0]);function H7(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,a,o){e.transform(t,s,i,r,a,o),this.__originalTransform(t,s,i,r,a,o)},n.setTransform=function(t,s,i,r,a,o){e.setTransform(t,s,i,r,a,o),this.__originalSetTransform(t,s,i,r,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,a,o){e.bezierCurveTo(t,s,i,r,a,o),this.__originalBezierCurveTo(t,s,i,r,a,o)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class G7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function P1(n,e,t,s,i,r,a,o,c,f){const[d,h,p,m,g,w]=Gt(n);if(h===0&&p===0){const x=a*d+g,v=Math.round(x),C=o*m+w,S=Math.round(C),L=(a+c)*d+g,k=Math.abs(Math.round(L)-v)||1,A=(o+f)*m+w,T=Math.abs(Math.round(A)-S)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),v,S),n.drawImage(e,t,s,i,r,0,0,k,T),n.setTransform(d,h,p,m,g,w),[k,T]}if(d===0&&m===0){const x=o*p+g,v=Math.round(x),C=a*h+w,S=Math.round(C),L=(o+f)*p+g,k=Math.abs(Math.round(L)-v)||1,A=(a+c)*h+w,T=Math.abs(Math.round(A)-S)||1;return n.setTransform(0,Math.sign(h),Math.sign(p),0,v,S),n.drawImage(e,t,s,i,r,0,0,T,k),n.setTransform(d,h,p,m,g,w),[T,k]}n.drawImage(e,t,s,i,r,a,o,c,f);const b=Math.hypot(d,h),y=Math.hypot(p,m);return[b*c,y*f]}class hS{constructor(e,t,s){ee(this,"alphaIsShape",!1);ee(this,"fontSize",0);ee(this,"fontSizeScale",1);ee(this,"textMatrix",null);ee(this,"textMatrixScale",1);ee(this,"fontMatrix",Mx);ee(this,"leading",0);ee(this,"x",0);ee(this,"y",0);ee(this,"lineX",0);ee(this,"lineY",0);ee(this,"charSpacing",0);ee(this,"wordSpacing",0);ee(this,"textHScale",1);ee(this,"textRenderingMode",yn.FILL);ee(this,"textRise",0);ee(this,"fillColor","#000000");ee(this,"strokeColor","#000000");ee(this,"patternFill",!1);ee(this,"patternStroke",!1);ee(this,"fillAlpha",1);ee(this,"strokeAlpha",1);ee(this,"lineWidth",1);ee(this,"activeSMask",null);ee(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Of.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Yn.FILL,t=null){const s=this.minMax.slice();if(e===Yn.STROKE){t||St("Stroke bounding box must include transform."),ge.singularValueDecompose2dScale(t,yi);const i=yi[0]*this.lineWidth/2,r=yi[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Of,0)}getClippedPathBoundingBox(e=Yn.FILL,t=null){return ge.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function pS(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Os,r=(t-i)/Os,a=i===0?r:r+1,o=n.createImageData(s,Os);let c=0,f;const d=e.data,h=o.data;let p,m,g,w;if(e.kind===cw.GRAYSCALE_1BPP){const b=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),x=y.length,v=s+7>>3,C=4294967295,S=Ln.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(g=p<r?Os:i,f=0,m=0;m<g;m++){const L=b-c;let k=0;const A=L>v?s:L*8-7,T=A&-8;let I=0,N=0;for(;k<T;k+=8)N=d[c++],y[f++]=N&128?C:S,y[f++]=N&64?C:S,y[f++]=N&32?C:S,y[f++]=N&16?C:S,y[f++]=N&8?C:S,y[f++]=N&4?C:S,y[f++]=N&2?C:S,y[f++]=N&1?C:S;for(;k<A;k++)I===0&&(N=d[c++],I=128),y[f++]=N&I?C:S,I>>=1}for(;f<x;)y[f++]=0;n.putImageData(o,0,p*Os)}}else if(e.kind===cw.RGBA_32BPP){for(m=0,w=s*Os*4,p=0;p<r;p++)h.set(d.subarray(c,c+w)),c+=w,n.putImageData(o,0,m),m+=Os;p<a&&(w=s*i*4,h.set(d.subarray(c,c+w)),n.putImageData(o,0,m))}else if(e.kind===cw.RGB_24BPP)for(g=Os,w=s*g,p=0;p<a;p++){for(p>=r&&(g=i,w=s*g),f=0,m=w;m--;)h[f++]=d[c++],h[f++]=d[c++],h[f++]=d[c++],h[f++]=255;n.putImageData(o,0,p*Os)}else throw new Error(`bad image kind: ${e.kind}`)}function mS(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Os,r=(t-i)/Os,a=i===0?r:r+1,o=n.createImageData(s,Os);let c=0;const f=e.data,d=o.data;for(let h=0;h<a;h++){const p=h<r?Os:i;({srcPos:c}=U7({src:f,srcPos:c,dest:d,width:s,height:p,nonBlackColor:0})),n.putImageData(o,0,h*Os)}}function f0(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function R1(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function gS(n,e){if(e)return!0;ge.singularValueDecompose2dScale(n,yi);const t=Math.fround(ma.pixelRatio*Hl.PDF_TO_CSS_UNITS);return yi[0]<=t&&yi[1]<=t}const W7=["butt","round","square"],Y7=["miter","round","bevel"],V7={},wS={};var Pr,s4,i4,r4;const nC=class nC{constructor(e,t,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},c,f,d){M(this,Pr);this.ctx=e,this.current=new hS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new G7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,s=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),R1(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(e,t,s,i,r){var y;const a=e.argsArray,o=e.fnArray;let c=t||0;const f=a.length;if(f===c)return c;const d=f-c>dS&&typeof s=="function",h=d?Date.now()+$7:0;let p=0;const m=this.commonObjs,g=this.objs;let w,b;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,s),c;if(!r||r(c))if(w=o[c],b=a[c]??null,w!==Tp.dependency)b===null?this[w](c):this[w](c,...b);else for(const x of b){(y=this.dependencyTracker)==null||y.recordNamedData(x,c);const v=x.startsWith("g_")?m:g;if(!v.has(x))return v.get(x,s),c}if(c++,c===f)return c;if(d&&++p>dS){if(Date.now()>h)return s(),c;p=0}}}endDrawing(){E(this,Pr,s4).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,Pr,i4).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,c=i,f="prescale1",d,h;for(;r>2&&o>1||a>2&&c>1;){let p=o,m=c;r>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/p),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),d=this.cachedCanvases.getCanvas(f,p,m),h=d.context,h.clearRect(0,0,p,m),h.drawImage(e,0,0,o,c,0,0,p,m),e=d.canvas,o=p,c=m,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e,t){var I,N;const s=this.ctx,{width:i,height:r}=t,a=this.current.fillColor,o=this.current.patternFill,c=Gt(s);let f,d,h,p;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;d=JSON.stringify(o?c:[c.slice(0,4),a]),f=this._cachedBitmapsMap.get(R),f||(f=new Map,this._cachedBitmapsMap.set(R,f));const B=f.get(d);if(B&&!o){const P=Math.round(Math.min(c[0],c[2])+c[4]),Y=Math.round(Math.min(c[1],c[3])+c[5]);return(I=this.dependencyTracker)==null||I.recordDependencies(e,Pi.transformAndFill),{canvas:B,offsetX:P,offsetY:Y}}h=B}h||(p=this.cachedCanvases.getCanvas("maskCanvas",i,r),mS(p.context,t));let m=ge.transform(c,[1/i,0,0,-1/r,0,0]);m=ge.transform(m,[1,0,0,1,0,-r]);const g=Of.slice();ge.axialAlignedBoundingBox([0,0,i,r],m,g);const[w,b,y,x]=g,v=Math.round(y-w)||1,C=Math.round(x-b)||1,S=this.cachedCanvases.getCanvas("fillCanvas",v,C),L=S.context,k=w,A=b;L.translate(-k,-A),L.transform(...m),h||(h=this._scaleImage(p.canvas,Br(L)),h=h.img,f&&o&&f.set(d,h)),L.imageSmoothingEnabled=gS(Gt(L),t.interpolate),P1(L,h,0,0,h.width,h.height,0,0,i,r),L.globalCompositeOperation="source-in";const T=ge.transform(Br(L),[1,0,0,1,-k,-A]);return L.fillStyle=o?a.getPattern(s,this,T,Yn.FILL,e):a,L.fillRect(0,0,i,r),f&&!o&&(this.cachedCanvases.delete("fillCanvas"),f.set(d,S.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,Pi.transformAndFill),{canvas:S.canvas,offsetX:Math.round(k),offsetY:Math.round(A)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=W7[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Y7[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,i,r,a,o;for(const[c,f]of t)switch(c){case"LW":this.setLineWidth(e,f);break;case"LC":this.setLineCap(e,f);break;case"LJ":this.setLineJoin(e,f);break;case"ML":this.setMiterLimit(e,f);break;case"D":this.setDash(e,f[0],f[1]);break;case"RI":this.setRenderingIntent(e,f);break;case"FL":this.setFlatness(e,f);break;case"Font":this.setFont(e,f[0],f[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=f;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=f;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const a=this.ctx=r.context;a.setTransform(this.suspendedCtx.getTransform()),f0(this.suspendedCtx,a),H7(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f0(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],a=i[1],o=i[2]-r,c=i[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,s,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,a,o,c,f,d,h){let p=e.canvas,m=c-d,g=f-h;if(a)if(m<0||g<0||m+s>p.width||g+i>p.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,i),y=b.context;y.drawImage(p,-m,-g),y.globalCompositeOperation="destination-atop",y.fillStyle=a,y.fillRect(0,0,s,i),y.globalCompositeOperation="source-over",p=b.canvas,m=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(m,g,s,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,g,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(c,f,s,i),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(p,m,g,s,i,c,f,s,i),t.restore()}save(e){var s;this.inSMaskMode&&f0(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&f0(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,a,o){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,r,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[r]=s;if(!i){r||(r=s[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const a=t===Tp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}r instanceof Path2D||(r=s[0]=oT(r)),ge.axialAlignedBoundingBox(i,Gt(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var a;const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Br(i),Yn.STROKE,e),o){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Pi.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Yn.STROKE,Gt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var f,d,h;const i=this.ctx,r=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const p=r.isModifyingCurrentTransform()?i.getTransform():null;if((f=this.dependencyTracker)==null||f.save(e),i.save(),i.fillStyle=r.getPattern(i,this,Br(i),Yn.FILL,e),p){const m=new Path2D;m.addPath(t,i.getTransform().invertSelf().multiplySelf(p)),t=m}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Pi.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,Pi.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=V7}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=wS}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:a,x:o,y:c,fontSize:f,path:d}of t)d&&i.addPath(d,new DOMMatrix(a).preMultiplySelf(r).translate(o,c).scale(f,-f));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var h,p;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Mx,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Be("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((p=i.systemFontInfo)==null?void 0:p.css)||`"${a}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const f=i.italic?"italic":"normal";let d=s;s<uS?d=uS:s>fS&&(d=fS),this.current.fontSizeScale=s/d,this.ctx.font=`${f} ${c} ${d}px ${o}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,i,r,a){var y,x,v,C;const o=this.ctx,c=this.current,f=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,p=d&yn.FILL_STROKE_MASK,m=!!(d&yn.ADD_TO_PATH_FLAG),g=c.patternFill&&!f.missingFile,w=c.patternStroke&&!f.missingFile;let b;if((f.disableFontFace||m||g||w)&&!f.missingFile&&(b=f.getPathGenerator(this.commonObjs,t)),b&&(f.disableFontFace||g||w)){o.save(),o.translate(s,i),o.scale(h,-h),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,f);let S;if(p===yn.FILL||p===yn.FILL_STROKE)if(r){S=o.getTransform(),o.setTransform(...r);const L=E(this,Pr,r4).call(this,b,S,r);o.fill(L)}else o.fill(b);if(p===yn.STROKE||p===yn.FILL_STROKE)if(a){S||(S=o.getTransform()),o.setTransform(...a);const{a:L,b:k,c:A,d:T}=S,I=ge.inverseTransform(a),N=ge.transform([L,k,A,T,0,0],I);ge.singularValueDecompose2dScale(N,yi),o.lineWidth*=Math.max(yi[0],yi[1])/h,o.stroke(E(this,Pr,r4).call(this,b,S,a))}else o.lineWidth/=h,o.stroke(b);o.restore()}else(p===yn.FILL||p===yn.FILL_STROKE)&&(o.fillText(t,s,i),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,o,f,h,s,i,()=>o.measureText(t))),(p===yn.STROKE||p===yn.FILL_STROKE)&&(this.dependencyTracker&&((v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,f,h,s,i,()=>o.measureText(t)).recordDependencies(e,Pi.stroke)),o.strokeText(t,s,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Gt(o),x:s,y:i,fontSize:h,path:b}),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,o,f,h,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return Fe(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var N,R,B,P;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Pi.showText).resetBBox(e),this.current.textRenderingMode&yn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e);return}const r=s.fontSize;if(r===0){(R=this.dependencyTracker)==null||R.recordOperation(e);return}const a=this.ctx,o=s.fontSizeScale,c=s.charSpacing,f=s.wordSpacing,d=s.fontDirection,h=s.textHScale*d,p=t.length,m=i.vertical,g=m?1:-1,w=i.defaultVMetrics,b=r*s.fontMatrix[0],y=s.textRenderingMode===yn.FILL&&!i.disableFontFace&&!s.patternFill;a.save(),s.textMatrix&&a.transform(...s.textMatrix),a.translate(s.x,s.y+s.textRise),d>0?a.scale(h,-1):a.scale(h,1);let x,v;const C=s.textRenderingMode&yn.FILL_STROKE_MASK,S=C===yn.FILL||C===yn.FILL_STROKE,L=C===yn.STROKE||C===yn.FILL_STROKE;if(S&&s.patternFill){a.save();const Y=s.fillColor.getPattern(a,this,Br(a),Yn.FILL,e);x=Gt(a),a.restore(),a.fillStyle=Y}if(L&&s.patternStroke){a.save();const Y=s.strokeColor.getPattern(a,this,Br(a),Yn.STROKE,e);v=Gt(a),a.restore(),a.strokeStyle=Y}let k=s.lineWidth;const A=s.textMatrixScale;if(A===0||k===0?L&&(k=this.getSinglePixelWidth()):k/=A,o!==1&&(a.scale(o,o),k/=o),a.lineWidth=k,i.isInvalidPDFjsFont){const Y=[];let $=0;for(const O of t)Y.push(O.unicode),$+=O.width;const X=Y.join("");if(a.fillText(X,0,0),this.dependencyTracker!==null){const O=a.measureText(X);this.dependencyTracker.recordBBox(e,this.ctx,-O.actualBoundingBoxLeft,O.actualBoundingBoxRight,-O.actualBoundingBoxAscent,O.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=$*b*h,a.restore(),this.compose();return}let T=0,I;for(I=0;I<p;++I){const Y=t[I];if(typeof Y=="number"){T+=g*Y*r/1e3;continue}let $=!1;const X=(Y.isSpace?f:0)+c,O=Y.fontChar,G=Y.accent;let ne,de,le=Y.width;if(m){const q=Y.vmetric||w,ce=-(Y.vmetric?q[1]:le*.5)*b,we=q[2]*b;le=q?-q[0]:le,ne=ce/o,de=(T+we)/o}else ne=T/o,de=0;let H;if(i.remeasure&&le>0){H=a.measureText(O);const q=H.width*1e3/r*o;if(le<q&&this.isFontSubpixelAAEnabled){const ce=le/q;$=!0,a.save(),a.scale(ce,1),ne/=ce}else le!==q&&(ne+=(le-q)/2e3*r/o)}if(this.contentVisible&&(Y.isInFont||i.missingFile)){if(y&&!G)a.fillText(O,ne,de),(B=this.dependencyTracker)==null||B.recordCharacterBBox(e,a,H?{bbox:null}:i,r/o,ne,de,()=>H??a.measureText(O));else if(this.paintChar(e,O,ne,de,x,v),G){const q=ne+r*G.offset.x/o,ce=de-r*G.offset.y/o;this.paintChar(e,G.fontChar,q,ce,x,v)}}const me=m?le*b-X*d:le*b+X*d;T+=me,$&&a.restore()}m?s.y-=T:s.x+=T*h,a.restore(),this.compose(),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,r=i.font,a=i.fontSize,o=i.fontDirection,c=r.vertical?1:-1,f=i.charSpacing,d=i.wordSpacing,h=i.textHScale*o,p=i.fontMatrix||Mx,m=t.length,g=i.textRenderingMode===yn.INVISIBLE;let w,b,y,x;if(g||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(h,o);const v=this.dependencyTracker;for(this.dependencyTracker=v?new Py(v,e):null,w=0;w<m;++w){if(b=t[w],typeof b=="number"){x=c*b*a/1e3,this.ctx.translate(x,0),i.x+=x*h;continue}const C=(b.isSpace?d:0)+f,S=r.charProcOperatorList[b.operatorListId];S?this.contentVisible&&(this.save(),s.scale(a,a),s.transform(...p),this.executeOperatorList(S),this.restore()):Be(`Type3 character "${b.operatorListId}" is not available.`);const L=[b.width,0];ge.applyTransform(L,p),y=L[0]*a+C,s.translate(y,0),i.x+=y*h}s.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,r,a,o){var f;const c=new Path2D;c.rect(i,r,a-i,o-r),this.ctx.clip(c),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,i,a,r,o).recordClipBox(e,this.ctx,i,a,r,o),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||Gt(this.ctx),r={createCanvasGraphics:(a,o)=>new nC(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Py(this.dependencyTracker,o,!0):null)};s=new n4(t,this.ctx,r,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=F7(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){var a;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,Br(s),Yn.SHADING,e);const r=Br(s);if(r){const{width:o,height:c}=s.canvas,f=Of.slice();ge.axialAlignedBoundingBox([0,0,o,c],r,f);const[d,h,p,m]=f;this.ctx.fillRect(d,h,p-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Pi.transform).recordDependencies(e,Pi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){St("Should not call beginInlineImage")}beginImageData(){St("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Gt(this.ctx),s)){ge.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,a,o,c]=s,f=new Path2D;f.rect(r,a,o-r,c-a),this.ctx.clip(f),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,r,o,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var v;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||qb("TODO: Support non-isolated groups."),t.knockout&&Be("Knockout groups not supported.");const i=Gt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Of.slice();ge.axialAlignedBoundingBox(t.bbox,Gt(s),r);const a=[0,0,s.canvas.width,s.canvas.height];r=ge.intersect(r,a)||[0,0,0,0];const o=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-o,1),d=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(h,f,d),m=p.context;m.translate(-o,-c),m.transform(...i);let g=new Path2D;const[w,b,y,x]=t.bbox;if(g.rect(w,b,y-w,x-b),t.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(t.matrix)),g=C}m.clip(g),t.smask&&this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(o,c),s.save()),f0(s,m),this.ctx=m,(v=this.dependencyTracker)==null||v.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Gt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=Of.slice();ge.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],a,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,s,i,r,a){if(E(this,Pr,s4).call(this),R1(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const o=s[2]-s[0],c=s[3]-s[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=o,s[3]=c,ge.singularValueDecompose2dScale(Gt(this.ctx),yi);const{viewportScale:f}=this,d=Math.ceil(o*this.outputScaleX*f),h=Math.ceil(c*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(yi[0],0,0,-yi[1],0,c*yi[1]),R1(this.ctx)}else{R1(this.ctx),this.endPath(e);const f=new Path2D;f.rect(s[0],s[1],o,c),this.ctx.clip(f)}}this.current=new hS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),E(this,Pr,i4).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,r=this._createMaskCanvas(e,t),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+a.width,r.offsetY,r.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,r=0,a,o){var h,p,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const f=Gt(c);c.transform(s,i,r,a,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-f[4],d.offsetY-f[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let g=0,w=o.length;g<w;g+=2){const b=ge.transform(f,[s,i,r,a,o[g],o[g+1]]);c.drawImage(d.canvas,b[4],b[5]),(p=this.dependencyTracker)==null||p.recordBBox(e,this.ctx,b[4],b[4]+d.canvas.width,b[5],b[5]+d.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,c;if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Pi.transformAndFill);for(const f of t){const{data:d,width:h,height:p,transform:m}=f,g=this.cachedCanvases.getCanvas("maskCanvas",h,p),w=g.context;w.save();const b=this.getObject(e,d,f);mS(w,b),w.globalCompositeOperation="source-in",w.fillStyle=r?i.getPattern(w,this,Br(s),Yn.FILL,e):i,w.fillRect(0,0,h,p),w.restore(),s.save(),s.transform(...m),s.scale(1,-1),P1(s,g.canvas,0,0,h,p,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,s,0,h,0,p),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,r){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Be("Dependent image isn't ready yet");return}const o=a.width,c=a.height,f=[];for(let d=0,h=r.length;d<h;d+=2)f.push({transform:[s,0,0,i,r[d],r[d+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(e,a,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e,t){var f;if(!this.contentVisible)return;const s=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none"),r.scale(1/s,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",s,i).context;pS(h,t),o=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(o,Br(r));r.imageSmoothingEnabled=gS(Gt(r),t.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(e).recordBBox(e,r,0,s,-i,0).recordDependencies(e,Pi.imageXObject).recordOperation(e),P1(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var a,o,c;if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const f=t.width,d=t.height,p=this.cachedCanvases.getCanvas("inlineImage",f,d).context;pS(p,t),r=this.applyTransferMapsToCanvas(p)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const f of s)i.save(),i.transform(...f.transform),i.scale(1,-1),P1(i,r,f.x,f.y,f.w,f.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Pi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===wS?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Gt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const c=Math.abs(t),f=Math.abs(r);if(c===f)if(e===0)a=o=1/c;else{const d=c*e;a=o=d<1?1/d:1}else if(e===0)a=1/c,o=1/f;else{const d=c*e,h=f*e;a=d<1?1/d:1,o=h<1?1/h:1}}else{const c=Math.abs(t*r-s*i),f=Math.hypot(t,s),d=Math.hypot(i,r);if(e===0)a=d/c,o=f/c;else{const h=e*c;a=d>h?d/h:1,o=f>h?f/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,a]=this.getScaleForStroking();if(r===a){s.lineWidth=(i||1)*r,s.stroke(e);return}const o=s.getLineDash();t&&s.save(),s.scale(r,a),Xv.a=1/r,Xv.d=1/a;const c=new Path2D;if(c.addPath(e,Xv),o.length>0){const f=Math.max(r,a);s.setLineDash(o.map(d=>d/f)),s.lineDashOffset/=f}s.lineWidth=i||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Pr=new WeakSet,s4=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},i4=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},r4=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Kf=nC;for(const n in Tp)Kf.prototype[n]!==void 0&&(Kf.prototype[Tp[n]]=Kf.prototype[n]);var jm,Cm;class da{static get workerPort(){return u(this,jm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");j(this,jm,e)}static get workerSrc(){return u(this,Cm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");j(this,Cm,e)}}jm=new WeakMap,Cm=new WeakMap,M(da,jm,null),M(da,Cm,"");var Pd,Mm;class Q7{constructor({parsedData:e,rawData:t}){M(this,Pd);M(this,Mm);j(this,Pd,e),j(this,Mm,t)}getRaw(){return u(this,Mm)}get(e){return u(this,Pd).get(e)??null}[Symbol.iterator](){return u(this,Pd).entries()}}Pd=new WeakMap,Mm=new WeakMap;const vf=Symbol("INTERNAL");var Lm,Sm,Em,Rd;class J7{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){M(this,Lm,!1);M(this,Sm,!1);M(this,Em,!1);M(this,Rd,!0);j(this,Lm,!!(e&gi.DISPLAY)),j(this,Sm,!!(e&gi.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(u(this,Em))return u(this,Rd);if(!u(this,Rd))return!1;const{print:e,view:t}=this.usage;return u(this,Lm)?(t==null?void 0:t.viewState)!=="OFF":u(this,Sm)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==vf&&St("Internal method `_setVisible` called."),j(this,Em,s),j(this,Rd,t)}}Lm=new WeakMap,Sm=new WeakMap,Em=new WeakMap,Rd=new WeakMap;var sl,xt,Od,zd,km,a4;class q7{constructor(e,t=gi.DISPLAY){M(this,km);M(this,sl,null);M(this,xt,new Map);M(this,Od,null);M(this,zd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,j(this,zd,e.order);for(const s of e.groups)u(this,xt).set(s.id,new J7(t,s));if(e.baseState==="OFF")for(const s of u(this,xt).values())s._setVisible(vf,!1);for(const s of e.on)u(this,xt).get(s)._setVisible(vf,!0);for(const s of e.off)u(this,xt).get(s)._setVisible(vf,!1);j(this,Od,this.getHash())}}isVisible(e){if(u(this,xt).size===0)return!0;if(!e)return qb("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,xt).has(e.id)?u(this,xt).get(e.id).visible:(Be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,km,a4).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,xt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,xt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,xt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,xt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,xt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,xt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,xt).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,xt).get(t).visible)return!1}return!0}return Be(`Unknown optional content policy ${e.policy}.`),!0}return Be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=u(this,xt).get(e);if(!i){Be(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((r=u(this,xt).get(o))==null||r._setVisible(vf,!1,!0));i._setVisible(vf,!!t,!0),j(this,sl,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=u(this,xt).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}j(this,sl,null)}get hasInitialVisibility(){return u(this,Od)===null||this.getHash()===u(this,Od)}getOrder(){return u(this,xt).size?u(this,zd)?u(this,zd).slice():[...u(this,xt).keys()]:null}getGroup(e){return u(this,xt).get(e)||null}getHash(){if(u(this,sl)!==null)return u(this,sl);const e=new BT;for(const[t,s]of u(this,xt))e.update(`${t}:${s.visible}`);return j(this,sl,e.hexdigest())}[Symbol.iterator](){return u(this,xt).entries()}}sl=new WeakMap,xt=new WeakMap,Od=new WeakMap,zd=new WeakMap,km=new WeakSet,a4=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let a;if(Array.isArray(r))a=E(this,km,a4).call(this,r);else if(u(this,xt).has(r))a=u(this,xt).get(r).visible;else return Be(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class Z7{constructor(e,{disableRange:t=!1,disableStream:s=!1}){st(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,f)=>{this._onReceiveData({begin:c,chunk:f})}),e.addProgressListener((c,f)=>{this._onProgress({loaded:c,total:f})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});st(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){st(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new K7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new X7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class K7{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=$j(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class X7{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function e$(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=f(d),r(d)}if(t=a(n),t){const d=f(t);return r(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=o(t);return d=f(d),r(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const p=new TextDecoder(d,{fatal:!0}),m=$g(h);h=p.decode(m),e=!1}catch{}}return h}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function a(d){const h=[];let p;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(d))!==null;){let[,w,b,y]=p;if(w=parseInt(w,10),w in h){if(w===0)break;continue}h[w]=[b,y]}const g=[];for(let w=0;w<h.length&&w in h;++w){let[b,y]=h[w];y=o(y),b&&(y=unescape(y),w===0&&(y=c(y))),g.push(y)}return g.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let p=0;p<h.length;++p){const m=h[p].indexOf('"');m!==-1&&(h[p]=h[p].slice(0,m),h.length=p+1),h[p]=h[p].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const p=d.slice(0,h),g=d.slice(h+1).replace(/^[^']*'/,"");return i(p,g)}function f(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,p,m,g){if(m==="q"||m==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,b){return String.fromCharCode(parseInt(b,16))}),i(p,g);try{g=atob(g)}catch{}return i(p,g)})}return""}function ZT(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Kb(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function KT({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function XT(n){const e=n.get("Content-Disposition");if(e){let t=e$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if($j(t))return t}return null}function Vg(n,e){return new ky(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function e6(n){return n===200||n===206}function t6(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function n6(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Be(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class t${constructor(e){ee(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ZT(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new s$(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class n${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,t6(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Kb(r.url),!e6(r.status))throw Vg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=KT({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=XT(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new $l("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:n6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class s${constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=i.url;fetch(a,t6(r,this._withCredentials,this._abortController)).then(o=>{const c=Kb(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!e6(o.status))throw Vg(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:n6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const e2=200,t2=206;function i$(n){const e=n.response;return typeof e!="string"?e:$g(e).buffer}class r${constructor({url:e,httpHeaders:t,withCredentials:s}){ee(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ZT(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=t2):i.expectedStatus=e2,t.responseType="arraybuffer",st(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||e2;if(!(r===e2&&s.expectedStatus===t2)&&r!==s.expectedStatus){s.onError(i.status);return}const o=i$(i);if(r===t2){const c=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);f?s.onDone({begin:parseInt(f[1],10),chunk:o}):(Be('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone({begin:0,chunk:o}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class a${constructor(e){this._source=e,this._manager=new r$(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return st(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new l$(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class o${constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Kb(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...f]=o.split(": ");return[c,f.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=KT({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=XT(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Vg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l${constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Kb((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Vg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const c$=/^[a-z][a-z0-9\-+.]+:/i;function u$(n){if(c$.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class f${constructor(e){this.source=e,this.url=u$(e.url),st(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new d$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new h$(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class d${constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Vg(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new $l("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h${constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const d0=Symbol("INITIAL_DATA");var ei,Nm,o4;class s6{constructor(){M(this,Nm);M(this,ei,Object.create(null))}get(e,t=null){if(t){const i=E(this,Nm,o4).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=u(this,ei)[e];if(!s||s.data===d0)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=u(this,ei)[e];return!!t&&t.data!==d0}delete(e){const t=u(this,ei)[e];return!t||t.data===d0?!1:(delete u(this,ei)[e],!0)}resolve(e,t=null){const s=E(this,Nm,o4).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in u(this,ei)){const{data:s}=u(this,ei)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}j(this,ei,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,ei)){const{data:t}=u(this,ei)[e];t!==d0&&(yield[e,t])}}}ei=new WeakMap,Nm=new WeakSet,o4=function(e){var t;return(t=u(this,ei))[e]||(t[e]={...Promise.withResolvers(),data:d0})};const p$=1e5,yS=30;var kS,il,ti,Am,Tm,qc,Ga,Im,Dm,Zc,Pm,Bd,rl,Fd,Rm,Ud,Kc,Om,zm,$d,Xc,Bm,Hd,Gd,jo,i6,r6,l4,Mi,vw,c4,a6,o6;const Bn=class Bn{constructor({textContentSource:e,container:t,viewport:s}){M(this,jo);M(this,il,Promise.withResolvers());M(this,ti,null);M(this,Am,!1);M(this,Tm,!!((kS=globalThis.FontInspector)!=null&&kS.enabled));M(this,qc,null);M(this,Ga,null);M(this,Im,0);M(this,Dm,0);M(this,Zc,null);M(this,Pm,null);M(this,Bd,0);M(this,rl,0);M(this,Fd,Object.create(null));M(this,Rm,[]);M(this,Ud,null);M(this,Kc,[]);M(this,Om,new WeakMap);M(this,zm,null);var c;if(e instanceof ReadableStream)j(this,Ud,e);else if(typeof e=="object")j(this,Ud,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');j(this,ti,j(this,Pm,t)),j(this,rl,s.scale*ma.pixelRatio),j(this,Bd,s.rotation),j(this,Ga,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;j(this,zm,[1,0,0,-1,-a,o+r]),j(this,Dm,i),j(this,Im,r),E(c=Bn,Mi,a6).call(c),t.style.setProperty("--min-font-size",u(Bn,Hd)),Gu(t,s),u(this,il).promise.finally(()=>{u(Bn,Gd).delete(this),j(this,Ga,null),j(this,Fd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ln.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Zc).read().then(({value:t,done:s})=>{if(s){u(this,il).resolve();return}u(this,qc)??j(this,qc,t.lang),Object.assign(u(this,Fd),t.styles),E(this,jo,i6).call(this,t.items),e()},u(this,il).reject)};return j(this,Zc,u(this,Ud).getReader()),u(Bn,Gd).add(this),e(),u(this,il).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*ma.pixelRatio,i=e.rotation;if(i!==u(this,Bd)&&(t==null||t(),j(this,Bd,i),Gu(u(this,Pm),{rotation:i})),s!==u(this,rl)){t==null||t(),j(this,rl,s);const a={div:null,properties:null,ctx:E(r=Bn,Mi,vw).call(r,u(this,qc))};for(const o of u(this,Kc))a.properties=u(this,Om).get(o),a.div=o,E(this,jo,l4).call(this,a)}}cancel(){var t;const e=new $l("TextLayer task cancelled.");(t=u(this,Zc))==null||t.cancel(e).catch(()=>{}),j(this,Zc,null),u(this,il).reject(e)}get textDivs(){return u(this,Kc)}get textContentItemsStr(){return u(this,Rm)}static cleanup(){if(!(u(this,Gd).size>0)){u(this,$d).clear();for(const{canvas:e}of u(this,Xc).values())e.remove();u(this,Xc).clear()}}};il=new WeakMap,ti=new WeakMap,Am=new WeakMap,Tm=new WeakMap,qc=new WeakMap,Ga=new WeakMap,Im=new WeakMap,Dm=new WeakMap,Zc=new WeakMap,Pm=new WeakMap,Bd=new WeakMap,rl=new WeakMap,Fd=new WeakMap,Rm=new WeakMap,Ud=new WeakMap,Kc=new WeakMap,Om=new WeakMap,zm=new WeakMap,$d=new WeakMap,Xc=new WeakMap,Bm=new WeakMap,Hd=new WeakMap,Gd=new WeakMap,jo=new WeakSet,i6=function(e){var i,r;if(u(this,Am))return;(r=u(this,Ga)).ctx??(r.ctx=E(i=Bn,Mi,vw).call(i,u(this,qc)));const t=u(this,Kc),s=u(this,Rm);for(const a of e){if(t.length>p$){Be("Ignoring additional textDivs for performance reasons."),j(this,Am,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,ti);j(this,ti,document.createElement("span")),u(this,ti).classList.add("markedContent"),a.id&&u(this,ti).setAttribute("id",`${a.id}`),o.append(u(this,ti))}else a.type==="endMarkedContent"&&j(this,ti,u(this,ti).parentNode);continue}s.push(a.str),E(this,jo,r6).call(this,a)}},r6=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Kc).push(t);const i=ge.transform(u(this,zm),e.transform);let r=Math.atan2(i[1],i[0]);const a=u(this,Fd)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=u(this,Tm)&&a.fontSubstitution||a.fontFamily;o=Bn.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),f=c*E(g=Bn,Mi,o6).call(g,o,a,u(this,qc));let d,h;r===0?(d=i[4],h=i[5]-f):(d=i[4]+f*Math.sin(r),h=i[5]-f*Math.cos(r));const p=t.style;p.left=`${(100*d/u(this,Dm)).toFixed(2)}%`,p.top=`${(100*h/u(this,Im)).toFixed(2)}%`,p.setProperty("--font-height",`${c.toFixed(2)}px`),p.fontFamily=o,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Tm)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);w!==b&&Math.max(w,b)/Math.min(w,b)>1.5&&(m=!0)}if(m&&(s.canvasWidth=a.vertical?e.height:e.width),u(this,Om).set(t,s),u(this,Ga).div=t,u(this,Ga).properties=s,E(this,jo,l4).call(this,u(this,Ga)),s.hasText&&u(this,ti).append(t),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),u(this,ti).append(w)}},l4=function(e){var a;const{div:t,properties:s,ctx:i}=e,{style:r}=t;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:o}=r,{canvasWidth:c,fontSize:f}=s;E(a=Bn,Mi,c4).call(a,i,f*u(this,rl),o);const{width:d}=i.measureText(t.textContent);d>0&&r.setProperty("--scale-x",c*u(this,rl)/d)}s.angle!==0&&r.setProperty("--rotate",`${s.angle}deg`)},Mi=new WeakSet,vw=function(e=null){let t=u(this,Xc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Xc).set(e,t),u(this,Bm).set(t,{size:0,family:""})}return t},c4=function(e,t,s){const i=u(this,Bm).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},a6=function(){if(u(this,Hd)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),j(this,Hd,e.getBoundingClientRect().height),e.remove()},o6=function(e,t,s){const i=u(this,$d).get(e);if(i)return i;const r=E(this,Mi,vw).call(this,s);r.canvas.width=r.canvas.height=yS,E(this,Mi,c4).call(this,r,yS,e);const a=r.measureText(""),o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let f=.8;return o?f=o/(o+c):(Ln.platform.isFirefox&&Be("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),u(this,$d).set(e,f),f},M(Bn,Mi),M(Bn,$d,new Map),M(Bn,Xc,new Map),M(Bn,Bm,new WeakMap),M(Bn,Hd,null),M(Bn,Gd,new Set);let Dp=Bn;const m$=100;function l6(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new u4,{docId:t}=e,s=n.url?_7(n.url):null,i=n.data?j7(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof c6?n.range:null,f=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Pp?n.worker:null;const h=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Zb(n.docBaseUrl)?n.docBaseUrl:null,m=A1(n.cMapUrl),g=n.cMapPacked!==!1,w=n.CMapReaderFactory||(bs?A7:iS),b=A1(n.iccUrl),y=A1(n.standardFontDataUrl),x=n.StandardFontDataFactory||(bs?T7:rS),v=A1(n.wasmUrl),C=n.WasmFactory||(bs?I7:aS),S=n.stopAtErrors!==!0,L=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,A=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!bs,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!bs&&(Ln.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,N=typeof n.disableFontFace=="boolean"?n.disableFontFace:bs,R=n.fontExtraProperties===!0,B=n.enableXfa===!0,P=n.ownerDocument||globalThis.document,Y=n.disableRange===!0,$=n.disableStream===!0,X=n.disableAutoFetch===!0,O=n.pdfBug===!0,G=n.CanvasFactory||(bs?N7:S7),ne=n.FilterFactory||(bs?k7:E7),de=n.enableHWA===!0,le=n.useWasm!==!1,H=c?c.length:n.length??NaN,me=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!bs&&!N,q=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===iS&&x===rS&&C===aS&&m&&y&&v&&j0(m,document.baseURI)&&j0(y,document.baseURI)&&j0(v,document.baseURI)),ce=null;JU(h);const we={canvasFactory:new G({ownerDocument:P,enableHWA:de}),filterFactory:new ne({docId:t,ownerDocument:P}),cMapReaderFactory:q?null:new w({baseUrl:m,isCompressed:g}),standardFontDataFactory:q?null:new x({baseUrl:y}),wasmFactory:q?null:new C({baseUrl:v})};d||(d=Pp.create({verbosity:h,port:da.workerPort}),e._worker=d);const Qe={docId:t,apiVersion:"5.4.530",data:i,password:o,disableAutoFetch:X,rangeChunkSize:f,length:H,docBaseUrl:p,enableXfa:B,evaluatorOptions:{maxImageSize:L,disableFontFace:N,ignoreErrors:S,isEvalSupported:k,isOffscreenCanvasSupported:A,isImageDecoderSupported:T,canvasMaxAreaInBytes:I,fontExtraProperties:R,useSystemFonts:me,useWasm:le,useWorkerFetch:q,cMapUrl:m,iccUrl:b,standardFontDataUrl:y,wasmUrl:v}},dt={ownerDocument:P,pdfBug:O,styleElement:ce,loadingParams:{disableAutoFetch:X,enableXfa:B}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Je=d.messageHandler.sendWithPromise("GetDocRequest",Qe,i?[i.buffer]:null);let Q;if(c)Q=new Z7(c,{disableRange:Y,disableStream:$});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ae=j0(s)?t$:bs?f$:a$;Q=new ae({url:s,length:H,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:Y,disableStream:$})}return Je.then(ae=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Ne=new A0(t,ae,d.port),Re=new y$(Ne,e,Q,dt,we,de);e._transport=Re,Ne.send("Ready",null)})}).catch(e._capability.reject),e}var eb;const tb=class tb{constructor(){ee(this,"_capability",Promise.withResolvers());ee(this,"_transport",null);ee(this,"_worker",null);ee(this,"docId",`d${wn(tb,eb)._++}`);ee(this,"destroyed",!1);ee(this,"onPassword",null);ee(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};eb=new WeakMap,M(tb,eb,0);let u4=tb;var eu,Fm,Um,$m,Hm;class c6{constructor(e,t,s=!1,i=null){M(this,eu,Promise.withResolvers());M(this,Fm,[]);M(this,Um,[]);M(this,$m,[]);M(this,Hm,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){u(this,Hm).push(e)}addProgressListener(e){u(this,$m).push(e)}addProgressiveReadListener(e){u(this,Um).push(e)}addProgressiveDoneListener(e){u(this,Fm).push(e)}onDataRange(e,t){for(const s of u(this,Hm))s(e,t)}onDataProgress(e,t){u(this,eu).promise.then(()=>{for(const s of u(this,$m))s(e,t)})}onDataProgressiveRead(e){u(this,eu).promise.then(()=>{for(const t of u(this,Um))t(e)})}onDataProgressiveDone(){u(this,eu).promise.then(()=>{for(const e of u(this,Fm))e()})}transportReady(){u(this,eu).resolve()}requestDataRange(e,t){St("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}eu=new WeakMap,Fm=new WeakMap,Um=new WeakMap,$m=new WeakMap,Hm=new WeakMap;class g${constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Wa,tu,R0;class w${constructor(e,t,s,i=!1){M(this,tu);M(this,Wa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new ZL:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new s6,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Gg({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:r=Ro.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:p=!1,recordOperations:m=!1,operationsFilter:g=null}){var T,I,N;(T=this._stats)==null||T.time("Overall");const w=this._transport.getRenderingIntent(i,r,h,p),{renderingIntent:b,cacheKey:y}=w;j(this,Wa,!1),c||(c=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(y);x||(x=Object.create(null),this._intentStates.set(y,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const v=!!(b&gi.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(w));const C=!!(this._pdfBug&&((N=globalThis.StepperManager)!=null&&N.enabled)),S=!this.recordedBBoxes&&(m||C),L=R=>{var B,P;if(x.renderTasks.delete(k),S){const Y=(B=k.gfx)==null?void 0:B.dependencyTracker.take();Y&&(k.stepper&&k.stepper.setOperatorBBoxes(Y,k.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=Y))}v&&j(this,Wa,!0),E(this,tu,R0).call(this),R?(k.capability.reject(R),this._abortOperatorList({intentState:x,reason:R instanceof Error?R:new Error(R)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new f4({callback:L,params:{canvas:t,canvasContext:e,dependencyTracker:S?new P7(t,x.operatorList.length,C):null,viewport:s,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:g});(x.renderTasks||(x.renderTasks=new Set)).add(k);const A=k.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([R,B])=>{var P;if(this.destroyed){L();return}if((P=this._stats)==null||P.time("Rendering"),!(B.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:R,optionalContentConfig:B}),k.operatorListChanged()}).catch(L),A}getOperatorList({intent:e="display",annotationMode:t=Ro.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var f;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Ip.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){a.read().then(function({value:c,done:f}){if(f){s(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),j(this,Wa,!1),Promise.all(e)}cleanup(e=!1){j(this,Wa,!0);const t=E(this,tu,R0).call(this);return e&&t&&this._stats&&(this._stats=new ZL),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,tu,R0).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),f=this._intentStates.get(t);f.streamReader=c;const d=()=>{c.read().then(({value:h,done:p})=>{if(p){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,f),d())},h=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const p of f.renderTasks)p.operatorListChanged();E(this,tu,R0).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(h);else if(f.opListReadCapability)f.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Uj){let i=m$;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new $l(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Wa=new WeakMap,tu=new WeakSet,R0=function(){if(!u(this,Wa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),j(this,Wa,!1),!0};var al,yr,Ya,nu,nb,su,iu,js,xw,u6,f6,O0,Wd,_w;const Ot=class Ot{constructor({name:e=null,port:t=null,verbosity:s=qU()}={}){M(this,js);M(this,al,Promise.withResolvers());M(this,yr,null);M(this,Ya,null);M(this,nu,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(u(Ot,iu).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(Ot,iu).set(t,this),E(this,js,u6).call(this,t)}else E(this,js,f6).call(this)}get promise(){return u(this,al).promise}get port(){return u(this,Ya)}get messageHandler(){return u(this,yr)}destroy(){var e,t;this.destroyed=!0,(e=u(this,nu))==null||e.terminate(),j(this,nu,null),u(Ot,iu).delete(u(this,Ya)),j(this,Ya,null),(t=u(this,yr))==null||t.destroy(),j(this,yr,null)}static create(e){const t=u(this,iu).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ot(e)}static get workerSrc(){if(da.workerSrc)return da.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>u(this,Wd,_w)?u(this,Wd,_w):(await import(this.workerSrc)).WorkerMessageHandler)())}};al=new WeakMap,yr=new WeakMap,Ya=new WeakMap,nu=new WeakMap,nb=new WeakMap,su=new WeakMap,iu=new WeakMap,js=new WeakSet,xw=function(){u(this,al).resolve(),u(this,yr).send("configure",{verbosity:this.verbosity})},u6=function(e){j(this,Ya,e),j(this,yr,new A0("main","worker",e)),u(this,yr).on("ready",()=>{}),E(this,js,xw).call(this)},f6=function(){if(u(Ot,su)||u(Ot,Wd,_w)){E(this,js,O0).call(this);return}let{workerSrc:e}=Ot;try{Ot._isSameOrigin(window.location,e)||(e=Ot._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new A0("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?u(this,al).reject(new Error("Worker was destroyed")):E(this,js,O0).call(this)},r=new AbortController;t.addEventListener("error",()=>{u(this,nu)||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}j(this,yr,s),j(this,Ya,t),j(this,nu,t),E(this,js,xw).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{E(this,js,O0).call(this)}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{qb("The worker has been disabled.")}E(this,js,O0).call(this)},O0=function(){u(Ot,su)||(Be("Setting up fake worker."),j(Ot,su,!0)),Ot._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,al).reject(new Error("Worker was destroyed"));return}const t=new L7;j(this,Ya,t);const s=`fake${wn(Ot,nb)._++}`,i=new A0(s+"_worker",s,t);e.setup(i,t),j(this,yr,new A0(s,s+"_worker",t)),E(this,js,xw).call(this)}).catch(e=>{u(this,al).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Wd=new WeakSet,_w=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},M(Ot,Wd),M(Ot,nb,0),M(Ot,su,!1),M(Ot,iu,new WeakMap),bs&&(j(Ot,su,!0),da.workerSrc||(da.workerSrc="./pdf.worker.mjs")),Ot._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},Ot._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ot.fromPort=e=>{if(l7("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ot.create(e)};let Pp=Ot;var Va,ta,Yd,Vd,Qa,ru,z0;class y${constructor(e,t,s,i,r,a){M(this,ru);M(this,Va,new Map);M(this,ta,new Map);M(this,Yd,new Map);M(this,Vd,new Map);M(this,Qa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new s6,this.fontLoader=new b7({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Fe(this,"annotationStorage",new Hj)}getRenderingIntent(e,t=Ro.ENABLE,s=null,i=!1,r=!1){let a=gi.DISPLAY,o=Vx;switch(e){case"any":a=gi.ANY;break;case"display":break;case"print":a=gi.PRINT;break;default:Be(`getRenderingIntent - invalid intent: ${e}`)}const c=a&gi.PRINT&&s instanceof UT?s:this.annotationStorage;switch(t){case Ro.DISABLE:a+=gi.ANNOTATIONS_DISABLE;break;case Ro.ENABLE:break;case Ro.ENABLE_FORMS:a+=gi.ANNOTATIONS_FORMS;break;case Ro.ENABLE_STORAGE:a+=gi.ANNOTATIONS_STORAGE,o=c.serializable;break;default:Be(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=gi.IS_EDITING),r&&(a+=gi.OPLIST);const{ids:f,hash:d}=c.modifiedIds,h=[a,o.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:f}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=u(this,Qa))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,ta).values())e.push(i._destroy());u(this,ta).clear(),u(this,Yd).clear(),u(this,Vd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Va).clear(),this.filterFactory.destroy(),Dp.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new $l("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{st(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}st(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(s,i)=>{st(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}st(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new g$(s,this))}),e.on("DocException",s=>{t._capability.reject(ks(s))}),e.on("PasswordRequest",s=>{j(this,Qa,Promise.withResolvers());try{if(!t.onPassword)throw ks(s);const i=r=>{r instanceof Error?u(this,Qa).reject(r):u(this,Qa).resolve({password:r})};t.onPassword(i,s.code)}catch(i){u(this,Qa).reject(i)}return u(this,Qa).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;u(this,ta).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const p=r.error;Be(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const o=new Qx(r),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,f=new v7(o,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(s,f)});break;case"CopyLocalImage":const{imageRef:d}=r;st(d,"The imageRef must be defined.");for(const p of u(this,ta).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===d)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new x7(r));break;case"Image":this.commonObjs.resolve(s,r);break;case"Pattern":const h=new Jx(r);this.commonObjs.resolve(s,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,a])=>{var c;if(this.destroyed)return;const o=u(this,ta).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=u(this,Yd).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&u(this,Vd).set(r.refStr,e);const a=new w$(t,r,this,this._params.pdfBug);return u(this,ta).set(t,a),a});return u(this,Yd).set(t,i),i}getPageIndex(e){return qx(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,ru,z0).call(this,"GetFieldObjects")}hasJSActions(){return E(this,ru,z0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return E(this,ru,z0).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,ru,z0).call(this,"GetOptionalContentConfig").then(t=>new q7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Va).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new Q7(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return u(this,Va).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,ta).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Va).clear(),this.filterFactory.destroy(!0),Dp.cleanup()}}cachedPageNumber(e){if(!qx(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Vd).get(t)??null}}Va=new WeakMap,ta=new WeakMap,Yd=new WeakMap,Vd=new WeakMap,Qa=new WeakMap,ru=new WeakSet,z0=function(e,t=null){const s=u(this,Va).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return u(this,Va).set(e,i),i};var ol;class b${constructor(e){M(this,ol,null);ee(this,"onContinue",null);ee(this,"onError",null);j(this,ol,e)}get promise(){return u(this,ol).capability.promise}cancel(e=0){u(this,ol).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,ol).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,ol);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ol=new WeakMap;var ll,au;const fc=class fc{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:f,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:p=null,enableHWA:m=!1,operationsFilter:g=null}){M(this,ll,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=f,this._pdfBug=h,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new b$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,f;if(this.cancelled)return;if(this._canvas){if(u(fc,au).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(fc,au).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Kf(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),u(this,ll)&&(window.cancelAnimationFrame(u(this,ll)),j(this,ll,null)),u(fc,au).delete(this._canvas),e||(e=new Uj(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?j(this,ll,window.requestAnimationFrame(()=>{j(this,ll,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(fc,au).delete(this._canvas),this.callback())))}};ll=new WeakMap,au=new WeakMap,M(fc,au,new WeakSet);let f4=fc;const v$="5.4.530",x$="50cc4adac";var ni,ou,Qd,_n,Gm,Jd,Ja,Wm,cl,br,Ym,_t,d4,h4,p4,ic,d6,ko;const Ns=class Ns{constructor({editor:e=null,uiManager:t=null}){M(this,_t);M(this,ni,null);M(this,ou,null);M(this,Qd);M(this,_n,null);M(this,Gm,!1);M(this,Jd,!1);M(this,Ja,null);M(this,Wm);M(this,cl,null);M(this,br,null);var s,i;e?(j(this,Jd,!1),j(this,Ja,e)):j(this,Jd,!0),j(this,br,(e==null?void 0:e._uiManager)||t),j(this,Wm,u(this,br)._eventBus),j(this,Qd,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=u(this,br))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(Ns,Ym)||j(Ns,Ym,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fe(this,"_keyboardManager",new Yg([[["Escape","mac+Escape"],Ns.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ns.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ns.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ns.prototype._moveToPrevious],[["Home","mac+Home"],Ns.prototype._moveToBeginning],[["End","mac+End"],Ns.prototype._moveToEnd]]))}renderButton(){const e=j(this,ni,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ja)&&(e.ariaControls=`${u(this,Ja).id}_colorpicker_dropdown`);const t=u(this,br)._signal;e.addEventListener("click",E(this,_t,ic).bind(this),{signal:t}),e.addEventListener("keydown",E(this,_t,p4).bind(this),{signal:t});const s=j(this,ou,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=u(this,Qd),e.append(s),e}renderMainDropdown(){const e=j(this,_n,E(this,_t,d4).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,ni)){E(this,_t,ic).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,_t,h4).call(this,t,e)}_moveToNext(e){var t,s;if(!u(this,_t,ko)){E(this,_t,ic).call(this,e);return}if(e.target===u(this,ni)){(t=u(this,_n).firstElementChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=u(this,_n))==null?void 0:t.firstElementChild)||e.target===u(this,ni)){u(this,_t,ko)&&this._hideDropdownFromKeyboard();return}u(this,_t,ko)||E(this,_t,ic).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!u(this,_t,ko)){E(this,_t,ic).call(this,e);return}(t=u(this,_n).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,_t,ko)){E(this,_t,ic).call(this,e);return}(t=u(this,_n).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,_n))==null||e.classList.add("hidden"),u(this,ni).ariaExpanded="false",(t=u(this,cl))==null||t.abort(),j(this,cl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Jd)){if(!u(this,_t,ko)){(e=u(this,Ja))==null||e.unselect();return}this.hideDropdown(),u(this,ni).focus({preventScroll:!0,focusVisible:u(this,Gm)})}}updateColor(e){if(u(this,ou)&&(u(this,ou).style.backgroundColor=e),!u(this,_n))return;const t=u(this,br).highlightColors.values();for(const s of u(this,_n).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,ni))==null||e.remove(),j(this,ni,null),j(this,ou,null),(t=u(this,_n))==null||t.remove(),j(this,_n,null)}};ni=new WeakMap,ou=new WeakMap,Qd=new WeakMap,_n=new WeakMap,Gm=new WeakMap,Jd=new WeakMap,Ja=new WeakMap,Wm=new WeakMap,cl=new WeakMap,br=new WeakMap,Ym=new WeakMap,_t=new WeakSet,d4=function(){const e=document.createElement("div"),t=u(this,br)._signal;e.addEventListener("contextmenu",ar,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ja)&&(e.id=`${u(this,Ja).id}_colorpicker_dropdown`);for(const[s,i]of u(this,br).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",u(Ns,Ym)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.ariaSelected=i===u(this,Qd),r.addEventListener("click",E(this,_t,h4).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",E(this,_t,p4).bind(this),{signal:t}),e},h4=function(e,t){t.stopPropagation(),u(this,Wm).dispatch("switchannotationeditorparams",{source:this,type:nt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},p4=function(e){Ns._keyboardManager.exec(this,e)},ic=function(e){if(u(this,_t,ko)){this.hideDropdown();return}if(j(this,Gm,e.detail===0),u(this,cl)||(j(this,cl,new AbortController),window.addEventListener("pointerdown",E(this,_t,d6).bind(this),{signal:u(this,br).combinedSignal(u(this,cl))})),u(this,ni).ariaExpanded="true",u(this,_n)){u(this,_n).classList.remove("hidden");return}const t=j(this,_n,E(this,_t,d4).call(this));u(this,ni).append(t)},d6=function(e){var t;(t=u(this,_n))!=null&&t.contains(e.target)||this.hideDropdown()},ko=function(){return u(this,_n)&&!u(this,_n).classList.contains("hidden")},M(Ns,Ym,null);let Ry=Ns;var na,Vm,qd,Qm;const dc=class dc{constructor(e){M(this,na,null);M(this,Vm,null);M(this,qd,null);j(this,Vm,e),j(this,qd,e._uiManager),u(dc,Qm)||j(dc,Qm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,na))return u(this,na);const{editorType:e,colorType:t,color:s}=u(this,Vm),i=j(this,na,document.createElement("input"));return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",u(dc,Qm)[e]),i.addEventListener("input",()=>{u(this,qd).updateParams(t,i.value)},{signal:u(this,qd)._signal}),i}update(e){u(this,na)&&(u(this,na).value=e)}destroy(){var e;(e=u(this,na))==null||e.remove(),j(this,na,null)}hideDropdown(){}};na=new WeakMap,Vm=new WeakMap,qd=new WeakMap,Qm=new WeakMap,M(dc,Qm,null);let Oy=dc;function bS(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function h0(n){return Math.max(0,Math.min(255,255*n))}class vS{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=h0(e),[e,e,e]}static G_HTML([e]){const t=bS(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(h0)}static RGB_HTML(e){return`#${e.map(bS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[h0(1-Math.min(1,e+i)),h0(1-Math.min(1,s+i)),h0(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class _${create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){St("Abstract method `_createSVG` called.")}}class zy extends _${_createSVG(e){return document.createElementNS(ba,e)}}const j$=9,Yu=new WeakSet,C$=new Date().getTimezoneOffset()*60*1e3;class n2{static create(e){switch(e.data.annotationType){case un.LINK:return new Yj(e);case un.TEXT:return new L$(e);case un.WIDGET:switch(e.data.fieldType){case"Tx":return new S$(e);case"Btn":return e.data.radioButton?new m6(e):e.data.checkBox?new k$(e):new N$(e);case"Ch":return new A$(e);case"Sig":return new E$(e)}return new sf(e);case un.POPUP:return new g4(e);case un.FREETEXT:return new v6(e);case un.LINE:return new I$(e);case un.SQUARE:return new D$(e);case un.CIRCLE:return new P$(e);case un.POLYLINE:return new x6(e);case un.CARET:return new O$(e);case un.INK:return new Vj(e);case un.POLYGON:return new R$(e);case un.HIGHLIGHT:return new _6(e);case un.UNDERLINE:return new z$(e);case un.SQUIGGLY:return new B$(e);case un.STRIKEOUT:return new F$(e);case un.STAMP:return new j6(e);case un.FILEATTACHMENT:return new U$(e);default:return new Qt(e)}}}var lu,Zd,Wi,Jm,m4;const sC=class sC{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){M(this,Jm);M(this,lu,null);M(this,Zd,!1);M(this,Wi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sC._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let r=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>a?(a=t[c+1],r=t[c+2]):t[c+1]===a&&(r=Math.max(r,t[c+2]));return[r,a]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let f=0,d=c.length;f<d;f+=2)c[f+1]>a?(a=c[f+1],r=c[f]):c[f+1]===a&&(r=Math.max(r,c[f]));if(r!==1/0)return[r,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/s,e[1]=100*(e[1]-a)/i,e}get commentText(){var t,s,i;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${Ap}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Ap}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,Wi))==null?void 0:e.popup)||this.popup)==null||t.remove(),j(this,Wi,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(u(this,lu)||j(this,lu,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&E(this,Jm,m4).call(this,t);let i=((r=u(this,Wi))==null?void 0:r.popup)||this.popup;!i&&(s!=null&&s.text)&&(this._createPopup(s),i=u(this,Wi).popup),i&&(i.updateEdited(e),s!=null&&s.deleted&&(i.remove(),j(this,Wi,null),this.popup=null))}resetEdited(){var e;u(this,lu)&&(E(this,Jm,m4).call(this,u(this,lu).rect),(e=u(this,Wi))==null||e.popup.resetEdited(),j(this,lu,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof sf)&&!(this instanceof Yj)&&(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof g4){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:o,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(w>0||b>0){const x=`calc(${w}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof m6){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case mf.SOLID:a.borderStyle="solid";break;case mf.DASHED:a.borderStyle="dashed";break;case mf.BEVELED:Be("Unimplemented border style: beveled");break;case mf.INSET:Be("Unimplemented border style: inset");break;case mf.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(j(this,Zd,!0),a.borderColor=ge.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const f=ge.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:p,pageY:m}=i.rawDims;a.left=`${100*(f[0]-p)/d}%`,a.top=`${100*(f[1]-m)/h}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(a.width=`${100*o/d}%`,a.height=`${100*c/h}%`):this.setRotation(g,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:a}=this;e%180!==0&&([r,a]=[a,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],a=r[0],o=r.slice(1);i.target.style[s]=vS[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:vS[`${a}_rgb`](o)})};return Fe(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const a=s[i];if(a){const o={detail:{[i]:r},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,b,y,x]=e.subarray(2,6);if(i===w&&r===b&&t===y&&s===x)return}const{style:a}=this.container;let o;if(u(this,Zd)){const{borderColor:w,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const c=i-t,f=r-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const p=d.createElement("defs");h.append(p);const m=d.createElement("clipPath"),g=`clippath_${this.data.id}`;m.setAttribute("id",g),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let w=2,b=e.length;w<b;w+=8){const y=e[w],x=e[w+1],v=e[w+2],C=e[w+3],S=d.createElement("rect"),L=(v-t)/c,k=(r-x)/f,A=(y-v)/c,T=(x-C)/f;S.setAttribute("x",L),S.setAttribute("y",k),S.setAttribute("width",A),S.setAttribute("height",T),m.append(S),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${k}" width="${A}" height="${T}"/>`)}u(this,Zd)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate),j(this,Wi,new g4({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,Wi)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Wi)}render(){St("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!Yu.has(f)){Be(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:f})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==t&&Yu.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lu=new WeakMap,Zd=new WeakMap,Wi=new WeakMap,Jm=new WeakSet,m4=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Qt=sC;class M$ extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var bi,rc,h6,p6;class Yj extends Qt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});M(this,bi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(E(this,bi,h6).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(E(this,bi,p6).call(this,i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,s,i=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,bi,rc).call(this),i&&(t.title=i)}_bindNamedAction(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),i&&(t.title=i),E(this,bi,rc).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),E(this,bi,rc).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),E(this,bi,rc).call(this),!this._fieldObjects){Be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:r,refs:a,include:o}=s,c=[];if(r.length!==0||a.length!==0){const p=new Set(a);for(const m of r){const g=this._fieldObjects[m]||[];for(const{id:w}of g)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const g of m)p.has(g.id)===o&&c.push(g)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const f=this.annotationStorage,d=[];for(const p of c){const{id:m}=p;switch(d.push(m),p.type){case"text":{const w=p.defaultValue||"";f.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;f.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";f.setValue(m,{value:w});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!Yu.has(g)){Be(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}bi=new WeakSet,rc=function(){this.container.setAttribute("data-internal-link","")},h6=function(t,s,i="",r=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:i&&(t.title=i),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(s.content,s.filename,r),!1},E(this,bi,rc).call(this)},p6=function(t,s,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),i&&(t.title=i),E(this,bi,rc).call(this)};class L$ extends Qt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class sf extends Qt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ln.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(e,t,s,i){var r,a,o;for(const[c,f]of s)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,f,i),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ge.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||j$,r=e.style;let a;const o=2,c=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(f/(Qv*i))||1,h=f/d;a=Math.min(i,c(h/Qv))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,c(f/Qv))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=ge.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class S$ extends sf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let f=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=f??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",f??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Yu.add(s),this.contentElement=s,s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:p,timeStep:m}=this.data,g=!!p&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",b=>{const y=this.data.defaultFieldValue??"";s.value=d.userValue=y,d.formattedValue=null});let w=b=>{const{formattedValue:y}=d;y!=null&&(b.target.value=y),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{var v;if(d.focused)return;const{target:x}=y;if(g&&(x.type=p,m&&(x.step=m)),d.userValue){const C=d.userValue;if(g)if(p==="time"){const S=new Date(C),L=[S.getHours(),S.getMinutes(),S.getSeconds()];x.value=L.map(k=>k.toString().padStart(2,"0")).join(":")}else x.value=new Date(C-C$).toISOString().split(p==="date"?"T":".",1)[0];else x.value=C}d.lastCommittedValue=x.value,d.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const x={value(v){d.userValue=v.detail.value??"",g||e.setValue(t,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:C}=v.detail;d.formattedValue=C,C!=null&&v.target!==document.activeElement&&(v.target.value=C);const S={formattedValue:C};g&&(S.value=C),e.setValue(t,S)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var k;const{charLimit:C}=v.detail,{target:S}=v;if(C===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",C);let L=d.userValue;!L||L.length<=C||(L=L.slice(0,C),S.value=d.userValue=L,e.setValue(t,{value:L}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(x,y)}),s.addEventListener("keydown",y=>{var C;d.commitKey=1;let x=-1;if(y.key==="Escape"?x=0:y.key==="Enter"&&!this.data.multiLine?x=2:y.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:v}=y.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:x,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const b=w;w=null,s.addEventListener("blur",y=>{var C,S;if(!d.focused||!y.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(d.focused=!1);const{target:x}=y;let{value:v}=x;if(g){if(v&&p==="time"){const L=v.split(":").map(k=>parseInt(k,10));v=new Date(2e3,0,1,L[0],L[1],L[2]||0).valueOf(),x.step=""}else v.includes("T")||(v=`${v}T00:00`),v=new Date(v).valueOf();x.type="text"}d.userValue=v,d.lastCommittedValue!==v&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),b(y)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",y=>{var T;d.lastCommittedValue=null;const{data:x,target:v}=y,{value:C,selectionStart:S,selectionEnd:L}=v;let k=S,A=L;switch(y.inputType){case"deleteWordBackward":{const I=C.substring(0,S).match(/\w*[^\w]*$/);I&&(k-=I[0].length);break}case"deleteWordForward":{const I=C.substring(S).match(/^[^\w]*\w*/);I&&(A+=I[0].length);break}case"deleteContentBackward":S===L&&(k-=1);break;case"deleteContentForward":S===L&&(A+=1);break}y.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:k,selEnd:A}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(w&&s.addEventListener("blur",w),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class E$ extends sf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class k$ extends sf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Yu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const f of this._getElementsByName(o,s)){const d=c&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=d),e.setValue(f.id,{value:d})}e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class m6 extends sf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Yu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const f of this._getElementsByName(o,s))e.setValue(f.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:f=>{const d=a===f.detail.value;for(const h of this._getElementsByName(f.target.name)){const p=d&&h.id===s;h.domElement&&(h.domElement.checked=p),e.setValue(h.id,{value:p})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class N$ extends Yj{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class A$ extends sf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Yu.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),r=!1),i.append(h)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),a=()=>{d.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=d=>{const h=d?"value":"textContent",{options:p,multiple:m}=i;return m?Array.prototype.filter.call(p,g=>g.selected).map(g=>g[h]):p.selectedIndex===-1?null:p[p.selectedIndex][h]};let c=o(!1);const f=d=>{const h=d.target.options;return Array.prototype.map.call(h,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(p){a==null||a();const m=p.detail.value,g=new Set(Array.isArray(m)?m:[m]);for(const w of i.options)w.selected=g.has(w.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(p){i.multiple=!0},remove(p){const m=i.options,g=p.detail.remove;m[g].selected=!1,i.remove(g),m.length>0&&Array.prototype.findIndex.call(m,b=>b.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:f(p)}),c=o(!1)},clear(p){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(p){const{index:m,displayValue:g,exportValue:w}=p.detail.insert,b=i.children[m],y=document.createElement("option");y.textContent=g,y.value=w,b?b.before(y):i.append(y),e.setValue(t,{value:o(!0),items:f(p)}),c=o(!1)},items(p){const{items:m}=p.detail;for(;i.length!==0;)i.remove(0);for(const g of m){const{displayValue:w,exportValue:b}=g,y=document.createElement("option");y.textContent=w,y.value=b,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:f(p)}),c=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const g of p.target.options)g.selected=m.has(g.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var m;const h=o(!0),p=o(!1);e.setValue(t,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:p,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var qm,w4;class g4 extends Qt{constructor(t){const{data:s,elements:i,parent:r}=t,a=!!r._commentManager;super(t,{isRenderable:!a&&Qt._hasPopupData(s)});M(this,qm);if(this.elements=i,a&&Qt._hasPopupData(s)){const o=this.popup=E(this,qm,w4).call(this);for(const c of i)c.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=E(this,qm,w4).call(this),i=[];for(const r of this.elements)r.popup=s,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Rf}${r}`).join(",")),this.container}}qm=new WeakSet,w4=function(){return new T$({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var si,ul,sb,ib,Kd,Xd,Kt,sa,fl,cu,eh,th,ia,ii,qa,Za,Xt,Ka,dl,Zm,Xa,nh,uu,hl,En,pl,Ye,jw,y4,b4,v4,Cw,x4,g6,w6,y6,b6,Mw,Lw,_4;class T${constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:f,parentRect:d,open:h,commentManager:p=null}){M(this,Ye);M(this,si,null);M(this,ul,E(this,Ye,y6).bind(this));M(this,sb,E(this,Ye,_4).bind(this));M(this,ib,E(this,Ye,Lw).bind(this));M(this,Kd,E(this,Ye,Mw).bind(this));M(this,Xd,null);M(this,Kt,null);M(this,sa,null);M(this,fl,null);M(this,cu,null);M(this,eh,null);M(this,th,null);M(this,ia,!1);M(this,ii,null);M(this,qa,null);M(this,Za,null);M(this,Xt,null);M(this,Ka,null);M(this,dl,null);M(this,Zm,null);M(this,Xa,null);M(this,nh,null);M(this,uu,null);M(this,hl,!1);M(this,En,null);M(this,pl,null);j(this,Kt,e),j(this,nh,i),j(this,sa,a),j(this,Xa,o),j(this,eh,c),j(this,Xd,t),j(this,Zm,f),j(this,th,d),j(this,cu,s),j(this,si,p),j(this,En,s[0]),j(this,fl,Ny.toDateObject(r)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),p||(E(this,Ye,jw).call(this),u(this,Kt).hidden=!0,h&&E(this,Ye,Mw).call(this))}renderCommentButton(){if(u(this,Xt)){u(this,Xt).parentNode||u(this,En).container.after(u(this,Xt));return}if(u(this,Ka)||E(this,Ye,y4).call(this),!u(this,Ka))return;const{signal:e}=j(this,qa,new AbortController),t=u(this,En).hasOwnCommentButton,s=()=>{u(this,si).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{u(this,si).toggleCommentPopup(this,!1,!0,!t)},r=()=>{u(this,si).toggleCommentPopup(this,!1,!1)};if(t){j(this,Xt,u(this,En).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",u(this,ul),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",r,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=j(this,Xt,document.createElement("button"));a.className="annotationCommentButton";const o=u(this,En).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,Ye,v4).call(this),E(this,Ye,b4).call(this),a.addEventListener("keydown",u(this,ul),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",r,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,En).commentData;return e?u(this,eh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,Xt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}=u(this,En).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return u(this,Xt)}get comment(){return u(this,pl)||j(this,pl,u(this,En).commentText),u(this,pl)}set comment(e){e!==this.comment&&(u(this,En).commentText=j(this,pl,e))}focus(){var e;(e=u(this,En).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,En).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Xt)&&(u(this,Xt).classList.toggle("selected",e),u(this,Xt).ariaExpanded=t)}setSelectedCommentButton(e){u(this,Xt).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,dl))return u(this,dl);const{x:e,y:t,height:s}=u(this,Xt).getBoundingClientRect(),{x:i,y:r,width:a,height:o}=u(this,En).layer.getBoundingClientRect();return[(e-i)/a,(t+s-r)/o]}set commentPopupPosition(e){j(this,dl,e)}hasDefaultPopupPosition(){return u(this,dl)===null}get commentButtonPosition(){return u(this,Ka)}get commentButtonWidth(){return u(this,Xt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=u(this,dl)||this.commentButtonPosition.map(f=>f/100),i=this.parentBoundingClientRect,{x:r,y:a,width:o,height:c}=i;u(this,si).showDialog(null,this,r+t*o,a+s*c,{...e,parentDimensions:i})}render(){var s,i;if(u(this,ii))return;const e=j(this,ii,document.createElement("div"));if(e.className="popup",u(this,Xd)){const r=e.style.outlineColor=ge.makeHexColor(...u(this,Xd));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=u(this,nh))!=null&&s.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=u(this,nh)}if(e.append(t),u(this,fl)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,fl).valueOf()})),r.dateTime=u(this,fl).toISOString(),t.append(r)}aT({html:u(this,Ye,Cw)||u(this,sa).str,dir:(i=u(this,sa))==null?void 0:i.dir,className:"popupContent"},e),u(this,Kt).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var i;if(u(this,si)){s?(this.remove(),j(this,pl,null)):t&&(t.deleted?this.remove():(E(this,Ye,v4).call(this),j(this,pl,t.text))),e&&(j(this,Ka,null),E(this,Ye,y4).call(this),E(this,Ye,b4).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}E(this,Ye,jw).call(this),u(this,uu)||j(this,uu,{contentsObj:u(this,sa),richText:u(this,Xa)}),e&&j(this,Za,null),t&&t.text&&(j(this,Xa,E(this,Ye,w6).call(this,t.text)),j(this,fl,Ny.toDateObject(t.date)),j(this,sa,null)),(i=u(this,ii))==null||i.remove(),j(this,ii,null)}resetEdited(){var e;u(this,uu)&&({contentsObj:wn(this,sa)._,richText:wn(this,Xa)._}=u(this,uu),j(this,uu,null),(e=u(this,ii))==null||e.remove(),j(this,ii,null),j(this,Za,null))}remove(){var e,t,s;if((e=u(this,qa))==null||e.abort(),j(this,qa,null),(t=u(this,ii))==null||t.remove(),j(this,ii,null),j(this,hl,!1),j(this,ia,!1),(s=u(this,Xt))==null||s.remove(),j(this,Xt,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){j(this,hl,this.isVisible),u(this,hl)&&(u(this,Kt).hidden=!0)}maybeShow(){u(this,si)||(E(this,Ye,jw).call(this),u(this,hl)&&(u(this,ii)||E(this,Ye,Lw).call(this),j(this,hl,!1),u(this,Kt).hidden=!1))}get isVisible(){return u(this,si)?!1:u(this,Kt).hidden===!1}}si=new WeakMap,ul=new WeakMap,sb=new WeakMap,ib=new WeakMap,Kd=new WeakMap,Xd=new WeakMap,Kt=new WeakMap,sa=new WeakMap,fl=new WeakMap,cu=new WeakMap,eh=new WeakMap,th=new WeakMap,ia=new WeakMap,ii=new WeakMap,qa=new WeakMap,Za=new WeakMap,Xt=new WeakMap,Ka=new WeakMap,dl=new WeakMap,Zm=new WeakMap,Xa=new WeakMap,nh=new WeakMap,uu=new WeakMap,hl=new WeakMap,En=new WeakMap,pl=new WeakMap,Ye=new WeakSet,jw=function(){var t;if(u(this,qa))return;j(this,qa,new AbortController);const{signal:e}=u(this,qa);for(const s of this.trigger)s.addEventListener("click",u(this,Kd),{signal:e}),s.addEventListener("pointerenter",u(this,ib),{signal:e}),s.addEventListener("pointerleave",u(this,sb),{signal:e}),s.classList.add("popupTriggerArea");for(const s of u(this,cu))(t=s.container)==null||t.addEventListener("keydown",u(this,ul),{signal:e})},y4=function(){const e=u(this,cu).find(t=>t.hasCommentButton);e&&j(this,Ka,e._normalizePoint(e.commentButtonPosition))},b4=function(){if(u(this,En).extraPopupElement&&!u(this,En).editor)return;u(this,Xt)||this.renderCommentButton();const[e,t]=u(this,Ka),{style:s}=u(this,Xt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},v4=function(){u(this,En).extraPopupElement||(u(this,Xt)||this.renderCommentButton(),u(this,Xt).style.backgroundColor=this.commentButtonColor||"")},Cw=function(){const e=u(this,Xa),t=u(this,sa);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Xa).html||null},x4=function(){var e,t,s;return((s=(t=(e=u(this,Ye,Cw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},g6=function(){var e,t,s;return((s=(t=(e=u(this,Ye,Cw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},w6=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:u(this,Ye,g6),fontSize:u(this,Ye,x4)?`calc(${u(this,Ye,x4)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},y6=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,ia))&&E(this,Ye,Mw).call(this)},b6=function(){if(u(this,Za)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=u(this,eh);let a=!!u(this,th),o=a?u(this,th):u(this,Zm);for(const g of u(this,cu))if(!o||ge.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const c=ge.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,h=c[0]+d,p=c[1];j(this,Za,[100*(h-i)/t,100*(p-r)/s]);const{style:m}=u(this,Kt);m.left=`${u(this,Za)[0]}%`,m.top=`${u(this,Za)[1]}%`},Mw=function(){if(u(this,si)){u(this,si).toggleCommentPopup(this,!1);return}j(this,ia,!u(this,ia)),u(this,ia)?(E(this,Ye,Lw).call(this),u(this,Kt).addEventListener("click",u(this,Kd)),u(this,Kt).addEventListener("keydown",u(this,ul))):(E(this,Ye,_4).call(this),u(this,Kt).removeEventListener("click",u(this,Kd)),u(this,Kt).removeEventListener("keydown",u(this,ul)))},Lw=function(){u(this,ii)||this.render(),this.isVisible?u(this,ia)&&u(this,Kt).classList.add("focused"):(E(this,Ye,b6).call(this),u(this,Kt).hidden=!1,u(this,Kt).style.zIndex=parseInt(u(this,Kt).style.zIndex)+1e3)},_4=function(){u(this,Kt).classList.remove("focused"),!(u(this,ia)||!this.isVisible)&&(u(this,Kt).hidden=!0,u(this,Kt).style.zIndex=parseInt(u(this,Kt).style.zIndex)-1e3)};class v6 extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=$e.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Km;class I$ extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Km,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=j(this,Km,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Km)}addHighlightArea(){this.container.classList.add("highlightArea")}}Km=new WeakMap;var Xm;class D$ extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Xm,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=j(this,Xm,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Xm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xm=new WeakMap;var eg;class P$ extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,eg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=j(this,eg,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,eg)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap;var tg;class x6 extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,tg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:a,height:o}=this;if(!s)return this.container;const c=this.svgFactory.create(a,o,!0);let f=[];for(let h=0,p=s.length;h<p;h+=2){const m=s[h]-t[0],g=t[3]-s[h+1];f.push(`${m},${g}`)}f=f.join(" ");const d=j(this,tg,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",f),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;class R$ extends x6{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class O$ extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var ng,fu,sg,j4;class Vj extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,sg);M(this,ng,null);M(this,fu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?$e.HIGHLIGHT:$e.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:c,height:f}=E(this,sg,j4).call(this,s,t),d=this.svgFactory.create(c,f,!0),h=j(this,ng,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let p=0,m=i.length;p<m;p++){const g=this.svgFactory.createElement(this.svgElementName);u(this,fu).push(g),g.setAttribute("points",i[p].join(",")),h.append(g)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,a=u(this,ng);if(s>=0&&a.setAttribute("stroke-width",s||1),i)for(let o=0,c=u(this,fu).length;o<c;o++)u(this,fu)[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:c,height:f}=E(this,sg,j4).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${f}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,fu)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap,fu=new WeakMap,sg=new WeakSet,j4=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class _6 extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=$e.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class z$ extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class B$ extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class F$ extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class j6 extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=$e.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var ig,rg,C4;class U$ extends Qt{constructor(t){var i;super(t,{isRenderable:!0});M(this,rg);M(this,ig,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",E(this,rg,C4).bind(this)),j(this,ig,i);const{isMac:r}=Ln.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&E(this,rg,C4).call(this)}),!s.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return u(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap,rg=new WeakSet,C4=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var du,hu,sh,ml,ag,pu,ri,og,mo,Sw,L4;const iC=class iC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o,commentManager:c,linkService:f,annotationStorage:d}){M(this,mo);M(this,du,null);M(this,hu,null);M(this,sh,null);M(this,ml,new Map);M(this,ag,null);M(this,pu,null);M(this,ri,[]);M(this,og,!1);this.div=e,j(this,du,t),j(this,hu,s),j(this,ag,o||null),j(this,pu,f||null),j(this,sh,d||new Hj),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return u(this,ml).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;Gu(s,this.viewport);const i=new Map,r=[],a={data:null,layer:s,linkService:u(this,pu),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zy,annotationStorage:u(this,sh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const f=c.annotationType===un.POPUP;if(f){const p=i.get(c.id);if(!p)continue;if(!this._commentManager){r.push(c);continue}a.elements=p}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;a.data=c;const d=n2.create(a);if(!d.isRenderable)continue;if(!f&&(u(this,ri).push(d),c.popupRef)){const p=i.get(c.popupRef);p?p.push(d):i.set(c.popupRef,[d])}const h=d.render();c.hidden&&(h.style.visibility="hidden"),d._isEditable&&(u(this,ml).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}await E(this,mo,Sw).call(this);for(const c of r){const f=a.elements=i.get(c.id);a.data=c;const d=n2.create(a);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${Rf}${c.id}`,c.hidden&&(h.style.visibility="hidden"),f.at(-1).container.after(h)}E(this,mo,L4).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,pu),svgFactory:new zy,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=iC._defaultBorderStyle),t.data=s;const i=n2.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${Rf}${s.id}`,u(this,ri).push(i))}await E(this,mo,Sw).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Gu(t,{rotation:e.rotation}),E(this,mo,L4).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ml).values())}getEditableAnnotation(e){return u(this,ml).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,r=new M$({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,pu),annotationStorage:u(this,sh)});return r.render(),r.contentElement.id=`${Rf}${s}`,r.createOrUpdatePopup(),u(this,ri).push(r),r}removeAnnotation(e){var i;const t=u(this,ri).findIndex(r=>r.data.id===e);if(t<0)return;const[s]=u(this,ri).splice(t,1);(i=u(this,du))==null||i.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);E(this,mo,Sw).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Fe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:mf.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};du=new WeakMap,hu=new WeakMap,sh=new WeakMap,ml=new WeakMap,ag=new WeakMap,pu=new WeakMap,ri=new WeakMap,og=new WeakMap,mo=new WeakSet,Sw=async function(){var s,i,r;if(u(this,ri).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,og)){j(this,og,!0);for(const{contentElement:a,data:{id:o}}of u(this,ri)){const c=a.id=`${Rf}${o}`;e.push((s=u(this,ag))==null?void 0:s.getAriaAttributes(c).then(f=>{if(f)for(const[d,h]of f)a.setAttribute(d,h)}))}}u(this,ri).sort(({data:{rect:[a,o,c,f]}},{data:{rect:[d,h,p,m]}})=>{if(a===c&&o===f)return 1;if(d===p&&h===m)return-1;const g=f,w=o,b=(o+f)/2,y=m,x=h,v=(h+m)/2;if(b>=y&&v<=w)return-1;if(v>=g&&b<=x)return 1;const C=(a+c)/2,S=(d+p)/2;return C-S});const t=document.createDocumentFragment();for(const a of u(this,ri))t.append(a.container),this._commentManager?(r=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||r.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),u(this,du))for(const a of u(this,ri))u(this,du).addPointerInTextLayer(a.contentElement,!1)},L4=function(){var t;if(!u(this,hu))return;const e=this.div;for(const[s,i]of u(this,hu)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const o=u(this,ml).get(s);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),o._hasNoCanvas=!1):o.canvas=i)}u(this,hu).clear()};let M4=iC;const O1=/\r\n?|\n/g;var ai,lg,mu,oi,mn,C6,M6,L6,Ew,go,kw,Nw,S6,E4,E6;const Dt=class Dt extends Tt{constructor(t){super({...t,name:"freeTextEditor"});M(this,mn);M(this,ai,"");M(this,lg,`${this.id}-editor`);M(this,mu,null);M(this,oi);ee(this,"_colorPicker",null);this.color=t.color||Dt._defaultColor||Tt._defaultLineColor,j(this,oi,t.fontSize||Dt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Dt.prototype,s=a=>a.isEmpty(),i=Wu.TRANSLATE_SMALL,r=Wu.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Yg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Tt.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case nt.FREETEXT_SIZE:Dt._defaultFontSize=s;break;case nt.FREETEXT_COLOR:Dt._defaultColor=s;break}}updateParams(t,s){switch(t){case nt.FREETEXT_SIZE:E(this,mn,C6).call(this,s);break;case nt.FREETEXT_COLOR:E(this,mn,M6).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[nt.FREETEXT_SIZE,Dt._defaultFontSize],[nt.FREETEXT_COLOR,Dt._defaultColor||Tt._defaultLineColor]]}get propertiesToUpdate(){return[[nt.FREETEXT_SIZE,u(this,oi)],[nt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return nt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Dt._internalPadding*t,-(Dt._internalPadding+u(this,oi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),j(this,mu,new AbortController);const t=this._uiManager.combinedSignal(u(this,mu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,lg)),this._isDraggable=!0,(t=u(this,mu))==null||t.abort(),j(this,mu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,ai),s=j(this,ai,E(this,mn,L6).call(this).trimEnd());if(t===s)return;const i=r=>{if(j(this,ai,r),!r){this.remove();return}E(this,mn,Nw).call(this),this._uiManager.rebuild(this),E(this,mn,Ew).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),E(this,mn,Ew).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Dt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,lg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,oi)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,f]=this.getInitialTranslation();[c,f]=this.pageTranslationToScreen(c,f);const[d,h]=this.pageDimensions,[p,m]=this.pageTranslation;let g,w;switch(this.rotation){case 0:g=t+(o[0]-p)/d,w=s+this.height-(o[1]-m)/h;break;case 90:g=t+(o[0]-p)/d,w=s-(o[1]-m)/h,[c,f]=[f,-c];break;case 180:g=t-this.width+(o[0]-p)/d,w=s-(o[1]-m)/h,[c,f]=[-c,-f];break;case 270:g=t+(o[0]-p-this.height*h)/d,w=s+(o[1]-m-this.width*d)/h,[c,f]=[-f,c];break}this.setAt(g*r,w*a,c,f)}else this._moveAfterPaste(t,s);E(this,mn,Nw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,w,b;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=E(g=Dt,go,E4).call(g,s.getData("text")||"").replaceAll(O1,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:f}=o,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(h.push(c.nodeValue.slice(f).replaceAll(O1,"")),y!==this.editorDiv){let x=d;for(const v of this.editorDiv.childNodes){if(v===y){x=h;continue}x.push(E(w=Dt,go,kw).call(w,v))}}d.push(c.nodeValue.slice(0,f).replaceAll(O1,""))}else if(c===this.editorDiv){let y=d,x=0;for(const v of this.editorDiv.childNodes)x++===f&&(y=h),y.push(E(b=Dt,go,kw).call(b,v))}j(this,ai,`${d.join(`
`)}${r}${h.join(`
`)}`),E(this,mn,Nw).call(this);const p=new Range;let m=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const x=y.nodeValue.length;if(m<=x){p.setStart(y,m),p.setEnd(y,m);break}m-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Dt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,i){var o;let r=null;if(t instanceof v6){const{data:{defaultAppearanceData:{fontSize:c,fontColor:f},rect:d,rotation:h,id:p,popupRef:m,richText:g,contentsObj:w,creationDate:b,modificationDate:y},textContent:x,textPosition:v,parent:{page:{pageNumber:C}}}=t;if(!x||x.length===0)return null;r=t={annotationType:$e.FREETEXT,color:Array.from(f),fontSize:c,value:x.join(`
`),position:v,pageIndex:C-1,rect:d.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(w==null?void 0:w.str)||null,richText:g,creationDate:b,modificationDate:y}}const a=await super.deserialize(t,s,i);return j(a,oi,t.fontSize),a.color=ge.makeHexColor(...t.color),j(a,ai,E(o=Dt,go,E4).call(o,t.value)),a._initialData=r,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:s,fontSize:u(this,oi),value:E(this,mn,S6).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!E(this,mn,E6).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:i}=s;i.fontSize=`calc(${u(this,oi)}px * var(--total-scale-factor))`,i.color=this.color,s.replaceChildren();for(const r of u(this,ai).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),s.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,ai)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ai=new WeakMap,lg=new WeakMap,mu=new WeakMap,oi=new WeakMap,mn=new WeakSet,C6=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-u(this,oi))*this.parentScale),j(this,oi,r),E(this,mn,Ew).call(this)},i=u(this,oi);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M6=function(t){const s=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L6=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(E(i=Dt,go,kw).call(i,r)),s=r);return t.join(`
`)},Ew=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},go=new WeakSet,kw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(O1,"")},Nw=function(){if(this.editorDiv.replaceChildren(),!!u(this,ai))for(const t of u(this,ai).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},S6=function(){return u(this,ai).replaceAll(""," ")},E4=function(t){return t.replaceAll(" ","")},E6=function(t){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},M(Dt,go),ee(Dt,"_freeTextDefaultContent",""),ee(Dt,"_internalPadding",0),ee(Dt,"_defaultColor",null),ee(Dt,"_defaultFontSize",10),ee(Dt,"_type","freetext"),ee(Dt,"_editorType",$e.FREETEXT);let S4=Dt;class ve{toSVGPath(){St("Abstract method `toSVGPath` must be implemented.")}get box(){St("Abstract getter `box` must be implemented.")}serialize(e,t){St("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*i,a[o+1]=s+e[o+1]*r;return a}static _rescaleAndSwap(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*i,a[o+1]=s+e[o]*r;return a}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,a){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+a)/6,(s+r)/2,(i+a)/2]}}ee(ve,"PRECISION",1e-4);var li,vr,ih,rh,ra,Ze,gu,wu,cg,ug,ah,oh,gl,fg,rb,ab,Mn,B0,k6,N6,A6,T6,I6,D6;const Ma=class Ma{constructor({x:e,y:t},s,i,r,a,o=0){M(this,Mn);M(this,li);M(this,vr,[]);M(this,ih);M(this,rh);M(this,ra,[]);M(this,Ze,new Float32Array(18));M(this,gu);M(this,wu);M(this,cg);M(this,ug);M(this,ah);M(this,oh);M(this,gl,[]);j(this,li,s),j(this,oh,r*i),j(this,rh,a),u(this,Ze).set([NaN,NaN,NaN,NaN,e,t],6),j(this,ih,o),j(this,ug,u(Ma,fg)*i),j(this,cg,u(Ma,ab)*i),j(this,ah,i),u(this,gl).push(e,t)}isEmpty(){return isNaN(u(this,Ze)[8])}add({x:e,y:t}){var T;j(this,gu,e),j(this,wu,t);const[s,i,r,a]=u(this,li);let[o,c,f,d]=u(this,Ze).subarray(8,12);const h=e-f,p=t-d,m=Math.hypot(h,p);if(m<u(this,cg))return!1;const g=m-u(this,ug),w=g/m,b=w*h,y=w*p;let x=o,v=c;o=f,c=d,f+=b,d+=y,(T=u(this,gl))==null||T.push(e,t);const C=-y/g,S=b/g,L=C*u(this,oh),k=S*u(this,oh);return u(this,Ze).set(u(this,Ze).subarray(2,8),0),u(this,Ze).set([f+L,d+k],4),u(this,Ze).set(u(this,Ze).subarray(14,18),12),u(this,Ze).set([f-L,d-k],16),isNaN(u(this,Ze)[6])?(u(this,ra).length===0&&(u(this,Ze).set([o+L,c+k],2),u(this,ra).push(NaN,NaN,NaN,NaN,(o+L-s)/r,(c+k-i)/a),u(this,Ze).set([o-L,c-k],14),u(this,vr).push(NaN,NaN,NaN,NaN,(o-L-s)/r,(c-k-i)/a)),u(this,Ze).set([x,v,o,c,f,d],6),!this.isEmpty()):(u(this,Ze).set([x,v,o,c,f,d],6),Math.abs(Math.atan2(v-c,x-o)-Math.atan2(y,b))<Math.PI/2?([o,c,f,d]=u(this,Ze).subarray(2,6),u(this,ra).push(NaN,NaN,NaN,NaN,((o+f)/2-s)/r,((c+d)/2-i)/a),[o,c,x,v]=u(this,Ze).subarray(14,18),u(this,vr).push(NaN,NaN,NaN,NaN,((x+o)/2-s)/r,((v+c)/2-i)/a),!0):([x,v,o,c,f,d]=u(this,Ze).subarray(0,6),u(this,ra).push(((x+5*o)/6-s)/r,((v+5*c)/6-i)/a,((5*o+f)/6-s)/r,((5*c+d)/6-i)/a,((o+f)/2-s)/r,((c+d)/2-i)/a),[f,d,o,c,x,v]=u(this,Ze).subarray(12,18),u(this,vr).push(((x+5*o)/6-s)/r,((v+5*c)/6-i)/a,((5*o+f)/6-s)/r,((5*c+d)/6-i)/a,((o+f)/2-s)/r,((c+d)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,ra),t=u(this,vr);if(isNaN(u(this,Ze)[6])&&!this.isEmpty())return E(this,Mn,k6).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);E(this,Mn,A6).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return E(this,Mn,N6).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,a){return new P6(e,t,s,i,r,a)}getOutlines(){var h;const e=u(this,ra),t=u(this,vr),s=u(this,Ze),[i,r,a,o]=u(this,li),c=new Float32Array((((h=u(this,gl))==null?void 0:h.length)??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(u(this,gl)[p]-i)/a,c[p+1]=(u(this,gl)[p+1]-r)/o;if(c[c.length-2]=(u(this,gu)-i)/a,c[c.length-1]=(u(this,wu)-r)/o,isNaN(s[6])&&!this.isEmpty())return E(this,Mn,T6).call(this,c);const f=new Float32Array(u(this,ra).length+24+u(this,vr).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){f[p]=f[p+1]=NaN;continue}f[p]=e[p],f[p+1]=e[p+1]}d=E(this,Mn,D6).call(this,f,d);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){f[d]=f[d+1]=NaN,d+=2;continue}f[d]=t[p+m],f[d+1]=t[p+m+1],d+=2}return E(this,Mn,I6).call(this,f,d),this.newFreeDrawOutline(f,c,u(this,li),u(this,ah),u(this,ih),u(this,rh))}};li=new WeakMap,vr=new WeakMap,ih=new WeakMap,rh=new WeakMap,ra=new WeakMap,Ze=new WeakMap,gu=new WeakMap,wu=new WeakMap,cg=new WeakMap,ug=new WeakMap,ah=new WeakMap,oh=new WeakMap,gl=new WeakMap,fg=new WeakMap,rb=new WeakMap,ab=new WeakMap,Mn=new WeakSet,B0=function(){const e=u(this,Ze).subarray(4,6),t=u(this,Ze).subarray(16,18),[s,i,r,a]=u(this,li);return[(u(this,gu)+(e[0]-t[0])/2-s)/r,(u(this,wu)+(e[1]-t[1])/2-i)/a,(u(this,gu)+(t[0]-e[0])/2-s)/r,(u(this,wu)+(t[1]-e[1])/2-i)/a]},k6=function(){const[e,t,s,i]=u(this,li),[r,a,o,c]=E(this,Mn,B0).call(this);return`M${(u(this,Ze)[2]-e)/s} ${(u(this,Ze)[3]-t)/i} L${(u(this,Ze)[4]-e)/s} ${(u(this,Ze)[5]-t)/i} L${r} ${a} L${o} ${c} L${(u(this,Ze)[16]-e)/s} ${(u(this,Ze)[17]-t)/i} L${(u(this,Ze)[14]-e)/s} ${(u(this,Ze)[15]-t)/i} Z`},N6=function(e){const t=u(this,vr);e.push(`L${t[4]} ${t[5]} Z`)},A6=function(e){const[t,s,i,r]=u(this,li),a=u(this,Ze).subarray(4,6),o=u(this,Ze).subarray(16,18),[c,f,d,h]=E(this,Mn,B0).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-s)/r} L${c} ${f} L${d} ${h} L${(o[0]-t)/i} ${(o[1]-s)/r}`)},T6=function(e){const t=u(this,Ze),[s,i,r,a]=u(this,li),[o,c,f,d]=E(this,Mn,B0).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,f,d,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/a],0),this.newFreeDrawOutline(h,e,u(this,li),u(this,ah),u(this,ih),u(this,rh))},I6=function(e,t){const s=u(this,vr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},D6=function(e,t){const s=u(this,Ze).subarray(4,6),i=u(this,Ze).subarray(16,18),[r,a,o,c]=u(this,li),[f,d,h,p]=E(this,Mn,B0).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c,NaN,NaN,NaN,NaN,f,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c],t),t+=24},M(Ma,fg,8),M(Ma,rb,2),M(Ma,ab,u(Ma,fg)+u(Ma,rb));let By=Ma;var lh,yu,eo,dg,ci,hg,an,ob,R6;class P6 extends ve{constructor(t,s,i,r,a,o){super();M(this,ob);M(this,lh);M(this,yu,new Float32Array(4));M(this,eo);M(this,dg);M(this,ci);M(this,hg);M(this,an);j(this,an,t),j(this,ci,s),j(this,lh,i),j(this,hg,r),j(this,eo,a),j(this,dg,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,ob,R6).call(this,o);const[c,f,d,h]=u(this,yu);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/d,t[p+1]=(t[p+1]-f)/h;for(let p=0,m=s.length;p<m;p+=2)s[p]=(s[p]-c)/d,s[p+1]=(s[p+1]-f)/h}toSVGPath(){const t=[`M${u(this,an)[4]} ${u(this,an)[5]}`];for(let s=6,i=u(this,an).length;s<i;s+=6){if(isNaN(u(this,an)[s])){t.push(`L${u(this,an)[s+4]} ${u(this,an)[s+5]}`);continue}t.push(`C${u(this,an)[s]} ${u(this,an)[s+1]} ${u(this,an)[s+2]} ${u(this,an)[s+3]} ${u(this,an)[s+4]} ${u(this,an)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],a){const o=i-t,c=r-s;let f,d;switch(a){case 0:f=ve._rescale(u(this,an),t,r,o,-c),d=ve._rescale(u(this,ci),t,r,o,-c);break;case 90:f=ve._rescaleAndSwap(u(this,an),t,s,o,c),d=ve._rescaleAndSwap(u(this,ci),t,s,o,c);break;case 180:f=ve._rescale(u(this,an),i,s,-o,c),d=ve._rescale(u(this,ci),i,s,-o,c);break;case 270:f=ve._rescaleAndSwap(u(this,an),i,r,-o,-c),d=ve._rescaleAndSwap(u(this,ci),i,r,-o,-c);break}return{outline:Array.from(f),points:[Array.from(d)]}}get box(){return u(this,yu)}newOutliner(t,s,i,r,a,o=0){return new By(t,s,i,r,a,o)}getNewOutline(t,s){const[i,r,a,o]=u(this,yu),[c,f,d,h]=u(this,lh),p=a*d,m=o*h,g=i*d+c,w=r*h+f,b=this.newOutliner({x:u(this,ci)[0]*p+g,y:u(this,ci)[1]*m+w},u(this,lh),u(this,hg),t,u(this,dg),s??u(this,eo));for(let y=2;y<u(this,ci).length;y+=2)b.add({x:u(this,ci)[y]*p+g,y:u(this,ci)[y+1]*m+w});return b.getOutlines()}}lh=new WeakMap,yu=new WeakMap,eo=new WeakMap,dg=new WeakMap,ci=new WeakMap,hg=new WeakMap,an=new WeakMap,ob=new WeakSet,R6=function(t){const s=u(this,an);let i=s[4],r=s[5];const a=[i,r,i,r];let o=i,c=r,f=i,d=r;const h=t?Math.max:Math.min,p=new Float32Array(4);for(let g=6,w=s.length;g<w;g+=6){const b=s[g+4],y=s[g+5];isNaN(s[g])?(ge.pointBoundingBox(b,y,a),c>y?(o=b,c=y):c===y&&(o=h(o,b)),d<y?(f=b,d=y):d===y&&(f=h(f,b))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ge.bezierBoundingBox(i,r,...s.slice(g,g+6),p),ge.rectBoundingBox(p[0],p[1],p[2],p[3],a),c>p[1]?(o=p[0],c=p[1]):c===p[1]&&(o=h(o,p[0])),d<p[3]?(f=p[2],d=p[3]):d===p[3]&&(f=h(f,p[2]))),i=b,r=y}const m=u(this,yu);m[0]=a[0]-u(this,eo),m[1]=a[1]-u(this,eo),m[2]=a[2]-a[0]+2*u(this,eo),m[3]=a[3]-a[1]+2*u(this,eo),this.firstPoint=[o,c],this.lastPoint=[f,d]};var pg,mg,gg,wl,xr,Ls,O6,Aw,z6,B6,N4;class k4{constructor(e,t=0,s=0,i=!0){M(this,Ls);M(this,pg);M(this,mg);M(this,gg);M(this,wl,[]);M(this,xr,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:b,width:y,height:x}of e){const v=Math.floor((w-t)/a)*a,C=Math.ceil((w+y+t)/a)*a,S=Math.floor((b-t)/a)*a,L=Math.ceil((b+x+t)/a)*a,k=[v,S,L,!0],A=[C,S,L,!1];u(this,wl).push(k,A),ge.rectBoundingBox(v,S,C,L,r)}const o=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,f=r[0]-s,d=r[1]-s;let h=i?-1/0:1/0,p=1/0;const m=u(this,wl).at(i?-1:-2),g=[m[0],m[2]];for(const w of u(this,wl)){const[b,y,x,v]=w;!v&&i?y<p?(p=y,h=b):y===p&&(h=Math.max(h,b)):v&&!i&&(y<p?(p=y,h=b):y===p&&(h=Math.min(h,b))),w[0]=(b-f)/o,w[1]=(y-d)/c,w[2]=(x-d)/c}j(this,pg,new Float32Array([f,d,o,c])),j(this,mg,[h,p]),j(this,gg,g)}getOutlines(){u(this,wl).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of u(this,wl))t[3]?(e.push(...E(this,Ls,N4).call(this,t)),E(this,Ls,z6).call(this,t)):(E(this,Ls,B6).call(this,t),e.push(...E(this,Ls,N4).call(this,t)));return E(this,Ls,O6).call(this,e)}}pg=new WeakMap,mg=new WeakMap,gg=new WeakMap,wl=new WeakMap,xr=new WeakMap,Ls=new WeakSet,O6=function(e){const t=[],s=new Set;for(const a of e){const[o,c,f]=a;t.push([o,c,a],[o,f,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],f=t[a+1][2];c.push(f),f.push(c),s.add(c),s.add(f)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,c,f,d,h]=a;s.delete(a);let p=o,m=c;for(r=[o,f],i.push(r);;){let g;if(s.has(d))g=d;else if(s.has(h))g=h;else break;s.delete(g),[o,c,f,d,h]=g,p!==o&&(r.push(p,m,o,m===c?c:f),p=o),m=m===c?f:c}r.push(p,m)}return new $$(i,u(this,pg),u(this,mg),u(this,gg))},Aw=function(e){const t=u(this,xr);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:i=r-1}return i+1},z6=function([,e,t]){const s=E(this,Ls,Aw).call(this,e);u(this,xr).splice(s,0,[e,t])},B6=function([,e,t]){const s=E(this,Ls,Aw).call(this,e);for(let i=s;i<u(this,xr).length;i++){const[r,a]=u(this,xr)[i];if(r!==e)break;if(r===e&&a===t){u(this,xr).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=u(this,xr)[i];if(r!==e)break;if(r===e&&a===t){u(this,xr).splice(i,1);return}}},N4=function(e){const[t,s,i]=e,r=[[t,s,i]],a=E(this,Ls,Aw).call(this,i);for(let o=0;o<a;o++){const[c,f]=u(this,xr)[o];for(let d=0,h=r.length;d<h;d++){const[,p,m]=r[d];if(!(f<=p||m<=c)){if(p>=c){if(m>f)r[d][1]=f;else{if(h===1)return[];r.splice(d,1),d--,h--}continue}r[d][2]=c,m>f&&r.push([t,f,m])}}}return r};var wg,ch;class $$ extends ve{constructor(t,s,i,r){super();M(this,wg);M(this,ch);j(this,ch,t),j(this,wg,s),this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const s of u(this,ch)){let[i,r]=s;t.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],c=s[a+1];o===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],a){const o=[],c=i-t,f=r-s;for(const d of u(this,ch)){const h=new Array(d.length);for(let p=0;p<d.length;p+=2)h[p]=t+d[p]*c,h[p+1]=r-d[p+1]*f;o.push(h)}return o}get box(){return u(this,wg)}get classNamesForOutlining(){return["highlightOutline"]}}wg=new WeakMap,ch=new WeakMap;class A4 extends By{newFreeDrawOutline(e,t,s,i,r,a){return new H$(e,t,s,i,r,a)}}class H$ extends P6{newOutliner(e,t,s,i,r,a=0){return new A4(e,t,s,i,r,a)}}var uh,yg,to,bu,bg,Ps,vg,xg,vu,ui,fi,Hn,fh,dh,ls,hh,Yi,_g,We,T4,Tw,F6,U6,$6,I4,ac,Zi,xf,H6,Iw,Dw,G6,W6,Y6,V6,Q6;const ut=class ut extends Tt{constructor(t){super({...t,name:"highlightEditor"});M(this,We);M(this,uh,null);M(this,yg,0);M(this,to);M(this,bu,null);M(this,bg,null);M(this,Ps,null);M(this,vg,null);M(this,xg,0);M(this,vu,null);M(this,ui,null);M(this,fi,null);M(this,Hn,!1);M(this,fh,null);M(this,dh,null);M(this,ls,null);M(this,hh,"");M(this,Yi);M(this,_g,"");this.color=t.color||ut._defaultColor,j(this,Yi,t.thickness||ut._defaultThickness),this.opacity=t.opacity||ut._defaultOpacity,j(this,to,t.boxes||null),j(this,_g,t.methodOfCreation||""),j(this,hh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(j(this,Hn,!0),E(this,We,Tw).call(this,t),E(this,We,ac).call(this)):u(this,to)&&(j(this,uh,t.anchorNode),j(this,yg,t.anchorOffset),j(this,vg,t.focusNode),j(this,xg,t.focusOffset),E(this,We,T4).call(this),E(this,We,ac).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ut.prototype;return Fe(this,"_keyboardManager",new Yg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Hn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Yi),methodOfCreation:u(this,_g)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;Tt.initialize(t,s),ut._defaultColor||(ut._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case nt.HIGHLIGHT_COLOR:ut._defaultColor=s;break;case nt.HIGHLIGHT_THICKNESS:ut._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return u(this,dh)}get commentButtonPosition(){return u(this,fh)}updateParams(t,s){switch(t){case nt.HIGHLIGHT_COLOR:E(this,We,F6).call(this,s);break;case nt.HIGHLIGHT_THICKNESS:E(this,We,U6).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[nt.HIGHLIGHT_COLOR,ut._defaultColor],[nt.HIGHLIGHT_THICKNESS,ut._defaultThickness]]}get propertiesToUpdate(){return[[nt.HIGHLIGHT_COLOR,this.color||ut._defaultColor],[nt.HIGHLIGHT_THICKNESS,u(this,Yi)||ut._defaultThickness],[nt.HIGHLIGHT_FREE,u(this,Hn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,fi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=u(this,bg))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",j(this,bg,new Ry({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,We,Dw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,We,Dw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,We,I4).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,We,ac).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?E(this,We,I4).call(this):t&&(E(this,We,ac).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let i;u(this,Hn)?(t=(t-this.rotation+360)%360,i=E(r=ut,Zi,xf).call(r,u(this,ui).box,t)):i=E(a=ut,Zi,xf).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(u(this,fi),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(u(this,ls),{bbox:E(o=ut,Zi,xf).call(o,u(this,Ps).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,hh)&&(t.setAttribute("aria-label",u(this,hh)),t.setAttribute("role","mark")),u(this,Hn)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,We,H6).bind(this),{signal:this._uiManager._signal});const s=j(this,vu,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=u(this,bu),this.setDims(),hT(this,u(this,vu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,ls),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,ls),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,We,Iw).call(this,!0);break;case 1:case 3:E(this,We,Iw).call(this,!1);break}}select(){var t;super.select(),u(this,ls)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,ls),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,ls)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,ls),{rootClass:{selected:!1}}),u(this,Hn)||E(this,We,Iw).call(this,!1))}get _mustFixPosition(){return!u(this,Hn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,fi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,ls),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:a}){const{x:o,y:c,width:f,height:d}=i.getBoundingClientRect(),h=new AbortController,p=t.combinedSignal(h),m=g=>{h.abort(),E(this,Zi,V6).call(this,t,g)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",nn,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ar,{signal:p}),i.addEventListener("pointermove",E(this,Zi,Y6).bind(this,t),{signal:p}),this._freeHighlight=new A4({x:r,y:a},[o,c,f,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var w,b,y,x;let r=null;if(t instanceof _6){const{data:{quadPoints:v,rect:C,rotation:S,id:L,color:k,opacity:A,popupRef:T,richText:I,contentsObj:N,creationDate:R,modificationDate:B},parent:{page:{pageNumber:P}}}=t;r=t={annotationType:$e.HIGHLIGHT,color:Array.from(k),opacity:A,quadPoints:v,boxes:null,pageIndex:P-1,rect:C.slice(0),rotation:S,annotationElementId:L,id:L,deleted:!1,popupRef:T,richText:I,comment:(N==null?void 0:N.str)||null,creationDate:R,modificationDate:B}}else if(t instanceof Vj){const{data:{inkLists:v,rect:C,rotation:S,id:L,color:k,borderStyle:{rawWidth:A},popupRef:T,richText:I,contentsObj:N,creationDate:R,modificationDate:B},parent:{page:{pageNumber:P}}}=t;r=t={annotationType:$e.HIGHLIGHT,color:Array.from(k),thickness:A,inkLists:v,boxes:null,pageIndex:P-1,rect:C.slice(0),rotation:S,annotationElementId:L,id:L,deleted:!1,popupRef:T,richText:I,comment:(N==null?void 0:N.str)||null,creationDate:R,modificationDate:B}}const{color:a,quadPoints:o,inkLists:c,opacity:f}=t,d=await super.deserialize(t,s,i);d.color=ge.makeHexColor(...a),d.opacity=f||1,c&&j(d,Yi,t.thickness),d._initialData=r,t.comment&&d.setCommentData(t);const[h,p]=d.pageDimensions,[m,g]=d.pageTranslation;if(o){const v=j(d,to,[]);for(let C=0;C<o.length;C+=8)v.push({x:(o[C]-m)/h,y:1-(o[C+1]-g)/p,width:(o[C+2]-o[C])/h,height:(o[C+1]-o[C+5])/p});E(w=d,We,T4).call(w),E(b=d,We,ac).call(b),d.rotate(d.rotation)}else if(c){j(d,Hn,!0);const v=c[0],C={x:v[0]-m,y:p-(v[1]-g)},S=new A4(C,[0,0,h,p],1,u(d,Yi)/2,!0,.001);for(let A=0,T=v.length;A<T;A+=2)C.x=v[A]-m,C.y=p-(v[A+1]-g),S.add(C);const{id:L,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);E(y=d,We,Tw).call(y,{highlightOutlines:S.getOutlines(),highlightId:L,clipPathId:k}),E(x=d,We,ac).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=Tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:s,opacity:this.opacity,thickness:u(this,Yi),quadPoints:E(this,We,G6).call(this),outlines:E(this,We,W6).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!E(this,We,Q6).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};uh=new WeakMap,yg=new WeakMap,to=new WeakMap,bu=new WeakMap,bg=new WeakMap,Ps=new WeakMap,vg=new WeakMap,xg=new WeakMap,vu=new WeakMap,ui=new WeakMap,fi=new WeakMap,Hn=new WeakMap,fh=new WeakMap,dh=new WeakMap,ls=new WeakMap,hh=new WeakMap,Yi=new WeakMap,_g=new WeakMap,We=new WeakSet,T4=function(){const t=new k4(u(this,to),.001);j(this,ui,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,ui).box;const s=new k4(u(this,to),.0025,.001,this._uiManager.direction==="ltr");j(this,Ps,s.getOutlines());const{firstPoint:i}=u(this,ui);j(this,fh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:r}=u(this,Ps);j(this,dh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Tw=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var p,m;if(j(this,ui,t),j(this,Ps,t.getNewOutline(u(this,Yi)/2+1.5,.0025)),s>=0)j(this,fi,s),j(this,bu,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),j(this,ls,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Ps).box,path:{d:u(this,Ps).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,fi),{bbox:E(p=ut,Zi,xf).call(p,u(this,ui).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,ls),{bbox:E(m=ut,Zi,xf).call(m,u(this,Ps).box,g),path:{d:u(this,Ps).toSVGPath()}})}const[a,o,c,f]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=f;break;case 90:{const[g,w]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*w/g,this.height=f*g/w;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=f;break;case 270:{const[g,w]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*w/g,this.height=f*g/w;break}}const{firstPoint:d}=t;j(this,fh,[(d[0]-a)/c,(d[1]-o)/f]);const{lastPoint:h}=u(this,Ps);j(this,dh,[(h[0]-a)/c,(h[1]-o)/f])},F6=function(t){const s=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:s.bind(this,t,ut._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},U6=function(t){const s=u(this,Yi),i=r=>{j(this,Yi,r),E(this,We,$6).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},$6=function(t){u(this,Hn)&&(E(this,We,Tw).call(this,{highlightOutlines:u(this,ui).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},I4=function(){u(this,fi)===null||!this.parent||(this.parent.drawLayer.remove(u(this,fi)),j(this,fi,null),this.parent.drawLayer.remove(u(this,ls)),j(this,ls,null))},ac=function(t=this.parent){u(this,fi)===null&&({id:wn(this,fi)._,clipPathId:wn(this,bu)._}=t.drawLayer.draw({bbox:u(this,ui).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,Hn)},path:{d:u(this,ui).toSVGPath()}},!1,!0),j(this,ls,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Hn)},bbox:u(this,Ps).box,path:{d:u(this,Ps).toSVGPath()}},u(this,Hn))),u(this,vu)&&(u(this,vu).style.clipPath=u(this,bu)))},Zi=new WeakSet,xf=function([t,s,i,r],a){switch(a){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},H6=function(t){ut._keyboardManager.exec(this,t)},Iw=function(t){if(!u(this,uh))return;const s=window.getSelection();t?s.setPosition(u(this,uh),u(this,yg)):s.setPosition(u(this,vg),u(this,xg))},Dw=function(){return u(this,Hn)?this.rotation:0},G6=function(){if(u(this,Hn))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=u(this,to),o=new Float32Array(a.length*8);let c=0;for(const{x:f,y:d,width:h,height:p}of a){const m=f*t+i,g=(1-d)*s+r;o[c]=o[c+4]=m,o[c+1]=o[c+3]=g,o[c+2]=o[c+6]=m+h*t,o[c+5]=o[c+7]=g-p*s,c+=8}return o},W6=function(t){return u(this,ui).serialize(t,E(this,We,Dw).call(this))},Y6=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},V6=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Q6=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==s[r])},M(ut,Zi),ee(ut,"_defaultColor",null),ee(ut,"_defaultOpacity",1),ee(ut,"_defaultThickness",12),ee(ut,"_type","highlight"),ee(ut,"_editorType",$e.HIGHLIGHT),ee(ut,"_freeHighlightId",-1),ee(ut,"_freeHighlight",null),ee(ut,"_freeHighlightClipId","");let Fy=ut;var xu;class J6{constructor(){M(this,xu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){u(this,xu)[e]=t}toSVGProperties(){const e=u(this,xu);return j(this,xu,Object.create(null)),{root:e}}reset(){j(this,xu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){St("Not implemented")}}xu=new WeakMap;var di,ph,kn,_u,ju,lt,D4,P4,R4,F0,q6,Pw,U0,_f;const et=class et extends Tt{constructor(t){super(t);M(this,lt);M(this,di,null);M(this,ph);ee(this,"_colorPicker",null);ee(this,"_drawId",null);j(this,ph,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(E(this,lt,D4).call(this,t),E(this,lt,F0).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(s))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){St("Not implemented")}static get typesMap(){St("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(u(et,kn).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,a=r[s],o=c=>{var d;r.updateProperty(s,c);const f=u(this,di).updateProperty(s,c);f&&E(this,lt,U0).call(this,f),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,di).getPathResizingSVGProperties(E(this,lt,Pw).call(this)),{bbox:E(this,lt,_f).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,di).getPathResizedSVGProperties(E(this,lt,Pw).call(this)),{bbox:E(this,lt,_f).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:E(this,lt,_f).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(u(this,di).getPathTranslatedSVGProperties(E(this,lt,Pw).call(this),this.parentDimensions),{bbox:E(this,lt,_f).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,ph)&&(j(this,ph,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,lt,R4).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,lt,F0).call(this),E(this,lt,U0).call(this,u(this,di).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,lt,R4).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,lt,F0).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties({bbox:E(this,lt,_f).call(this)},u(this,di).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,lt,U0).call(this,u(this,di).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,a){St("Not implemented")}static startDrawing(t,s,i,r){var b;const{target:a,offsetX:o,offsetY:c,pointerId:f,pointerType:d}=r;if(ss.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=t,{width:p,height:m}=a.getBoundingClientRect(),g=j(et,_u,new AbortController),w=t.combinedSignal(g);if(ss.setPointer(d,f),window.addEventListener("pointerup",y=>{ss.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:w}),window.addEventListener("pointercancel",y=>{ss.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",y=>{ss.isSamePointerType(y.pointerType)&&(ss.initializeAndAddPointerId(y.pointerId),u(et,kn).isCancellable()&&(u(et,kn).removeLastElement(),u(et,kn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ar,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",y=>{ss.isSameTimeStamp(y.timeStamp)&&nn(y)},{signal:w}),t.toggleDrawing(),(b=s._editorUndoBar)==null||b.hide(),u(et,kn)){t.drawLayer.updateProperties(this._currentDrawId,u(et,kn).startNew(o,c,p,m,h));return}s.updateUIForDefaultProperties(this),j(et,kn,this.createDrawerInstance(o,c,p,m,h)),j(et,ju,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(et,ju).toSVGProperties(),u(et,kn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(ss.isSameTimeStamp(t.timeStamp),!u(et,kn))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(ss.isSamePointerId(r)){if(ss.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(et,kn).add(s,i)),ss.setTimeStamp(t.timeStamp),nn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,j(et,kn,null),j(et,ju,null),ss.clearTimeStamp()),u(et,_u)&&(u(et,_u).abort(),j(et,_u,null),ss.clearPointerIds())}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,u(et,kn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=u(et,kn),r=this._currentDrawId,a=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(nt.DRAW_STEP),!u(et,kn).isEmpty()){const{pageDimensions:[i,r],scale:a}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(et,kn).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:u(et,ju),mustBeCommitted:!t});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,a,o){St("Not implemented")}static async deserialize(t,s,i){var h,p;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}=s.viewport,f=this.deserializeDraw(o,c,r,a,this._INNER_MARGIN,t),d=await super.deserialize(t,s,i);return d.createDrawingOptions(t),E(h=d,lt,D4).call(h,{drawOutlines:f}),E(p=d,lt,F0).call(p),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,i]=this.pageTranslation,[r,a]=this.pageDimensions;return u(this,di).serialize([s,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};di=new WeakMap,ph=new WeakMap,kn=new WeakMap,_u=new WeakMap,ju=new WeakMap,lt=new WeakSet,D4=function({drawOutlines:t,drawId:s,drawingOptions:i}){j(this,di,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=E(this,lt,P4).call(this,t,this.parent),E(this,lt,U0).call(this,t.box)},P4=function(t,s){const{id:i}=s.drawLayer.draw(et._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},R4=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},F0=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,lt,P4).call(this,u(this,di),t)}},q6=function([t,s,i,r]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},Pw=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},U0=function(t){[this.x,this.y,this.width,this.height]=E(this,lt,q6).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},_f=function(){const{x:t,y:s,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[c,f]}=this;switch((a*4+o)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/f),r*(f/c),i*(c/f)];case 5:return[1-s,t,i*(c/f),r*(f/c)];case 6:return[1-t-r*(f/c),1-s,r*(f/c),i*(c/f)];case 7:return[s-i*(c/f),1-t-r*(f/c),i*(c/f),r*(f/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(f/c),s,r*(f/c),i*(c/f)];case 13:return[1-s-i*(c/f),t-r*(f/c),i*(c/f),r*(f/c)];case 14:return[1-t,1-s-i*(c/f),r*(f/c),i*(c/f)];case 15:return[s,1-t,i*(c/f),r*(f/c)];default:return[t,s,i,r]}},ee(et,"_currentDrawId",-1),ee(et,"_currentParent",null),M(et,kn,null),M(et,_u,null),M(et,ju,null),ee(et,"_INNER_MARGIN",3);let Uy=et;var aa,Nn,An,Cu,mh,gs,Gn,Vi,Mu,Lu,Su,gh,Rw;class G${constructor(e,t,s,i,r,a){M(this,gh);M(this,aa,new Float64Array(6));M(this,Nn);M(this,An);M(this,Cu);M(this,mh);M(this,gs);M(this,Gn,"");M(this,Vi,0);M(this,Mu,new Qg);M(this,Lu);M(this,Su);j(this,Lu,s),j(this,Su,i),j(this,Cu,r),j(this,mh,a),[e,t]=E(this,gh,Rw).call(this,e,t);const o=j(this,Nn,[NaN,NaN,NaN,NaN,e,t]);j(this,gs,[e,t]),j(this,An,[{line:o,points:u(this,gs)}]),u(this,aa).set(o,0)}updateProperty(e,t){e==="stroke-width"&&j(this,mh,t)}isEmpty(){return!u(this,An)||u(this,An).length===0}isCancellable(){return u(this,gs).length<=10}add(e,t){[e,t]=E(this,gh,Rw).call(this,e,t);const[s,i,r,a]=u(this,aa).subarray(2,6),o=e-r,c=t-a;return Math.hypot(u(this,Lu)*o,u(this,Su)*c)<=2?null:(u(this,gs).push(e,t),isNaN(s)?(u(this,aa).set([r,a,e,t],2),u(this,Nn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,aa)[0])&&u(this,Nn).splice(6,6),u(this,aa).set([s,i,r,a,e,t],0),u(this,Nn).push(...ve.createBezierPoints(s,i,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(u(this,gs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){j(this,Lu,s),j(this,Su,i),j(this,Cu,r),[e,t]=E(this,gh,Rw).call(this,e,t);const a=j(this,Nn,[NaN,NaN,NaN,NaN,e,t]);j(this,gs,[e,t]);const o=u(this,An).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,An).push({line:a,points:u(this,gs)}),u(this,aa).set(a,0),j(this,Vi,0),this.toSVGPath(),null}getLastElement(){return u(this,An).at(-1)}setLastElement(e){return u(this,An)?(u(this,An).push(e),j(this,Nn,e.line),j(this,gs,e.points),j(this,Vi,0),{path:{d:this.toSVGPath()}}):u(this,Mu).setLastElement(e)}removeLastElement(){if(!u(this,An))return u(this,Mu).removeLastElement();u(this,An).pop(),j(this,Gn,"");for(let e=0,t=u(this,An).length;e<t;e++){const{line:s,points:i}=u(this,An)[e];j(this,Nn,s),j(this,gs,i),j(this,Vi,0),this.toSVGPath()}return{path:{d:u(this,Gn)}}}toSVGPath(){const e=ve.svgRound(u(this,Nn)[4]),t=ve.svgRound(u(this,Nn)[5]);if(u(this,gs).length===2)return j(this,Gn,`${u(this,Gn)} M ${e} ${t} Z`),u(this,Gn);if(u(this,gs).length<=6){const i=u(this,Gn).lastIndexOf("M");j(this,Gn,`${u(this,Gn).slice(0,i)} M ${e} ${t}`),j(this,Vi,6)}if(u(this,gs).length===4){const i=ve.svgRound(u(this,Nn)[10]),r=ve.svgRound(u(this,Nn)[11]);return j(this,Gn,`${u(this,Gn)} L ${i} ${r}`),j(this,Vi,12),u(this,Gn)}const s=[];u(this,Vi)===0&&(s.push(`M ${e} ${t}`),j(this,Vi,6));for(let i=u(this,Vi),r=u(this,Nn).length;i<r;i+=6){const[a,o,c,f,d,h]=u(this,Nn).slice(i,i+6).map(ve.svgRound);s.push(`C${a} ${o} ${c} ${f} ${d} ${h}`)}return j(this,Gn,u(this,Gn)+s.join(" ")),j(this,Vi,u(this,Nn).length),u(this,Gn)}getOutlines(e,t,s,i){const r=u(this,An).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),u(this,Mu).build(u(this,An),e,t,s,u(this,Cu),u(this,mh),i),j(this,aa,null),j(this,Nn,null),j(this,An,null),j(this,Gn,null),u(this,Mu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}aa=new WeakMap,Nn=new WeakMap,An=new WeakMap,Cu=new WeakMap,mh=new WeakMap,gs=new WeakMap,Gn=new WeakMap,Vi=new WeakMap,Mu=new WeakMap,Lu=new WeakMap,Su=new WeakMap,gh=new WeakSet,Rw=function(e,t){return ve._normalizePoint(e,t,u(this,Lu),u(this,Su),u(this,Cu))};var ws,jg,Cg,hi,oa,la,wh,yh,Eu,Vn,xa,Z6,K6,X6;class Qg extends ve{constructor(){super(...arguments);M(this,Vn);M(this,ws);M(this,jg,0);M(this,Cg);M(this,hi);M(this,oa);M(this,la);M(this,wh);M(this,yh);M(this,Eu)}build(t,s,i,r,a,o,c){j(this,oa,s),j(this,la,i),j(this,wh,r),j(this,yh,a),j(this,Eu,o),j(this,Cg,c??0),j(this,hi,t),E(this,Vn,K6).call(this)}get thickness(){return u(this,Eu)}setLastElement(t){return u(this,hi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,hi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of u(this,hi)){if(t.push(`M${ve.svgRound(s[4])} ${ve.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ve.svgRound(s[10])} ${ve.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[a,o,c,f,d,h]=s.subarray(i,i+6).map(ve.svgRound);t.push(`C${a} ${o} ${c} ${f} ${d} ${h}`)}}return t.join("")}serialize([t,s,i,r],a){const o=[],c=[],[f,d,h,p]=E(this,Vn,Z6).call(this);let m,g,w,b,y,x,v,C,S;switch(u(this,yh)){case 0:S=ve._rescale,m=t,g=s+r,w=i,b=-r,y=t+f*i,x=s+(1-d-p)*r,v=t+(f+h)*i,C=s+(1-d)*r;break;case 90:S=ve._rescaleAndSwap,m=t,g=s,w=i,b=r,y=t+d*i,x=s+f*r,v=t+(d+p)*i,C=s+(f+h)*r;break;case 180:S=ve._rescale,m=t+i,g=s,w=-i,b=r,y=t+(1-f-h)*i,x=s+d*r,v=t+(1-f)*i,C=s+(d+p)*r;break;case 270:S=ve._rescaleAndSwap,m=t+i,g=s+r,w=-i,b=-r,y=t+(1-d-p)*i,x=s+(1-f-h)*r,v=t+(1-d)*i,C=s+(1-f)*r;break}for(const{line:L,points:k}of u(this,hi))o.push(S(L,m,g,w,b,a?new Array(L.length):null)),c.push(S(k,m,g,w,b,a?new Array(k.length):null));return{lines:o,points:c,rect:[y,x,v,C]}}static deserialize(t,s,i,r,a,{paths:{lines:o,points:c},rotation:f,thickness:d}){const h=[];let p,m,g,w,b;switch(f){case 0:b=ve._rescale,p=-t/i,m=s/r+1,g=1/i,w=-1/r;break;case 90:b=ve._rescaleAndSwap,p=-s/r,m=-t/i,g=1/r,w=1/i;break;case 180:b=ve._rescale,p=t/i+1,m=-s/r,g=-1/i,w=1/r;break;case 270:b=ve._rescaleAndSwap,p=s/r+1,m=t/i+1,g=-1/r,w=-1/i;break}if(!o){o=[];for(const x of c){const v=x.length;if(v===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(v===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const C=new Float32Array(3*(v-2));o.push(C);let[S,L,k,A]=x.subarray(0,4);C.set([NaN,NaN,NaN,NaN,S,L],0);for(let T=4;T<v;T+=2){const I=x[T],N=x[T+1];C.set(ve.createBezierPoints(S,L,k,A,I,N),(T-2)*3),[S,L,k,A]=[k,A,I,N]}}}for(let x=0,v=o.length;x<v;x++)h.push({line:b(o[x].map(C=>C??NaN),p,m,g,w),points:b(c[x].map(C=>C??NaN),p,m,g,w)});const y=new this.prototype.constructor;return y.build(h,i,r,1,f,d,a),y}get box(){return u(this,ws)}updateProperty(t,s){return t==="stroke-width"?E(this,Vn,X6).call(this,s):null}updateParentDimensions([t,s],i){const[r,a]=E(this,Vn,xa).call(this);j(this,oa,t),j(this,la,s),j(this,wh,i);const[o,c]=E(this,Vn,xa).call(this),f=o-r,d=c-a,h=u(this,ws);return h[0]-=f,h[1]-=d,h[2]+=2*f,h[3]+=2*d,h}updateRotation(t){return j(this,jg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,ws).map(ve.svgRound).join(" ")}get defaultProperties(){const[t,s]=u(this,ws);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(t)} ${ve.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=u(this,ws);let i=0,r=0,a=0,o=0,c=0,f=0;switch(u(this,jg)){case 90:r=s/t,a=-t/s,c=t;break;case 180:i=-1,o=-1,c=t,f=s;break;case 270:r=-s/t,a=t/s,f=s;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${ve.svgRound(c)} ${ve.svgRound(f)})`}getPathResizingSVGProperties([t,s,i,r]){const[a,o]=E(this,Vn,xa).call(this),[c,f,d,h]=u(this,ws);if(Math.abs(d-a)<=ve.PRECISION||Math.abs(h-o)<=ve.PRECISION){const b=t+i/2-(c+d/2),y=s+r/2-(f+h/2);return{path:{"transform-origin":`${ve.svgRound(t)} ${ve.svgRound(s)}`,transform:`${this.rotationTransform} translate(${b} ${y})`}}}const p=(i-2*a)/(d-2*a),m=(r-2*o)/(h-2*o),g=d/i,w=h/r;return{path:{"transform-origin":`${ve.svgRound(c)} ${ve.svgRound(f)}`,transform:`${this.rotationTransform} scale(${g} ${w}) translate(${ve.svgRound(a)} ${ve.svgRound(o)}) scale(${p} ${m}) translate(${ve.svgRound(-a)} ${ve.svgRound(-o)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[a,o]=E(this,Vn,xa).call(this),c=u(this,ws),[f,d,h,p]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(h-a)<=ve.PRECISION||Math.abs(p-o)<=ve.PRECISION){const y=t+i/2-(f+h/2),x=s+r/2-(d+p/2);for(const{line:v,points:C}of u(this,hi))ve._translate(v,y,x,v),ve._translate(C,y,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(t)} ${ve.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*a)/(h-2*a),g=(r-2*o)/(p-2*o),w=-m*(f+a)+t+a,b=-g*(d+o)+s+o;if(m!==1||g!==1||w!==0||b!==0)for(const{line:y,points:x}of u(this,hi))ve._rescale(y,w,b,m,g,y),ve._rescale(x,w,b,m,g,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(t)} ${ve.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,a]=i,o=u(this,ws),c=t-o[0],f=s-o[1];if(u(this,oa)===r&&u(this,la)===a)for(const{line:d,points:h}of u(this,hi))ve._translate(d,c,f,d),ve._translate(h,c,f,h);else{const d=u(this,oa)/r,h=u(this,la)/a;j(this,oa,r),j(this,la,a);for(const{line:p,points:m}of u(this,hi))ve._rescale(p,c,f,d,h,p),ve._rescale(m,c,f,d,h,m);o[2]*=d,o[3]*=h}return o[0]=t,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ve.svgRound(t)} ${ve.svgRound(s)}`}}}get defaultSVGProperties(){const t=u(this,ws);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ve.svgRound(t[0])} ${ve.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}ws=new WeakMap,jg=new WeakMap,Cg=new WeakMap,hi=new WeakMap,oa=new WeakMap,la=new WeakMap,wh=new WeakMap,yh=new WeakMap,Eu=new WeakMap,Vn=new WeakSet,xa=function(t=u(this,Eu)){const s=u(this,Cg)+t/2*u(this,wh);return u(this,yh)%180===0?[s/u(this,oa),s/u(this,la)]:[s/u(this,la),s/u(this,oa)]},Z6=function(){const[t,s,i,r]=u(this,ws),[a,o]=E(this,Vn,xa).call(this,0);return[t+a,s+o,i-2*a,r-2*o]},K6=function(){const t=j(this,ws,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of u(this,hi)){if(r.length<=12){for(let c=4,f=r.length;c<f;c+=6)ge.pointBoundingBox(r[c],r[c+1],t);continue}let a=r[4],o=r[5];for(let c=6,f=r.length;c<f;c+=6){const[d,h,p,m,g,w]=r.subarray(c,c+6);ge.bezierBoundingBox(a,o,d,h,p,m,g,w,t),a=g,o=w}}const[s,i]=E(this,Vn,xa).call(this);t[0]=vs(t[0]-s,0,1),t[1]=vs(t[1]-i,0,1),t[2]=vs(t[2]+s,0,1),t[3]=vs(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},X6=function(t){const[s,i]=E(this,Vn,xa).call(this);j(this,Eu,t);const[r,a]=E(this,Vn,xa).call(this),[o,c]=[r-s,a-i],f=u(this,ws);return f[0]-=o,f[1]-=c,f[2]+=2*o,f[3]+=2*c,f};class Xb extends J6{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Xb(this._viewParameters);return e.updateAll(this),e}}var lb,eI;const Uf=class Uf extends Uy{constructor(t){super({...t,name:"inkEditor"});M(this,lb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){Tt.initialize(t,s),this._defaultDrawingOptions=new Xb(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[nt.INK_THICKNESS,"stroke-width"],[nt.INK_COLOR,"stroke"],[nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,a){return new G$(t,s,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,a,o){return Qg.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){let r=null;if(t instanceof Vj){const{data:{inkLists:o,rect:c,rotation:f,id:d,color:h,opacity:p,borderStyle:{rawWidth:m},popupRef:g,richText:w,contentsObj:b,creationDate:y,modificationDate:x},parent:{page:{pageNumber:v}}}=t;r=t={annotationType:$e.INK,color:Array.from(h),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:f,annotationElementId:d,id:d,deleted:!1,popupRef:g,richText:w,comment:(b==null?void 0:b.str)||null,creationDate:y,modificationDate:x}}const a=await super.deserialize(t,s,i);return a._initialData=r,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return nt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Uf.getDefaultDrawingOptions({stroke:ge.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,c=Object.assign(super.serialize(t),{color:Tt._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:s,points:i}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!E(this,lb,eI).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};lb=new WeakSet,eI=function(t){const{color:s,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a},ee(Uf,"_type","ink"),ee(Uf,"_editorType",$e.INK),ee(Uf,"_defaultDrawingOptions",null);let O4=Uf;class z4 extends Qg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const z1=8,p0=3;var ku,ft,B4,_r,tI,nI,F4,Ow,sI,iI,rI,U4,$4,aI;class oo{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,a,o,c){let f=new OffscreenCanvas(1,1),d=f.getContext("2d",{alpha:!1});const h=200,p=d.font=`${s} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:g,actualBoundingBoxAscent:w,actualBoundingBoxDescent:b,fontBoundingBoxAscent:y,fontBoundingBoxDescent:x,width:v}=d.measureText(e),C=1.5,S=Math.ceil(Math.max(Math.abs(m)+Math.abs(g)||0,v)*C),L=Math.ceil(Math.max(Math.abs(w)+Math.abs(b)||h,Math.abs(y)+Math.abs(x)||h)*C);f=new OffscreenCanvas(S,L),d=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=p,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,S,L),d.fillStyle="black",d.fillText(e,S*(C-1)/2,L*(3-C)/2);const k=E(this,ft,U4).call(this,d.getImageData(0,0,S,L).data),A=E(this,ft,rI).call(this,k),T=E(this,ft,$4).call(this,A),I=E(this,ft,F4).call(this,k,S,L,T);return this.processDrawnLines({lines:{curves:I,width:S,height:L},pageWidth:r,pageHeight:a,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[a,o,c]=E(this,ft,aI).call(this,e),[f,d]=E(this,ft,iI).call(this,a,o,c,Math.hypot(o,c)*u(this,ku).sigmaSFactor,u(this,ku).sigmaR,u(this,ku).kernelSize),h=E(this,ft,$4).call(this,d),p=E(this,ft,F4).call(this,f,o,c,h);return this.processDrawnLines({lines:{curves:p,width:o,height:c},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:a,areContours:o}){i%180!==0&&([t,s]=[s,t]);const{curves:c,width:f,height:d}=e,h=e.thickness??0,p=[],m=Math.min(t/f,s/d),g=m/t,w=m/s,b=[];for(const{points:x}of c){const v=a?E(this,ft,sI).call(this,x):x;if(!v)continue;b.push(v);const C=v.length,S=new Float32Array(C),L=new Float32Array(3*(C===2?2:C-2));if(p.push({line:L,points:S}),C===2){S[0]=v[0]*g,S[1]=v[1]*w,L.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[k,A,T,I]=v;k*=g,A*=w,T*=g,I*=w,S.set([k,A,T,I],0),L.set([NaN,NaN,NaN,NaN,k,A],0);for(let N=4;N<C;N+=2){const R=S[N]=v[N]*g,B=S[N+1]=v[N+1]*w;L.set(ve.createBezierPoints(k,A,T,I,R,B),(N-2)*3),[k,A,T,I]=[T,I,R,B]}}if(p.length===0)return null;const y=o?new z4:new Qg;return y.build(p,t,s,1,i,o?0:h,r),{outline:y,newCurves:b,areContours:o,thickness:h,width:f,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let a=1/0,o=-1/0,c=0;for(const v of e){c+=v.length;for(let C=2,S=v.length;C<S;C++){const L=v[C]-v[C-2];a=Math.min(a,L),o=Math.max(o,L)}}let f;a>=-128&&o<=127?f=Int8Array:a>=-32768&&o<=32767?f=Int16Array:f=Int32Array;const d=e.length,h=z1+p0*d,p=new Uint32Array(h);let m=0;p[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*f.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=i,p[m++]=r,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(s??0)),p[m++]=d,p[m++]=f.BYTES_PER_ELEMENT;for(const v of e)p[m++]=v.length-2,p[m++]=v[0],p[m++]=v[1];const g=new CompressionStream("deflate-raw"),w=g.writable.getWriter();await w.ready,w.write(p);const b=f.prototype.constructor;for(const v of e){const C=new b(v.length-2);for(let S=2,L=v.length;S<L;S++)C[S-2]=v[S]-v[S-2];w.write(C)}w.close();const y=await new Response(g.readable).arrayBuffer(),x=new Uint8Array(y);return iT(x)}static async decompressSignature(e){try{const t=r7(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,o=0;for await(const v of s)a||(a=new Uint8Array(new Uint32Array(v.buffer,0,4)[0])),a.set(v,o),o+=v.length;const c=new Uint32Array(a.buffer,0,a.length>>2),f=c[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const d=c[2],h=c[3],p=c[4]===0,m=c[5],g=c[6],w=c[7],b=[],y=(z1+p0*g)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(w){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,y);break}o=0;for(let v=0;v<g;v++){const C=c[p0*v+z1],S=new Float32Array(C+2);b.push(S);for(let L=0;L<p0-1;L++)S[L]=c[p0*v+z1+L+1];for(let L=0;L<C;L++)S[L+2]=S[L]+x[o++]}return{areContours:p,thickness:m,outlines:b,width:d,height:h}}catch(t){return Be(`decompressSignature: ${t}`),null}}}ku=new WeakMap,ft=new WeakSet,B4=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},_r=new WeakMap,tI=function(e,t,s,i,r,a,o){const c=E(this,ft,B4).call(this,s,i,r,a);for(let f=0;f<8;f++){const d=(-f+c-o+16)%8,h=u(this,_r)[2*d],p=u(this,_r)[2*d+1];if(e[(s+h)*t+(i+p)]!==0)return d}return-1},nI=function(e,t,s,i,r,a,o){const c=E(this,ft,B4).call(this,s,i,r,a);for(let f=0;f<8;f++){const d=(f+c+o+16)%8,h=u(this,_r)[2*d],p=u(this,_r)[2*d+1];if(e[(s+h)*t+(i+p)]!==0)return d}return-1},F4=function(e,t,s,i){const r=e.length,a=new Int32Array(r);for(let d=0;d<r;d++)a[d]=e[d]<=i?1:0;for(let d=1;d<s-1;d++)a[d*t]=a[d*t+t-1]=0;for(let d=0;d<t;d++)a[d]=a[t*s-1-d]=0;let o=1,c;const f=[];for(let d=1;d<s-1;d++){c=1;for(let h=1;h<t-1;h++){const p=d*t+h,m=a[p];if(m===0)continue;let g=d,w=h;if(m===1&&a[p-1]===0)o+=1,w-=1;else if(m>=1&&a[p+1]===0)o+=1,w+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const b=[h,d],y=w===h+1,x={isHole:y,points:b,id:o,parent:0};f.push(x);let v;for(const N of f)if(N.id===c){v=N;break}v?v.isHole?x.parent=y?v.parent:c:x.parent=y?c:v.parent:x.parent=y?c:0;const C=E(this,ft,tI).call(this,a,t,d,h,g,w,0);if(C===-1){a[p]=-o,a[p]!==1&&(c=Math.abs(a[p]));continue}let S=u(this,_r)[2*C],L=u(this,_r)[2*C+1];const k=d+S,A=h+L;g=k,w=A;let T=d,I=h;for(;;){const N=E(this,ft,nI).call(this,a,t,T,I,g,w,1);S=u(this,_r)[2*N],L=u(this,_r)[2*N+1];const R=T+S,B=I+L;b.push(B,R);const P=T*t+I;if(a[P+1]===0?a[P]=-o:a[P]===1&&(a[P]=o),R===d&&B===h&&T===k&&I===A){a[p]!==1&&(c=Math.abs(a[p]));break}else g=T,w=I,T=R,I=B}}}return f},Ow=function(e,t,s,i){if(s-t<=4){for(let k=t;k<s-2;k+=2)i.push(e[k],e[k+1]);return}const r=e[t],a=e[t+1],o=e[s-4]-r,c=e[s-3]-a,f=Math.hypot(o,c),d=o/f,h=c/f,p=d*a-h*r,m=c/o,g=1/f,w=Math.atan(m),b=Math.cos(w),y=Math.sin(w),x=g*(Math.abs(b)+Math.abs(y)),v=g*(1-x+x**2),C=Math.max(Math.atan(Math.abs(y+b)*v),Math.atan(Math.abs(y-b)*v));let S=0,L=t;for(let k=t+2;k<s-2;k+=2){const A=Math.abs(p-d*e[k+1]+h*e[k]);A>S&&(L=k,S=A)}S>(f*C)**2?(E(this,ft,Ow).call(this,e,t,L+2,i),E(this,ft,Ow).call(this,e,L,s,i)):i.push(r,a)},sI=function(e){const t=[],s=e.length;return E(this,ft,Ow).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},iI=function(e,t,s,i,r,a){const o=new Float32Array(a**2),c=-2*i**2,f=a>>1;for(let w=0;w<a;w++){const b=(w-f)**2;for(let y=0;y<a;y++)o[w*a+y]=Math.exp((b+(y-f)**2)/c)}const d=new Float32Array(256),h=-2*r**2;for(let w=0;w<256;w++)d[w]=Math.exp(w**2/h);const p=e.length,m=new Uint8Array(p),g=new Uint32Array(256);for(let w=0;w<s;w++)for(let b=0;b<t;b++){const y=w*t+b,x=e[y];let v=0,C=0;for(let L=0;L<a;L++){const k=w+L-f;if(!(k<0||k>=s))for(let A=0;A<a;A++){const T=b+A-f;if(T<0||T>=t)continue;const I=e[k*t+T],N=o[L*a+A]*d[Math.abs(I-x)];v+=I*N,C+=N}}const S=m[y]=Math.round(v/C);g[S]++}return[m,g]},rI=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},U4=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let o=0,c=s.length;o<c;o++){const f=s[o]=e[o<<2];i=Math.max(i,f),r=Math.min(r,f)}const a=255/(i-r);for(let o=0,c=s.length;o<c;o++)s[o]=(s[o]-r)*a;return s},$4=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(c=>c!==0);let a=r,o=r;for(t=r;t<256;t++){const c=e[t];c>s&&(t-a>i&&(i=t-a,o=t-1),s=c,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},aI=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=u(this,ku);let a=s,o=i;if(s>r||i>r){let p=s,m=i,g=Math.log2(Math.max(s,i)/r);const w=Math.floor(g);g=g===w?w-1:w;for(let y=0;y<g;y++){a=Math.ceil(p/2),o=Math.ceil(m/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,p,m,0,0,a,o),p=a,m=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const b=Math.min(r/a,r/o);a=Math.round(a*b),o=Math.round(o*b)}const f=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,a,o),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,a,o);const d=f.getImageData(0,0,a,o).data;return[E(this,ft,U4).call(this,d),a,o]},M(oo,ft),M(oo,ku,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),M(oo,_r,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Qj extends J6{constructor(){super(),super.updateProperties({fill:Tt._defaultLineColor,"stroke-width":0})}clone(){const e=new Qj;return e.updateAll(this),e}}class Jj extends Xb{constructor(e){super(e),super.updateProperties({stroke:Tt._defaultLineColor,"stroke-width":1})}clone(){const e=new Jj(this._viewParameters);return e.updateAll(this),e}}var yl,ca,bl,Nu;const Js=class Js extends Uy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});M(this,yl,!1);M(this,ca,null);M(this,bl,null);M(this,Nu,null);this._willKeepAspectRatio=!0,j(this,bl,t.signatureData||null),j(this,ca,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){Tt.initialize(t,s),this._defaultDrawingOptions=new Qj,this._defaultDrawnSignatureOptions=new Jj(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,ca)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(u(this,bl)){const{lines:r,mustSmooth:a,areContours:o,description:c,uuid:f,heightInPage:d}=u(this,bl),{rawDims:{pageWidth:h,pageHeight:p},rotation:m}=this.parent.viewport,g=oo.processDrawnLines({lines:r,pageWidth:h,pageHeight:p,rotation:m,innerMargin:Js._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(g,d,c,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,ca)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){j(this,Nu,t),this.addEditToolbar()}getUuid(){return u(this,Nu)}get description(){return u(this,ca)}set description(t){j(this,ca,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:a}=u(this,bl),o=Math.max(r,a),c=oo.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:i,width:r,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:a,y:o}=this,{outline:c}=j(this,bl,t);j(this,yl,c instanceof z4),this.description=i;let f;u(this,yl)?f=Js.getDefaultDrawingOptions():(f=Js._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:f});const[,d]=this.pageDimensions;let h=s/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return oo.process(t,s,i,r,Js._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return oo.extractContoursFromText(t,s,i,r,a,Js._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return oo.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:Js._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Js.getDefaultDrawingOptions():(this._drawingOptions=Js._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,yl),color:[0,0,0],thickness:u(this,yl)?0:r});return this.addComment(a),t?(a.paths={lines:s,points:i},a.uuid=u(this,Nu),a.isCopy=!0):a.lines=s,u(this,ca)&&(a.accessibilityData={type:"Figure",alt:u(this,ca)}),a}static deserializeDraw(t,s,i,r,a,o){return o.areContours?z4.deserialize(t,s,i,r,a,o):Qg.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){var a;const r=await super.deserialize(t,s,i);return j(r,yl,t.areContours),r.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",j(r,Nu,t.uuid),r}};yl=new WeakMap,ca=new WeakMap,bl=new WeakMap,Nu=new WeakMap,ee(Js,"_type","signature"),ee(Js,"_editorType",$e.SIGNATURE),ee(Js,"_defaultDrawingOptions",null);let H4=Js;var Bt,Tn,vl,no,xl,bh,so,Au,ua,pi,vh,ct,$0,H0,zw,Bw,Fw,W4,Uw,oI;class G4 extends Tt{constructor(t){super({...t,name:"stampEditor"});M(this,ct);M(this,Bt,null);M(this,Tn,null);M(this,vl,null);M(this,no,null);M(this,xl,null);M(this,bh,"");M(this,so,null);M(this,Au,!1);M(this,ua,null);M(this,pi,!1);M(this,vh,!1);j(this,no,t.bitmapUrl),j(this,xl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){Tt.initialize(t,s)}static isHandlingMimeForPasting(t){return kx.includes(t)}static paste(t,s){s.pasteEditor({mode:$e.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const f=c.output;return await this.setGuessedAltText(f),s&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;u(this,Tn)&&(j(this,Bt,null),this._uiManager.imageManager.deleteId(u(this,Tn)),(t=u(this,so))==null||t.remove(),j(this,so,null),u(this,ua)&&(clearTimeout(u(this,ua)),j(this,ua,null))),super.remove()}rebuild(){if(!this.parent){u(this,Tn)&&E(this,ct,zw).call(this);return}super.rebuild(),this.div!==null&&(u(this,Tn)&&u(this,so)===null&&E(this,ct,zw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,vl)||u(this,Bt)||u(this,no)||u(this,xl)||u(this,Tn)||u(this,Au))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Au)||(u(this,Bt)?E(this,ct,Bw).call(this):E(this,ct,zw).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(j(this,Tn,i),r&&j(this,Bt,r),j(this,Au,!1),E(this,ct,Bw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,ua)!==null&&clearTimeout(u(this,ua)),j(this,ua,setTimeout(()=>{j(this,ua,null),E(this,ct,W4).call(this)},200))}copyCanvas(t,s,i=!1){t||(t=224);const{width:r,height:a}=u(this,Bt),o=new ma;let c=u(this,Bt),f=r,d=a,h=null;if(s){if(r>s||a>s){const k=Math.min(s/r,s/a);f=Math.floor(r*k),d=Math.floor(a*k)}h=document.createElement("canvas");const m=h.width=Math.ceil(f*o.sx),g=h.height=Math.ceil(d*o.sy);u(this,pi)||(c=E(this,ct,Fw).call(this,m,g));const w=h.getContext("2d");w.filter=this._uiManager.hcmFilter;let b="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":f7.isDarkMode&&(b="#8f8f9d",y="#42414d");const x=15,v=x*o.sx,C=x*o.sy,S=new OffscreenCanvas(v*2,C*2),L=S.getContext("2d");L.fillStyle=b,L.fillRect(0,0,v*2,C*2),L.fillStyle=y,L.fillRect(0,0,v,C),L.fillRect(v,C,v,C),w.fillStyle=w.createPattern(S,"repeat"),w.fillRect(0,0,m,g),w.drawImage(c,0,0,c.width,c.height,0,0,m,g)}let p=null;if(i){let m,g;if(o.symmetric&&c.width<t&&c.height<t)m=c.width,g=c.height;else if(c=u(this,Bt),r>t||a>t){const y=Math.min(t/r,t/a);m=Math.floor(r*y),g=Math.floor(a*y),u(this,pi)||(c=E(this,ct,Fw).call(this,m,g))}const b=new OffscreenCanvas(m,g).getContext("2d",{willReadFrequently:!0});b.drawImage(c,0,0,c.width,c.height,0,0,m,g),p={width:m,height:g,data:b.getImageData(0,0,m,g).data}}return{canvas:h,width:f,height:d,imageData:p}}static async deserialize(t,s,i){var b;let r=null,a=!1;if(t instanceof j6){const{data:{rect:y,rotation:x,id:v,structParent:C,popupRef:S,richText:L,contentsObj:k,creationDate:A,modificationDate:T},container:I,parent:{page:{pageNumber:N}},canvas:R}=t;let B,P;R?(delete t.canvas,{id:B,bitmap:P}=i.imageManager.getFromCanvas(I.id,R),R.remove()):(a=!0,t._hasNoCanvas=!0);const Y=((b=await s._structTree.getAriaAttributes(`${Rf}${v}`))==null?void 0:b.get("aria-label"))||"";r=t={annotationType:$e.STAMP,bitmapId:B,bitmap:P,pageIndex:N-1,rect:y.slice(0),rotation:x,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:Y},isSvg:!1,structParent:C,popupRef:S,richText:L,comment:(k==null?void 0:k.str)||null,creationDate:A,modificationDate:T}}const o=await super.deserialize(t,s,i),{rect:c,bitmap:f,bitmapUrl:d,bitmapId:h,isSvg:p,accessibilityData:m}=t;a?(i.addMissingCanvas(t.id,o),j(o,Au,!0)):h&&i.imageManager.isValidId(h)?(j(o,Tn,h),f&&j(o,Bt,f)):j(o,no,d),j(o,pi,p);const[g,w]=o.pageDimensions;return o.width=(c[2]-c[0])/g,o.height=(c[3]-c[1])/w,m&&(o.altTextData=m),o._initialData=r,t.comment&&o.setCommentData(t),j(o,vh,!!r),o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:u(this,Tn),isSvg:u(this,pi)});if(this.addComment(i),t)return i.bitmapUrl=E(this,ct,Uw).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=E(this,ct,oI).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(s===null)return i;s.stamps||(s.stamps=new Map);const o=u(this,pi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(u(this,Tn)))s.stamps.set(u(this,Tn),{area:o,serialized:i}),i.bitmap=E(this,ct,Uw).call(this,!1);else if(u(this,pi)){const c=s.stamps.get(u(this,Tn));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=E(this,ct,Uw).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Bt=new WeakMap,Tn=new WeakMap,vl=new WeakMap,no=new WeakMap,xl=new WeakMap,bh=new WeakMap,so=new WeakMap,Au=new WeakMap,ua=new WeakMap,pi=new WeakMap,vh=new WeakMap,ct=new WeakSet,$0=function(t,s=!1){if(!t){this.remove();return}j(this,Bt,t.bitmap),s||(j(this,Tn,t.id),j(this,pi,t.isSvg)),t.file&&j(this,bh,t.file.name),E(this,ct,Bw).call(this)},H0=function(){if(j(this,vl,null),this._uiManager.enableWaiting(!1),!!u(this,so)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Bt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Bt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},zw=function(){if(u(this,Tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Tn)).then(i=>E(this,ct,$0).call(this,i,!0)).finally(()=>E(this,ct,H0).call(this));return}if(u(this,no)){const i=u(this,no);j(this,no,null),this._uiManager.enableWaiting(!0),j(this,vl,this._uiManager.imageManager.getFromUrl(i).then(r=>E(this,ct,$0).call(this,r)).finally(()=>E(this,ct,H0).call(this)));return}if(u(this,xl)){const i=u(this,xl);j(this,xl,null),this._uiManager.enableWaiting(!0),j(this,vl,this._uiManager.imageManager.getFromFile(i).then(r=>E(this,ct,$0).call(this,r)).finally(()=>E(this,ct,H0).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=kx.join(",");const s=this._uiManager._signal;j(this,vl,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ct,$0).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>E(this,ct,H0).call(this))),t.click()},Bw=function(){var f;const{div:t}=this;let{width:s,height:i}=u(this,Bt);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const d=Math.min(o*r/s,o*a/i);s*=d,i*=d}this._uiManager.enableWaiting(!1);const c=j(this,so,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/r,this.height=i/a,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,ct,W4).call(this),u(this,vh)||(this.parent.addUndoableEditor(this),j(this,vh,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,bh)&&this.div.setAttribute("aria-description",u(this,bh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Fw=function(t,s){const{width:i,height:r}=u(this,Bt);let a=i,o=r,c=u(this,Bt);for(;a>2*t||o>2*s;){const f=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(c,0,0,f,d,0,0,a,o),c=h.transferToImageBitmap()}return c},W4=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,a=new ma,o=Math.ceil(i*t*a.sx),c=Math.ceil(r*s*a.sy),f=u(this,so);if(!f||f.width===o&&f.height===c)return;f.width=o,f.height=c;const d=u(this,pi)?u(this,Bt):E(this,ct,Fw).call(this,o,c),h=f.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,o,c)},Uw=function(t){if(t){if(u(this,pi)){const r=this._uiManager.imageManager.getSvgUrl(u(this,Tn));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=u(this,Bt),s.getContext("2d").drawImage(u(this,Bt),0,0),s.toDataURL()}if(u(this,pi)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Hl.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Hl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(u(this,Bt),0,0,u(this,Bt).width,u(this,Bt).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(u(this,Bt))},oI=function(t){var o;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},ee(G4,"_type","stamp"),ee(G4,"_editorType",$e.STAMP);var Tu,xh,_l,jl,io,Rs,Cl,_h,jh,jr,ro,In,ao,Ml,Ch,Le,Ll,Lt,V4,lI,Ur,Q4,J4,$w;const ur=class ur{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:f,l10n:d}){M(this,Lt);M(this,Tu);M(this,xh,!1);M(this,_l,null);M(this,jl,null);M(this,io,null);M(this,Rs,new Map);M(this,Cl,!1);M(this,_h,!1);M(this,jh,!1);M(this,jr,null);M(this,ro,null);M(this,In,null);M(this,ao,null);M(this,Ml,null);M(this,Ch,-1);M(this,Le);const h=[...u(ur,Ll).values()];if(!ur._initialized){ur._initialized=!0;for(const p of h)p.initialize(d,e)}e.registerEditorTypes(h),j(this,Le,e),this.pageIndex=t,this.div=s,j(this,Tu,r),j(this,_l,a),this.viewport=f,j(this,In,c),this.drawLayer=o,this._structTree=i,u(this,Le).addLayer(this)}get isEmpty(){return u(this,Rs).size===0}get isInvisible(){return this.isEmpty&&u(this,Le).getMode()===$e.NONE}updateToolbar(e){u(this,Le).updateToolbar(e)}updateMode(e=u(this,Le).getMode()){switch(E(this,Lt,$w).call(this),e){case $e.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case $e.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case $e.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===$e.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of u(ur,Ll).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,In))==null?void 0:t.div)}setEditingState(e){u(this,Le).setEditingState(e)}addCommands(e){u(this,Le).addCommands(e)}cleanUndoStack(e){u(this,Le).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,_l))==null||t.togglePointerEvents(e)}async enable(){var s;j(this,jh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=u(this,Ml))==null||s.abort(),j(this,Ml,null);const e=new Set;for(const i of u(this,Lt,V4))i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,Le).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=u(this,_l);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),u(this,Le).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}j(this,jh,!1),u(this,Le)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(j(this,_h,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,In)&&!u(this,Ml)){j(this,Ml,new AbortController);const r=u(this,Le).combinedSignal(u(this,Ml));u(this,In).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:f,timeStamp:d}=a,h=u(this,Ch);if(d-h>500){j(this,Ch,d);return}j(this,Ch,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(c,f);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let g;const w=new RegExp(`^${Ap}[0-9]+$`);for(const y of m)if(w.test(y.id)){g=y.id;break}if(!g)return;const b=u(this,Rs).get(g);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick(a))},{signal:r,capture:!0})}const e=u(this,_l),t=[];if(e){const r=new Map,a=new Map;for(const c of u(this,Lt,V4)){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){r.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);(i=this.getEditableAnnotation(c.annotationElementId))==null||i.show(),c.remove()}const o=e.getEditableAnnotations();for(const c of o){const{id:f}=c.data;if(u(this,Le).isDeletedAnnotationElement(f)){c.updateEdited({deleted:!0});continue}let d=a.get(f);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=r.get(f),d&&(u(this,Le).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}E(this,Lt,$w).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of u(ur,Ll).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),j(this,_h,!1)}getEditableAnnotation(e){var t;return((t=u(this,_l))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Le).getActive()!==e&&u(this,Le).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,In))!=null&&e.div&&!u(this,ao)){j(this,ao,new AbortController);const t=u(this,Le).combinedSignal(u(this,ao));u(this,In).div.addEventListener("pointerdown",E(this,Lt,lI).bind(this),{signal:t}),u(this,In).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,In))!=null&&e.div&&u(this,ao)&&(u(this,ao).abort(),j(this,ao,null),u(this,In).div.classList.remove("highlighting"))}enableClick(){if(u(this,jl))return;j(this,jl,new AbortController);const e=u(this,Le).combinedSignal(u(this,jl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,jl))==null||e.abort(),j(this,jl,null)}attach(e){u(this,Rs).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Le).isDeletedAnnotationElement(t)&&u(this,Le).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Rs).delete(e.id),(t=u(this,Tu))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,_h)&&e.annotationElementId&&u(this,Le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Le).addDeletedAnnotationElement(e),Tt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,jh)),u(this,Le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,io)&&(e._focusEventsAllowed=!1,j(this,io,setTimeout(()=>{j(this,io,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Le)._signal}),t.focus())},0))),e._structTreeParentId=(s=u(this,Tu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of u(this,Rs).values())if(t.uid===e)return t;return null}getNextId(){return u(this,Le).getId()}combinedSignal(e){return u(this,Le).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Lt,Ur))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,Le).updateMode(e.mode);const{offsetX:s,offsetY:i}=E(this,Lt,J4).call(this),r=this.getNextId(),a=E(this,Lt,Q4).call(this,{parent:this,id:r,x:s,y:i,uiManager:u(this,Le),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(ur,Ll).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Le)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=E(this,Lt,Q4).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,Le),isCentered:t,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(E(this,Lt,J4).call(this),!0,e)}setSelected(e){u(this,Le).setSelected(e)}toggleSelected(e){u(this,Le).toggleSelected(e)}unselect(e){u(this,Le).unselect(e)}pointerup(e){var i;const{isMac:t}=Ln.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,Cl)||(j(this,Cl,!1),(i=u(this,Lt,Ur))!=null&&i.isDrawer&&u(this,Lt,Ur).supportMultipleDrawings))return;if(!u(this,xh)){j(this,xh,!0);return}const s=u(this,Le).getMode();if(s===$e.STAMP||s===$e.SIGNATURE){u(this,Le).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(u(this,Le).getMode()===$e.HIGHLIGHT&&this.enableTextSelection(),u(this,Cl)){j(this,Cl,!1);return}const{isMac:t}=Ln.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(j(this,Cl,!0),(i=u(this,Lt,Ur))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=u(this,Le).getActive();j(this,xh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,jr)){u(this,Lt,Ur).startDrawing(this,u(this,Le),!1,e);return}u(this,Le).setCurrentDrawingSession(this),j(this,jr,new AbortController);const t=u(this,Le).combinedSignal(u(this,jr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(j(this,ro,null),this.commitOrRemove())},{signal:t}),u(this,Lt,Ur).startDrawing(this,u(this,Le),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&j(this,ro,t);return}u(this,ro)&&setTimeout(()=>{var t;(t=u(this,ro))==null||t.focus(),j(this,ro,null)},0)}endDrawingSession(e=!1){return u(this,jr)?(u(this,Le).setCurrentDrawingSession(null),u(this,jr).abort(),j(this,jr,null),j(this,ro,null),u(this,Lt,Ur).endDrawing(e)):null}findNewParent(e,t,s){const i=u(this,Le).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,jr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,jr)&&u(this,Lt,Ur).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,Le).getActive())==null?void 0:e.parent)===this&&(u(this,Le).commitOrRemove(),u(this,Le).setActiveEditor(null)),u(this,io)&&(clearTimeout(u(this,io)),j(this,io,null));for(const s of u(this,Rs).values())(t=u(this,Tu))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,u(this,Rs).clear(),u(this,Le).removeLayer(this)}render({viewport:e}){this.viewport=e,Gu(this.div,e);for(const t of u(this,Le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Le).commitOrRemove(),E(this,Lt,$w).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Gu(this.div,{rotation:s}),t!==s)for(const i of u(this,Rs).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Le).viewParameters.realScale}};Tu=new WeakMap,xh=new WeakMap,_l=new WeakMap,jl=new WeakMap,io=new WeakMap,Rs=new WeakMap,Cl=new WeakMap,_h=new WeakMap,jh=new WeakMap,jr=new WeakMap,ro=new WeakMap,In=new WeakMap,ao=new WeakMap,Ml=new WeakMap,Ch=new WeakMap,Le=new WeakMap,Ll=new WeakMap,Lt=new WeakSet,V4=function(){return u(this,Rs).size!==0?u(this,Rs).values():u(this,Le).getEditors(this.pageIndex)},lI=function(e){u(this,Le).unselectAll();const{target:t}=e;if(t===u(this,In).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,In).div.contains(t)){const{isMac:s}=Ln.platform;if(e.button!==0||e.ctrlKey&&s)return;u(this,Le).showAllEditors("highlight",!0,!0),u(this,In).div.classList.add("free"),this.toggleDrawing(),Fy.startHighlighting(this,u(this,Le).direction==="ltr",{target:u(this,In).div,x:e.x,y:e.y}),u(this,In).div.addEventListener("pointerup",()=>{u(this,In).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Le)._signal}),e.preventDefault()}},Ur=function(){return u(ur,Ll).get(u(this,Le).getMode())},Q4=function(e){const t=u(this,Lt,Ur);return t?new t.prototype.constructor(e):null},J4=function(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),f=(r+o)/2-e,d=(a+c)/2-t,[h,p]=this.viewport.rotation%180===0?[f,d]:[d,f];return{offsetX:h,offsetY:p}},$w=function(){for(const e of u(this,Rs).values())e.isEmpty()&&e.remove()},ee(ur,"_initialized",!1),M(ur,Ll,new Map([S4,O4,G4,Fy,H4].map(e=>[e._editorType,e])));let Y4=ur;var Cr,ys,Iu,Mg,cb,cI,ga,Z4,uI,K4;const vn=class vn{constructor({pageIndex:e}){M(this,ga);M(this,Cr,null);M(this,ys,new Map);M(this,Iu,new Map);this.pageIndex=e}setParent(e){if(!u(this,Cr)){j(this,Cr,e);return}if(u(this,Cr)!==e){if(u(this,ys).size>0)for(const t of u(this,ys).values())t.remove(),e.append(t);j(this,Cr,e)}}static get _svgFactory(){return Fe(this,"_svgFactory",new zy)}draw(e,t=!1,s=!1){const i=wn(vn,Mg)._++,r=E(this,ga,Z4).call(this),a=vn._svgFactory.createElement("defs");r.append(a);const o=vn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Iu).set(i,o);const f=s?E(this,ga,uI).call(this,a,c):null,d=vn._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(r,e),u(this,ys).set(i,r),{id:i,clipPathId:`url(#${f})`}}drawOutline(e,t){const s=wn(vn,Mg)._++,i=E(this,ga,Z4).call(this),r=vn._svgFactory.createElement("defs");i.append(r);const a=vn._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=vn._svgFactory.createElement("mask");r.append(h),c=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const p=vn._svgFactory.createElement("rect");h.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=vn._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const f=vn._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${o}`),c&&f.setAttribute("mask",`url(#${c})`);const d=f.cloneNode();return i.append(d),f.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,ys).set(s,i),s}finalizeDraw(e,t){u(this,Iu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:a}=t,o=typeof e=="number"?u(this,ys).get(e):e;if(o){if(s&&E(this,ga,K4).call(this,o,s),i&&E(c=vn,cb,cI).call(c,o,i),r){const{classList:f}=o;for(const[d,h]of Object.entries(r))f.toggle(d,h)}if(a){const d=o.firstElementChild.firstElementChild;E(this,ga,K4).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const s=u(this,ys).get(e);s&&(u(t,Cr).append(s),u(this,ys).delete(e),u(t,ys).set(e,s))}remove(e){u(this,Iu).delete(e),u(this,Cr)!==null&&(u(this,ys).get(e).remove(),u(this,ys).delete(e))}destroy(){j(this,Cr,null);for(const e of u(this,ys).values())e.remove();u(this,ys).clear(),u(this,Iu).clear()}};Cr=new WeakMap,ys=new WeakMap,Iu=new WeakMap,Mg=new WeakMap,cb=new WeakSet,cI=function(e,[t,s,i,r]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},ga=new WeakSet,Z4=function(){const e=vn._svgFactory.create(1,1,!0);return u(this,Cr).append(e),e.setAttribute("aria-hidden",!0),e},uI=function(e,t){const s=vn._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=vn._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},K4=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},M(vn,cb),M(vn,Mg,0);let q4=vn;globalThis._pdfjsTestingUtils={HighlightOutliner:k4};globalThis.pdfjsLib={AbortException:$l,AnnotationEditorLayer:Y4,AnnotationEditorParamsType:nt,AnnotationEditorType:$e,AnnotationEditorUIManager:Wu,AnnotationLayer:M4,AnnotationMode:Ro,AnnotationType:un,applyOpacity:h7,build:x$,ColorPicker:Ry,createValidAbsoluteUrl:eT,CSSConstants:d7,DOMSVGFactory:zy,DrawLayer:q4,FeatureTest:Ln,fetchData:Hg,findContrastColor:p7,getDocument:l6,getFilenameFromUrl:a7,getPdfFilenameFromUrl:o7,getRGB:Wg,getUuid:sT,getXfaPageViewport:c7,GlobalWorkerOptions:da,ImageKind:cw,InvalidPDFException:Sx,isDataScheme:Zb,isPdfFile:$j,isValidExplicitDest:M7,MathClamp:vs,noContextMenu:ar,normalizeUnicode:s7,OPS:Tp,OutputScale:ma,PasswordResponses:QU,PDFDataRangeTransport:c6,PDFDateString:Ny,PDFWorker:Pp,PermissionFlag:VU,PixelsPerInch:Hl,RenderingCancelledException:Uj,renderRichText:aT,ResponseException:ky,setLayerDimensions:Gu,shadow:Fe,SignatureExtractor:oo,stopEvent:nn,SupportedImageMimeTypes:kx,TextLayer:Dp,TouchManager:Ty,updateUrlHash:tT,Util:ge,VerbosityLevel:Qb,version:v$,XfaLayer:rT};if(typeof window<"u"&&"Worker"in window){const e=`${"/".replace(/\/$/,"")}/pdf.worker.min.mjs`.replace(/\/+/g,"/");da.workerSrc=e}function fI({url:n,width:e=200,height:t=200,onError:s}){const i=_.useRef(null),r=_.useRef(null),[a,o]=_.useState(!0),[c,f]=_.useState(!1),[d,h]=_.useState(!1),p=_.useMemo(()=>n,[n]);return _.useEffect(()=>{if(!p||!i.current)return;let m=!1;return(async()=>{var w;try{if(o(!0),f(!1),h(!1),r.current){try{r.current.cancel()}catch{}r.current=null}console.log("[PDF Thumbnail] Loading PDF from:",p);const y=await l6({url:p,withCredentials:!1,httpHeaders:{}}).promise;if(m)return;const x=await y.getPage(1);if(m)return;const v=x.getViewport({scale:1}),C=Math.min(e/v.width,t/v.height)*2,S=x.getViewport({scale:C}),L=i.current;if(!L||m)return;const k=L.getContext("2d");k.clearRect(0,0,L.width,L.height),L.width=S.width,L.height=S.height;const A={canvasContext:k,viewport:S},T=x.render(A);if(r.current=T,await T.promise,m)return;r.current=null,h(!0),o(!1),console.log("[PDF Thumbnail] PDF rendered successfully")}catch(b){if(m)return;if(b.name==="RenderingCancelledException"||(w=b.message)!=null&&w.includes("cancelled")){console.log("[PDF Thumbnail] Rendering cancelled");return}console.error("[PDF Thumbnail] Error rendering PDF:",b),f(!0),o(!1),r.current=null,s&&s(b)}})(),()=>{if(m=!0,r.current){try{r.current.cancel()}catch{}r.current=null}}},[p,e,t]),c||!d&&!a?null:l.jsxs(l.Fragment,{children:[a&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#999",fontSize:"12px"},children:"Chargement..."}),l.jsx("canvas",{ref:i,style:{width:"100%",height:"100%",objectFit:"cover",display:d?"block":"none",position:"relative"}})]})}const $y=new Set(["audio","voice","image","video","document","sticker"]),dI={audio:{icon:l.jsx(xy,{}),label:"Message audio"},voice:{icon:l.jsx(xy,{}),label:"Message vocal"},image:{icon:l.jsx(Dr,{}),label:"Image reue"},video:{icon:l.jsx(Og,{}),label:"Vido"},document:{icon:l.jsx(Ys,{}),label:"Document"},sticker:{icon:l.jsx(Dr,{}),label:"Sticker"},location:{icon:l.jsx(AN,{}),label:"Localisation"},contacts:{icon:l.jsx(Hu,{}),label:"Carte de contact"},interactive:{icon:l.jsx(Hu,{}),label:"Rponse interactive"},call:{icon:l.jsx(Pf,{}),label:"Appel WhatsApp"}};function W$({message:n,messageType:e,onLoadingChange:t}){var f,d;const[s,i]=_.useState(n._localPreview||n.storage_url||null),[r,a]=_.useState(!n._localPreview&&!n.storage_url),[o,c]=_.useState(!1);if(_.useEffect(()=>{if(n._localPreview){i(n._localPreview),a(!1),c(!1),t==null||t(!1,!1);return}if(n.storage_url){i(n.storage_url),a(!1),c(!1),t==null||t(!1,!1);return}if(!n.media_id&&!n.storage_url||!$y.has(e)){console.warn(` [FRONTEND MEDIA] Cannot load media for message ${n.id}:`,{has_media_id:!!n.media_id,has_storage_url:!!n.storage_url,is_fetchable:$y.has(e)}),i(null),a(!1),t==null||t(!1,!1);return}console.log(` [FRONTEND MEDIA] Fetching media from API for message ${n.id} (media_id: ${n.media_id})`);let h=!1,p=null;return oe.get(`/messages/media/${n.id}`,{responseType:"blob"}).then(m=>{if(h){console.log(` [FRONTEND MEDIA] Request cancelled for message ${n.id}`);return}console.log(` [FRONTEND MEDIA] Media fetched successfully for message ${n.id}, size: ${m.data.size} bytes`),p=URL.createObjectURL(m.data),i(p),c(!1),t==null||t(!1,!1)}).catch(m=>{h||(console.error(` [FRONTEND MEDIA] Error fetching media for message ${n.id}:`,m),i(null),c(!0),t==null||t(!1,!0))}).finally(()=>{h||a(!1)}),()=>{h=!0,p&&URL.revokeObjectURL(p)}},[n.id,n.media_id,e,n._localPreview,n.storage_url]),r)return l.jsx("span",{className:"media-loading",children:"Chargement"});if(!s||o)return l.jsx("span",{className:"media-error",children:n.content_text||"Mdia non disponible"});if(e==="image"||e==="sticker")return l.jsx("img",{src:s,alt:"",className:"bubble-media__image"});if(e==="video")return l.jsx("video",{src:s,controls:!0,className:"bubble-media__video"});if(e==="audio"||e==="voice")return l.jsx("audio",{src:s,controls:!0,className:"bubble-media__audio"});if(e==="document"){if(s&&(s.toLowerCase().endsWith(".pdf")||s.includes(".pdf")||((f=n.media_mime_type)==null?void 0:f.toLowerCase().includes("pdf"))||((d=n.media_filename)==null?void 0:d.toLowerCase().endsWith(".pdf")))&&s){const p=s;return l.jsx("div",{className:"bubble-media__document-preview",children:l.jsxs("div",{className:"bubble-media__document-preview-wrapper",children:[l.jsx("div",{className:"bubble-media__document-preview-canvas",children:l.jsx(fI,{url:p,width:300,height:350},p)}),l.jsxs("a",{href:p,download:!0,className:"bubble-media__document-link",target:"_blank",rel:"noreferrer",onClick:m=>m.stopPropagation(),children:[l.jsx(Ys,{})," Tlcharger le PDF"]})]})})}return l.jsxs("a",{href:s,download:!0,className:"bubble-media__document",target:"_blank",rel:"noreferrer",children:[l.jsx(Ys,{})," Tlcharger le document"]})}return l.jsx("span",{children:n.content_text})}function Y$({message:n,messageType:e}){const t=!!(n.storage_url||n._localPreview),[s,i]=_.useState(!t),r=dI[e],o=n.content_text&&(n.content_text.trim()==="[image]"||n.content_text.trim()==="[audio]"||n.content_text.trim()==="[video]"||n.content_text.trim()==="[document]")?null:n.content_text;let c=[];if(n.interactive_data)try{const d=typeof n.interactive_data=="string"?JSON.parse(n.interactive_data):n.interactive_data;d.buttons&&Array.isArray(d.buttons)?c=d.buttons.map(h=>{var p;return{text:h.text||((p=h.reply)==null?void 0:p.title)||"",type:h.type||"QUICK_REPLY",url:h.url||"",phone_number:h.phone_number||""}}):d.type==="button"&&d.buttons&&(c=d.buttons.map(h=>{var p;return{text:((p=h.reply)==null?void 0:p.title)||h.text||"",type:h.type||"reply"}}))}catch(d){console.warn("Error parsing interactive_data:",d)}const f=(d,h)=>{(e==="image"||e==="video"||e==="sticker")&&i(d||h)};return{content:l.jsxs("div",{className:"bubble-media bubble-media--rich",children:[s&&l.jsx("div",{className:"bubble-media__icon",children:r==null?void 0:r.icon}),l.jsxs("div",{className:"bubble-media__content",children:[l.jsx(W$,{message:n,messageType:e,onLoadingChange:f}),o&&l.jsx("p",{className:"bubble-media__caption",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"break-word"},children:o})]})]}),buttons:c.length>0?l.jsx("div",{className:"bubble-media__buttons-container",children:c.map((d,h)=>{var p;return l.jsx("div",{className:"bubble-media__button",children:d.text||d.title||((p=d.reply)==null?void 0:p.title)||d.url||d.phone_number||""},h)})}):null}}function V$({message:n}){let e=null,t=n.content_text||"",s=null,i=[],r=null;if(n.interactive_data)try{const a=typeof n.interactive_data=="string"?JSON.parse(n.interactive_data):n.interactive_data;r=a.type,a.header&&(e=a.header),a.body&&(t=a.body),a.footer&&(s=a.footer),a.action&&(a.action.buttons&&Array.isArray(a.action.buttons)?i=a.action.buttons.map(o=>{var c;return{text:((c=o.reply)==null?void 0:c.title)||o.text||"",type:o.type||"reply"}}):a.action.button&&a.action.sections&&(r="list")),a.buttons&&Array.isArray(a.buttons)&&i.length===0&&(i=a.buttons.map(o=>{var c;return{text:o.text||((c=o.reply)==null?void 0:c.title)||"",type:o.type||"QUICK_REPLY",url:o.url||"",phone_number:o.phone_number||""}}))}catch(a){console.warn("Error parsing interactive_data:",a)}if(!e&&!s&&i.length===0){const o=(n.content_text||"").split(`
`);t=o[0]||"";const c=o.find(f=>f.startsWith("[Boutons:")||f.startsWith("[Liste"));if(c){const f=c.match(/\[Boutons: (.*)\]/);f&&(i=f[1].split(", ").map(h=>({text:h,type:"reply"})))}}return l.jsxs("div",{className:"interactive-bubble",children:[e&&l.jsx("div",{className:"interactive-bubble__header",children:e}),l.jsx("div",{className:"interactive-bubble__body",children:t}),s&&l.jsx("div",{className:"interactive-bubble__footer",children:s}),r==="list"&&l.jsxs("div",{className:"interactive-bubble__list-indicator",children:[l.jsx(gx,{})," Liste interactive"]})]})}function Q$(n){const e=(n.message_type||"text").toLowerCase(),t=dI[e],s=n.media_id||n.storage_url,i=$y.has(e),r=e==="image"&&n.template_name||e==="template"&&s;if((i||r)&&s)return Y$({message:n,messageType:r?"image":e});if(e==="interactive"){let a=[];if(n.interactive_data)try{const o=typeof n.interactive_data=="string"?JSON.parse(n.interactive_data):n.interactive_data;o.action&&o.action.buttons&&Array.isArray(o.action.buttons)&&(a=o.action.buttons.map(c=>{var f;return{text:((f=c.reply)==null?void 0:f.title)||c.text||"",type:c.type||"reply"}})),o.buttons&&Array.isArray(o.buttons)&&a.length===0&&(a=o.buttons.map(c=>{var f;return{text:c.text||((f=c.reply)==null?void 0:f.title)||"",type:c.type||"QUICK_REPLY",url:c.url||"",phone_number:c.phone_number||""}}))}catch(o){console.warn("Error parsing interactive_data for buttons:",o)}if(a.length===0){const c=(n.content_text||"").split(`
`).find(f=>f.startsWith("[Boutons:"));if(c){const f=c.match(/\[Boutons: (.*)\]/);f&&(a=f[1].split(", ").map(h=>({text:h,type:"reply"})))}}return{content:l.jsx(V$,{message:n}),buttons:a.length>0?l.jsx("div",{className:"bubble-media__buttons-container",children:a.map((o,c)=>l.jsx("div",{className:"bubble-media__button",children:o.text||o.title||""},c))}):null}}if(!t||e==="text"||e==="template"){const o=(n.content_text||"").split(`
`);return{content:l.jsx("span",{className:"bubble__text",children:o.map((c,f)=>l.jsxs("span",{children:[c,f<o.length-1&&l.jsx("br",{})]},f))}),buttons:null}}return{content:l.jsxs("div",{className:"bubble-media",children:[l.jsx("div",{className:"bubble-media__icon",children:t.icon}),l.jsxs("div",{className:"bubble-media__content",children:[l.jsx("strong",{children:t.label}),n.content_text&&l.jsx("p",{className:"bubble__text",children:n.content_text})]})]}),buttons:null}}function X4({message:n,conversation:e,onReactionChange:t,onContextMenu:s,forceReactionOpen:i=!1,onResend:r}){const a=n.direction==="outbound",o=n.timestamp?jp(n.timestamp):"",c=(n.message_type||"text").toLowerCase(),f=n.media_id||n.storage_url,d=c==="image"&&n.template_name||c==="template"&&f,h=($y.has(c)||d)&&f,p=!!n.deleted_for_all_at,m=!!n.edited_at,g=!!n.is_pinned,w=Q$(n),b=(w==null?void 0:w.content)||w,y=(w==null?void 0:w.buttons)||null,x=_.useRef(null),v=_.useRef(null);return _.useEffect(()=>{if(y&&x.current&&v.current){const C=()=>{const L=x.current.offsetWidth;L>0&&(v.current.style.width=`${L}px`)};C();const S=new ResizeObserver(C);return S.observe(x.current),()=>{S.disconnect()}}},[y,b]),l.jsxs("div",{className:"message-with-buttons-wrapper",children:[l.jsxs("div",{ref:x,className:`bubble ${a?"me":"them"} ${h?"bubble--media":""} ${p?"bubble--deleted":""} ${g?"bubble--pinned":""}`,onContextMenu:s,style:{position:"relative"},children:[g&&l.jsx("div",{className:"bubble__pinned-indicator",title:"Message pingl",children:l.jsx(ON,{})}),p?l.jsx("span",{className:"bubble__text bubble__text--deleted",children:a?"Vous avez supprim ce message":"Ce message a t supprim"}):b,l.jsxs("div",{className:"bubble__footer",children:[l.jsxs("div",{className:"bubble__footer-left",children:[l.jsxs("small",{className:"bubble__timestamp",children:[o,m&&!p?"  modifi":""]}),!p&&l.jsx(GU,{message:n,conversation:e,onReactionChange:t,forceOpen:i})]}),!p&&l.jsx(YU,{status:n.status,isOwnMessage:a,conversation:e,messageTimestamp:n.timestamp,message:n,onResend:r})]})]}),y&&l.jsx("div",{ref:v,className:`bubble-buttons-wrapper ${a?"bubble-buttons-wrapper--me":"bubble-buttons-wrapper--them"}`,children:y})]})}async function qj(n,e){const t=new FormData;return t.append("file",e),(await oe.post(`/whatsapp/media/upload/${n}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}async function J$(n,e={}){return(await oe.get(`/whatsapp/templates/list/${n}`,{params:e})).data}async function q$(n,e){return(await oe.post(`/whatsapp/templates/create/${n}`,e)).data}async function Z$(n,e){return(await oe.delete(`/whatsapp/templates/delete/${n}`,{data:e})).data}async function xS(n){return(await oe.get(`/whatsapp/profile/${n}`)).data}async function K$(n,e){return(await oe.post(`/whatsapp/profile/${n}`,e)).data}async function X$(n){return(await oe.get(`/whatsapp/phone/details/${n}`)).data}async function eH(n){return(await oe.get(`/whatsapp/waba/details/${n}`)).data}function kl(n){if(!n||typeof n!="string")return[];const e=Hy(n),t=new Set,s=[];return e.forEach(i=>{const r=i.name||i.num;t.has(r)||(t.add(r),s.push(r))}),s}function tH(n){const e={header:[],body:[],footer:[],buttons:[]};return!n||!Array.isArray(n)||(n.forEach(t=>{var r;const s=(r=t.type)==null?void 0:r.toLowerCase(),i=t.text||"";s==="header"?e.header=kl(i):s==="body"?e.body=kl(i):s==="footer"?e.footer=kl(i):s==="buttons"&&t.buttons&&Array.isArray(t.buttons)&&t.buttons.forEach(a=>{if(a.text){const o=kl(a.text);e.buttons=[...e.buttons,...o]}})}),Object.keys(e).forEach(t=>{e[t]=[...new Set(e[t])].sort((s,i)=>typeof s=="number"&&typeof i=="number"?s-i:typeof s=="string"&&typeof i=="number"?1:typeof s=="number"&&typeof i=="string"?-1:typeof s=="string"&&typeof i=="string"?s.localeCompare(i):0)})),e}function Eo(n){var t;if(!n)return console.log(" hasTemplateVariables: template est null/undefined"),!1;if(console.log(" hasTemplateVariables: vrification du template",{name:n.name,hasComponents:!!n.components,componentsCount:((t=n.components)==null?void 0:t.length)||0}),n.components&&Array.isArray(n.components)){console.log(" hasTemplateVariables: vrification des components",n.components);const s=tH(n.components);if(console.log(" hasTemplateVariables: variables trouves dans components",s),s.header.length>0||s.body.length>0||s.footer.length>0||s.buttons.length>0)return console.log(" hasTemplateVariables: Variables dtectes dans les components"),!0}if(n.text||n.body){const s=n.text||n.body;console.log(" hasTemplateVariables: vrification du texte brut",s);const i=kl(s);if(console.log(" hasTemplateVariables: variables trouves dans le texte",i),i.length>0)return console.log(" hasTemplateVariables: Variables dtectes dans le texte brut"),!0}if(n.name&&kl(n.name).length>0)return console.log(" hasTemplateVariables: Variables dtectes dans le nom"),!0;const e=[...(n.components||[]).map(s=>s.text||""),n.text||"",n.body||"",n.name||""].filter(s=>s&&typeof s=="string");for(const s of e){const i=kl(s);if(i.length>0)return console.log(" hasTemplateVariables: Variables dtectes dans le texte (incluant {{}} vides):",i),!0;if(/\{\{\s*\}\}/.test(s))return console.warn(" hasTemplateVariables: Variables vides {{}} dtectes (vrification de secours) - format non standard Meta"),!0;if(/\{\{\s*[a-zA-Z_][a-zA-Z0-9_]*\s*\}\}/.test(s))return console.log(" hasTemplateVariables: Variables nommes dtectes (vrification de secours)"),!0}return console.log(" hasTemplateVariables: Aucune variable dtecte"),!1}function Hy(n){if(!n||typeof n!="string")return[];const e=[],t=new Set;let s=1;const i=/\{\{\s*(\d+)\s*\}\}/g;let r;for(;(r=i.exec(n))!==null;){const f=parseInt(r[1],10);t.has(r.index)||(t.add(r.index),e.push({num:f,name:null,pattern:r[0],position:r.index,isNumbered:!0,isNamed:!1}),f>=s&&(s=f+1),console.log(` extractTemplateVariablesWithMapping: Variable {{${f}}} trouve  la position ${r.index}`))}const a=/\{\{\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*\}\}/g;for(a.lastIndex=0;(r=a.exec(n))!==null;){const f=r[1];if(!t.has(r.index)){t.add(r.index);const d=s++;e.push({num:d,name:f,pattern:r[0],position:r.index,isNumbered:!1,isNamed:!0}),console.log(` extractTemplateVariablesWithMapping: Variable nomme {{${f}}} trouve  la position ${r.index}, assigne au numro ${d} pour l'ordre`)}}const o=/\{\{\s*\}\}/g;let c;for(o.lastIndex=0;(c=o.exec(n))!==null;)if(!t.has(c.index)){t.add(c.index);const f=s++;e.push({num:f,name:null,pattern:"{{}}",position:c.index,isNumbered:!1,isNamed:!1}),console.log(` extractTemplateVariablesWithMapping: Variable vide {{}} assigne au numro ${f}  la position ${c.index}`)}return e.sort((f,d)=>f.position-d.position),e}function nH(n,e){if(!n||!n.components)return[];console.log(" buildTemplateComponents: Construction des components",{templateName:n.name,variableValues:e});const t=[];return n.components.forEach((s,i)=>{var c;const r=(c=s.type)==null?void 0:c.toUpperCase(),a=s.text||"";if(r==="HEADER"&&s.format&&["IMAGE","VIDEO","DOCUMENT"].includes(s.format)){console.log(` buildTemplateComponents: Component ${i} (${r}) ignor (mdia)`);return}const o=Hy(a);if(console.log(` buildTemplateComponents: Component ${i} (${r})`,{text:a.substring(0,200),variableMapping:o,hasVariables:o.length>0}),o.length>0){const f=new Set,d=[],h=new Map,p=[...o].sort((g,w)=>g.position-w.position);console.log(` buildTemplateComponents: Variables tries par position pour ${r}:`,p.map(g=>({num:g.num,name:g.name,position:g.position,pattern:g.pattern}))),p.forEach(({num:g,name:w,pattern:b,position:y,isNumbered:x,isNamed:v})=>{if(!f.has(g)){f.add(g);const C=e[g]||e[String(g)]||"",S=v&&w?`${w} (${g})`:g;h.has(g)||(C&&C.trim()!==""?(h.set(g,{type:"text",text:C.trim()}),console.log(` buildTemplateComponents: Paramtre ajout pour variable ${S} (pattern: "${b}", position: ${y}, isNamed: ${v}): "${C.trim()}"`)):console.warn(` buildTemplateComponents: Variable ${S} a une valeur vide, paramtre non ajout`))}}),Array.from(h.keys()).sort((g,w)=>g-w).forEach(g=>{const w=h.get(g);w&&d.push(w)}),d.length>0?(t.push({type:r,parameters:d}),console.log(` buildTemplateComponents: Component ${r} ajout avec ${d.length} paramtres`),console.log(" buildTemplateComponents: Paramtres dans l'ordre (squentiel 1, 2, 3...):",d.map((g,w)=>{var b,y,x;return{index:w+1,type:g.type,text:((b=g.text)==null?void 0:b.substring(0,50))+(((y=g.text)==null?void 0:y.length)>50?"...":""),textLength:((x=g.text)==null?void 0:x.length)||0}}))):(console.warn(` buildTemplateComponents: Aucun paramtre valide pour le component ${r} (${o.length} variables dtectes mais aucune valeur remplie), component non ajout`),console.warn(" buildTemplateComponents: Variables dtectes:",o.map(g=>({num:g.num,name:g.name,pattern:g.pattern,valueInVariableValues:e[g.num]||e[String(g.num)]||"VIDE"}))))}}),console.log(" buildTemplateComponents: Rsultat final",{componentsCount:t.length,components:t}),t}function sH({template:n,onClose:e,onSend:t,isOpen:s}){const[i,r]=_.useState({}),[a,o]=_.useState({}),c=_.useMemo(()=>{if(!n||!n.components||!Array.isArray(n.components))return[];const m=[],g=new Set;return console.log(" TemplateVariablesModal: Analyse des components",{templateName:n.name,componentsCount:n.components.length,components:n.components.map(w=>{var b;return{type:w.type,text:(b=w.text)==null?void 0:b.substring(0,100),hasText:!!w.text}})}),n.components.forEach((w,b)=>{const y=(w.type||"").toUpperCase(),x=w.text||"";if(console.log(` Component ${b}:`,{type:y,textLength:x.length,text:x.substring(0,200),hasText:!!x}),x){const v=kl(x);console.log(` Component ${b} (${y}): Variables trouves:`,v);const C=Hy(x);v.forEach(S=>{const L=C.find(T=>typeof S=="string"?T.name===S:T.num===S);if(!L){console.warn(` TemplateVariablesModal: Variable ${S} non trouve dans le mapping`);return}const k=L.num,A=`${y}-${k}`;if(!g.has(A)){g.add(A);let T=L.isNamed&&L.name?L.name:`Variable ${k}`;y==="HEADER"?T+=" (En-tte)":y==="BODY"?T+=" (Corps)":y==="FOOTER"?T+=" (Pied de page)":y==="BUTTONS"&&(T+=" (Boutons)"),m.push({num:k,name:L.name||null,type:y.toLowerCase(),label:T,component:w,originalText:x}),console.log(` TemplateVariablesModal: Variable ajoute - num: ${k}, name: ${L.name||"null"}, isNamed: ${L.isNamed}, label: ${T}`)}})}}),m.sort((w,b)=>w.num-b.num),console.log(" TemplateVariablesModal: Variables finales dtectes",{count:m.length,variables:m.map(w=>({num:w.num,label:w.label}))}),m},[n==null?void 0:n.name,n!=null&&n.components?JSON.stringify(n.components):null]);_.useEffect(()=>{if(c.length>0){console.log(" TemplateVariablesModal: Initialisation des valeurs pour",c.length,"variables");const m={};c.forEach(g=>{m[g.num]=""}),r(m),o({})}else r({}),o({})},[c]);const f=_.useMemo(()=>{if(!n||!n.components)return"";let m=[];(n.components||[]).forEach(y=>{y.type==="HEADER"&&y.text&&y.format!=="IMAGE"&&y.format!=="VIDEO"&&y.format!=="DOCUMENT"?(m.push({text:y.text,type:"HEADER"}),m.push({text:`

`,type:"SPACER"})):y.type==="BODY"&&y.text?m.push({text:y.text,type:"BODY"}):y.type==="FOOTER"&&y.text&&(m.push({text:`

`,type:"SPACER"}),m.push({text:y.text,type:"FOOTER"}))}),console.log(" templatePreview (useMemo): Preview parts",m),console.log(" templatePreview (useMemo): Variables  remplacer",i),console.log(" templatePreview (useMemo): allVariables",c);const b=m.map(y=>{if(y.type==="SPACER")return y.text;let x=y.text;const v=Hy(y.text);return console.log(` templatePreview (useMemo): Component ${y.type} - Texte original:`,y.text),console.log(` templatePreview (useMemo): Component ${y.type} - Variables trouves:`,v),console.log(` templatePreview (useMemo): Component ${y.type} - variableValues disponibles:`,i),[...v].sort((S,L)=>L.position-S.position).forEach(({num:S,name:L,pattern:k,position:A,isNumbered:T,isNamed:I})=>{const N=i[S]||i[String(S)]||"",R=I&&L?`${L} (${S})`:S;if(console.log(` templatePreview (useMemo): Variable ${R} (pattern: "${k}", position: ${A}, isNamed: ${I}) -> valeur: "${N}"`),N){const B=x.substring(0,A),P=x.substring(A+k.length);x=B+N+P,console.log(` templatePreview (useMemo): Remplacement de "${k}" par "${N}" effectu`)}else console.warn(` templatePreview (useMemo): Aucune valeur trouve pour la variable ${R} (pattern: "${k}")`)}),x}).join("");return console.log(" templatePreview (useMemo): Texte final aprs remplacement",b),b},[n,i,c]),d=(m,g)=>{r(w=>({...w,[m]:g})),a[m]&&o(w=>{const b={...w};return delete b[m],b})},h=()=>{const m={};return c.forEach(g=>{(!i[g.num]||i[g.num].trim()==="")&&(m[g.num]="Cette variable est requise")}),o(m),Object.keys(m).length===0},p=()=>{if(!h())return;const m=nH(n,i);t(m),e()};return!s||!n?null:l.jsx("div",{className:"template-variables-modal-overlay",onClick:e,children:l.jsxs("div",{className:"template-variables-modal",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"template-variables-modal__header",children:[l.jsx("h3",{className:"template-variables-modal__title",children:"Remplir les variables du template"}),l.jsx("button",{className:"template-variables-modal__close",onClick:e,"aria-label":"Fermer",children:l.jsx(Ms,{})})]}),l.jsxs("div",{className:"template-variables-modal__content",children:[l.jsxs("div",{className:"template-variables-modal__info",children:[l.jsx("strong",{children:n.name}),l.jsx("span",{className:"template-variables-modal__category",children:n.category})]}),c.length===0?l.jsxs("div",{className:"template-variables-modal__no-vars",children:[l.jsx("p",{children:"Ce template n'a pas de variables  remplir."}),(n==null?void 0:n.components)&&n.components.length>0&&l.jsxs("details",{style:{marginTop:"12px",fontSize:"12px",color:"rgba(255, 255, 255, 0.6)"},children:[l.jsx("summary",{style:{cursor:"pointer",marginBottom:"8px"},children:"Dtails du template (debug)"}),l.jsx("pre",{style:{background:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",overflow:"auto",fontSize:"11px",maxHeight:"200px"},children:JSON.stringify(n.components.map(m=>({type:m.type,text:m.text,format:m.format})),null,2)})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"template-variables-modal__form",children:c.map(m=>l.jsxs("div",{className:"template-variables-modal__field",children:[l.jsxs("label",{className:"template-variables-modal__label",children:[m.label,l.jsx("span",{className:"template-variables-modal__required",children:"*"})]}),l.jsx("input",{type:"text",className:`template-variables-modal__input ${a[m.num]?"template-variables-modal__input--error":""}`,value:i[m.num]||"",onChange:g=>d(m.num,g.target.value),placeholder:m.name?`Valeur pour {{${m.name}}}`:`Valeur pour {{${m.num}}}`,maxLength:32768}),a[m.num]&&l.jsx("span",{className:"template-variables-modal__error",children:a[m.num]})]},m.num))}),l.jsxs("div",{className:"template-variables-modal__preview",children:[l.jsx("div",{className:"template-variables-modal__preview-title",children:"Aperu du message"}),l.jsx("div",{className:"template-variables-modal__preview-content",children:f||"Aperu non disponible"})]})]})]}),l.jsxs("div",{className:"template-variables-modal__footer",children:[l.jsx("button",{className:"template-variables-modal__cancel",onClick:e,children:"Annuler"}),l.jsxs("button",{className:"template-variables-modal__send",onClick:p,disabled:c.length>0&&Object.keys(a).length>0,children:[l.jsx(mi,{style:{marginRight:"8px"}}),"Envoyer"]})]})]})})}function iH({conversation:n,onSend:e,disabled:t=!1,editingMessage:s=null,onCancelEdit:i,accountId:r=null,messages:a=[]}){const[o,c]=_.useState(""),[f,d]=_.useState(!1),[h,p]=_.useState(!1),[m,g]=_.useState(!1),[w,b]=_.useState("text"),[y,x]=_.useState(!1),[v,C]=_.useState(null),[S,L]=_.useState(!1),[k,A]=_.useState([]),[T,I]=_.useState(!1),[N,R]=_.useState(!1),[B,P]=_.useState(!1),[Y,$]=_.useState(null),X=_.useRef(null),O=_.useRef(!1),[G,ne]=_.useState(null),[de,le]=_.useState(!1),[H,me]=_.useState(!1),[q,ce]=_.useState(null),[we,Qe]=_.useState([]),[dt,Je]=_.useState(!1),[Q,ae]=_.useState(null),[Ne,Re]=_.useState(!0),Te=Tg(),$t=_.useRef(null),hs=_.useRef(null),jt=_.useRef(null),gn=_.useRef(null),[V,he]=_.useState([{id:"",title:""}]),[J,Ae]=_.useState(""),[xe,ze]=_.useState(""),[Ie,z]=_.useState([{title:"",rows:[{id:"",title:"",description:""}]}]),[U,se]=_.useState("Voir les options"),_e=D=>Te!=null&&Te.emojiReplace?D.replace(/:\)/g,"").replace(/:\("/g,"").replace(/<3/g,"").replace(/;\)/g,""):D;_.useEffect(()=>{function D(Z){$t.current&&!$t.current.contains(Z.target)&&p(!1),hs.current&&!hs.current.contains(Z.target)&&g(!1)}return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]),_.useEffect(()=>{s&&c(s.content_text||"")},[s]);const W=_.useCallback(D=>{const Z=D.timestamp||D.created_at;if(!Z)return 0;if(typeof Z=="number")return Z;const be=new Date(Z);return isNaN(be.getTime())?0:be.getTime()},[]),Me=_.useMemo(()=>{if(!a||a.length===0)return!1;const Z=a.filter(re=>{var Zl;const ie=re.direction==="inbound",K=!((Zl=re.id)!=null&&Zl.startsWith("temp-")),On=re.message_type!=="status";return ie&&K&&On}).sort((re,ie)=>{const K=W(re);return W(ie)-K})[0],Ce=a.filter(re=>{var Kh;if(re.direction!=="outbound"||(Kh=re.id)!=null&&Kh.startsWith("temp-")||re.message_type==="status")return!1;const ie=re.template_name&&re.template_name.trim()!=="",K=re.message_type==="template",On=re.message_type==="image"&&ie,Zl=re.message_type==="text"&&ie;return ie||K||On||Zl}).sort((re,ie)=>{const K=W(re);return W(ie)-K})[0];if(!Ce)return!1;const Se=W(Ce);let at=!1;if(Ce.interactive_data)try{const re=typeof Ce.interactive_data=="string"?JSON.parse(Ce.interactive_data):Ce.interactive_data;re&&re.buttons&&Array.isArray(re.buttons)&&(at=re.buttons.some(ie=>ie.type==="QUICK_REPLY"||ie.type==="URL"||ie.type==="PHONE_NUMBER"))}catch(re){console.warn(" [TEMPLATE] Erreur lors du parsing de interactive_data:",re)}if(!Z)return!0;const Ve=W(Z);return Se>Ve},[a,W]);_.useEffect(()=>{if(!a||a.length===0||!(n!=null&&n.id))return;const D=a.filter(Z=>{var at;const be=Z.direction==="inbound",Ce=!((at=Z.id)!=null&&at.startsWith("temp-")),Se=Z.message_type!=="status";return be&&Ce&&Se}).sort((Z,be)=>{const Ce=W(Z);return W(be)-Ce})[0];if(D){const Z=D.id;Y!==null&&Z!==Y&&(console.log(" Nouveau message client dtect, rinitialisation de templateSent et vrification immdiate de la fentre gratuite"),P(!1),me(!1),M1(n.id).then(be=>{var Se;const Ce=((Se=be.data)==null?void 0:Se.is_free)??!0;R(!Ce),O.current=!Ce,Ce&&A([])}).catch(be=>{console.error("Error checking free window after new message:",be)})),$(Z)}},[a,Y,n==null?void 0:n.id,W]),_.useEffect(()=>{if(!(n!=null&&n.id)){R(!1),A([]),P(!1),$(null),me(!1),ce(null),Qe([]),ae(null),Re(!0),X.current=null,O.current=!1;return}$(null),me(!1),ce(null),Qe([]),ae(null),X.current=null,O.current=!1},[n==null?void 0:n.id]),_.useEffect(()=>{if(!(n!=null&&n.id)){R(!1),A([]),P(!1);return}(async()=>{var Z,be;try{const Se=((Z=(await M1(n.id)).data)==null?void 0:Z.is_free)??!0,at=O.current,Ve=!Se;if(R(Ve),O.current=Ve,Se)A([]),at&&B&&(console.log(" Passage de 'hors fentre'  'dans la fentre' (nouveau message client), rinitialisation de templateSent"),P(!1));else{I(!0);try{const re=((be=(await EL(n.id)).data)==null?void 0:be.templates)||[];A(re),q&&!re.find(ie=>ie.name===q.name)?ce(re.length>0?re[0]:null):!q&&re.length>0&&ce(re[0])}catch(pe){console.error("Error loading templates:",pe),A([]),ce(null)}finally{I(!1)}}}catch(Ce){console.error("Error checking free window:",Ce),R(!1),O.current=!1,A([])}})()},[n==null?void 0:n.id]),_.useEffect(()=>{if(!(n!=null&&n.id)||!o.trim()||w!=="text"||N){C(null);return}const Z=setTimeout(async()=>{L(!0);try{const be=await M1(n.id);C(be.data)}catch(be){console.error("Error loading price:",be),C(null)}finally{L(!1)}},500);return()=>clearTimeout(Z)},[o,n==null?void 0:n.id,w,N]);const De=async()=>{var Ce,Se,at,Ve,pe,re;if(t||!o.trim()||!(n!=null&&n.id))return;const D=o,be={id:`temp-${Date.now()}`,conversation_id:n.id,direction:"outbound",content_text:D,status:"pending",timestamp:new Date().toISOString(),message_type:"text"};e&&e(D,!1,be),c(""),d(!1),b("text");try{await v5({conversation_id:n.id,content:D})}catch(ie){console.error(" [FRONTEND] Erreur lors de l'envoi:",ie),console.error(" [FRONTEND] Dtails de l'erreur:",{message:ie.message,response:(Ce=ie.response)==null?void 0:Ce.data,status:(Se=ie.response)==null?void 0:Se.status,url:(at=ie.config)==null?void 0:at.url}),e&&e("",!0),c(D);const K=(Ve=ie.response)==null?void 0:Ve.data;(pe=K==null?void 0:K.detail)!=null&&pe.errors?(console.error(" [FRONTEND] Erreurs de validation:",K.detail.errors),alert(`Erreur de validation:
${K.detail.errors.join(`
`)}`)):(re=K==null?void 0:K.detail)!=null&&re.message?(console.error(" [FRONTEND] Message d'erreur:",K.detail.message),alert(`Erreur: ${K.detail.message}`)):K!=null&&K.detail?(console.error(" [FRONTEND] Erreur (string):",K.detail),alert(`Erreur: ${K.detail}`)):(console.error(" [FRONTEND] Erreur inconnue:",ie),alert(`Erreur lors de l'envoi: ${ie.message||"Erreur inconnue"}`))}},gt=async(D,Z=null)=>{var Zl,Kh,aC,oC,lC,cC,uC,fC,dC,hC,pC,mC,gC;if(console.log(" [FRONTEND] handleSendTemplate appel",{disabled:t,conversationId:n==null?void 0:n.id,template:D.name,hasComponents:!!Z,templateComponents:D.components}),t||!(n!=null&&n.id)){console.log(" [FRONTEND] handleSendTemplate annul - disabled:",t,"conversationId:",n==null?void 0:n.id);return}const be=Eo(D);if(console.log(" [FRONTEND] Vrification variables:",{templateName:D.name,hasVariables:be,components:D.components,hasComponentsParam:!!Z}),be&&!Z){console.log(" [FRONTEND] Template avec variables dtect, ouverture de la modale"),ne(D),le(!0);return}const Ce=(Zl=D.components)==null?void 0:Zl.find(qe=>qe.type==="BODY"),Se=(Kh=D.components)==null?void 0:Kh.find(qe=>qe.type==="HEADER"),at=(aC=D.components)==null?void 0:aC.find(qe=>qe.type==="FOOTER"),Ve=(oC=D.components)==null?void 0:oC.find(qe=>qe.type==="BUTTONS"),pe=(qe,Ti)=>{if(!qe||!Ti)return qe;let Xn=qe;return Ti.forEach(wa=>{wa.parameters&&wa.parameters.forEach((ya,qg)=>{ya.type==="text"&&ya.text&&(Xn=Xn.replace(new RegExp(`\\{\\{${qg+1}\\}\\}`,"g"),ya.text))})}),Xn};let re="";if(Se!=null&&Se.text&&Se.format!=="IMAGE"&&Se.format!=="VIDEO"&&Se.format!=="DOCUMENT"){const qe=pe(Se.text,Z);qe&&(re=qe+`

`)}if(Ce!=null&&Ce.text){const qe=pe(Ce.text,Z);re+=qe}else re+=D.name;if(at!=null&&at.text){const qe=pe(at.text,Z);qe&&(re=re?`${re}

${qe}`:qe)}const ie=`temp-template-${Date.now()}`,K=D.header_media_url||((cC=(lC=Se==null?void 0:Se.example)==null?void 0:lC.header_handle)==null?void 0:cC[0])||(Se==null?void 0:Se.format)==="IMAGE"&&((fC=(uC=Se==null?void 0:Se.example)==null?void 0:uC.header_handle)==null?void 0:fC[0]),On={id:ie,client_temp_id:ie,conversation_id:n.id,direction:"outbound",content_text:re,status:"pending",timestamp:new Date().toISOString(),message_type:K?"image":"template",template_name:D.name,template_language:D.language||"fr",storage_url:K||null};if(Ve!=null&&Ve.buttons){const qe=Ve.buttons.slice(0,5).map(Ti=>({type:Ti.type||"QUICK_REPLY",text:Ti.text||"",url:Ti.url||"",phone_number:Ti.phone_number||""}));On.interactive_data=JSON.stringify({type:"button",buttons:qe})}if(Z){const qe={};Z.forEach(Ti=>{Ti.parameters&&Ti.parameters.forEach((Xn,wa)=>{Xn.type==="text"&&Xn.text&&(qe[String(wa+1)]=Xn.text)})}),Object.keys(qe).length>0&&(On.template_variables=JSON.stringify(qe))}e&&e(re,!1,On),x(!0);try{const qe={template_name:D.name,language_code:D.language||"fr"};Z&&Z.length>0&&(qe.components=Z),console.log(" [FRONTEND] ========== ENVOI TEMPLATE =========="),console.log(" [FRONTEND] Template info:",{conversationId:n.id,templateName:D.name,languageCode:D.language||"fr",componentsCount:(Z==null?void 0:Z.length)||0,hasHeaderImage:!!D.header_media_url,headerMediaType:D.header_media_type||null,headerMediaUrl:D.header_media_url||null}),console.log(" [FRONTEND] Payload complet:",JSON.stringify(qe,null,2)),console.log(" [FRONTEND] Components dtaills:",Z==null?void 0:Z.map((Xn,wa)=>{var ya,qg;return{index:wa,type:Xn.type,format:Xn.format||null,parametersCount:((ya=Xn.parameters)==null?void 0:ya.length)||0,parameters:(qg=Xn.parameters)==null?void 0:qg.map((Kl,GI)=>{var wC,yC,bC;return{index:GI,type:Kl.type,text:((wC=Kl.text)==null?void 0:wC.substring(0,100))+(((yC=Kl.text)==null?void 0:yC.length)>100?"...":""),textLength:((bC=Kl.text)==null?void 0:bC.length)||0,image:Kl.image||null,video:Kl.video||null,document:Kl.document||null}})}})),console.log(" [FRONTEND] ====================================");const Ti=await b5(n.id,qe);console.log(" [FRONTEND] Template envoy avec succs:",Ti),me(!1),ce(null),e==null||e("",!0),M1(n.id).then(Xn=>{var ya;const wa=((ya=Xn.data)==null?void 0:ya.is_free)??!0;R(!wa),O.current=!wa}).catch(Xn=>{console.error("Error checking free window after template:",Xn)}),setTimeout(()=>{e==null||e("",!0)},500)}catch(qe){console.error(" [FRONTEND] Erreur lors de l'envoi du template:",qe),console.error(" [FRONTEND] Dtails de l'erreur:",{message:qe.message,response:(dC=qe.response)==null?void 0:dC.data,status:(hC=qe.response)==null?void 0:hC.status,url:(pC=qe.config)==null?void 0:pC.url}),alert(`Erreur lors de l'envoi du template: ${((gC=(mC=qe.response)==null?void 0:mC.data)==null?void 0:gC.detail)||qe.message}`),e&&e("",!0)}finally{x(!1)}},Kn=D=>{G&&gt(G,D),le(!1),ne(null)},Vs=()=>{le(!1),ne(null)};_.useEffect(()=>{if(!gn.current)return;const D=gn.current;D.style.height="auto",D.style.height=`${Math.min(D.scrollHeight,180)}px`},[o]);const Zh=async D=>{var be,Ce,Se,at;if(console.log("handleMediaSend called with file:",D==null?void 0:D.name,D==null?void 0:D.type),!(n!=null&&n.id)){console.error("No conversation ID"),alert("Aucune conversation slectionne");return}const Z=r||(n==null?void 0:n.account_id);if(console.log("Account ID to use:",Z,"from prop:",r,"from conversation:",n==null?void 0:n.account_id),!Z){console.error("Conversation object:",n),console.error("AccountId prop:",r),alert("Impossible de dterminer le compte WhatsApp. Veuillez recharger la page.");return}x(!0),p(!1);try{console.log("Uploading media to account:",Z);const Ve=await qj(Z,D);console.log("Upload result:",Ve);const pe=(be=Ve.data)==null?void 0:be.id;if(!pe){console.error("No media ID returned from upload"),alert("Erreur lors de l'upload du fichier. Aucun ID mdia retourn.");return}console.log("Media uploaded successfully, media ID:",pe);let re="document";D.type.startsWith("image/")?re="image":D.type.startsWith("audio/")?re="audio":D.type.startsWith("video/")&&(re="video"),console.log("Sending media message, type:",re,"conversation:",n.id),await zN({conversation_id:n.id,media_type:re,media_id:pe,caption:o||void 0}),console.log("Media message sent successfully"),c(""),d(!1),b("text"),e==null||e("")}catch(Ve){console.error("Erreur envoi mdia:",Ve),console.error("Error details:",((Ce=Ve.response)==null?void 0:Ce.data)||Ve.message),alert(`Erreur lors de l'envoi du fichier: ${((at=(Se=Ve.response)==null?void 0:Se.data)==null?void 0:at.detail)||Ve.message||"Erreur inconnue"}`)}finally{x(!1)}},tv=D=>{c(o+D.emoji),g(!1)},nv=()=>{console.log("openMediaPicker called"),p(!1),jt.current?(console.log("Clicking file input"),jt.current.click()):console.error("fileInputRef.current is null")},sv=async D=>{var Z;if(b(D),p(!1),d(!0),D==="template"&&(n!=null&&n.id)){Je(!0);try{const Ce=((Z=(await EL(n.id)).data)==null?void 0:Z.templates)||[];Qe(Ce),Ce.length>0&&!Q&&ae(Ce[0])}catch(be){console.error("Error loading templates for menu:",be),Qe([])}finally{Je(!1)}}},DI=async()=>{var Se,at,Ve,pe,re;if(console.log(" [FRONTEND] handleButtonsSend appel",{mode:w,text:o,buttons:V,headerText:J,footerText:xe}),!(n!=null&&n.id)||!o.trim()){console.warn(" [FRONTEND] handleButtonsSend annul: conversation ou text manquant");return}const D=V.filter(ie=>ie.id&&ie.title).slice(0,3);if(console.log(" [FRONTEND] Boutons valides:",D),D.length===0){alert("Ajoutez au moins un bouton");return}let Z="";J&&(Z+=`${J}

`),Z+=o,xe&&(Z+=`

${xe}`);const Ce={id:`temp-buttons-${Date.now()}`,conversation_id:n.id,direction:"outbound",content_text:Z,status:"pending",timestamp:new Date().toISOString(),message_type:"interactive",interactive_data:JSON.stringify({type:"button",header:J||null,body:o,footer:xe||null,buttons:D.map(ie=>({type:"QUICK_REPLY",text:ie.title}))})};e&&e(Z,!1,Ce),c(""),he([{id:"",title:""}]),Ae(""),ze(""),d(!1),b("text");try{const ie={conversation_id:n.id,interactive_type:"button",body_text:o,buttons:D,header_text:J||void 0,footer_text:xe||void 0};console.log(" [FRONTEND] Envoi sendInteractiveMessage avec payload:",ie);const K=await SL(ie);console.log(" [FRONTEND] Rponse reue:",K),e==null||e("",!0)}catch(ie){console.error("Erreur envoi boutons:",ie),console.error("Dtails de l'erreur:",{message:ie.message,response:(Se=ie.response)==null?void 0:Se.data,status:(at=ie.response)==null?void 0:at.status}),e&&e("",!0),c(Z);const K=(Ve=ie.response)==null?void 0:Ve.data;(pe=K==null?void 0:K.detail)!=null&&pe.errors?alert(`Erreur de validation:
${K.detail.errors.join(`
`)}`):(re=K==null?void 0:K.detail)!=null&&re.message?alert(`Erreur: ${K.detail.message}`):K!=null&&K.detail?alert(`Erreur: ${K.detail}`):alert(`Erreur lors de l'envoi: ${ie.message||"Erreur inconnue"}`)}},PI=async()=>{var Se,at,Ve,pe,re;if(console.log(" [FRONTEND] handleListSend appel",{mode:w,text:o,listSections:Ie,headerText:J,footerText:xe,buttonText:U}),!(n!=null&&n.id)||!o.trim()){console.warn(" [FRONTEND] handleListSend annul: conversation ou text manquant");return}const D=Ie.map(ie=>({title:ie.title,rows:ie.rows.filter(K=>K.id&&K.title)})).filter(ie=>ie.rows.length>0);if(console.log(" [FRONTEND] Sections valides:",D),D.length===0){alert("Ajoutez au moins une section avec des lignes");return}let Z="";J&&(Z+=`${J}

`),Z+=o,xe&&(Z+=`

${xe}`);const Ce={id:`temp-list-${Date.now()}`,conversation_id:n.id,direction:"outbound",content_text:Z,status:"pending",timestamp:new Date().toISOString(),message_type:"interactive",interactive_data:JSON.stringify({type:"list",header:J||null,body:o,footer:xe||null,button_text:U,sections:D})};e&&e(Z,!1,Ce),c(""),z([{title:"",rows:[{id:"",title:"",description:""}]}]),Ae(""),ze(""),se("Voir les options"),d(!1),b("text");try{const ie={conversation_id:n.id,interactive_type:"list",body_text:o,button_text:U,sections:D,header_text:J||void 0,footer_text:xe||void 0};console.log(" [FRONTEND] Envoi sendInteractiveMessage avec payload:",ie);const K=await SL(ie);console.log(" [FRONTEND] Rponse reue:",K),e==null||e("",!0)}catch(ie){console.error("Erreur envoi liste:",ie),console.error("Dtails de l'erreur:",{message:ie.message,response:(Se=ie.response)==null?void 0:Se.data,status:(at=ie.response)==null?void 0:at.status}),e&&e("",!0),c(Z);const K=(Ve=ie.response)==null?void 0:Ve.data;(pe=K==null?void 0:K.detail)!=null&&pe.errors?alert(`Erreur de validation:
${K.detail.errors.join(`
`)}`):(re=K==null?void 0:K.detail)!=null&&re.message?alert(`Erreur: ${K.detail.message}`):K!=null&&K.detail?alert(`Erreur: ${K.detail}`):alert(`Erreur lors de l'envoi: ${ie.message||"Erreur inconnue"}`)}},RI=()=>{V.length<3&&he([...V,{id:"",title:""}])},rC=(D,Z,be)=>{const Ce=[...V];Ce[D][Z]=be,he(Ce)},OI=D=>{he(V.filter((Z,be)=>be!==D))},zI=()=>{z([...Ie,{title:"",rows:[{id:"",title:"",description:""}]}])},BI=(D,Z,be)=>{const Ce=[...Ie];Ce[D][Z]=be,z(Ce)},FI=D=>{const Z=[...Ie];Z[D].rows.push({id:"",title:"",description:""}),z(Z)},iv=(D,Z,be,Ce)=>{const Se=[...Ie];Se[D].rows[Z][be]=Ce,z(Se)},UI=(D,Z)=>{const be=[...Ie];be[D].rows=be[D].rows.filter((Ce,Se)=>Se!==Z),z(be)},$I=()=>l.jsxs("div",{className:"message-preview",children:[l.jsx("div",{className:"message-preview__title",children:"Aperu du message"}),l.jsxs("div",{className:"message-preview__container",children:[l.jsxs("div",{className:"message-preview__bubble",children:[J&&l.jsx("div",{className:"message-preview__header",children:J}),l.jsx("div",{className:"message-preview__body",children:o||"Votre texte principal..."}),xe&&l.jsx("div",{className:"message-preview__footer",children:xe})]}),l.jsxs("div",{className:"message-preview__buttons",children:[V.filter(D=>D.title).map((D,Z)=>l.jsx("button",{className:"message-preview__button",children:D.title},Z)),V.filter(D=>D.title).length===0&&l.jsx("button",{className:"message-preview__button message-preview__button--placeholder",children:"Bouton 1"})]})]}),l.jsx("div",{className:"message-preview__note",children:" Les boutons permettent  l'utilisateur de rpondre rapidement. La rponse apparatra comme un message normal dans le chat."})]}),HI=()=>l.jsxs("div",{className:"message-preview",children:[l.jsx("div",{className:"message-preview__title",children:"Aperu du message"}),l.jsxs("div",{className:"message-preview__container",children:[l.jsxs("div",{className:"message-preview__bubble",children:[J&&l.jsx("div",{className:"message-preview__header",children:J}),l.jsx("div",{className:"message-preview__body",children:o||"Votre texte principal..."}),xe&&l.jsx("div",{className:"message-preview__footer",children:xe})]}),l.jsxs("button",{className:"message-preview__list-button",children:[l.jsx(gx,{})," ",U]})]}),l.jsx("div",{className:"message-preview__note",children:" L'utilisateur pourra choisir une option dans la liste. Sa slection apparatra comme un message."})]});return l.jsxs("div",{className:`input-area-advanced ${t?"disabled":""}`,children:[f&&l.jsxs("div",{className:"advanced-options",children:[l.jsxs("div",{className:"advanced-header",children:[l.jsx("h3",{className:"advanced-title",children:w==="buttons"?"Message avec boutons":w==="list"?"Message avec liste":w==="template"?"Envoyer un template":"Options"}),l.jsx("button",{className:"advanced-close",onClick:()=>{d(!1),w==="template"&&(ae(null),Qe([]))},title:"Fermer",children:l.jsx(Ms,{})})]}),l.jsxs("div",{className:"advanced-content",children:[w==="buttons"&&l.jsxs("div",{className:"interactive-config",children:[l.jsxs("div",{className:"interactive-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:["En-tte (optionnel)",l.jsx("span",{className:"tooltip",title:"Titre qui apparat en haut du message",children:l.jsx(iw,{})})]}),l.jsx("input",{type:"text",placeholder:"Ex: Choisissez une option",value:J,onChange:D=>Ae(D.target.value),className:"form-input"})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:["Pied de page (optionnel)",l.jsx("span",{className:"tooltip",title:"Texte en petits caractres en bas du message",children:l.jsx(iw,{})})]}),l.jsx("input",{type:"text",placeholder:"Ex: Valable jusqu'au 31/12",value:xe,onChange:D=>ze(D.target.value),className:"form-input"})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:["Boutons (max 3)",l.jsx("span",{className:"tooltip",title:"Les boutons sur lesquels l'utilisateur peut cliquer",children:l.jsx(iw,{})})]}),l.jsxs("div",{className:"buttons-list",children:[V.map((D,Z)=>l.jsxs("div",{className:"button-row",children:[l.jsxs("div",{className:"button-row__fields",children:[l.jsx("input",{type:"text",placeholder:`ID (ex: btn${Z+1})`,value:D.id,onChange:be=>rC(Z,"id",be.target.value),className:"form-input form-input--small",title:"Identifiant unique pour ce bouton (non visible par l'utilisateur)"}),l.jsx("input",{type:"text",placeholder:"Texte du bouton (max 20)",value:D.title,onChange:be=>rC(Z,"title",be.target.value.slice(0,20)),className:"form-input form-input--flex",title:"Texte visible sur le bouton"})]}),V.length>1&&l.jsx("button",{onClick:()=>OI(Z),className:"btn-remove",title:"Supprimer",children:l.jsx(Ms,{})})]},Z)),V.length<3&&l.jsx("button",{onClick:RI,className:"btn-add",children:"+ Ajouter un bouton"})]})]})]}),l.jsx($I,{})]}),w==="list"&&l.jsxs("div",{className:"interactive-config",children:[l.jsxs("div",{className:"interactive-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Texte du bouton"}),l.jsx("input",{type:"text",placeholder:"Ex: Voir les options",value:U,onChange:D=>se(D.target.value),className:"form-input"})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"En-tte (optionnel)"}),l.jsx("input",{type:"text",placeholder:"Titre du message",value:J,onChange:D=>Ae(D.target.value),className:"form-input"})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Pied de page (optionnel)"}),l.jsx("input",{type:"text",placeholder:"Informations supplmentaires",value:xe,onChange:D=>ze(D.target.value),className:"form-input"})]}),Ie.map((D,Z)=>l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:["Section ",Z+1]}),l.jsx("input",{type:"text",placeholder:"Titre de la section",value:D.title,onChange:be=>BI(Z,"title",be.target.value),className:"form-input section-title"}),D.rows.map((be,Ce)=>l.jsxs("div",{className:"row-config",children:[l.jsx("input",{type:"text",placeholder:"ID",value:be.id,onChange:Se=>iv(Z,Ce,"id",Se.target.value),className:"form-input form-input--small"}),l.jsx("input",{type:"text",placeholder:"Titre",value:be.title,onChange:Se=>iv(Z,Ce,"title",Se.target.value),className:"form-input"}),l.jsx("input",{type:"text",placeholder:"Description (opt.)",value:be.description,onChange:Se=>iv(Z,Ce,"description",Se.target.value),className:"form-input"}),D.rows.length>1&&l.jsx("button",{onClick:()=>UI(Z,Ce),className:"btn-remove",children:l.jsx(Ms,{})})]},Ce)),l.jsx("button",{onClick:()=>FI(Z),className:"btn-add-small",children:"+ Ligne"})]},Z)),l.jsx("button",{onClick:zI,className:"btn-add",children:"+ Nouvelle section"})]}),l.jsx(HI,{})]}),w==="template"&&l.jsx("div",{className:"template-selector-menu",children:dt?l.jsx("div",{className:"template-selector-menu__loading",children:"Chargement des templates..."}):we.length===0?l.jsx("div",{className:"template-selector-menu__empty",children:"Aucun template UTILITY, MARKETING ou AUTHENTICATION disponible. Crez-en un dans Meta Business Manager."}):l.jsxs("div",{className:"template-selector-menu__container",children:[l.jsx("div",{className:"template-selector-menu__sidebar",children:l.jsx("div",{className:"template-selector-menu__sidebar-list",children:we.map((D,Z)=>{var Ve;const be=(Ve=D.components)==null?void 0:Ve.find(pe=>pe.type==="BODY"),Ce=(be==null?void 0:be.text)||D.name,Se=Eo(D),at=(Q==null?void 0:Q.name)===D.name;return l.jsxs("div",{className:`template-selector-menu__sidebar-item ${at?"template-selector-menu__sidebar-item--selected":""}`,onClick:()=>!t&&!y&&ae(D),children:[l.jsxs("div",{className:"template-selector-menu__sidebar-item-header",children:[l.jsx("div",{className:"template-selector-menu__sidebar-item-name",children:D.name}),Se&&l.jsxs("div",{className:"template-selector-menu__sidebar-item-badge",children:[l.jsx(To,{style:{fontSize:"10px"}}),"Variables"]})]}),l.jsx("div",{className:"template-selector-menu__sidebar-item-preview",title:Ce,children:Ce})]},Z)})})}),l.jsx("div",{className:"template-selector-menu__preview",children:Q?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"template-selector-menu__preview-content",children:l.jsx("div",{className:"template-selector-menu__preview-bubble-wrapper",children:l.jsx("div",{className:"bubble me template-selector-menu__preview-bubble",children:(()=>{var be,Ce,Se,at,Ve;const D=(be=Q.components)==null?void 0:be.find(pe=>pe.type==="HEADER"),Z=Q.header_media_url||((Se=(Ce=D==null?void 0:D.example)==null?void 0:Ce.header_handle)==null?void 0:Se[0])||(D==null?void 0:D.format)==="IMAGE"&&((Ve=(at=D==null?void 0:D.example)==null?void 0:at.header_handle)==null?void 0:Ve[0]);return Z?l.jsxs("div",{className:"template-selector-menu__preview-content-wrapper",children:[l.jsx("div",{className:"template-selector-menu__preview-image-side",children:l.jsx("img",{src:Z,alt:(D==null?void 0:D.text)||Q.name})}),l.jsxs("div",{className:"template-selector-menu__preview-text-side",children:[D&&D.text&&l.jsx("div",{className:"template-selector-menu__bubble-header",children:D.text}),(()=>{var ie;const pe=(ie=Q.components)==null?void 0:ie.find(K=>K.type==="BODY"),re=(pe==null?void 0:pe.text)||Q.name;return l.jsx("span",{className:"bubble__text",children:re})})(),(()=>{var re;const pe=(re=Q.components)==null?void 0:re.find(ie=>ie.type==="FOOTER");return pe&&l.jsx("div",{className:"template-selector-menu__bubble-footer",children:pe.text})})(),(()=>{var ie;const pe=(ie=Q.components)==null?void 0:ie.find(K=>K.type==="BUTTONS"),re=(pe==null?void 0:pe.buttons)||[];return re.length>0&&l.jsx("div",{className:"template-selector-menu__bubble-buttons",children:re.map((K,On)=>l.jsxs("div",{className:"template-selector-menu__bubble-button",children:[K.type==="URL"&&l.jsx(x0,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="QUICK_REPLY"&&l.jsx(mi,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="PHONE_NUMBER"&&l.jsx(Pf,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.text||K.url||K.phone_number]},On))})})(),l.jsxs("div",{className:"bubble__footer",children:[l.jsxs("div",{className:"bubble__footer-left",children:[l.jsx("small",{className:"bubble__timestamp",children:"Maintenant"}),Eo(Q)&&l.jsxs("small",{className:"template-selector-menu__has-variables",title:"Ce template contient des variables  remplir",children:[l.jsx(To,{style:{marginRight:"4px",verticalAlign:"middle"}}),"Variables"]})]}),l.jsxs("div",{className:"template-selector-menu__price",children:[l.jsx(C1,{style:{marginRight:"4px",verticalAlign:"middle"}}),parseFloat(Q.price_eur||Q.price_usd||.008).toFixed(2).replace(/\.0+$/,"")," ",Q.price_eur?"EUR":"USD"]})]})]})]}):l.jsxs(l.Fragment,{children:[D&&D.text&&l.jsx("div",{className:"template-selector-menu__bubble-header",children:D.text}),(()=>{var ie;const pe=(ie=Q.components)==null?void 0:ie.find(K=>K.type==="BODY"),re=(pe==null?void 0:pe.text)||Q.name;return l.jsx("span",{className:"bubble__text",children:re})})(),(()=>{var re;const pe=(re=Q.components)==null?void 0:re.find(ie=>ie.type==="FOOTER");return pe&&l.jsx("div",{className:"template-selector-menu__bubble-footer",children:pe.text})})(),(()=>{var ie;const pe=(ie=Q.components)==null?void 0:ie.find(K=>K.type==="BUTTONS"),re=(pe==null?void 0:pe.buttons)||[];return re.length>0&&l.jsx("div",{className:"template-selector-menu__bubble-buttons",children:re.map((K,On)=>l.jsxs("div",{className:"template-selector-menu__bubble-button",children:[K.type==="URL"&&l.jsx(x0,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="QUICK_REPLY"&&l.jsx(mi,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="PHONE_NUMBER"&&l.jsx(Pf,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.text||K.url||K.phone_number]},On))})})(),l.jsxs("div",{className:"bubble__footer",children:[l.jsxs("div",{className:"bubble__footer-left",children:[l.jsx("small",{className:"bubble__timestamp",children:"Maintenant"}),Eo(Q)&&l.jsxs("small",{className:"template-selector-menu__has-variables",title:"Ce template contient des variables  remplir",children:[l.jsx(To,{style:{marginRight:"4px",verticalAlign:"middle"}}),"Variables"]})]}),l.jsxs("div",{className:"template-selector-menu__price",children:[l.jsx(C1,{style:{marginRight:"4px",verticalAlign:"middle"}}),parseFloat(Q.price_eur||Q.price_usd||.008).toFixed(2).replace(/\.0+$/,"")," ",Q.price_eur?"EUR":"USD"]})]})]})})()})})}),l.jsx("div",{className:"template-selector-menu__preview-actions",children:l.jsxs("button",{className:"template-selector-menu__send-btn",onClick:()=>{t||y||!Q||(gt(Q),d(!1),b("text"),ae(null))},disabled:t||y,children:[l.jsx(mi,{style:{marginRight:"8px"}}),"Envoyer"]})})]}):l.jsxs("div",{className:"template-selector-menu__preview-empty",children:[l.jsx("div",{className:"template-selector-menu__preview-empty-icon",children:l.jsx(ML,{})}),l.jsx("div",{className:"template-selector-menu__preview-empty-text",children:"Slectionnez un template dans le menu pour voir l'aperu"})]})})]})})]})]}),l.jsxs("div",{className:"input-area",children:[l.jsx("input",{ref:jt,type:"file",style:{display:"none"},onChange:D=>{console.log("File input changed",D.target.files),D.target.files&&D.target.files[0]?(console.log("File selected:",D.target.files[0].name,D.target.files[0].type),Zh(D.target.files[0]),D.target.value=""):console.log("No file selected")},accept:"image/*,audio/*,video/*,.pdf,.doc,.docx"}),l.jsxs("div",{className:"left-buttons",children:[l.jsxs("div",{className:"emoji-container",ref:hs,children:[l.jsx("button",{onClick:()=>{g(!m),p(!1)},className:"btn-emoji",disabled:t,title:"mojis",children:l.jsx(RN,{})}),m&&l.jsx("div",{className:"emoji-picker-wrapper",children:l.jsx(Fj,{onEmojiClick:tv,theme:"dark",width:"350px",height:"400px"})})]}),l.jsxs("div",{className:"menu-container",ref:$t,children:[l.jsx("button",{onClick:()=>{console.log("Menu button clicked, current showMenu:",h),p(!h),g(!1)},className:"btn-menu",disabled:t,title:"Plus d'options",children:l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:l.jsx("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),h&&l.jsxs("div",{className:"dropdown-menu",children:[l.jsxs("button",{className:"menu-item",onClick:nv,children:[l.jsx("div",{className:"menu-icon menu-icon--document",children:l.jsx(Ys,{})}),l.jsx("span",{children:"Document"})]}),l.jsxs("button",{className:"menu-item",onClick:nv,children:[l.jsx("div",{className:"menu-icon menu-icon--media",children:l.jsx(Dr,{})}),l.jsx("span",{children:"Photos et vidos"})]}),l.jsxs("button",{className:"menu-item",onClick:()=>sv("buttons"),children:[l.jsx("div",{className:"menu-icon menu-icon--buttons",children:l.jsx(LL,{})}),l.jsx("span",{children:"Boutons interactifs"})]}),!N&&l.jsxs("button",{className:"menu-item",onClick:()=>sv("list"),children:[l.jsx("div",{className:"menu-icon menu-icon--list",children:l.jsx(gx,{})}),l.jsx("span",{children:"Liste interactive"})]}),l.jsxs("button",{className:"menu-item",onClick:()=>sv("template"),children:[l.jsx("div",{className:"menu-icon menu-icon--template",children:l.jsx(ML,{})}),l.jsx("span",{children:"Template"})]})]})]})]}),N&&!Ne&&l.jsx("div",{className:"templates-selector",children:Me&&!H?l.jsxs("div",{className:"templates-selector__waiting",children:[l.jsxs("div",{className:"templates-selector__waiting-message",children:[l.jsx(vy,{style:{marginRight:"8px",verticalAlign:"middle"}}),"En attente d'une rponse client"]}),l.jsx("button",{className:"templates-selector__reactivate-btn",onClick:()=>{me(!0)},disabled:t||y,children:"Ractiver le mode template"})]}):l.jsx(l.Fragment,{children:T?l.jsx("div",{className:"templates-selector__loading",children:"Chargement des templates..."}):k.length===0?l.jsx("div",{className:"templates-selector__empty",children:"Aucun template UTILITY, MARKETING ou AUTHENTICATION disponible. Crez-en un dans Meta Business Manager."}):l.jsxs("div",{className:"templates-selector__container",children:[l.jsxs("div",{className:"templates-selector__left-column",children:[l.jsxs("div",{className:"templates-selector__header",children:[l.jsxs("span",{className:"templates-selector__title",children:[l.jsx(vy,{style:{marginRight:"6px",verticalAlign:"middle"}}),"Plus de 24h depuis la dernire interaction client"]}),l.jsx("span",{className:"templates-selector__subtitle",children:"Slectionnez un template pour envoyer un message"}),l.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--text-muted)"},children:l.jsx("button",{onClick:()=>Re(!0),style:{background:"transparent",border:"1px solid var(--border-light)",color:"var(--text-primary)",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},title:"Activer l'envoi automatique via template (recommand)",children:"Activer l'auto-template"})})]}),l.jsx("div",{className:"templates-selector__sidebar",children:l.jsx("div",{className:"templates-selector__sidebar-list",children:k.map((D,Z)=>{var Ve;const be=(Ve=D.components)==null?void 0:Ve.find(pe=>pe.type==="BODY"),Ce=(be==null?void 0:be.text)||D.name,Se=Eo(D),at=(q==null?void 0:q.name)===D.name;return l.jsxs("div",{className:`templates-selector__sidebar-item ${at?"templates-selector__sidebar-item--selected":""}`,onClick:()=>!t&&!y&&ce(D),children:[l.jsxs("div",{className:"templates-selector__sidebar-item-header",children:[l.jsx("div",{className:"templates-selector__sidebar-item-name",children:D.name}),Se&&l.jsxs("div",{className:"templates-selector__sidebar-item-badge",children:[l.jsx(To,{style:{fontSize:"10px"}}),"Variables"]})]}),l.jsx("div",{className:"templates-selector__sidebar-item-preview",title:Ce,children:Ce})]},Z)})})})]}),l.jsx("div",{className:"templates-selector__preview",children:q?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"templates-selector__preview-content",children:l.jsx("div",{className:"templates-selector__preview-bubble-wrapper",children:l.jsx("div",{className:"bubble me templates-selector__preview-bubble",children:(()=>{var be,Ce,Se,at,Ve;const D=(be=q.components)==null?void 0:be.find(pe=>pe.type==="HEADER"),Z=q.header_media_url||((Se=(Ce=D==null?void 0:D.example)==null?void 0:Ce.header_handle)==null?void 0:Se[0])||(D==null?void 0:D.format)==="IMAGE"&&((Ve=(at=D==null?void 0:D.example)==null?void 0:at.header_handle)==null?void 0:Ve[0]);return Z?l.jsxs("div",{className:"templates-selector__preview-content-wrapper",children:[l.jsx("div",{className:"templates-selector__preview-image-side",children:l.jsx("img",{src:Z,alt:(D==null?void 0:D.text)||q.name})}),l.jsxs("div",{className:"templates-selector__preview-text-side",children:[D&&D.text&&l.jsx("div",{className:"templates-selector__bubble-header",children:D.text}),(()=>{var ie;const pe=(ie=q.components)==null?void 0:ie.find(K=>K.type==="BODY"),re=(pe==null?void 0:pe.text)||q.name;return console.log(" Preview template text:",{templateName:q.name,bodyText:pe==null?void 0:pe.text,templateText:re,hasVariables:Eo(q)}),l.jsx("span",{className:"bubble__text",children:re})})(),(()=>{var re;const pe=(re=q.components)==null?void 0:re.find(ie=>ie.type==="FOOTER");return pe&&l.jsx("div",{className:"templates-selector__bubble-footer",children:pe.text})})(),(()=>{var ie;const pe=(ie=q.components)==null?void 0:ie.find(K=>K.type==="BUTTONS"),re=(pe==null?void 0:pe.buttons)||[];return re.length>0&&l.jsx("div",{className:"templates-selector__bubble-buttons",children:re.map((K,On)=>l.jsxs("div",{className:"templates-selector__bubble-button",children:[K.type==="URL"&&l.jsx(x0,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="QUICK_REPLY"&&l.jsx(mi,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="PHONE_NUMBER"&&l.jsx(Pf,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.text||K.url||K.phone_number]},On))})})(),l.jsxs("div",{className:"bubble__footer",children:[l.jsxs("div",{className:"bubble__footer-left",children:[l.jsx("small",{className:"bubble__timestamp",children:"Maintenant"}),Eo(q)&&l.jsxs("small",{className:"templates-selector__has-variables",title:"Ce template contient des variables  remplir",children:[l.jsx(To,{style:{marginRight:"4px",verticalAlign:"middle"}}),"Variables"]})]}),l.jsxs("div",{className:"templates-selector__price",children:[l.jsx(C1,{style:{marginRight:"4px",verticalAlign:"middle"}}),parseFloat(q.price_eur||q.price_usd||.008).toFixed(2).replace(/\.0+$/,"")," ",q.price_eur?"EUR":"USD"]})]})]})]}):l.jsxs(l.Fragment,{children:[D&&D.text&&l.jsx("div",{className:"templates-selector__bubble-header",children:D.text}),(()=>{var ie;const pe=(ie=q.components)==null?void 0:ie.find(K=>K.type==="BODY"),re=(pe==null?void 0:pe.text)||q.name;return l.jsx("span",{className:"bubble__text",children:re})})(),(()=>{var re;const pe=(re=q.components)==null?void 0:re.find(ie=>ie.type==="FOOTER");return pe&&l.jsx("div",{className:"templates-selector__bubble-footer",children:pe.text})})(),(()=>{var ie;const pe=(ie=q.components)==null?void 0:ie.find(K=>K.type==="BUTTONS"),re=(pe==null?void 0:pe.buttons)||[];return re.length>0&&l.jsx("div",{className:"templates-selector__bubble-buttons",children:re.map((K,On)=>l.jsxs("div",{className:"templates-selector__bubble-button",children:[K.type==="URL"&&l.jsx(x0,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="QUICK_REPLY"&&l.jsx(mi,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.type==="PHONE_NUMBER"&&l.jsx(Pf,{style:{marginRight:"6px",verticalAlign:"middle"}}),K.text||K.url||K.phone_number]},On))})})(),l.jsxs("div",{className:"bubble__footer",children:[l.jsxs("div",{className:"bubble__footer-left",children:[l.jsx("small",{className:"bubble__timestamp",children:"Maintenant"}),Eo(q)&&l.jsxs("small",{className:"templates-selector__has-variables",title:"Ce template contient des variables  remplir",children:[l.jsx(To,{style:{marginRight:"4px",verticalAlign:"middle"}}),"Variables"]})]}),l.jsxs("div",{className:"templates-selector__price",children:[l.jsx(C1,{style:{marginRight:"4px",verticalAlign:"middle"}}),parseFloat(q.price_eur||q.price_usd||.008).toFixed(2).replace(/\.0+$/,"")," ",q.price_eur?"EUR":"USD"]})]})]})})()})})}),l.jsx("div",{className:"templates-selector__preview-actions",children:l.jsxs("button",{className:"templates-selector__send-btn",onClick:()=>{t||y||!q||gt(q)},disabled:t||y,children:[l.jsx(mi,{style:{marginRight:"8px"}}),"Envoyer"]})})]}):l.jsxs("div",{className:"templates-selector__preview-empty",children:[l.jsx("div",{className:"templates-selector__preview-empty-icon",children:l.jsx(LL,{})}),l.jsx("div",{className:"templates-selector__preview-empty-text",children:"Slectionnez un template dans le menu pour voir l'aperu"})]})})]})})}),N?N&&Ne?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"input-wrapper input-wrapper--flat",children:l.jsx("textarea",{ref:gn,rows:1,value:o,spellCheck:(Te==null?void 0:Te.spellCheck)??!0,lang:"fr",onChange:D=>c(_e(D.target.value)),placeholder:"crire un message...",onKeyDown:D=>{D.key==="Enter"&&(Te!=null&&Te.enterToSend?D.shiftKey||(D.preventDefault(),De()):(D.metaKey||D.ctrlKey)&&(D.preventDefault(),De()))},disabled:t})}),o.trim()&&l.jsx("div",{className:"message-price-indicator",style:{background:"rgba(37, 211, 102, 0.1)",color:"#25d366"}}),l.jsx("button",{className:"btn-send-whatsapp btn-send-flat",onClick:De,disabled:t||!o.trim()||y,"aria-label":"Envoyer",children:l.jsx(mi,{})})]}):N&&!Ne&&!Me?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"input-wrapper input-wrapper--flat",children:l.jsx("textarea",{ref:gn,rows:1,value:o,spellCheck:(Te==null?void 0:Te.spellCheck)??!0,lang:"fr",onChange:D=>c(_e(D.target.value)),placeholder:"crire un message...",onKeyDown:D=>{D.key==="Enter"&&(Te!=null&&Te.enterToSend?D.shiftKey||(D.preventDefault(),De()):(D.metaKey||D.ctrlKey)&&(D.preventDefault(),De()))},disabled:t})}),l.jsx("button",{className:"btn-send-whatsapp btn-send-flat",onClick:De,disabled:t||!o.trim()||y,"aria-label":"Envoyer",children:l.jsx(mi,{})})]}):null:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"input-wrapper input-wrapper--flat",children:l.jsx("textarea",{ref:gn,rows:1,value:o,spellCheck:(Te==null?void 0:Te.spellCheck)??!0,lang:"fr",onChange:D=>c(_e(D.target.value)),placeholder:Te!=null&&Te.enterToSend?"crire un message...":"crire un message... (Ctrl+Entre pour envoyer)",onKeyDown:D=>{D.key==="Enter"&&(Te!=null&&Te.enterToSend?D.shiftKey||(D.preventDefault(),De()):(D.metaKey||D.ctrlKey)&&(D.preventDefault(),De()))},disabled:t})}),v&&w==="text"&&o.trim()&&!v.is_free&&l.jsx("div",{className:"message-price-indicator",children:l.jsxs("span",{className:"price-paid",children:[" ",parseFloat(v.price_eur||v.price_usd||0).toFixed(2).replace(/\.0+$/,"")," ",v.currency==="USD"?"USD":"EUR"]})}),l.jsx("button",{className:"btn-send-whatsapp btn-send-flat",onClick:()=>{w==="buttons"?DI():w==="list"?PI():De()},disabled:t||!o.trim()||y||S,"aria-label":s?"Modifier":"Envoyer",children:l.jsx(mi,{})})]})]}),s&&l.jsxs("div",{className:"edit-banner",children:[l.jsx("span",{children:"Modification du message"}),l.jsx("button",{type:"button",onClick:()=>{c(""),i==null||i()},children:"Annuler"})]}),l.jsx(sH,{template:G,isOpen:de,onClose:Vs,onSend:Kn})]})}function rH(){return l.jsx("div",{className:"typing-indicator",children:l.jsx("div",{className:"typing-indicator__bubble",children:l.jsxs("div",{className:"typing-indicator__dots",children:[l.jsx("span",{className:"typing-indicator__dot"}),l.jsx("span",{className:"typing-indicator__dot"}),l.jsx("span",{className:"typing-indicator__dot"})]})})})}function aH({conversationId:n,mediaType:e="image"}){const[t,s]=_.useState([]),[i,r]=_.useState(!0),[a,o]=_.useState(null),[c,f]=_.useState(null),d=_.useCallback(()=>{if(!n){s([]),r(!1);return}r(!0),f(null),_5(n,e,100).then(b=>{var y;s(((y=b.data)==null?void 0:y.items)||[]),r(!1)}).catch(b=>{console.error("Error loading media gallery:",b),f("Erreur lors du chargement de la galerie"),r(!1)})},[n,e]);_.useEffect(()=>{d()},[d]),_.useEffect(()=>{if(!n)return;const b={image:["image","sticker"],video:["video"],document:["document"],audio:["audio","voice"],all:["image","video","document","audio","sticker","voice"]},y=b[e]||b.image,x=it.channel(`media-gallery:${n}:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${n}`},v=>{var S;const C=v.new;y.includes((S=C.message_type)==null?void 0:S.toLowerCase())&&(console.log(" [MEDIA GALLERY] New media message detected, refreshing gallery"),setTimeout(()=>{d()},1e3))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`conversation_id=eq.${n}`},v=>{var S;const C=v.new;y.includes((S=C.message_type)==null?void 0:S.toLowerCase())&&C.storage_url&&(console.log(" [MEDIA GALLERY] Media storage_url updated, refreshing gallery"),d())}).subscribe();return()=>{it.removeChannel(x)}},[n,e,d]);const h=b=>{o(b)},p=()=>{o(null)},m=(b,y)=>{if(y.stopPropagation(),b.url){const x=document.createElement("a");x.href=b.url,x.download=`${b.message_id}.${b.type==="image"?"jpg":b.type==="video"?"mp4":"pdf"}`,x.target="_blank",document.body.appendChild(x),x.click(),document.body.removeChild(x)}},g=b=>{switch(b){case"image":case"sticker":return l.jsx(Dr,{});case"video":return l.jsx(Og,{});case"document":return l.jsx(Ys,{});default:return l.jsx(Ys,{})}},w=b=>{if(!b)return b;if(b.includes("supabase.co/storage")){const y=b.includes("?")?"&":"?";return`${b}${y}width=200&height=200&resize=cover&quality=80`}return b};return i?l.jsx("div",{className:"media-gallery",children:l.jsx("div",{className:"media-gallery__loading",children:"Chargement..."})}):c?l.jsx("div",{className:"media-gallery",children:l.jsx("div",{className:"media-gallery__error",children:c})}):t.length===0?l.jsx("div",{className:"media-gallery",children:l.jsxs("div",{className:"media-gallery__empty",children:["Aucun ",e==="image"?"image":e==="video"?"vido":"document"," dans cette conversation"]})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"media-gallery",children:l.jsx("div",{className:"media-gallery__grid",children:t.map(b=>{const y=(b.type||"").toLowerCase();return l.jsx("div",{className:"media-gallery__item",onClick:()=>h(b),children:y==="image"||y==="sticker"?l.jsxs("div",{className:"media-gallery__thumbnail",children:[l.jsx("img",{src:w(b.url),alt:b.caption||"Image",loading:"lazy",onError:x=>{x.target.style.display="none",x.target.parentElement.innerHTML=`<div class="media-gallery__icon">${g(b.type)}</div>`}}),l.jsx("div",{className:"media-gallery__overlay",children:l.jsx("button",{className:"media-gallery__download-btn",onClick:x=>m(b,x),title:"Tlcharger en qualit complte",children:l.jsx(Sr,{})})})]}):l.jsxs("div",{className:"media-gallery__thumbnail media-gallery__thumbnail--non-image",children:[l.jsx("div",{className:"media-gallery__icon",children:g(b.type)}),l.jsx("button",{className:"media-gallery__download-btn",onClick:x=>m(b,x),title:"Tlcharger",children:l.jsx(Sr,{})})]})},b.id)})})}),a&&(a.type==="image"||a.type==="sticker")&&ej.createPortal(l.jsx("div",{className:"media-gallery__modal",onClick:p,children:l.jsxs("div",{className:"media-gallery__modal-content",onClick:b=>b.stopPropagation(),children:[l.jsx("button",{className:"media-gallery__modal-close",onClick:p,children:l.jsx(Ms,{})}),l.jsx("img",{src:a.url,alt:a.caption||"Image",className:"media-gallery__modal-image"}),a.caption&&l.jsx("div",{className:"media-gallery__modal-caption",children:a.caption}),l.jsxs("button",{className:"media-gallery__modal-download",onClick:b=>m(a,b),children:[l.jsx(Sr,{})," Tlcharger en qualit complte"]})]})}),document.body)]})}function oH(){if("serviceWorker"in navigator){const n=()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(e=>{e.active||(e.installing?e.installing.addEventListener("statechange",()=>{e.installing.state}):e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})),"sync"in e&&setInterval(()=>{var t;(t=e.sync)==null||t.register("background-sync-messages").catch(()=>{})},3e4),setInterval(()=>{e.update()},36e5)}).catch(()=>{})};document.readyState==="complete"||document.readyState==="interactive"?n():window.addEventListener("load",n),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&e.data.type==="SW_UPDATED"&&window.location.reload()})}}async function hI(){return"Notification"in window&&"serviceWorker"in navigator?await Notification.requestPermission()==="granted":!1}function lH(){window.addEventListener("beforeinstallprompt",n=>{n.preventDefault()}),window.addEventListener("appinstalled",()=>{})}function Zj(){return navigator.platform.toUpperCase().indexOf("MAC")>=0||navigator.userAgent.toUpperCase().indexOf("MAC")>=0}async function Kj(n,e={}){if(Notification.permission==="default"&&!await hI()||Notification.permission!=="granted")return;const t=Zj(),s={icon:"/192x192.svg",badge:"/192x192.svg",tag:"whatsapp-notification",requireInteraction:!1,silent:!1,color:"#25d366",...e};t&&s.vibrate?delete s.vibrate:!t&&!s.vibrate&&(s.vibrate=[200,100,200]);const i={...s};if(t&&(i.image===null&&delete i.image,i.badge||(i.badge="/192x192.svg")),t){if(!("serviceWorker"in navigator))return;try{const r=await navigator.serviceWorker.ready;if(!r)return;await r.showNotification(n,i)}catch{}}else if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{await(await navigator.serviceWorker.ready).showNotification(n,i)}catch{try{new Notification(n,i)}catch{}}else try{new Notification(n,i)}catch{}}const pI="whatsapp_notifications_conversations";function mI(){try{const n=localStorage.getItem(pI);return n?JSON.parse(n):{}}catch{return{}}}function gI(n){try{localStorage.setItem(pI,JSON.stringify(n))}catch{}}function cH(n,e,t,s,i){var a;const r=mI();return r[n]={conversationId:n,contactName:e,lastMessagePreview:t,contactImage:s||null,unreadCount:Math.max(i,(((a=r[n])==null?void 0:a.unreadCount)||0)+1),lastUpdate:Date.now()},gI(r),r}function uH(n){const e=mI();return delete e[n],gI(e),e}function wI(n){const e=Object.values(n);if(e.length===0)return"Aucun nouveau message";e.sort((s,i)=>i.lastUpdate-s.lastUpdate);const t=e.reduce((s,i)=>s+i.unreadCount,0);if(e.length===1){const s=e[0];return s.unreadCount===1?s.lastMessagePreview:`${s.lastMessagePreview}
(${s.unreadCount} messages)`}else{let s="";return s=e.slice(0,3).map(r=>{const a=r.lastMessagePreview.length>40?r.lastMessagePreview.substring(0,40)+"...":r.lastMessagePreview;return`${r.contactName}: ${a}`}).join(`
`),e.length>3&&(s+=`
+${e.length-3} autre${e.length-3>1?"s":""} conversation${e.length-3>1?"s":""}`),s+=`
(${t} message${t>1?"s":""} au total)`,s}}async function fH(n,e,t,s=null,i=1){const r="whatsapp-all-messages",a=cH(t,n,e,s,i);let o=null;if("serviceWorker"in navigator)try{const x=await(await navigator.serviceWorker.ready).getNotifications({tag:r});x.length>0&&(o=x[0])}catch{}const c=Object.keys(a).length,f=Object.values(a).reduce((y,x)=>y+x.unreadCount,0);let d;c===1?d=n:d=`${c} conversations  ${f} message${f>1?"s":""}`;const h=wI(a),m=Object.values(a).sort((y,x)=>x.lastUpdate-y.lastUpdate)[0],g=(m==null?void 0:m.contactImage)||"/192x192.svg",w=Zj(),b={body:h,tag:r,data:{conversations:a,conversationId:t,timestamp:Date.now(),totalMessages:f,conversationCount:c},icon:g,badge:"/192x192.svg",requireInteraction:!1,silent:o,timestamp:Date.now(),dir:"ltr",lang:"fr",renotify:!0,color:"#25d366",actions:[{action:"open",title:"Ouvrir"},{action:"mark-all-read",title:"Tout marquer comme lu"}]};w?(delete b.vibrate,m!=null&&m.contactImage&&(b.image=m.contactImage),delete b.sticky):(o||(b.vibrate=[200,100,200]),m!=null&&m.contactImage&&(b.image=m.contactImage)),await Kj(d,b)}function B1(n){const e=uH(n);if(Object.keys(e).length===0)"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.getNotifications({tag:"whatsapp-all-messages"}).then(s=>{s.forEach(i=>i.close())})});else{const t=Object.values(e),s=t.length,i=t.reduce((h,p)=>h+p.unreadCount,0),a=t.sort((h,p)=>p.lastUpdate-h.lastUpdate)[0],o=s===1?a.contactName:`${s} conversations  ${i} message${i>1?"s":""}`,c=wI(e),f=Zj(),d={body:c,tag:"whatsapp-all-messages",data:{conversations:e,timestamp:Date.now()},icon:(a==null?void 0:a.contactImage)||"/192x192.svg",badge:"/192x192.svg",color:"#25d366",silent:!0};f||(d.vibrate=[]),Kj(o,d)}}const dH="notif_prefs_v1";function hH(){try{const n=localStorage.getItem(dH);return n?JSON.parse(n):{}}catch{return{}}}function yI(n,e="messages"){if(!n)return!1;const s=hH()[n];return s?s[e]!==!1:!0}async function qh(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await hI():!1}function ev(){return"Notification"in window&&Notification.permission==="granted"}async function Gy(){!ev()&&!await qh()||await Kj("Test WhatsApp",{body:"Les notifications fonctionnent correctement !",tag:"test-notification",requireInteraction:!1,icon:"/192x192.svg",badge:"/192x192.svg",color:"#25d366"})}async function bI(n,e,t={}){var d,h,p;if(!ev()&&!await qh())return;const{force:s=!1,checkConversationOpen:i=!0}=t;if(!s&&!document.hidden&&i)return;const r=((d=e==null?void 0:e.contacts)==null?void 0:d.display_name)||((h=e==null?void 0:e.contacts)==null?void 0:h.whatsapp_number)||(e==null?void 0:e.client_number)||"Contact inconnu";let a="Nouveau message";const o=n.content_text||n.content||"";if(o&&o.trim())a=o.trim().substring(0,100),o.length>100&&(a+="...");else if(n.media_url||n.media_id||n.media_type){const m=(n.media_type||"").toLowerCase();a={image:" Photo",video:" Vido",audio:" Audio",document:" Document",sticker:" Autocollant",voice:" Message vocal",media:" Mdia"}[m]||" Mdia"}else n.type==="location"||n.location?a=" Localisation":n.type==="contacts"||n.contacts?a=" Contact":a="Nouveau message";const c=((p=e==null?void 0:e.contacts)==null?void 0:p.profile_picture_url)||null,f=(e==null?void 0:e.unread_count)||1;await fH(r,a,e.id,c,f)}async function pH(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",n=>{n.data&&(n.data.type==="OPEN_CONVERSATION"?window.dispatchEvent(new CustomEvent("openConversation",{detail:{conversationId:n.data.conversationId}})):n.data.type==="MARK_AS_READ"?window.dispatchEvent(new CustomEvent("markConversationRead",{detail:{conversationId:n.data.conversationId}})):n.data.type==="MARK_ALL_AS_READ"&&window.dispatchEvent(new CustomEvent("markAllConversationsRead",{detail:{conversationIds:n.data.conversationIds||[]}})))}),Notification.permission==="default"&&setTimeout(()=>{qh()},3e3)}const vI=_.createContext(null);function _S({children:n}){const[e,t]=_.useState(null),[s,i]=_.useState(!0),[r,a]=_.useState(null);_.useEffect(()=>{it.auth.getSession().then(({data:h,error:p})=>{p?t(null):h.session?(h.session.access_token,t(h.session)):t(null),i(!1)});const{data:{subscription:d}}=it.auth.onAuthStateChange((h,p)=>{t(p)});return()=>d.unsubscribe()},[]),_.useEffect(()=>{if(!e){a(null);return}if(!e.access_token){a(null);return}oe.get("/auth/me").then(d=>a(d.data)).catch(()=>{a(null)})},[e]);const o=_.useCallback((d,h=null)=>{var g,w,b,y;if(!r)return!1;const p=((g=r.permissions)==null?void 0:g.account_access_levels)||{};return h&&p[h]==="aucun"&&!["permissions.view","permissions.manage"].includes(d)?!1:(((w=r.permissions)==null?void 0:w.global)??[]).includes(d)?!(h&&p[h]==="aucun"&&!["permissions.view","permissions.manage"].includes(d)):h&&((y=(b=r.permissions)==null?void 0:b.accounts)!=null&&y[h])?p[h]==="aucun"&&!["permissions.view","permissions.manage"].includes(d)?!1:r.permissions.accounts[h].includes(d):!1},[r]),c=_.useCallback(()=>e?oe.get("/auth/me").then(d=>(a(d.data),d.data)).catch(()=>(a(null),null)):(a(null),Promise.resolve(null)),[e]),f=_.useMemo(()=>({session:e,loading:s,profile:r,hasPermission:o,refreshProfile:c,signIn:(d,h)=>it.auth.signInWithPassword({email:d,password:h}),signOut:()=>it.auth.signOut()}),[e,s,r,o,c]);return l.jsx(vI.Provider,{value:f,children:n})}function Jg(){const n=_.useContext(vI);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function mH({conversation:n,onFavoriteToggle:e,onBotModeChange:t,canSend:s=!0,isWindowActive:i=!0}){var hs,jt,gn;const{profile:r}=Jg(),[a,o]=_.useState([]),[c,f]=_.useState(!1),[d,h]=_.useState(""),[p,m]=_.useState(!1),[g,w]=_.useState(!1),[b,y]=_.useState(null),[x,v]=_.useState({open:!1,x:0,y:0,message:null}),[C,S]=_.useState(!0),[L,k]=_.useState(!1),[A,T]=_.useState(!0),[I,N]=_.useState(new Set),[R,B]=_.useState(!1),[P,Y]=_.useState(!0),[$,X]=_.useState(null),O=_.useCallback(V=>[...V].sort((he,J)=>{const Ae=Ie=>{const z=Ie.timestamp||Ie.created_at;if(!z)return 0;if(typeof z=="number")return z;const U=new Date(z);return isNaN(U.getTime())?0:U.getTime()},xe=Ae(he),ze=Ae(J);return xe-ze}),[]),G=n==null?void 0:n.id,ne=_.useRef(null),de=_.useRef(null),le=((hs=n==null?void 0:n.contacts)==null?void 0:hs.display_name)||((jt=n==null?void 0:n.contacts)==null?void 0:jt.whatsapp_number)||(n==null?void 0:n.client_number),H=_.useCallback(()=>G?rw(G,{limit:100}).then(V=>{const he=r==null?void 0:r.id,J=V.data.filter(Ae=>{const xe=(Ae.message_type||"").toLowerCase();return!(["reaction","status"].includes(xe)||he&&Array.isArray(Ae.deleted_for_user_ids)&&Ae.deleted_for_user_ids.includes(he))});return o(Ae=>{const xe=new Map,ze=new Map;J.forEach(W=>{W.id&&xe.set(W.id,W),W.wa_message_id&&ze.set(W.wa_message_id,W)});const Ie=[],z=new Set,U=new Set,se=new Set,_e=Date.now();return Ae.forEach(W=>{if(W.id&&W.id.startsWith("temp-")){const Me=new Date(W.timestamp||W.created_at).getTime(),De=_e-Me,gt=(W.content_text||"").trim();(J.find(Vs=>{const Zh=(Vs.content_text||"").trim();if(gt!==Zh||gt.length===0)return!1;const tv=new Date(Vs.timestamp||Vs.created_at).getTime();return Math.abs(Me-tv)<1e4})||De>3e4)&&se.add(W.id)}}),Ae.forEach(W=>{if(!(W.id&&W.id.startsWith("temp-")&&se.has(W.id))&&!(W.id&&W.id.startsWith("temp-"))){if(W.id&&xe.has(W.id)){const Me=xe.get(W.id);z.has(Me.id)||(Ie.push(Me),z.add(Me.id),Me.wa_message_id&&U.add(Me.wa_message_id));return}if(W.wa_message_id&&ze.has(W.wa_message_id)){const Me=ze.get(W.wa_message_id);z.has(Me.id)||(Ie.push(Me),z.add(Me.id),Me.wa_message_id&&U.add(Me.wa_message_id));return}if(W.id&&!z.has(W.id)){if(W.id.startsWith("temp-"))return;Ie.push(W),z.add(W.id),W.wa_message_id&&U.add(W.wa_message_id)}}}),J.forEach(W=>{W.id&&!z.has(W.id)?(Ie.push(W),z.add(W.id),W.wa_message_id&&U.add(W.wa_message_id)):W.wa_message_id&&!U.has(W.wa_message_id)&&(Ie.push(W),W.id&&z.add(W.id),U.add(W.wa_message_id))}),O(Ie)}),J}):(o([]),Promise.resolve()),[G,O,r==null?void 0:r.id]);_.useEffect(()=>{if(!G){o([]),Y(!0),X(null),T(!1);return}o([]),Y(!0),X(null),T(!0),x5(G).then(()=>{console.log(` [FRONTEND] Media check started for conversation ${G}`)}).catch(he=>{console.warn(` [FRONTEND] Failed to start media check for conversation ${G}:`,he)}),(async()=>{const J=(await rw(G,{limit:100})).data.filter(Ie=>{const z=(Ie.message_type||"").toLowerCase();return!(["reaction","status"].includes(z)||r!=null&&r.id&&Array.isArray(Ie.deleted_for_user_ids)&&Ie.deleted_for_user_ids.includes(r.id))});if(o(O(J)),T(!1),setTimeout(()=>{if(ne.current&&de.current){const Ie=de.current;Ie.scrollTop=Ie.scrollHeight,ne.current.scrollIntoView({behavior:"auto"})}},50),J.length<100){Y(!1);return}let Ae=!0,xe=J.reduce((Ie,z)=>{const U=z.timestamp||z.created_at;if(!U)return Ie;const se=new Date(U);if(isNaN(se.getTime()))return Ie;const _e=se.getTime();return!Ie||_e<Ie?_e:Ie},null);xe&&(xe=new Date(xe).toISOString(),X(xe));let ze=[...J];for(;Ae&&G&&xe;){const z=(await rw(G,{before:xe,limit:100})).data.filter(se=>{const _e=(se.message_type||"").toLowerCase();return!(["reaction","status"].includes(_e)||r!=null&&r.id&&Array.isArray(se.deleted_for_user_ids)&&se.deleted_for_user_ids.includes(r.id))});if(z.length===0){Ae=!1;break}ze=[...ze,...z],o(O(ze));const U=z.reduce((se,_e)=>{const W=_e.timestamp||_e.created_at;if(!W)return se;const Me=new Date(W);if(isNaN(Me.getTime()))return se;const De=Me.getTime();return!se||De<se?De:se},null);U?(xe=new Date(U).toISOString(),X(xe)):Ae=!1,z.length<100&&(Ae=!1)}Y(!1)})()},[G,O,r==null?void 0:r.id]),_.useEffect(()=>{if(G&&i&&n){const V=setTimeout(()=>{yc(G).catch(()=>{})},1e3);return()=>clearTimeout(V)}},[G,i,n]),_.useEffect(()=>{const V=()=>v(he=>({...he,open:!1}));return window.addEventListener("click",V),window.addEventListener("scroll",V,!0),()=>{window.removeEventListener("click",V),window.removeEventListener("scroll",V,!0)}},[]),_.useEffect(()=>{if(!G||!i)return;let V=!1,he;const J=async()=>{await H(),V||(he=setTimeout(J,4500))};return J(),()=>{V=!0,he&&clearTimeout(he)}},[G,H,i]),_.useEffect(()=>{if(!G||!i||a.length===0)return;const V=a.filter(ze=>(ze.direction==="inbound"||!ze.from_me&&ze.direction!=="outbound")&&ze.message_type!=="reaction").sort((ze,Ie)=>{const z=U=>{const se=U.timestamp||U.created_at;if(!se)return 0;if(typeof se=="number")return se;const _e=new Date(se);return isNaN(_e.getTime())?0:_e.getTime()};return z(Ie)-z(ze)})[0];if(!V){k(!1);return}const J=(ze=>{const Ie=ze.timestamp||ze.created_at;if(!Ie)return 0;if(typeof Ie=="number")return Ie;const z=new Date(Ie);return isNaN(z.getTime())?0:z.getTime()})(V),xe=Date.now()-J;if(xe<8e3&&xe>500){k(!0);const ze=setTimeout(()=>{k(!1)},Math.max(0,8e3-xe));return()=>clearTimeout(ze)}else k(!1)},[a,G,i]),_.useEffect(()=>{if(!G)return;const V=it.channel(`messages:${G}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${G}`},he=>{var ze,Ie;const J=he.new;if(J.message_type==="reaction")return;const Ae=((ze=document.hasFocus)==null?void 0:ze.call(document))===!0,xe=n==null?void 0:n.account_id;if(!J.from_me&&(!i||!Ae)){if(xe&&((Ie=r==null?void 0:r.permissions)!=null&&Ie.account_access_levels)){const z=r.permissions.account_access_levels,U=String(xe);if((z[xe]||z[U]||z[U.trim()])==="aucun")return}xe&&yI(xe,"messages")&&bI(J,n)}o(z=>{if(I.has(J.id)||I.has(J.wa_message_id))return z;const U=z.some(_e=>_e.id===J.id),se=J.wa_message_id&&z.some(_e=>_e.wa_message_id===J.wa_message_id);if(U||se){const _e=z.map(W=>W.id===J.id||J.wa_message_id&&W.wa_message_id===J.wa_message_id?J:W);return O(_e)}if(J.direction==="outbound"||J.from_me){const _e=z.filter(W=>{if(W.id&&W.id.startsWith("temp-")){const Me=(W.content_text||"").trim(),De=(J.content_text||"").trim();if(Me===De&&Me.length>0){const Kn=new Date(W.timestamp||W.created_at).getTime(),Vs=new Date(J.timestamp||J.created_at).getTime();if(Math.abs(Kn-Vs)<3e4)return!1}}if(W.id&&!W.id.startsWith("temp-")&&W.direction==="outbound"){const Me=(W.content_text||"").trim(),De=(J.content_text||"").trim();if(Me===De&&Me.length>0){const Kn=new Date(W.timestamp||W.created_at).getTime(),Vs=new Date(J.timestamp||J.created_at).getTime();if(Math.abs(Kn-Vs)<1e4&&W.id!==J.id)return!1}}return!0});return O([..._e,J])}return O([...z,J])})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`conversation_id=eq.${G}`},he=>{const J=he.new;o(Ae=>{const xe=Ae.map(ze=>ze.id===J.id||J.wa_message_id&&ze.wa_message_id===J.wa_message_id?J:ze);return O(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},()=>{H()}).subscribe();return()=>{it.removeChannel(V)}},[G,O,I]);const me=async(V,he=!1,J=null)=>{if(!G)return;if(he||V===""){H();return}const Ae=J||{id:`temp-${Date.now()}`,client_temp_id:`temp-${Date.now()}`,conversation_id:G,direction:"outbound",content_text:V,status:"pending",timestamp:new Date().toISOString()};if(o(xe=>O([...xe,Ae])),S(!0),!J)try{await wx({conversation_id:G,content:V}),setTimeout(()=>{H()},1e3)}catch{o(ze=>ze.filter(Ie=>Ie.id!==Ae.id)),H()}},q=async V=>{if(!G||!V)return;const he=V.content_text;if(!he)return;const J=V.id;try{J&&await y5(J)}catch{}o(Ae=>Ae.filter(xe=>xe.id!==J)),N(Ae=>{const xe=new Set(Ae);return J&&xe.add(J),V.wa_message_id&&xe.add(V.wa_message_id),xe}),S(!0);try{await wx({conversation_id:G,content:he})}catch{N(xe=>{const ze=new Set(xe);return J&&ze.delete(J),V.wa_message_id&&ze.delete(V.wa_message_id),ze}),H()}},ce=_.useMemo(()=>n?Pn(n.client_number):"",[n]),we=!!(n!=null&&n.bot_enabled),Qe=_.useMemo(()=>{let V=a;if(c&&d.trim()){const he=d.toLowerCase().trim();V=V.filter(J=>(J.content_text||"").toLowerCase().includes(he))}return V},[a,d,c]),dt=_.useMemo(()=>a.filter(V=>V.is_pinned===!0),[a]),Je=_.useRef({}),Q=_.useCallback(V=>{const he=Je.current[V];if(he&&de.current){const J=de.current,Ae=he.offsetTop,xe=J.clientHeight,ze=Ae-xe/2+he.offsetHeight/2;J.scrollTo({top:ze,behavior:"smooth"}),he.style.transition="background-color 0.3s ease",he.style.backgroundColor="rgba(37, 211, 102, 0.2)",setTimeout(()=>{he.style.backgroundColor="",setTimeout(()=>{he.style.transition=""},300)},2e3)}},[]),ae=_.useCallback(()=>{const V=de.current;return V?V.scrollHeight-V.scrollTop-V.clientHeight<120:!1},[]),Ne=_.useCallback((V="auto")=>{ne.current&&ne.current.scrollIntoView({behavior:V})},[]);if(_.useEffect(()=>{if(!(!ne.current||Qe.length===0)){if(A){const V=()=>{if(ne.current&&de.current){const he=de.current;he.scrollHeight-he.scrollTop-he.clientHeight<50||(Ne("auto"),setTimeout(()=>{ne.current&&Ne("auto")},100)),T(!1)}};requestAnimationFrame(V),setTimeout(V,50);return}C&&ae()&&requestAnimationFrame(()=>{Ne("smooth")})}},[Qe,C,ae,A,Ne]),_.useEffect(()=>{const V=de.current;if(!V)return;const he=()=>{V.scrollHeight-V.scrollTop-V.clientHeight>=120?S(!1):S(!0)};return V.addEventListener("scroll",he,{passive:!0}),()=>V.removeEventListener("scroll",he)},[]),_.useEffect(()=>{S(!0),T(!0),N(new Set),setTimeout(()=>{if(de.current&&ne.current){const he=de.current;he.scrollTop=he.scrollHeight,setTimeout(()=>{ne.current&&ne.current.scrollIntoView({behavior:"auto"}),he&&(he.scrollTop=he.scrollHeight)},100)}},50)},[G]),_.useEffect(()=>{if(!b)return;const V=setTimeout(()=>y(null),2e3);return()=>clearTimeout(V)},[b]),!G)return l.jsx("div",{className:"chat-window empty-state",children:l.jsxs("div",{children:[l.jsx("img",{src:"/T512xT512.svg",alt:"Logo LMDCVTC",className:"empty-state-logo",style:{width:"120px",height:"120px",marginBottom:"1.5rem"}}),l.jsx("h2",{children:"Bienvenue sur WhatsApp LMDCVTC"}),l.jsx("p",{children:"Slectionne un compte puis une conversation pour commencer."})]})});const Re=()=>{if(!n)return;const V=!n.is_favorite;e==null||e(n,V)},Te=(V,he)=>{V.preventDefault();const J=220,Ae=200,xe=Math.min(V.clientX,window.innerWidth-J),ze=Math.min(V.clientY,window.innerHeight-Ae);v({open:!0,x:xe,y:ze,message:he})},$t=async(V,he=null)=>{const J=he||x.message;if(he||v(Ae=>({...Ae,open:!1})),!!J){if(V==="delete_me"){try{await w5(J.id,{scope:"me"})}finally{H()}return}if(V==="react"){y(J.id);return}if(V==="pin"){try{await C5(J.id),H()}catch(Ae){console.error("Erreur lors de l'pinglage:",Ae)}return}if(V==="unpin"){try{await M5(J.id),H()}catch(Ae){console.error("Erreur lors du dspinglage:",Ae)}return}}};return l.jsxs("div",{className:"chat-window",children:[l.jsxs("div",{className:"chat-header",children:[l.jsxs("div",{children:[l.jsx("div",{className:"chat-title",children:le}),l.jsx("div",{className:"chat-subtitle",children:ce})]}),l.jsxs("div",{className:"chat-bot-toggle",children:[l.jsx("span",{className:"chat-bot-toggle__label",children:we?"Bot Gemini actif":"Mode oprateur"}),l.jsxs("label",{className:`switch ${we?"switch--on":""}`,children:[l.jsx("input",{type:"checkbox",checked:we,onChange:async()=>{if(!(!n||!t)){w(!0);try{await t(n,!we)}finally{w(!1)}}},disabled:!n||g}),l.jsx("span",{className:"switch__slider"})]})]}),l.jsxs("div",{className:"chat-actions",children:[l.jsx("button",{title:"Rechercher",className:c?"active":"",onClick:()=>f(V=>!V),children:l.jsx(xo,{})}),l.jsx("button",{title:"Infos contact",className:p?"active":"",onClick:()=>m(V=>!V),children:l.jsx(bj,{})}),l.jsx("button",{title:n!=null&&n.is_favorite?"Retirer des favoris":"Ajouter aux favoris",onClick:Re,children:n!=null&&n.is_favorite?l.jsx(h5,{}):l.jsx(p5,{})})]})]}),c&&l.jsxs("div",{className:"chat-search-bar",children:[l.jsx("input",{value:d,onChange:V=>h(V.target.value),placeholder:"Rechercher un message"}),d&&l.jsx("button",{onClick:()=>h(""),"aria-label":"Effacer la recherche",children:""})]}),l.jsxs("div",{className:"chat-body",children:[dt.length>0&&l.jsx("div",{className:"pinned-messages-header",children:dt.map(V=>{const he=(V.content_text||"").trim(),J=he.length>60?he.substring(0,60)+"...":he;return l.jsxs("div",{className:"pinned-message-preview",onClick:()=>Q(V.id),children:[l.jsx("div",{className:"pinned-message-preview__icon",children:l.jsx(ON,{})}),l.jsxs("div",{className:"pinned-message-preview__content",children:[l.jsx("div",{className:"pinned-message-preview__text",children:J||"Message pingl"}),l.jsx("div",{className:"pinned-message-preview__timestamp",children:V.timestamp?jp(V.timestamp):""})]}),l.jsx("button",{className:"pinned-message-preview__unpin",onClick:Ae=>{Ae.stopPropagation(),$t("unpin",V)},title:"Dspingler",children:l.jsx(Ms,{})})]},V.id)})}),l.jsxs("div",{className:"messages-wrapper",children:[l.jsxs("div",{className:"messages",ref:de,children:[Qe.map(V=>l.jsx("div",{ref:he=>{he&&(Je.current[V.id]=he)},children:l.jsx(X4,{message:V,conversation:n,onReactionChange:H,forceReactionOpen:b===V.id,onContextMenu:he=>Te(he,V),onResend:q})},V.id)),L&&l.jsx(rH,{}),l.jsx("div",{ref:ne})]}),p&&l.jsxs("aside",{className:"chat-info-panel",children:[l.jsx("h3",{children:"Informations"}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Nom"}),l.jsx("strong",{children:le})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Numro"}),l.jsx("strong",{children:Pn(n.client_number)})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Statut"}),l.jsx("strong",{children:n.status})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Messages non lus"}),l.jsx("strong",{children:n.unread_count||0})]}),l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{children:"Bibliothque de mdias"}),l.jsx(aH,{conversationId:G,mediaType:"all"})]})]})]})]}),l.jsx(iH,{conversation:n,onSend:me,disabled:!s||!G,accountId:n==null?void 0:n.account_id,messages:a}),x.open&&l.jsxs("div",{className:"context-menu",style:{top:x.y,left:x.x},onClick:V=>V.stopPropagation(),children:[l.jsx("button",{onClick:()=>$t("react"),children:"Ajouter une raction"}),(gn=x.message)!=null&&gn.is_pinned?l.jsx("button",{onClick:()=>$t("unpin"),children:"Dspingler"}):l.jsx("button",{onClick:()=>$t("pin"),children:"pingler"}),l.jsx("button",{onClick:()=>$t("delete_me"),children:"Supprimer pour moi"})]})]})}function gH({accounts:n=[],value:e,onChange:t,label:s="Compte WhatsApp",conversations:i=[]}){const[r,a]=_.useState(!1),o=_.useRef(null);_.useEffect(()=>{function p(m){o.current&&!o.current.contains(m.target)&&a(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const c=_.useMemo(()=>Array.isArray(n)?n:[],[n]),f=_.useMemo(()=>c.length?c.find(p=>p.id===e)??c[0]:null,[c,e]),d=_.useMemo(()=>{const p={};return(Array.isArray(i)?i:[]).forEach(m=>{const g=m.account_id;g&&(p[g]=(p[g]||0)+(m.unread_count||0))}),p},[i]);if(!c.length)return l.jsxs("div",{className:"account-selector",children:[l.jsx("span",{children:s}),l.jsx("em",{children:"Ajoute un compte dans Supabase pour commencer."})]});const h=p=>{t(p),a(!1)};return l.jsxs("div",{className:"account-selector",ref:o,children:[l.jsx("span",{className:"account-selector__label",children:s}),l.jsxs("button",{type:"button",className:"account-selector__button",onClick:()=>a(p=>!p),children:[l.jsxs("div",{className:"account-selector__text",children:[l.jsx("strong",{children:f==null?void 0:f.name}),(f==null?void 0:f.phone_number)&&l.jsx("small",{children:f.phone_number})]}),l.jsxs("div",{className:"account-selector__badges",children:[f&&d[f.id]>0&&l.jsx("span",{className:"account-selector__badge",children:d[f.id]>99?"99+":d[f.id]}),r?l.jsx(SN,{}):l.jsx(yj,{})]})]}),r&&l.jsx("div",{className:"account-selector__menu",children:c.map(p=>l.jsxs("button",{type:"button",className:`account-selector__option ${p.id===(f==null?void 0:f.id)?"active":""}`,onClick:()=>h(p.id),children:[l.jsxs("div",{children:[l.jsx("strong",{children:p.name}),p.phone_number&&l.jsx("small",{children:p.phone_number})]}),d[p.id]>0&&l.jsx("span",{className:"account-selector__badge",children:d[p.id]>99?"99+":d[p.id]})]},p.id))})]})}function wH(n){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"}}]})(n)}const jS=[{id:"chat",icon:l.jsx(Hu,{})},{id:"contacts",icon:l.jsx(Yh,{})},{id:"whatsapp",icon:l.jsx(wH,{})},{id:"assistant",icon:l.jsx(EN,{})},{id:"settings",icon:l.jsx(Ib,{})}];function yH({active:n="chat",onSelect:e,allowedItems:t,onSignOut:s}){const i=t??jS.map(r=>r.id);return l.jsxs("nav",{className:"sidebar-nav",children:[l.jsx("div",{className:"sidebar-nav__items",children:jS.filter(r=>i.includes(r.id)).map(r=>l.jsxs("button",{className:`sidebar-nav__btn ${r.id===n?"active":""}`,onClick:()=>e==null?void 0:e(r.id),children:[r.icon,r.badge&&l.jsx("span",{className:"sidebar-nav__badge",children:r.badge})]},r.id))}),s&&l.jsx("div",{className:"sidebar-nav__bottom",children:l.jsx("button",{className:"sidebar-nav__btn sidebar-nav__btn--logout",onClick:s,title:"Dconnexion",children:l.jsx(K8,{})})})]})}function bH({contacts:n=[],selected:e,onSelect:t,selectedContacts:s=new Set,onToggleSelect:i,multiSelect:r=!1}){if(!n.length)return l.jsx("div",{className:"contacts-panel empty",children:l.jsx("p",{children:"Aucun contact pour le moment."})});const a=(c,f)=>{r&&f.target.type!=="checkbox"?i==null||i(c.id):r||t==null||t(c)},o=(c,f)=>{f.stopPropagation(),i==null||i(c)};return l.jsxs("div",{className:"contacts-panel",children:[l.jsx("div",{className:"contacts-list",children:n.map(c=>{const f=r?s.has(c.id):(e==null?void 0:e.id)===c.id,d=r&&s.has(c.id);return l.jsxs("div",{className:`contact-item ${f?"active":""} ${d?"multi-selected":""}`,onClick:h=>a(c,h),children:[r&&l.jsx("input",{type:"checkbox",checked:d,onChange:h=>o(c.id,h),onClick:h=>h.stopPropagation(),className:"contact-checkbox"}),l.jsx("div",{className:"avatar",children:(c.display_name||c.whatsapp_number||"?")[0]}),l.jsxs("div",{className:"contact-info",children:[l.jsx("strong",{children:c.display_name||Pn(c.whatsapp_number)}),l.jsx("small",{children:Pn(c.whatsapp_number)})]})]},c.id)})}),l.jsx("div",{className:"contacts-details",children:e?l.jsxs(l.Fragment,{children:[l.jsx("h3",{children:e.display_name?`${e.display_name} - ${Pn(e.whatsapp_number)}`:Pn(e.whatsapp_number)}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Numro"}),l.jsx("strong",{children:Pn(e.whatsapp_number)})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Cr le"}),l.jsx("strong",{children:e.created_at?(()=>{const c=e.created_at,f=typeof c=="string"&&!c.match(/[Z+-]\d{2}:\d{2}$/)?c+"Z":c;return new Date(f).toLocaleString("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})():""})]})]}):l.jsx("p",{children:"Slectionne un contact pour afficher les dtails."})})]})}function vH({item:n,onDownload:e,getMediaIcon:t}){const[s,i]=_.useState(!1);return s?l.jsxs("div",{className:"account-media-gallery__thumbnail account-media-gallery__thumbnail--non-image",children:[l.jsx("div",{className:"account-media-gallery__icon",children:t(n.type)}),l.jsx("div",{className:"account-media-gallery__non-image-label",children:"PDF"}),l.jsx("div",{className:"account-media-gallery__overlay",children:l.jsx("button",{className:"account-media-gallery__download-btn",onClick:r=>e(n,r),title:"Tlcharger",children:l.jsx(Sr,{})})})]}):l.jsxs("div",{className:"account-media-gallery__thumbnail account-media-gallery__thumbnail--pdf",children:[l.jsx(fI,{url:n.url,width:200,height:200,onError:()=>i(!0)}),l.jsx("div",{className:"account-media-gallery__overlay",children:l.jsx("button",{className:"account-media-gallery__download-btn",onClick:r=>e(n,r),title:"Tlcharger",children:l.jsx(Sr,{})})})]})}function xH({accountId:n,mediaType:e="image"}){var v,C,S;const[t,s]=_.useState([]),[i,r]=_.useState(!0),[a,o]=_.useState(null),[c,f]=_.useState(null),d=_.useCallback(()=>{if(!n){s([]),r(!1);return}r(!0),f(null),j5(n,e,500).then(L=>{var k;s(((k=L.data)==null?void 0:k.items)||[]),r(!1)}).catch(L=>{console.error("Error loading account media gallery:",L),f("Erreur lors du chargement de la galerie"),r(!1)})},[n,e]);_.useEffect(()=>{d()},[d]),_.useEffect(()=>{if(!n)return;const L={image:["image","sticker"],video:["video"],document:["document"],audio:["audio","voice"],all:["image","video","document","audio","sticker","voice"]},k=L[e]||L.image,A=it.channel(`account-media-gallery:${n}:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async T=>{var N;const I=T.new;if(k.includes((N=I.message_type)==null?void 0:N.toLowerCase())){const{data:R}=await it.from("conversations").select("account_id").eq("id",I.conversation_id).single();R&&R.account_id===n&&(console.log(" [ACCOUNT GALLERY] New media detected, refreshing gallery"),setTimeout(()=>{d()},1e3))}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},async T=>{var N;const I=T.new;if(k.includes((N=I.message_type)==null?void 0:N.toLowerCase())&&I.storage_url){const{data:R}=await it.from("conversations").select("account_id").eq("id",I.conversation_id).single();R&&R.account_id===n&&(console.log(" [ACCOUNT GALLERY] Media storage_url updated, refreshing gallery"),d())}}).subscribe();return()=>{it.removeChannel(A)}},[n,e,d]);const h=L=>{var T;if(!L||!L.url)return!1;const k=(T=L.type)==null?void 0:T.toLowerCase(),A=L.url.toLowerCase();return k==="document"&&(A.endsWith(".pdf")||A.includes(".pdf")||A.includes("application/pdf"))},p=(L,k=80)=>L?L.length<=k?L:L.substring(0,k)+"...":"",m=L=>{o(L)},g=()=>{o(null)},w=L=>{var k;if(L.url){const A=L.url.match(/\.([a-zA-Z0-9]+)(?:[?#]|$)/);if(A)return A[1]}switch((k=L.type)==null?void 0:k.toLowerCase()){case"image":case"sticker":return"jpg";case"video":return"mp4";case"document":return"pdf";case"audio":case"voice":return"mp3";default:return"bin"}},b=(L,k)=>{if(k&&k.stopPropagation(),L.url){const A=w(L),T=document.createElement("a");T.href=L.url,T.download=`${L.message_id}.${A}`,T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)}},y=L=>{switch(L==null?void 0:L.toLowerCase()){case"image":case"sticker":return l.jsx(Dr,{});case"video":return l.jsx(Og,{});case"document":return l.jsx(Ys,{});case"audio":case"voice":return l.jsx(Ys,{});default:return l.jsx(Ys,{})}},x=L=>{if(!L)return L;if(L.includes("supabase.co/storage")){const k=L.includes("?")?"&":"?";return`${L}${k}width=200&height=200&resize=cover&quality=80`}return L};return i?l.jsx("div",{className:"account-media-gallery",children:l.jsx("div",{className:"account-media-gallery__loading",children:"Chargement..."})}):c?l.jsx("div",{className:"account-media-gallery",children:l.jsx("div",{className:"account-media-gallery__error",children:c})}):t.length===0?l.jsx("div",{className:"account-media-gallery",children:l.jsxs("div",{className:"account-media-gallery__empty",children:["Aucun ",e==="image"?"image":e==="video"?"vido":e==="document"?"document":e==="all"?"mdia":"lment"," dans ce compte"]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"account-media-gallery",children:[l.jsx("div",{className:"account-media-gallery__header",children:l.jsxs("h3",{children:[t.length," ",e==="image"?"images":e==="video"?"vidos":e==="document"?"documents":e==="all"?"mdias":"lments"]})}),l.jsx("div",{className:"account-media-gallery__grid",children:t.map(L=>{var k,A,T,I;return l.jsx("div",{className:"account-media-gallery__item",onClick:()=>m(L),children:((k=L.type)==null?void 0:k.toLowerCase())==="image"||((A=L.type)==null?void 0:A.toLowerCase())==="sticker"?l.jsxs("div",{className:"account-media-gallery__thumbnail",children:[l.jsx("img",{src:x(L.url),alt:L.caption||"Image",loading:"lazy",onError:N=>{N.target.style.display="none",N.target.parentElement.innerHTML=`<div class="account-media-gallery__icon">${y(L.type)}</div>`}}),l.jsx("div",{className:"account-media-gallery__overlay",children:l.jsx("button",{className:"account-media-gallery__download-btn",onClick:N=>b(L,N),title:"Tlcharger en qualit complte",children:l.jsx(Sr,{})})})]}):((T=L.type)==null?void 0:T.toLowerCase())==="document"&&L.url&&(L.url.toLowerCase().endsWith(".pdf")||L.url.includes(".pdf"))?l.jsx(vH,{item:L,onDownload:b,getMediaIcon:y}):l.jsxs("div",{className:"account-media-gallery__thumbnail account-media-gallery__thumbnail--non-image",children:[((I=L.type)==null?void 0:I.toLowerCase())==="video"&&L.url?l.jsx("video",{src:L.url,className:"account-media-gallery__video-thumbnail",muted:!0,preload:"metadata"}):null,l.jsx("div",{className:"account-media-gallery__icon",children:y(L.type)}),l.jsx("div",{className:"account-media-gallery__non-image-label",children:L.type==="document"?"PDF":L.type==="video"?"Vido":L.type==="audio"||L.type==="voice"?"Audio":L.type||"Fichier"}),l.jsx("div",{className:"account-media-gallery__overlay",children:l.jsx("button",{className:"account-media-gallery__download-btn",onClick:N=>b(L,N),title:"Tlcharger",children:l.jsx(Sr,{})})})]})},L.id)})})]}),a&&ej.createPortal(l.jsx("div",{className:"account-media-gallery__modal",onClick:g,children:l.jsxs("div",{className:"account-media-gallery__modal-content",onClick:L=>L.stopPropagation(),children:[l.jsx("button",{className:"account-media-gallery__modal-close",onClick:g,children:l.jsx(Ms,{})}),((v=a.type)==null?void 0:v.toLowerCase())==="image"||((C=a.type)==null?void 0:C.toLowerCase())==="sticker"?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:a.url,alt:a.caption||"Image",className:"account-media-gallery__modal-image"}),a.caption&&l.jsx("div",{className:"account-media-gallery__modal-caption",title:a.caption,children:p(a.caption)}),l.jsxs("button",{className:"account-media-gallery__modal-download",onClick:L=>b(a,L),children:[l.jsx(Sr,{})," Tlcharger en qualit complte"]})]}):((S=a.type)==null?void 0:S.toLowerCase())==="video"?l.jsxs(l.Fragment,{children:[l.jsx("video",{src:a.url,controls:!0,className:"account-media-gallery__modal-video"}),a.caption&&l.jsx("div",{className:"account-media-gallery__modal-caption",title:a.caption,children:p(a.caption)}),l.jsxs("button",{className:"account-media-gallery__modal-download",onClick:L=>b(a,L),children:[l.jsx(Sr,{})," Tlcharger"]})]}):h(a)?l.jsxs(l.Fragment,{children:[l.jsx("iframe",{src:a.url,className:"account-media-gallery__modal-pdf",title:"PDF Viewer",allow:"fullscreen"}),a.caption&&l.jsx("div",{className:"account-media-gallery__modal-caption",title:a.caption,children:p(a.caption)}),l.jsxs("button",{className:"account-media-gallery__modal-download",onClick:L=>b(a,L),children:[l.jsx(Sr,{})," Tlcharger"]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"account-media-gallery__modal-document",children:[l.jsx("div",{className:"account-media-gallery__modal-document-icon",children:y(a.type)}),l.jsx("div",{className:"account-media-gallery__modal-document-label",children:a.type==="document"?"Document PDF":a.type==="audio"||a.type==="voice"?"Fichier audio":"Fichier"}),a.caption&&l.jsx("div",{className:"account-media-gallery__modal-caption",children:a.caption})]}),l.jsxs("button",{className:"account-media-gallery__modal-download",onClick:L=>b(a,L),children:[l.jsx(Sr,{})," Tlcharger"]})]})]})}),document.body)]})}const _H=()=>oe.get("/admin/permissions"),xI=()=>oe.get("/admin/roles"),jH=()=>oe.get("/admin/users"),CH=(n,e)=>oe.put(`/admin/users/${n}/roles`,{assignments:e}),CS=()=>oe.get("/admin/users/with-access"),MH=()=>oe.get("/admin/accounts/all"),LH=(n,e,t)=>oe.put(`/admin/users/${n}/accounts/${e}/access`,{access_level:t}),_I="notif_prefs_v1";function SH(){try{const n=localStorage.getItem(_I);return n?JSON.parse(n):{}}catch{return{}}}function EH(n){try{localStorage.setItem(_I,JSON.stringify(n))}catch{}}const MS=[{key:"messages",label:"Notifications des messages",description:"Recevoir une notification pour chaque nouveau message"},{key:"previews",label:"Voir les aperus",description:"Afficher un aperu du message dans la notification"},{key:"reactions",label:"Notifications des ractions",description:"Recevoir une notification pour les ractions aux messages"},{key:"status",label:"Ractions au statut",description:"Recevoir des notifications pour les ractions aux statuts"}];function kH({accounts:n=[]}){const[e,t]=_.useState(!1),[s,i]=_.useState(!1),[r,a]=_.useState(()=>SH());_.useEffect(()=>{t(ev())},[]);const o=_.useMemo(()=>{const p={Icon:wj};if(!("Notification"in window))return{...p,text:"Non supportes",tone:"muted",Icon:n5};switch(Notification.permission){case"granted":return{...p,text:"Actives",tone:"success",Icon:LN};case"denied":return{...p,text:"Bloques",tone:"danger",Icon:f5};default:return{...p,text:"Non configures",tone:"warning",Icon:MN}}},[e]),c=async()=>{if(e){alert(` Pour dsactiver les notifications, allez dans les paramtres de votre navigateur.

Chrome: Paramtres > Confidentialit > Notifications
Firefox: Paramtres > Vie prive > Notifications`);return}i(!0);const p=await qh();t(p),i(!1),p&&setTimeout(()=>{Gy()},500)},f=async()=>{if(!e){alert(" Activez d'abord les notifications");return}await Gy()},d=(p,m,g)=>{a(w=>{const b={...w,[p]:{messages:!0,previews:!0,reactions:!0,status:!0,...w[p]||{},[m]:g}};return EH(b),b})},h=(p,m)=>{var g;return((g=r[p])==null?void 0:g[m])??!0};return l.jsxs("div",{className:"notif-settings-table",children:[l.jsxs("div",{className:"notif-settings-table__header",children:[l.jsxs("div",{children:[l.jsx("p",{className:"notif-settings-table__eyebrow",children:"Notifications"}),l.jsx("h3",{className:"notif-settings-table__title",children:"Paramtres de notifications"}),l.jsx("p",{className:"notif-settings-table__subtitle",children:"Configurez les notifications pour chaque compte WhatsApp."})]}),l.jsxs("div",{className:"notif-settings-table__global-status",children:[l.jsxs("div",{className:`notif-settings-table__badge notif-settings-table__badge--${o.tone}`,children:[l.jsx("span",{className:"notif-settings-table__badge-icon",children:l.jsx(o.Icon,{})}),l.jsx("span",{children:o.text})]}),l.jsxs("div",{className:"notif-settings-table__actions",children:[l.jsx("button",{className:"notif-btn notif-btn--primary",onClick:c,disabled:s||Notification.permission==="denied",children:s?"Demande en cours":e?"Actives":"Activer"}),l.jsxs("button",{className:"notif-btn notif-btn--ghost",onClick:f,disabled:!e,children:[l.jsx(t5,{style:{marginRight:6}}),"Tester"]})]})]})]}),!("Notification"in window)&&l.jsx("div",{className:"notif-settings-table__warning",children:l.jsx("p",{children:"Votre navigateur ne supporte pas les notifications."})}),Notification.permission==="denied"&&l.jsxs("div",{className:"notif-settings-table__warning",children:[l.jsx("p",{className:"notif-settings-table__warning-title",children:"Notifications bloques"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Chrome : cadenas   Notifications  Autoriser"}),l.jsx("li",{children:"Firefox : bouclier   Permissions  Notifications  Autoriser"}),l.jsx("li",{children:"Safari : Prfrences  Sites web  Notifications  Autoriser"})]})]}),n.length===0?l.jsx("div",{className:"notif-settings-table__empty",children:"Aucun compte WhatsApp configur."}):l.jsx("div",{className:"notif-settings-table__wrapper",children:l.jsxs("table",{className:"notif-settings-table__table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"notif-settings-table__account-col",children:"Compte WhatsApp"}),MS.map(p=>l.jsx("th",{className:"notif-settings-table__type-col",children:l.jsxs("div",{className:"notif-settings-table__type-header",children:[l.jsx("strong",{children:p.label}),l.jsx("small",{children:p.description})]})},p.key))]})}),l.jsx("tbody",{children:n.map(p=>l.jsxs("tr",{children:[l.jsx("td",{className:"notif-settings-table__account-cell",children:l.jsxs("div",{className:"notif-settings-table__account-info",children:[l.jsx("strong",{children:p.name||p.phone_number}),p.phone_number&&l.jsx("small",{children:p.phone_number})]})}),MS.map(m=>{const g=h(p.id,m.key);return l.jsx("td",{className:"notif-settings-table__toggle-cell",children:l.jsxs("label",{className:"notif-settings-table__toggle",children:[l.jsx("input",{type:"checkbox",checked:g,onChange:w=>d(p.id,m.key,w.target.checked),disabled:!e}),l.jsx("span",{className:`notif-settings-table__toggle-switch ${g?"notif-settings-table__toggle-switch--on":""} ${e?"":"notif-settings-table__toggle-switch--disabled"}`,children:l.jsx("span",{className:"notif-settings-table__toggle-label",children:g?"Oui":"Non"})})]})},m.key)})]},p.id))})]})})]})}const s2=[{value:"full",label:"Full",description:"Tous les droits (crire, lire, ...)"},{value:"lecture",label:"Lecture",description:"Peut voir mais pas crire"},{value:"aucun",label:"Aucun",description:"Ne sait mme pas que le compte existe"}];function NH({accounts:n,currentUserRole:e,canManagePermissions:t,currentUserId:s,refreshProfile:i}){const[r,a]=_.useState([]),[o,c]=_.useState([]),[f,d]=_.useState([]),[h,p]=_.useState(!1),[m,g]=_.useState(!1),w=(e==null?void 0:e.toLowerCase())||"",b=t||w==="admin",y=w==="admin"||w==="dev";_.useEffect(()=>{console.log(" PermissionsTable Debug:",{currentUserRole:e,normalizedRole:w,canManagePermissions:t,canEdit:b,canView:y})},[e,w,t,b,y]),_.useEffect(()=>{y&&x()},[y]);const x=async()=>{p(!0);try{const N=await MH();d(N.data||[]);const R=await CS();a(R.data||[])}catch(N){console.error("Erreur lors du chargement des donnes:",N)}finally{p(!1)}},v=async()=>{try{const N=await CS();a(N.data||[])}catch(N){console.error("Erreur lors du chargement des utilisateurs:",N)}},C=async()=>{try{const R=((await xI()).data||[]).filter(B=>B.slug==="admin"||B.slug==="dev"||B.slug==="manager");c(R)}catch(N){console.error("Erreur lors du chargement des rles:",N)}};_.useEffect(()=>{y&&C()},[y]);const S=(N,R)=>{var Y;const B=r.find($=>$.user_id===N);if(!B)return"aucun";const P=(Y=B.account_access)==null?void 0:Y.find($=>$.account_id===R);return(P==null?void 0:P.access_level)||"aucun"},L=async(N,R,B)=>{if(!b)return;const P=S(N,R);if(B!==P){g(!0);try{await LH(N,R,B),await v(),s&&N===s&&i&&await i()}catch(Y){console.error("Erreur lors de la sauvegarde:",Y),alert("Erreur lors de la sauvegarde de l'accs"),await v()}finally{g(!1)}}},k=async(N,R)=>{if(!b)return;const B=r.find($=>$.user_id===N);if(!B)return;const P=B.role_slug;if(R===P)return;const Y=o.find($=>$.slug===R);if(!Y){alert("Rle introuvable");return}g(!0);try{await CH(N,[{role_id:Y.id,account_id:null}]),await v(),s&&N===s&&i&&await i()}catch($){console.error("Erreur lors de la sauvegarde du rle:",$),alert("Erreur lors de la sauvegarde du rle"),await v()}finally{g(!1)}},A=N=>{switch(N){case"admin":return"#dc2626";case"dev":return"#2563eb";case"manager":return"#16a34a";default:return"#6b7280"}},T=N=>{const R=s2.find(B=>B.value===N);return(R==null?void 0:R.label)||N},I=N=>{switch(N){case"full":return"#25d366";case"lecture":return"#ffa500";case"aucun":return"#8696a0";default:return"#8696a0"}};return y?h?l.jsx("div",{className:"permissions-table-container",children:l.jsx("p",{children:"Chargement..."})}):l.jsxs("div",{className:"permissions-table-container",children:[l.jsxs("div",{className:"permissions-table-header",children:[l.jsx("p",{className:"permissions-table-description",children:"Grer les accs des utilisateurs par compte WhatsApp. Chaque cellule reprsente l'accs d'un utilisateur  un compte."}),b&&l.jsx("p",{className:"permissions-table-hint",children:"Slectionnez une option pour modifier l'accs automatiquement."})]}),l.jsxs("div",{className:"permissions-table-wrapper",children:[l.jsxs("table",{className:"permissions-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"permissions-table-user-col",children:"Utilisateur"}),l.jsx("th",{className:"permissions-table-role-col",children:"Rle"}),f.map(N=>l.jsx("th",{className:"permissions-table-account-col",children:l.jsxs("div",{className:"permissions-table-account-header",children:[l.jsx("strong",{children:N.name}),l.jsx("small",{children:N.phone_number||"Pas de numro"})]})},N.id))]})}),l.jsx("tbody",{children:r.map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"permissions-table-user-cell",children:l.jsx("div",{className:"permissions-table-user-info",children:l.jsx("strong",{children:N.email||"Utilisateur"})})}),l.jsx("td",{className:"permissions-table-role-cell",children:b?l.jsx("select",{value:N.role_slug||"",onChange:R=>k(N.user_id,R.target.value),className:"permissions-table-select",disabled:m,style:{backgroundColor:A(N.role_slug),color:"#fff",border:"none",cursor:"pointer"},children:o.map(R=>l.jsx("option",{value:R.slug,children:R.name},R.id))}):l.jsx("div",{className:"permissions-table-access-badge",style:{backgroundColor:A(N.role_slug),color:"#fff"},children:N.role_name||"Aucun rle"})}),f.map(R=>{const B=S(N.user_id,R.id);return l.jsx("td",{className:"permissions-table-access-cell",style:{cursor:b?"pointer":"default"},children:b?l.jsx("select",{value:B,onChange:P=>L(N.user_id,R.id,P.target.value),className:"permissions-table-select",disabled:m,style:{backgroundColor:I(B),color:"#fff",border:"none",cursor:"pointer"},children:s2.map(P=>l.jsx("option",{value:P.value,children:P.label},P.value))}):l.jsx("div",{className:"permissions-table-access-badge",style:{backgroundColor:I(B),color:"#fff"},children:T(B)})},R.id)})]},N.user_id))})]}),r.length===0&&l.jsx("p",{className:"permissions-table-empty",children:"Aucun utilisateur trouv."})]}),l.jsxs("div",{className:"permissions-table-legend",children:[l.jsx("h4",{children:"Lgende des accs :"}),l.jsx("div",{className:"permissions-table-legend-items",children:s2.map(N=>l.jsxs("div",{className:"permissions-table-legend-item",children:[l.jsx("span",{className:"permissions-table-legend-badge",style:{backgroundColor:I(N.value)},children:N.label}),l.jsx("span",{className:"permissions-table-legend-desc",children:N.description})]},N.value))}),l.jsx("h4",{style:{marginTop:"24px",marginBottom:"12px"},children:"Lgende des rles :"}),l.jsxs("div",{className:"permissions-table-legend-items",children:[l.jsxs("div",{className:"permissions-table-legend-item",children:[l.jsx("span",{className:"permissions-table-legend-badge",style:{backgroundColor:A("admin")},children:"Admin"}),l.jsx("span",{className:"permissions-table-legend-desc",children:"Peut changer les permissions et accs"})]}),l.jsxs("div",{className:"permissions-table-legend-item",children:[l.jsx("span",{className:"permissions-table-legend-badge",style:{backgroundColor:A("dev")},children:"DEV"}),l.jsx("span",{className:"permissions-table-legend-desc",children:"Peut voir les permissions mais ne pas les changer"})]}),l.jsxs("div",{className:"permissions-table-legend-item",children:[l.jsx("span",{className:"permissions-table-legend-badge",style:{backgroundColor:A("manager")},children:"Manager"}),l.jsx("span",{className:"permissions-table-legend-desc",children:"Ne peut rien voir des autorisations"})]})]})]})]}):l.jsx("div",{className:"permissions-table-container",children:l.jsx("p",{className:"muted",children:"Vous n'avez pas la permission de voir les accs."})})}const AH="discussion_prefs_v1",i2=[{value:"system",label:"Thme par dfaut du systme",icon:_y},{value:"light",label:"Clair",icon:r5},{value:"dark",label:"Sombre",icon:X8}],jI=[{id:"default",label:"Par dfaut",color:null},{id:"teal",label:"Teal",color:"#075e54"},{id:"blue",label:"Bleu",color:"#1a2332"},{id:"grey",label:"Gris",color:"#2a2a2a"},{id:"purple",label:"Violet",color:"#3d2a4d"},{id:"brown",label:"Marron",color:"#3a2a1a"},{id:"red",label:"Rouge",color:"#4a1a1a"},{id:"dark-teal",label:"Teal fonc",color:"#0a3d2a"}];function TH(n){try{localStorage.setItem(AH,JSON.stringify(n)),CI(n.theme),MI(n.wallpaper,n.wallpaperDoodles)}catch{}}function CI(n){const e=document.documentElement;if(n==="system"){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;e.setAttribute("data-theme",t?"dark":"light")}else e.setAttribute("data-theme",n)}function MI(n,e){var s;const t=document.documentElement;if(n==="default")t.style.setProperty("--chat-wallpaper-color","transparent"),t.style.setProperty("--chat-wallpaper-opacity","0"),t.style.setProperty("--chat-wallpaper-pattern","none");else{const i=(s=jI.find(r=>r.id===n))==null?void 0:s.color;i&&(t.style.setProperty("--chat-wallpaper-color",i),t.style.setProperty("--chat-wallpaper-opacity","0.15"),e?t.style.setProperty("--chat-wallpaper-pattern",`url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='doodles' patternUnits='userSpaceOnUse' width='100' height='100'%3E%3Ccircle cx='20' cy='20' r='2' fill='rgba(255,255,255,0.08)'/%3E%3Ccircle cx='80' cy='40' r='1.5' fill='rgba(255,255,255,0.06)'/%3E%3Ccircle cx='50' cy='70' r='1' fill='rgba(255,255,255,0.04)'/%3E%3Ccircle cx='30' cy='90' r='1.5' fill='rgba(255,255,255,0.05)'/%3E%3Ccircle cx='70' cy='10' r='1' fill='rgba(255,255,255,0.04)'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23doodles)'/%3E%3C/svg%3E")`):t.style.setProperty("--chat-wallpaper-pattern","none"))}}function IH(){var h,p;const n=Tg(),[e,t]=_.useState(n),[s,i]=_.useState(!1),[r,a]=_.useState(!1);_.useEffect(()=>{t(n)},[n]);const o=(m,g)=>{const w={...e,[m]:g};t(w),TH(w),m==="theme"?CI(g):(m==="wallpaper"||m==="wallpaperDoodles")&&MI(w.wallpaper,w.wallpaperDoodles),window.dispatchEvent(new Event("prefsUpdated"))},c=m=>{o("theme",m),i(!1)},f=m=>{o("wallpaper",m)},d=((h=i2.find(m=>m.value===e.theme))==null?void 0:h.label)||"Thme par dfaut du systme";return(p=i2.find(m=>m.value===e.theme))!=null&&p.icon,l.jsxs("div",{className:"discussion-settings",children:[l.jsxs("div",{className:"discussion-settings__section",children:[l.jsx("h3",{className:"discussion-settings__section-title",children:"Affichage"}),l.jsxs("button",{className:"discussion-settings__option",onClick:()=>i(!0),children:[l.jsxs("div",{className:"discussion-settings__option-content",children:[l.jsx("strong",{children:"Thme"}),l.jsx("small",{children:d})]}),l.jsx(_y,{className:"discussion-settings__option-arrow"})]}),l.jsxs("button",{className:"discussion-settings__option",onClick:()=>a(!0),children:[l.jsx("div",{className:"discussion-settings__option-content",children:l.jsx("strong",{children:"Fond d'cran"})}),l.jsx(Dr,{className:"discussion-settings__option-arrow"})]})]}),l.jsx("div",{className:"discussion-settings__divider"}),l.jsxs("div",{className:"discussion-settings__section",children:[l.jsx("h3",{className:"discussion-settings__section-title",children:"Paramtres des discussions"}),l.jsxs("label",{className:"discussion-settings__toggle-option",children:[l.jsxs("div",{className:"discussion-settings__option-content",children:[l.jsx("strong",{children:"Vrification orthographique"}),l.jsx("small",{children:"Vrifier l'orthographe pendant la saisie"})]}),l.jsxs("label",{className:"discussion-settings__toggle-wrapper",children:[l.jsx("input",{type:"checkbox",checked:e.spellCheck,onChange:m=>o("spellCheck",m.target.checked)}),l.jsx("div",{className:"discussion-settings__toggle-slider"})]})]}),l.jsxs("label",{className:"discussion-settings__toggle-option",children:[l.jsxs("div",{className:"discussion-settings__option-content",children:[l.jsx("strong",{children:"Remplacer le texte par un emoji"}),l.jsx("small",{children:"Les emojis remplaceront certaines parties de texte  mesure que vous crivez"})]}),l.jsxs("label",{className:"discussion-settings__toggle-wrapper",children:[l.jsx("input",{type:"checkbox",checked:e.emojiReplace,onChange:m=>o("emojiReplace",m.target.checked)}),l.jsx("div",{className:"discussion-settings__toggle-slider"})]})]}),l.jsxs("label",{className:"discussion-settings__toggle-option",children:[l.jsxs("div",{className:"discussion-settings__option-content",children:[l.jsx("strong",{children:"Entre pour envoyer"}),l.jsx("small",{children:"La touche Entre enverra votre message."})]}),l.jsxs("label",{className:"discussion-settings__toggle-wrapper",children:[l.jsx("input",{type:"checkbox",checked:e.enterToSend,onChange:m=>o("enterToSend",m.target.checked)}),l.jsx("div",{className:"discussion-settings__toggle-slider"})]})]})]}),s&&l.jsx("div",{className:"discussion-settings__dialog-overlay",onClick:()=>i(!1),children:l.jsxs("div",{className:"discussion-settings__dialog",onClick:m=>m.stopPropagation(),children:[l.jsx("h4",{className:"discussion-settings__dialog-title",children:"Thme"}),l.jsx("div",{className:"discussion-settings__dialog-options",children:i2.map(m=>{const g=m.icon;return l.jsxs("label",{className:"discussion-settings__radio-option",children:[l.jsx("input",{type:"radio",name:"theme",value:m.value,checked:e.theme===m.value,onChange:()=>c(m.value)}),l.jsx(g,{className:"discussion-settings__radio-icon"}),l.jsx("span",{children:m.label})]},m.value)})}),l.jsxs("div",{className:"discussion-settings__dialog-actions",children:[l.jsx("button",{className:"discussion-settings__dialog-btn-cancel",onClick:()=>i(!1),children:"Annuler"}),l.jsx("button",{className:"discussion-settings__dialog-btn-ok",onClick:()=>i(!1),children:"OK"})]})]})}),r&&l.jsx("div",{className:"discussion-settings__dialog-overlay",onClick:()=>a(!1),children:l.jsxs("div",{className:"discussion-settings__dialog discussion-settings__dialog--wallpaper",onClick:m=>m.stopPropagation(),children:[l.jsx("h4",{className:"discussion-settings__dialog-title",children:"Fond d'cran de la discussion"}),l.jsxs("label",{className:"discussion-settings__checkbox-option",children:[l.jsx("input",{type:"checkbox",checked:e.wallpaperDoodles,onChange:m=>o("wallpaperDoodles",m.target.checked)}),l.jsx("span",{children:"Ajouter WhatsApp Doodles"})]}),l.jsx("div",{className:"discussion-settings__wallpaper-grid",children:jI.map(m=>l.jsxs("button",{className:`discussion-settings__wallpaper-swatch ${e.wallpaper===m.id?"discussion-settings__wallpaper-swatch--selected":""}`,onClick:()=>f(m.id),style:m.color?{backgroundColor:m.color}:{},children:[m.color?null:l.jsx("span",{className:"discussion-settings__wallpaper-label",children:"Par dfaut"}),e.wallpaper===m.id&&l.jsx(tr,{className:"discussion-settings__wallpaper-check"})]},m.id))})]})})]})}const DH=[{value:"system",label:"Dfaut du systme (Franais)"},{value:"fr",label:"Franais"},{value:"en",label:"English"},{value:"es",label:"Espaol"},{value:"de",label:"Deutsch"}],PH=[{value:75,label:"75 %"},{value:90,label:"90 %"},{value:100,label:"100 % (par dfaut)"},{value:110,label:"110 %"},{value:125,label:"125 %"},{value:150,label:"150 %"},{value:175,label:"175 %"},{value:200,label:"200 %"}];function RH(){const[n,e]=_.useState(()=>localStorage.getItem("general_startOnLogin")==="true"),[t,s]=_.useState(()=>localStorage.getItem("general_minimizeToTray")!=="false"),[i,r]=_.useState(()=>localStorage.getItem("general_language")||"system"),[a,o]=_.useState(()=>parseInt(localStorage.getItem("general_fontSize")||"100",10));return _.useEffect(()=>{localStorage.setItem("general_startOnLogin",n.toString())},[n]),_.useEffect(()=>{localStorage.setItem("general_minimizeToTray",t.toString())},[t]),_.useEffect(()=>{localStorage.setItem("general_language",i),document.documentElement.setAttribute("lang",i==="system"?navigator.language.split("-")[0]:i)},[i]),_.useEffect(()=>{localStorage.setItem("general_fontSize",a.toString()),document.documentElement.style.fontSize=`${a}%`},[a]),l.jsxs("div",{className:"general-settings",children:[l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Dmarrer et fermer"}),l.jsxs("div",{className:"general-settings__option",children:[l.jsx("div",{className:"general-settings__option-content",children:l.jsx("div",{className:"general-settings__option-title",children:"Dmarrer WhatsApp lors de la connexion"})}),l.jsxs("label",{className:"general-settings__toggle",children:[l.jsx("input",{type:"checkbox",checked:n,onChange:c=>e(c.target.checked)}),l.jsx("span",{className:"general-settings__toggle-slider"})]})]}),l.jsxs("div",{className:"general-settings__option",children:[l.jsxs("div",{className:"general-settings__option-content",children:[l.jsx("div",{className:"general-settings__option-title",children:"Minimiser dans la barre des tches"}),l.jsx("div",{className:"general-settings__option-description",children:"Faites en sorte que WhatsApp continue de fonctionner aprs avoir ferm la fentre de l'application"})]}),l.jsxs("label",{className:"general-settings__toggle",children:[l.jsx("input",{type:"checkbox",checked:t,onChange:c=>s(c.target.checked)}),l.jsx("span",{className:"general-settings__toggle-slider"})]})]})]}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Langue"}),l.jsxs("div",{className:"general-settings__select-wrapper",children:[l.jsx(kN,{className:"general-settings__select-icon"}),l.jsx("select",{className:"general-settings__select",value:i,onChange:c=>r(c.target.value),children:DH.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Taille de la police"}),l.jsxs("div",{className:"general-settings__select-wrapper",children:[l.jsx(o5,{className:"general-settings__select-icon"}),l.jsx("select",{className:"general-settings__select",value:a,onChange:c=>o(parseInt(c.target.value,10)),children:PH.map(c=>l.jsx("option",{value:c.value,children:c.label},c.value))})]}),l.jsx("div",{className:"general-settings__hint",children:"Utilisez Ctrl +/- pour augmenter ou diminuer la taille du texte"})]})]})}function OH({accountId:n,currentFolderId:e="root",onSelect:t,onClose:s}){const[i,r]=_.useState([]),[a,o]=_.useState(!1),[c,f]=_.useState(null),[d,h]=_.useState([{id:"root",name:"Racine du Drive"}]),[p,m]=_.useState(e),g=d[d.length-1];_.useEffect(()=>{w(g.id)},[g.id]);const w=async(v="root")=>{var C;o(!0),f(null);try{const S=await A8(n,v);r(((C=S.data)==null?void 0:C.folders)||[])}catch(S){console.error("Error loading folders:",S),f("Erreur lors du chargement des dossiers")}finally{o(!1)}},b=v=>{v.id==="root"?m("root"):(h(C=>[...C,v]),m(v.id))},y=()=>{if(d.length>1){h(C=>C.slice(0,-1));const v=d[d.length-2];m(v.id)}},x=()=>{t&&t(p==="root"?"":p),s&&s()};return l.jsx("div",{className:"modal-overlay",onClick:s,children:l.jsxs("div",{className:"modal-content google-drive-picker",onClick:v=>v.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Slectionner un dossier Google Drive"}),l.jsx("button",{className:"modal-close",onClick:s,type:"button",children:l.jsx(Ms,{})})]}),l.jsxs("div",{className:"google-drive-picker__navigation",children:[l.jsx("div",{className:"google-drive-picker__breadcrumb",children:d.map((v,C)=>l.jsxs("span",{className:"breadcrumb-item",children:[C>0&&l.jsx("span",{className:"breadcrumb-separator",children:"/"}),l.jsx("span",{className:C===d.length-1?"breadcrumb-current":"",children:v.name})]},v.id))}),d.length>1&&l.jsxs("button",{className:"google-drive-picker__back-btn",onClick:y,type:"button",children:[l.jsx(W8,{})," Retour"]})]}),l.jsx("div",{className:"google-drive-picker__content",children:a?l.jsx("div",{className:"google-drive-picker__loading",children:"Chargement..."}):c?l.jsx("div",{className:"google-drive-picker__error",children:c}):i.length===0?l.jsx("div",{className:"google-drive-picker__empty",children:"Aucun dossier dans ce rpertoire"}):l.jsx("div",{className:"google-drive-picker__folders",children:i.map(v=>l.jsxs("div",{className:`google-drive-picker__folder-item ${p===v.id?"selected":""}`,onClick:()=>b(v),children:[l.jsx(sw,{className:"folder-icon"}),l.jsx("span",{className:"folder-name",children:v.name}),p===v.id&&l.jsx(tr,{className:"folder-check"})]},v.id))})}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("div",{className:"google-drive-picker__selected",children:p==="root"||p===""?l.jsx("span",{children:"Racine du Drive slectionne"}):l.jsxs("span",{children:["Dossier slectionn: ",l.jsx("strong",{children:g.name})]})}),l.jsxs("div",{className:"modal-footer__actions",children:[l.jsx("button",{className:"btn-secondary",onClick:s,type:"button",children:"Annuler"}),l.jsxs("button",{className:"btn-primary",onClick:x,type:"button",children:[l.jsx(tr,{})," Slectionner"]})]})]})]})})}const LS={name:"",slug:"",phone_number:"",phone_number_id:"",access_token:"",verify_token:""},zH={name:"",slug:"",description:"",permissions:[]};function BH({accounts:n=[],onSignOut:e,currentUser:t,canViewAccounts:s,canManageAccounts:i,canManageRoles:r,canManageUsers:a,canViewPermissions:o,canManagePermissions:c,onAccountsRefresh:f,refreshProfile:d}){var J,Ae,xe,ze,Ie;const[h,p]=_.useState(LS),[m,g]=_.useState(zH),[w,b]=_.useState([]),[y,x]=_.useState([]),[v,C]=_.useState([]),[S,L]=_.useState(!1),[k,A]=_.useState({}),[T,I]=_.useState({}),[N,R]=_.useState(""),[B,P]=_.useState("general"),[Y,$]=_.useState(""),[X,O]=_.useState({}),[G,ne]=_.useState({}),[de,le]=_.useState(!1),[H,me]=_.useState(null),[q,ce]=_.useState({});_.useMemo(()=>Object.fromEntries(n.map(z=>[z.id,z])),[n]);const we=_.useCallback(async()=>{if(!(!c&&!o)){L(!0);try{if(c||o){const[z,U]=await Promise.all([_H(),xI()]);b(z.data),x(U.data)}if(a){const z=await jH();C(z.data)}}catch(z){console.error("Admin data error",z)}finally{L(!1)}}},[c,a,o]);_.useEffect(()=>{we()},[we]);const Qe=(z,U)=>{p(se=>({...se,[z]:U,...z==="name"&&!se.slug?{slug:U.toLowerCase().replace(/\s+/g,"-")}:{}}))},dt=async z=>{z.preventDefault();try{await L8({...h,phone_number:h.phone_number||null}),p(LS),R("Compte cr avec succs."),f==null||f()}catch(U){console.error("create account error",U),R("Erreur lors de la cration du compte.")}},Je=async z=>{window.confirm("Supprimer ce compte WhatsApp ?")&&(await S8(z),f==null||f())},Q=async(z,U)=>{try{await E8(z,U),R("Configuration Google Drive mise  jour avec succs."),f==null||f()}catch(se){console.error("update google drive error",se),R("Erreur lors de la mise  jour de Google Drive.")}},ae=z=>{O(U=>({...U,[z]:!U[z]}))},Ne=async z=>{var U;try{const se=await k8(z);(U=se.data)!=null&&U.authorization_url&&(window.location.href=se.data.authorization_url)}catch(se){console.error("init google drive auth error",se),R("Erreur lors de l'initialisation de la connexion Google Drive.")}},Re=async z=>{if(window.confirm("Dconnecter Google Drive de ce compte ?"))try{await N8(z),R("Google Drive dconnect avec succs."),f==null||f()}catch(U){console.error("disconnect google drive error",U),R("Erreur lors de la dconnexion de Google Drive.")}},Te=z=>{me(z),le(!0)},$t=(z,U)=>{ne(se=>({...se,[z]:U})),Q(z,{google_drive_folder_id:U}),le(!1),me(null)},hs=async z=>{var U,se,_e;if(window.confirm("Uploader tous les mdias existants vers Google Drive ? Cela peut prendre du temps.")){ce(W=>({...W,[z]:!0})),R("Upload des mdias en cours...");try{const W=await T8(z,100);((U=W.data)==null?void 0:U.status)==="skipped"?R(`Backfill ignor : ${W.data.reason||"Google Drive non configur"}`):R(`Backfill termin : ${W.data.uploaded||0} uploads, ${W.data.failed||0} checs sur ${W.data.processed||0} traits.`),f==null||f()}catch(W){console.error("Error backfilling Google Drive:",W);const Me=((_e=(se=W.response)==null?void 0:se.data)==null?void 0:_e.detail)||W.message||"Erreur lors de l'upload des mdias vers Google Drive.";R(`Erreur : ${Me}`)}finally{ce(W=>({...W,[z]:!1}))}}},jt=_.useMemo(()=>{const z=[{id:"general",label:"Gnral",icon:_y,description:"Dmarrer et fermer"},{id:"discussions",label:"Discussions",icon:Hu,description:"Thme, fond d'cran, paramtres des discussions"},{id:"notifications",label:"Notifications",icon:wj,description:"Notifications de messages"}];return(s||i)&&z.push({id:"accounts",label:"Comptes WhatsApp",icon:jy,description:"Grer les comptes WhatsApp Cloud API"}),(c||o)&&z.push({id:"permissions",label:"Permissions",icon:jy,description:"Grer les accs par compte WhatsApp"}),z},[s,i,r,a,o,c]),gn=_.useMemo(()=>{if(!Y.trim())return jt;const z=Y.toLowerCase();return jt.filter(U=>U.label.toLowerCase().includes(z)||U.description.toLowerCase().includes(z))},[jt,Y]),V=z=>{if(!z)return"U";const U=z.split("@")[0].split(/[._-]/);return U.length>=2?(U[0][0]+U[1][0]).toUpperCase():z[0].toUpperCase()},he=()=>l.jsxs("div",{className:"settings-content__empty",children:[l.jsx(Ib,{className:"settings-content__empty-icon"}),l.jsx("h2",{className:"settings-content__empty-title",children:"Paramtres"})]});return l.jsxs("div",{className:"settings-shell",children:[l.jsxs("aside",{className:"settings-menu",children:[l.jsx("h2",{className:"settings-menu__title",children:"Paramtres"}),l.jsxs("div",{className:"settings-menu__search",children:[l.jsx(xo,{className:"settings-menu__search-icon"}),l.jsx("input",{type:"text",placeholder:"Rechercher dans les paramtres",value:Y,onChange:z=>$(z.target.value),className:"settings-menu__search-input"})]}),l.jsxs("div",{className:"settings-menu__profile",children:[l.jsx("div",{className:"settings-menu__profile-avatar",children:V(t==null?void 0:t.email)}),l.jsxs("div",{className:"settings-menu__profile-info",children:[l.jsx("div",{className:"settings-menu__profile-name",children:((Ae=(J=t==null?void 0:t.email)==null?void 0:J.split("@")[0])==null?void 0:Ae.replace(/[._-]/g," "))||"Utilisateur"}),l.jsx("div",{className:"settings-menu__profile-status",children:"Salut ! J'utilise WhatsApp."})]})]}),l.jsx("nav",{className:"settings-menu__nav",children:gn.map(z=>{const U=z.icon;return l.jsxs("button",{className:`settings-menu__item ${B===z.id?"settings-menu__item--active":""}`,onClick:()=>P(z.id),children:[l.jsx(U,{className:"settings-menu__item-icon"}),l.jsxs("div",{className:"settings-menu__item-content",children:[l.jsx("div",{className:"settings-menu__item-label",children:z.label}),z.description&&l.jsx("div",{className:"settings-menu__item-desc",children:z.description})]})]},z.id)})})]}),l.jsxs("div",{className:"settings-content",children:[B==="general"&&l.jsxs("div",{className:"settings-content__panel",children:[l.jsx("h1",{className:"settings-content__panel-title",children:"Gnral"}),l.jsx(RH,{}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Profil"}),l.jsxs("div",{className:"settings-content__section-content",children:[l.jsx("p",{children:(t==null?void 0:t.email)||"Utilisateur connect"}),l.jsxs("p",{className:"muted",children:["Rles actifs :"," ",(xe=t==null?void 0:t.roles)!=null&&xe.length?t.roles.map(z=>z.role_name?z.role_name:z.role_slug).join(", "):"aucun"]}),l.jsx("button",{className:"settings-btn settings-btn--danger",onClick:e,children:"Dconnexion"})]})]}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Comptes disponibles"}),l.jsx("div",{className:"settings-content__section-content",children:n.length?l.jsx("div",{className:"account-grid",children:n.map(z=>l.jsxs("article",{className:"account-card compact",children:[l.jsxs("header",{children:[l.jsx("strong",{children:z.name}),l.jsx("span",{children:z.phone_number||"Numro inconnu"})]}),l.jsxs("div",{className:"account-meta",children:[l.jsxs("span",{children:["ID : ",z.id]}),l.jsxs("span",{children:["Phone ID : ",z.phone_number_id]})]})]},z.id))}):l.jsx("p",{children:"Aucun compte assign  ce profil."})})]})]}),B==="notifications"&&l.jsxs("div",{className:"settings-content__panel",children:[l.jsx("h1",{className:"settings-content__panel-title",children:"Notifications"}),l.jsx("div",{className:"settings-content__section-content",children:l.jsx(kH,{accounts:n})})]}),B==="compte"&&he(),B==="confidentialite"&&he(),B==="discussions"&&l.jsxs("div",{className:"settings-content__panel",children:[l.jsx("h1",{className:"settings-content__panel-title",children:"Discussions"}),l.jsx("section",{className:"settings-content__section",children:l.jsx(IH,{})})]}),B==="accounts"&&(s||i)&&l.jsxs("div",{className:"settings-content__panel",children:[l.jsx("h1",{className:"settings-content__panel-title",children:"Comptes WhatsApp"}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Gestion des comptes"}),l.jsx("p",{className:"muted",children:i?"Ajoute tes numros WhatsApp Cloud API et choisis les membres qui y auront accs.":"Visualise les comptes WhatsApp Cloud API configurs."}),N&&l.jsx("p",{children:N}),n.length?l.jsx("div",{className:"account-grid",children:n.map(z=>{const U=X[z.id],se=z.google_drive_connected||!1,_e=z.google_drive_enabled||!1,W=z.google_drive_folder_id||"";return l.jsxs("article",{className:"account-card",children:[l.jsxs("header",{children:[l.jsx("strong",{children:z.name}),l.jsx("span",{children:z.phone_number||"Numro inconnu"})]}),l.jsxs("div",{className:"account-meta",children:[l.jsxs("span",{children:["ID : ",z.id]}),l.jsxs("span",{children:["Phone ID : ",z.phone_number_id]})]}),s&&l.jsxs("div",{className:"account-card__section",children:[l.jsxs("button",{className:"account-card__section-toggle",onClick:()=>ae(z.id),type:"button",children:[l.jsx(CL,{className:"account-card__section-icon"}),l.jsx("span",{children:"Google Drive"}),l.jsx("span",{className:se?"account-card__badge account-card__badge--enabled":"account-card__badge",children:se?"Connect":"Non connect"})]}),U&&l.jsx("div",{className:"account-card__section-content",children:se?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[l.jsx("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:"Compte Google connect"}),l.jsx("button",{className:"danger subtle",onClick:()=>Re(z.id),type:"button",children:"Dconnecter"})]}),i&&l.jsxs("label",{className:"account-card__toggle-label",children:[l.jsx("input",{type:"checkbox",checked:_e,onChange:Me=>Q(z.id,{google_drive_enabled:Me.target.checked})}),l.jsx("span",{children:"Activer l'upload automatique vers Google Drive"})]}),se&&l.jsxs("div",{className:"account-card__input-group",children:[l.jsxs("label",{children:["Dossier racine Google Drive",l.jsxs("div",{className:"google-drive-folder-selector",children:[l.jsx("div",{className:"google-drive-folder-selector__current",children:W?l.jsxs("span",{className:"folder-path",children:[l.jsx(sw,{})," Dossier slectionn"]}):l.jsxs("span",{className:"folder-path muted",children:[l.jsx(sw,{})," Racine du Drive"]})}),l.jsxs("button",{type:"button",className:"btn-secondary",onClick:()=>Te(z.id),children:[l.jsx(sw,{})," Parcourir les dossiers"]})]})]}),l.jsx("small",{className:"muted",children:"Le dossier racine o seront crs les dossiers par numro de tlphone. Les documents seront organiss dans des dossiers nomms d'aprs le numro de tlphone de chaque contact. Si aucun dossier n'est slectionn, la racine de votre Google Drive sera utilise."}),i&&l.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>hs(z.id),disabled:q[z.id],style:{marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:q[z.id]?l.jsxs(l.Fragment,{children:[l.jsx(Z8,{className:"spinning"}),"Upload en cours..."]}):l.jsxs(l.Fragment,{children:[l.jsx(l5,{}),"Uploader les mdias existants"]})})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"muted",style:{marginBottom:"1rem"},children:"Connectez votre compte Google Drive pour activer l'upload automatique des documents. Les fichiers seront organiss par numro de tlphone."}),l.jsxs("button",{className:"settings-btn",onClick:()=>Ne(z.id),type:"button",children:[l.jsx(CL,{style:{marginRight:"0.5rem"}}),"Se connecter avec Google Drive"]})]})})]}),i&&l.jsx("button",{className:"danger subtle",onClick:()=>Je(z.id),type:"button",children:"Supprimer"})]},z.id)})}):l.jsx("p",{children:"Aucun compte pour le moment."}),i&&l.jsxs("form",{className:"account-form",onSubmit:dt,children:[l.jsx("h3",{children:"Ajouter un compte"}),l.jsxs("div",{className:"form-grid",children:[l.jsx("input",{placeholder:"Nom",value:h.name,onChange:z=>Qe("name",z.target.value),required:!0}),l.jsx("input",{placeholder:"Slug",value:h.slug,onChange:z=>Qe("slug",z.target.value),required:!0}),l.jsx("input",{placeholder:"Numro (optionnel)",value:h.phone_number,onChange:z=>Qe("phone_number",z.target.value)}),l.jsx("input",{placeholder:"Phone Number ID",value:h.phone_number_id,onChange:z=>Qe("phone_number_id",z.target.value),required:!0}),l.jsx("input",{placeholder:"Access Token",value:h.access_token,onChange:z=>Qe("access_token",z.target.value),required:!0}),l.jsx("input",{placeholder:"Verify Token",value:h.verify_token,onChange:z=>Qe("verify_token",z.target.value),required:!0})]}),l.jsx("button",{type:"submit",children:"Crer"})]})]})]}),B==="permissions"&&(c||o)&&l.jsxs("div",{className:"settings-content__panel",children:[l.jsx("h1",{className:"settings-content__panel-title",children:"Permissions"}),l.jsxs("section",{className:"settings-content__section",children:[l.jsx("h2",{className:"settings-content__section-title",children:"Accs par compte WhatsApp"}),l.jsx(NH,{accounts:n,currentUserRole:(t!=null&&t.roles&&t.roles.length>0?(ze=t.roles[0])==null?void 0:ze.role_slug:t==null?void 0:t.role_slug)||null,canManagePermissions:c,currentUserId:t==null?void 0:t.id,refreshProfile:d})]})]}),!1]}),de&&H&&l.jsx(OH,{accountId:H,currentFolderId:G[H]||((Ie=n.find(z=>z.id===H))==null?void 0:Ie.google_drive_folder_id)||"root",onSelect:z=>$t(H,z),onClose:()=>{le(!1),me(null)}})]})}const FH=n=>oe.get(`/bot/profile/${n}`),UH=(n,e)=>oe.put(`/bot/profile/${n}`,e),Vu=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`field_${Math.random().toString(36).slice(2,10)}`,e_=()=>({category:"",content:"",_id:Vu()}),t_=()=>({name:"",steps:"",_id:Vu()}),n_=()=>({question:"",answer:"",_id:Vu()}),s_=()=>({case:"",response:"",_id:Vu()}),df={system_rules:{language:"Franais",tone:"Professionnel, clair, courtois, concis.",role:"Assistant SAV WhatsApp pour l'entreprise.",mission:"Rpondre aux clients uniquement  partir du playbook, sans inventer, en restant dans le primtre de l'entreprise.",style:"Commencer par une phrase de rponse directe, puis ajouter quelques puces si ncessaire (tapes, conditions). Pas de gras ni de titres Markdown.",priority:"1) Playbook structur (SYSTEM RULES, INFOS ENTREPRISE, OFFRES, CONDITIONS, CAS SPCIAUX, LIENS, ESCALADE, RGLES SPCIALES BOT) 2) Liens autoriss 3) Historique conversationnel 4) Bon sens (sans inventer).",response_policy:`Si une information est absente ou insuffisante dans le playbook, rpondre uniquement : "Je me renseigne auprs d'un collgue et je reviens vers vous au plus vite".`,security:"Ne jamais demander ni accepter de mot de passe ou code de scurit. Respect de la confidentialit et du RGPD."},company:{name:"",address:"",hours_block:"",zone:"",rendezvous:"",activity:""},conditions:{zone:"",payment:"",engagement:"",restrictions:"",documents:""},links:{site:"",products:"",form:"",other:""},escalation:{procedure:"",contact:"",hours:""},special_rules:`Le bot reste concis et ne fait pas de small talk. Si une question ncessite une information absente du playbook, il rpond uniquement : "Je me renseigne auprs d'un collgue et je reviens vers vous au plus vite". Il nencourage pas les appels ni les contacts directs ; il peut proposer : "Vous pouvez passer directement au bureau".`},F1=(n,e)=>!Array.isArray(n)||n.length===0?[e()]:n.map(t=>({...e(),...t,_id:t._id||Vu()})),LI=(n={})=>({system_rules:{...df.system_rules,...n.system_rules||{}},company:{...df.company,...n.company||{}},offers:F1(n.offers,e_),conditions:{...df.conditions,...n.conditions||{}},procedures:F1(n.procedures,t_),faq:F1(n.faq,n_),special_cases:F1(n.special_cases,s_),links:{...df.links,...n.links||{}},escalation:{...df.escalation,...n.escalation||{}},special_rules:typeof n.special_rules=="string"&&n.special_rules.trim()?n.special_rules:df.special_rules}),$H=n=>({...n,offers:n.offers.map(({_id:e,...t})=>t),procedures:n.procedures.map(({_id:e,...t})=>t),faq:n.faq.map(({_id:e,...t})=>t),special_cases:n.special_cases.map(({_id:e,...t})=>t)}),SS=()=>({business_name:"",description:"",address:"",hours:"",knowledge_base:"",custom_fields:[],template_config:LI({})}),HH=n=>{var o,c,f,d;if(!n)return"";const e=[],t=n.system_rules||{};Object.values(t).some(Boolean)&&(e.push("## SYSTEM RULES"),t.role&&e.push(`Rle : ${t.role}`),t.mission&&e.push(`Mission : ${t.mission}`),t.language&&e.push(`Langue par dfaut : ${t.language}`),t.tone&&e.push(`Ton attendu : ${t.tone}`),t.style&&e.push(`Style de rponse : ${t.style}`),t.priority&&e.push(`Priorit des sources : ${t.priority}`),t.response_policy&&e.push(`Politique de rponse : ${t.response_policy}`),t.security&&e.push(`Rgles de scurit : ${t.security}`));const s=n.company||{};Object.values(s).some(Boolean)&&(e.push(`
## INFOS ENTREPRISE`),s.name&&e.push(`Nom entreprise : ${s.name}`),s.address&&e.push(`Adresse : ${s.address}`),s.hours_block&&e.push(`Horaires dtaills : ${s.hours_block}`),s.zone&&e.push(`Zone couverte : ${s.zone}`),s.rendezvous&&e.push(`Rendez-vous : ${s.rendezvous}`),s.activity&&e.push(`Activit principale : ${s.activity}`)),(o=n.offers)!=null&&o.length&&(e.push(`
## OFFRES / SERVICES`),n.offers.forEach(h=>{!h.category&&!h.content||(h.category&&e.push(`### Catgorie : ${h.category}`),h.content&&e.push(h.content))}));const i=n.conditions||{};Object.values(i).some(Boolean)&&(e.push(`
## CONDITIONS & PROCDURES`),i.zone&&e.push(`Zone : ${i.zone}`),i.payment&&e.push(`Paiement / dpt : ${i.payment}`),i.engagement&&e.push(`Engagement : ${i.engagement}`),i.restrictions&&e.push(`Restrictions : ${i.restrictions}`),i.documents&&e.push(`Documents requis : ${i.documents}`)),(c=n.procedures)!=null&&c.length&&(e.push(`
## PROCDURES SIMPLIFIES`),n.procedures.forEach(h=>{!h.name&&!h.steps||(e.push(`### ${h.name||"Procdure"}`),h.steps&&e.push(h.steps))})),(f=n.faq)!=null&&f.length&&(e.push(`
## FAQ`),n.faq.forEach(h=>{!h.question&&!h.answer||(h.question&&e.push(`Q : ${h.question}`),h.answer&&e.push(`R : ${h.answer}`))})),(d=n.special_cases)!=null&&d.length&&(e.push(`
## CAS SPCIAUX`),n.special_cases.forEach(h=>{!h.case&&!h.response||(h.case&&e.push(`Si ${h.case} :`),h.response&&e.push(h.response))}));const r=n.links||{};Object.values(r).some(Boolean)&&(e.push(`
## LIENS UTILES`),r.site&&e.push(`Site : ${r.site}`),r.products&&e.push(`Produits : ${r.products}`),r.form&&e.push(`Formulaire : ${r.form}`),r.other&&e.push(`Autre : ${r.other}`));const a=n.escalation||{};return Object.values(a).some(Boolean)&&(e.push(`
## ESCALADE HUMAIN`),a.procedure&&e.push(`Procdure : ${a.procedure}`),a.contact&&e.push(`Contact : ${a.contact}`),a.hours&&e.push(`Horaires : ${a.hours}`)),n.special_rules&&(e.push(`
## RGLES SPCIALES BOT`),e.push(n.special_rules)),e.filter(Boolean).join(`
`).trim()};function GH({accountId:n,accounts:e,onAccountChange:t}){const[s,i]=_.useState(SS()),[r,a]=_.useState(!1),[o,c]=_.useState(""),[f,d]=_.useState(!1),[h,p]=_.useState(!1),m=_.useMemo(()=>HH(s.template_config),[s.template_config]);_.useEffect(()=>{if(!n){i(SS());return}a(!0),c(""),FH(n).then(T=>{const I=T.data??{};i({business_name:I.business_name||"",description:I.description||"",address:I.address||"",hours:I.hours||"",knowledge_base:I.knowledge_base||"",custom_fields:(I.custom_fields||[]).map(N=>({id:N.id||Vu(),label:N.label||"",value:N.value||""})),template_config:LI(I.template_config||{})})}).catch(()=>c("Impossible de charger la configuration Gemini.")).finally(()=>a(!1))},[n]);const g=(T,I)=>{i(N=>({...N,[T]:I})),p(!1)},w=(T,I,N)=>{i(R=>({...R,template_config:{...R.template_config,[T]:{...R.template_config[T],[I]:N}}})),p(!1)},b=(T,I,N,R)=>{i(B=>({...B,template_config:{...B.template_config,[T]:B.template_config[T].map((P,Y)=>Y===I?{...P,[N]:R}:P)}})),p(!1)},y=(T,I)=>{i(N=>({...N,template_config:{...N.template_config,[T]:I}})),p(!1)},x=(T,I)=>{i(N=>({...N,template_config:{...N.template_config,[T]:[...N.template_config[T],I()]}}))},v=(T,I,N)=>{i(R=>{const B=R.template_config[T].filter((P,Y)=>Y!==I);return{...R,template_config:{...R.template_config,[T]:B.length?B:[N()]}}})},C=(T,I,N)=>{i(R=>({...R,custom_fields:R.custom_fields.map(B=>B.id===T?{...B,[I]:N}:B)})),p(!1)},S=()=>{i(T=>({...T,custom_fields:[...T.custom_fields,{id:Vu(),label:"",value:""}]}))},L=T=>{i(I=>({...I,custom_fields:I.custom_fields.filter(N=>N.id!==T)}))},k=async()=>{if(n){d(!0),c(""),p(!1);try{await UH(n,{...s,template_config:$H(s.template_config)}),p(!0)}catch(T){console.error(T),c("Impossible d'enregistrer ces informations pour le moment.")}finally{d(!1)}}},A=()=>{g("knowledge_base",m)};return e.length?n?l.jsxs("div",{className:"panel bot-panel",children:[l.jsxs("header",{className:"bot-panel__header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:"Assistant Gemini"}),l.jsx("p",{children:"Dfinis un playbook structur : le bot ne rpond que depuis ces sections. En dehors, il applique la phrase Je me renseigne auprs dun collgue."})]}),l.jsxs("div",{className:"bot-panel__account-select",children:[l.jsx("label",{children:"Compte"}),l.jsx("select",{value:n??"",onChange:T=>t==null?void 0:t(T.target.value),children:e.map(T=>l.jsx("option",{value:T.id,children:T.name},T.id))})]})]}),r?l.jsx("p",{children:"Chargement des informations"}):l.jsxs(l.Fragment,{children:[o&&l.jsx("div",{className:"alert alert-error",children:o}),h&&l.jsx("div",{className:"alert alert-success",children:"Profil mis  jour "}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"Profil d'entreprise"}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("label",{children:["Nom affich",l.jsx("input",{value:s.business_name,onChange:T=>g("business_name",T.target.value),placeholder:"Nom de l'entreprise"})]}),l.jsxs("label",{children:["Adresse",l.jsx("input",{value:s.address,onChange:T=>g("address",T.target.value),placeholder:"Adresse postale"})]}),l.jsxs("label",{children:["Horaires synthtiques",l.jsx("input",{value:s.hours,onChange:T=>g("hours",T.target.value),placeholder:"Lun-Ven 9h-18h"})]})]}),l.jsxs("label",{children:["Description / ton libre",l.jsx("textarea",{value:s.description,onChange:T=>g("description",T.target.value),rows:3})]})]}),l.jsx(WH,{form:s,updateTemplateField:w,updateTemplateListItem:b,addTemplateItem:x,removeTemplateItem:v,updateTemplateRoot:y}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"Aperu gnr"}),l.jsx("button",{type:"button",className:"ghost",onClick:A,children:"Copier dans la base"})]}),l.jsx("textarea",{value:m,readOnly:!0,rows:10})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"Base de connaissances libre"}),l.jsx("textarea",{value:s.knowledge_base,onChange:T=>g("knowledge_base",T.target.value),rows:6,placeholder:"Supplments, scripts commerciaux, etc."})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"Champs personnaliss"}),l.jsxs("button",{type:"button",className:"ghost",onClick:S,children:[l.jsx(uo,{})," Ajouter un champ"]})]}),s.custom_fields.length===0&&l.jsx("p",{className:"muted",children:"Aucun champ personnalis pour l'instant."}),s.custom_fields.map(T=>l.jsxs("div",{className:"custom-field",children:[l.jsx("input",{value:T.label,onChange:I=>C(T.id,"label",I.target.value),placeholder:"Label (ex. Numro SAV)"}),l.jsx("input",{value:T.value,onChange:I=>C(T.id,"value",I.target.value),placeholder:"Valeur"}),l.jsx("button",{type:"button",className:"icon danger",onClick:()=>L(T.id),children:l.jsx(fo,{})})]},T.id))]}),l.jsxs("div",{className:"bot-panel__footer",children:[l.jsx("button",{type:"button",onClick:k,disabled:f,children:f?"Enregistrement...":"Sauvegarder"}),l.jsx("p",{className:"muted",children:'Gemini ne rpond que si le bouton "Bot" est activ sur une conversation. Dsactive-le pour reprendre la main manuellement.'})]})]})]}):l.jsxs("div",{className:"panel",children:[l.jsx("h3",{children:"Assistant Gemini"}),l.jsx("p",{children:"Slectionne un compte dans la colonne de gauche pour commencer."})]}):l.jsxs("div",{className:"panel",children:[l.jsx("h3",{children:"Assistant Gemini"}),l.jsx("p",{children:"Ajoute un compte WhatsApp pour configurer le bot."})]})}function WH({form:n,updateTemplateField:e,updateTemplateListItem:t,addTemplateItem:s,removeTemplateItem:i,updateTemplateRoot:r}){const a=n.template_config;return l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"1. Rgles systme"}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("label",{children:["Langue par dfaut",l.jsx("input",{value:a.system_rules.language,onChange:o=>e("system_rules","language",o.target.value),placeholder:"Franais"})]}),l.jsxs("label",{children:["Ton",l.jsx("input",{value:a.system_rules.tone,onChange:o=>e("system_rules","tone",o.target.value),placeholder:"Professionnel, clair, courtois."})]})]}),l.jsxs("label",{children:["Mission",l.jsx("textarea",{value:a.system_rules.mission,onChange:o=>e("system_rules","mission",o.target.value),rows:2})]}),l.jsxs("label",{children:["Style",l.jsx("textarea",{value:a.system_rules.style,onChange:o=>e("system_rules","style",o.target.value),rows:2})]}),l.jsxs("label",{children:["Priorit des sources",l.jsx("textarea",{value:a.system_rules.priority,onChange:o=>e("system_rules","priority",o.target.value),rows:2})]}),l.jsxs("label",{children:["Politique de rponse",l.jsx("textarea",{value:a.system_rules.response_policy,onChange:o=>e("system_rules","response_policy",o.target.value),rows:2})]}),l.jsxs("label",{children:["Scurit",l.jsx("textarea",{value:a.system_rules.security,onChange:o=>e("system_rules","security",o.target.value),rows:2})]})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"2. Infos entreprise (structure)"}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("label",{children:["Nom entreprise",l.jsx("input",{value:a.company.name,onChange:o=>e("company","name",o.target.value)})]}),l.jsxs("label",{children:["Zone couverte / activit",l.jsx("input",{value:a.company.zone,onChange:o=>e("company","zone",o.target.value),placeholder:"Ex : le-de-France, location VTC + rattachement"})]}),l.jsxs("label",{children:["Rendez-vous",l.jsx("input",{value:a.company.rendezvous,onChange:o=>e("company","rendezvous",o.target.value),placeholder:"Avec RDV / Sans RDV"})]})]}),l.jsxs("label",{children:["Horaires dtaills",l.jsx("textarea",{value:a.company.hours_block,onChange:o=>e("company","hours_block",o.target.value),rows:2,placeholder:"Lun-Ven : 10h-18h. Sam-Dim : ferm."})]}),l.jsxs("label",{children:["Activit principale",l.jsx("textarea",{value:a.company.activity,onChange:o=>e("company","activity",o.target.value),rows:2})]})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"3. Offres / produits / services"}),l.jsxs("button",{type:"button",className:"ghost",onClick:()=>s("offers",e_),children:[l.jsx(uo,{})," Ajouter une catgorie"]})]}),a.offers.map((o,c)=>l.jsxs("div",{className:"bot-template-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("label",{children:["Catgorie",l.jsx("input",{value:o.category,onChange:f=>t("offers",c,"category",f.target.value),placeholder:"Ex : Location sans engagement"})]}),l.jsx("button",{type:"button",className:"icon danger",onClick:()=>i("offers",c,e_),children:l.jsx(fo,{})})]}),l.jsxs("label",{children:["Dtails (tableau, puces)",l.jsx("textarea",{value:o.content,onChange:f=>t("offers",c,"content",f.target.value),rows:3,placeholder:"Produit / Service | Prix | Conditions | Notes"})]})]},o._id))]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"4. Conditions & documents"}),l.jsxs("label",{children:["Zone / rgles",l.jsx("textarea",{value:a.conditions.zone,onChange:o=>e("conditions","zone",o.target.value),rows:2})]}),l.jsxs("label",{children:["Paiement / dpt",l.jsx("textarea",{value:a.conditions.payment,onChange:o=>e("conditions","payment",o.target.value),rows:2})]}),l.jsxs("label",{children:["Engagement",l.jsx("textarea",{value:a.conditions.engagement,onChange:o=>e("conditions","engagement",o.target.value),rows:2})]}),l.jsxs("label",{children:["Restrictions",l.jsx("textarea",{value:a.conditions.restrictions,onChange:o=>e("conditions","restrictions",o.target.value),rows:2})]}),l.jsxs("label",{children:["Documents requis",l.jsx("textarea",{value:a.conditions.documents,onChange:o=>e("conditions","documents",o.target.value),rows:3})]})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"5. Procdures simplifies"}),l.jsxs("button",{type:"button",className:"ghost",onClick:()=>s("procedures",t_),children:[l.jsx(uo,{})," Ajouter une procdure"]})]}),a.procedures.map((o,c)=>l.jsxs("div",{className:"bot-template-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("label",{children:["Nom de la procdure",l.jsx("input",{value:o.name,onChange:f=>t("procedures",c,"name",f.target.value)})]}),l.jsx("button",{type:"button",className:"icon danger",onClick:()=>i("procedures",c,t_),children:l.jsx(fo,{})})]}),l.jsxs("label",{children:["tapes / script",l.jsx("textarea",{value:o.steps,onChange:f=>t("procedures",c,"steps",f.target.value),rows:3})]})]},o._id))]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"6. FAQ"}),l.jsxs("button",{type:"button",className:"ghost",onClick:()=>s("faq",n_),children:[l.jsx(uo,{})," Ajouter une question"]})]}),a.faq.map((o,c)=>l.jsxs("div",{className:"bot-template-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("label",{children:["Question",l.jsx("input",{value:o.question,onChange:f=>t("faq",c,"question",f.target.value)})]}),l.jsx("button",{type:"button",className:"icon danger",onClick:()=>i("faq",c,n_),children:l.jsx(fo,{})})]}),l.jsxs("label",{children:["Rponse",l.jsx("textarea",{value:o.answer,onChange:f=>t("faq",c,"answer",f.target.value),rows:3})]})]},o._id))]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsxs("div",{className:"bot-panel__section-header",children:[l.jsx("h4",{children:"7. Cas spciaux"}),l.jsxs("button",{type:"button",className:"ghost",onClick:()=>s("special_cases",s_),children:[l.jsx(uo,{})," Ajouter un cas"]})]}),a.special_cases.map((o,c)=>l.jsxs("div",{className:"bot-template-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsxs("label",{children:["Condition (ex : hors IDF, week-end)",l.jsx("input",{value:o.case,onChange:f=>t("special_cases",c,"case",f.target.value)})]}),l.jsx("button",{type:"button",className:"icon danger",onClick:()=>i("special_cases",c,s_),children:l.jsx(fo,{})})]}),l.jsxs("label",{children:["Rponse type",l.jsx("textarea",{value:o.response,onChange:f=>t("special_cases",c,"response",f.target.value),rows:3})]})]},o._id))]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"8. Liens utiles"}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("label",{children:["Site",l.jsx("input",{value:a.links.site,onChange:o=>e("links","site",o.target.value)})]}),l.jsxs("label",{children:["Page produits",l.jsx("input",{value:a.links.products,onChange:o=>e("links","products",o.target.value)})]}),l.jsxs("label",{children:["Formulaire",l.jsx("input",{value:a.links.form,onChange:o=>e("links","form",o.target.value)})]}),l.jsxs("label",{children:["Autre lien",l.jsx("input",{value:a.links.other,onChange:o=>e("links","other",o.target.value)})]})]})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"9. Escalade humain (interne)"}),l.jsxs("label",{children:["Procdure",l.jsx("textarea",{value:a.escalation.procedure,onChange:o=>e("escalation","procedure",o.target.value),rows:2})]}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("label",{children:["Contact",l.jsx("input",{value:a.escalation.contact,onChange:o=>e("escalation","contact",o.target.value)})]}),l.jsxs("label",{children:["Horaires du contact",l.jsx("input",{value:a.escalation.hours,onChange:o=>e("escalation","hours",o.target.value)})]})]})]}),l.jsxs("section",{className:"bot-panel__section",children:[l.jsx("h4",{children:"10. Rgles spciales bot"}),l.jsx("textarea",{value:a.special_rules,onChange:o=>r("special_rules",o.target.value),rows:4})]})]})}function YH({accountId:n,accounts:e}){const[t,s]=_.useState("info"),[i,r]=_.useState(null),[a,o]=_.useState(null),[c,f]=_.useState(null),[d,h]=_.useState([]),[p,m]=_.useState({}),[g,w]=_.useState(!1),[b,y]=_.useState(null),[x,v]=_.useState(!1),[C,S]=_.useState({about:"",description:"",email:"",address:"",websites:"",vertical:""}),[L,k]=_.useState(!1),[A,T]=_.useState({name:"",category:"UTILITY",language:"fr",body:""}),[I,N]=_.useState([]),[R,B]=_.useState(!1),P=e.find(H=>H.id===n),Y=(P==null?void 0:P.name)||"Compte";_.useEffect(()=>{n&&$()},[n]);const $=async()=>{var H,me,q,ce,we,Qe,dt,Je,Q,ae,Ne,Re,Te,$t,hs;if(n){w(!0),y(null);try{const[jt,gn,V,he]=await Promise.allSettled([X$(n),xS(n),eH(n),J$(n)]);if(jt.status==="fulfilled"?r(jt.value.data):console.log("Phone details not available:",(q=(me=(H=jt.reason)==null?void 0:H.response)==null?void 0:me.data)==null?void 0:q.detail),gn.status==="fulfilled"&&((we=(ce=gn.value.data)==null?void 0:ce.data)!=null&&we[0])){const J=gn.value.data.data[0];o(J),S({about:J.about||"",description:J.description||"",email:J.email||"",address:J.address||"",websites:(J.websites||[]).join(", "),vertical:J.vertical||""})}else console.log("Business profile not available:",(Je=(dt=(Qe=gn.reason)==null?void 0:Qe.response)==null?void 0:dt.data)==null?void 0:Je.detail);if(V.status==="fulfilled"?f(V.value.data):console.log("WABA details not available:",(Ne=(ae=(Q=V.reason)==null?void 0:Q.response)==null?void 0:ae.data)==null?void 0:Ne.detail),he.status==="fulfilled"){const J=((Re=he.value.data)==null?void 0:Re.data)||[];h(J),await de(J)}else console.log("Templates not available:",(hs=($t=(Te=he.reason)==null?void 0:Te.response)==null?void 0:$t.data)==null?void 0:hs.detail)}catch(jt){y("Erreur lors du chargement des donnes"),console.error(jt)}finally{w(!1)}}},X=async()=>{var H,me;try{const q=await xS(n);if((me=(H=q.data)==null?void 0:H.data)!=null&&me[0]){const ce=q.data.data[0];o(ce),S({about:ce.about||"",description:ce.description||"",email:ce.email||"",address:ce.address||"",websites:(ce.websites||[]).join(", "),vertical:ce.vertical||""})}}catch(q){console.log("Error reloading profile:",q)}},O=async()=>{if(n){w(!0);try{const H={about:C.about||void 0,description:C.description||void 0,email:C.email||void 0,address:C.address||void 0,websites:C.websites?C.websites.split(",").map(me=>me.trim()).filter(Boolean):void 0,vertical:C.vertical||void 0};await K$(n,H),alert("Profil mis  jour avec succs !"),v(!1),await X()}catch(H){alert("Erreur lors de la mise  jour du profil"),console.error(H)}finally{w(!1)}}},G=async()=>{var H,me;if(!n||!A.name||!A.body){alert("Veuillez remplir tous les champs obligatoires");return}w(!0);try{await q$(n,{name:A.name.toLowerCase().replace(/[^a-z0-9_-]/g,"_"),category:A.category,language:A.language,components:[{type:"BODY",text:A.body}]}),alert("Template cr et soumis  Meta pour validation !"),k(!1),T({name:"",category:"UTILITY",language:"fr",body:""}),$()}catch(q){alert(`Erreur: ${((me=(H=q.response)==null?void 0:H.data)==null?void 0:me.detail)||"Erreur inconnue"}`),console.error(q)}finally{w(!1)}},ne=async H=>{if(confirm(`Supprimer le template "${H}" ?`)){w(!0);try{await Z$(n,{name:H}),alert("Template supprim !"),$()}catch(me){alert("Erreur lors de la suppression"),console.error(me)}finally{w(!1)}}},de=async H=>{if(!(!n||!H.length))try{const{data:me,error:q}=await it.from("template_media").select("template_name, template_language, media_type, storage_url, storage_path").eq("account_id",n);if(q){console.error("Error loading template medias:",q);return}const ce={};me&&me.forEach(we=>{const Qe=`${we.template_name}_${we.template_language}`;ce[Qe]||(ce[Qe]={});let dt=null;if(we.storage_url&&(we.storage_url.startsWith("http://")||we.storage_url.startsWith("https://")))dt=we.storage_url;else if(we.storage_path){const{data:Je}=it.storage.from("template-media").getPublicUrl(we.storage_path);dt=Je==null?void 0:Je.publicUrl}else if(we.storage_url){const{data:Je}=it.storage.from("template-media").getPublicUrl(we.storage_url);dt=Je==null?void 0:Je.publicUrl}dt&&(ce[Qe][we.media_type]=dt)}),m(ce)}catch(me){console.error("Error loading template medias:",me)}},le=async H=>{var me;if(n){B(!0);try{const ce=(me=(await qj(n,H)).data)==null?void 0:me.id;ce&&(N([...I,{id:ce,name:H.name,type:H.type}]),alert(`Fichier upload ! Media ID: ${ce}`))}catch(q){alert("Erreur lors de l'upload"),console.error(q)}finally{B(!1)}}};return n?l.jsxs("div",{className:"whatsapp-business-panel",children:[l.jsxs("div",{className:"panel-header",children:[l.jsxs("h2",{children:["WhatsApp Business - ",Y]}),l.jsx("p",{className:"panel-subtitle",children:"Gestion complte de votre compte WhatsApp"})]}),l.jsxs("div",{className:"panel-tabs",children:[l.jsxs("button",{className:t==="info"?"active":"",onClick:()=>s("info"),children:[l.jsx(bj,{})," Informations"]}),l.jsxs("button",{className:t==="profile"?"active":"",onClick:()=>s("profile"),children:[l.jsx(Wh,{})," Profil Business"]}),l.jsxs("button",{className:t==="templates"?"active":"",onClick:()=>s("templates"),children:[l.jsx(Hu,{})," Templates"]}),l.jsxs("button",{className:t==="media"?"active":"",onClick:()=>s("media"),children:[l.jsx(Dr,{})," Mdias"]})]}),b&&l.jsx("div",{className:"panel-error",children:b}),g&&l.jsx("div",{className:"panel-loading",children:"Chargement..."}),l.jsxs("div",{className:"panel-content",children:[t==="info"&&l.jsxs("div",{className:"info-section",children:[l.jsx("h3",{children:"Informations du Numro"}),i?l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Numro affich"}),l.jsx("div",{children:i.display_phone_number||"Non disponible"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Nom vrifi"}),l.jsx("div",{children:i.verified_name||"Non disponible"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Qualit"}),l.jsx("div",{className:`quality-badge ${(i.quality_rating||"").toLowerCase()}`,children:i.quality_rating||"UNKNOWN"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Statut vrification"}),l.jsx("div",{children:i.code_verification_status||"Non disponible"})]})]}):l.jsx("p",{children:"Informations non disponibles (configurez waba_id dans la base de donnes)"}),l.jsx("h3",{style:{marginTop:"2rem"},children:"Dtails WABA"}),c?l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"WABA ID"}),l.jsx("div",{className:"mono",children:c.id})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Nom"}),l.jsx("div",{children:c.name||"Non disponible"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Fuseau horaire"}),l.jsx("div",{children:c.timezone_id||"Non disponible"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Statut"}),l.jsx("div",{className:`status-badge ${(c.account_review_status||"").toLowerCase()}`,children:c.account_review_status||"UNKNOWN"})]})]}):l.jsx("p",{children:"Dtails WABA non disponibles (configurez waba_id dans la base de donnes)"})]}),t==="profile"&&l.jsxs("div",{className:"profile-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Profil Business WhatsApp"}),!x&&l.jsx("button",{onClick:()=>v(!0),className:"btn-primary",children:"Modifier"})]}),x?l.jsxs("div",{className:"profile-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" propos (max 139 car.)"}),l.jsx("input",{type:"text",value:C.about,onChange:H=>S({...C,about:H.target.value.slice(0,139)}),maxLength:139,placeholder:"Description courte de votre entreprise"}),l.jsxs("small",{children:[C.about.length,"/139 caractres"]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Description (max 512 car.)"}),l.jsx("textarea",{value:C.description,onChange:H=>S({...C,description:H.target.value.slice(0,512)}),maxLength:512,placeholder:"Description complte",rows:4}),l.jsxs("small",{children:[C.description.length,"/512 caractres"]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:C.email,onChange:H=>S({...C,email:H.target.value}),placeholder:"contact@entreprise.com"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Adresse"}),l.jsx("input",{type:"text",value:C.address,onChange:H=>S({...C,address:H.target.value}),placeholder:"123 Rue de la Paix, Paris"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Sites web (spars par des virgules)"}),l.jsx("input",{type:"text",value:C.websites,onChange:H=>S({...C,websites:H.target.value}),placeholder:"https://site1.com, https://site2.com"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Secteur d'activit"}),l.jsxs("select",{value:C.vertical,onChange:H=>S({...C,vertical:H.target.value}),children:[l.jsx("option",{value:"",children:"Slectionner..."}),l.jsx("option",{value:"AUTOMOTIVE",children:"Automobile"}),l.jsx("option",{value:"BEAUTY",children:"Beaut"}),l.jsx("option",{value:"APPAREL",children:"Mode"}),l.jsx("option",{value:"EDU",children:"ducation"}),l.jsx("option",{value:"ENTERTAINMENT",children:"Divertissement"}),l.jsx("option",{value:"FINANCE",children:"Finance"}),l.jsx("option",{value:"GROCERY",children:"picerie"}),l.jsx("option",{value:"HEALTH",children:"Sant"}),l.jsx("option",{value:"HOTEL",children:"Htellerie"}),l.jsx("option",{value:"NONPROFIT",children:"Association"}),l.jsx("option",{value:"RETAIL",children:"Commerce"}),l.jsx("option",{value:"RESTAURANT",children:"Restaurant"}),l.jsx("option",{value:"TRAVEL",children:"Voyage"}),l.jsx("option",{value:"OTHER",children:"Autre"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{onClick:O,className:"btn-primary",disabled:g,children:g?"Enregistrement...":"Enregistrer"}),l.jsx("button",{onClick:()=>v(!1),className:"btn-secondary",children:"Annuler"})]})]}):l.jsx("div",{className:"profile-view",children:a?l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:" propos"}),l.jsx("div",{children:a.about||"Non renseign"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Description"}),l.jsx("div",{children:a.description||"Non renseign"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Email"}),l.jsx("div",{children:a.email||"Non renseign"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Adresse"}),l.jsx("div",{children:a.address||"Non renseign"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Sites web"}),l.jsx("div",{children:(a.websites||[]).join(", ")||"Non renseign"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("label",{children:"Secteur"}),l.jsx("div",{children:a.vertical||"Non renseign"})]})]}):l.jsx("p",{children:"Profil non disponible"})})]}),t==="templates"&&l.jsxs("div",{className:"templates-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Templates de Messages"}),!L&&l.jsx("button",{onClick:()=>k(!0),className:"btn-primary",children:"+ Nouveau Template"})]}),L&&l.jsxs("div",{className:"template-form card",children:[l.jsx("h4",{children:"Crer un Template"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nom du template (sans espaces, minuscules)"}),l.jsx("input",{type:"text",value:A.name,onChange:H=>T({...A,name:H.target.value}),placeholder:"confirmation_commande"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Catgorie"}),l.jsxs("select",{value:A.category,onChange:H=>T({...A,category:H.target.value}),children:[l.jsx("option",{value:"UTILITY",children:"UTILITY - Notifications transactionnelles"}),l.jsx("option",{value:"MARKETING",children:"MARKETING - Messages promotionnels"}),l.jsx("option",{value:"AUTHENTICATION",children:"AUTHENTICATION - Codes de vrification"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Langue"}),l.jsxs("select",{value:A.language,onChange:H=>T({...A,language:H.target.value}),children:[l.jsx("option",{value:"fr",children:"Franais"}),l.jsx("option",{value:"en",children:"Anglais"}),l.jsx("option",{value:"es",children:"Espagnol"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:["Corps du message (utilisez ","{{1}}",", ","{{2}}"," pour les variables)"]}),l.jsx("textarea",{value:A.body,onChange:H=>T({...A,body:H.target.value}),placeholder:"Bonjour {{1}}, votre commande {{2}} a t confirme !",rows:4})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{onClick:G,className:"btn-primary",disabled:g,children:g?"Cration...":"Crer et Soumettre  Meta"}),l.jsx("button",{onClick:()=>k(!1),className:"btn-secondary",children:"Annuler"})]}),l.jsx("small",{style:{color:"#666",display:"block",marginTop:"1rem"},children:" Le template sera soumis  Meta pour validation. Cela peut prendre quelques heures."})]}),l.jsx("div",{className:"templates-list",children:d.length===0?l.jsx("p",{className:"empty-message",children:"Aucun template. Configurez waba_id pour voir vos templates ou crez-en un nouveau."}):d.map(H=>{var me;return l.jsxs("div",{className:"template-card",children:[l.jsxs("div",{className:"template-card-header",children:[l.jsxs("div",{className:"template-info",children:[l.jsx("h4",{className:"template-name",children:H.name}),l.jsxs("div",{className:"template-badges",children:[l.jsx("span",{className:`template-status-badge status-${(H.status||"").toLowerCase()}`,children:H.status}),l.jsx("span",{className:"template-category-badge",children:H.category}),l.jsx("span",{className:"template-lang-badge",children:H.language})]})]}),l.jsx("button",{onClick:()=>ne(H.name),className:"btn-delete-template",disabled:g,title:"Supprimer",children:"Supprimer"})]}),l.jsx("div",{className:"template-preview",children:l.jsx("div",{className:"template-preview-bubble",children:(me=H.components)==null?void 0:me.map((q,ce)=>{var we,Qe;if(q.type==="HEADER"){const dt=`${H.name}_${H.language}`,Je=(we=p[dt])==null?void 0:we[q.format];return l.jsx("div",{className:"template-preview-header",children:q.format==="IMAGE"?Je?l.jsx("div",{className:"template-preview-media-image-wrapper",children:l.jsx("img",{src:Je,alt:"Template header",className:"template-preview-media-image",onError:Q=>{Q.target.parentElement.innerHTML='<div class="template-preview-media">[Image non disponible]</div>'}})}):l.jsx("div",{className:"template-preview-media",children:"[Image]"}):q.format==="VIDEO"?Je?l.jsx("div",{className:"template-preview-media-video-wrapper",children:l.jsx("video",{src:Je,controls:!0,className:"template-preview-media-video",onError:Q=>{Q.target.parentElement.innerHTML='<div class="template-preview-media">[Vido non disponible]</div>'}})}):l.jsx("div",{className:"template-preview-media",children:"[Vido]"}):q.format==="DOCUMENT"?Je?l.jsx("a",{href:Je,target:"_blank",rel:"noopener noreferrer",className:"template-preview-media-document",children:" Document"}):l.jsx("div",{className:"template-preview-media",children:"[Document]"}):l.jsx("strong",{children:q.text})},ce)}return q.type==="BODY"?l.jsx("div",{className:"template-preview-body",children:q.text},ce):q.type==="FOOTER"?l.jsx("div",{className:"template-preview-footer",children:q.text},ce):q.type==="BUTTONS"?l.jsx("div",{className:"template-preview-buttons",children:(Qe=q.buttons)==null?void 0:Qe.map((dt,Je)=>l.jsxs("div",{className:"template-preview-button",children:[dt.type==="QUICK_REPLY"?l.jsx(Y8,{className:"template-preview-button-icon"}):dt.type==="URL"?l.jsx(Q8,{className:"template-preview-button-icon"}):l.jsx(Pf,{className:"template-preview-button-icon"}),l.jsx("span",{className:"template-preview-button-text",children:dt.text})]},Je))},ce):null})})})]},H.name)})})]}),t==="media"&&l.jsxs("div",{className:"media-section",children:[l.jsx("h3",{children:"Upload de Mdias"}),l.jsx("p",{children:"Uploadez des fichiers pour obtenir leur Media ID et les utiliser dans vos messages."}),l.jsxs("div",{className:"media-upload-zone",children:[l.jsx("input",{type:"file",onChange:H=>H.target.files[0]&&le(H.target.files[0]),disabled:R,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",id:"media-upload"}),l.jsx("label",{htmlFor:"media-upload",className:R?"uploading":"",children:R?"Upload en cours...":"Cliquez pour slectionner un fichier"})]}),I.length>0&&l.jsxs("div",{className:"uploaded-medias",children:[l.jsx("h4",{children:"Mdias uploads"}),I.map((H,me)=>l.jsxs("div",{className:"media-item card",children:[l.jsxs("div",{children:[l.jsx("strong",{children:H.name}),l.jsx("br",{}),l.jsxs("small",{children:["Type: ",H.type]})]}),l.jsx("code",{className:"media-id",children:H.id})]},me))]}),l.jsxs("div",{className:"media-info",children:[l.jsx("h4",{children:"Comment utiliser ?"}),l.jsxs("ol",{children:[l.jsx("li",{children:"Uploadez votre fichier ci-dessus"}),l.jsx("li",{children:"Copiez le Media ID affich"}),l.jsx("li",{children:`Utilisez-le dans un message interactif avec l'option "Mdia"`}),l.jsx("li",{children:"Les mdias sont conservs 30 jours sur les serveurs Meta"})]})]})]})]})]}):l.jsx("div",{className:"whatsapp-business-panel",children:l.jsx("div",{className:"panel-empty",children:l.jsx("p",{children:"Slectionnez un compte WhatsApp Business"})})})}function SI(n=null){const{hasPermission:e,profile:t}=Jg(),s=_.useRef(null),i=_.useRef(new Set);_.useEffect(()=>{qh(),s.current&&(it.removeChannel(s.current),s.current=null),i.current.clear();const r=it.channel("global-messages-notifications-all").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async a=>{var f;const o=a.new;if(o.direction==="outbound")return;const c=`${o.id}-${o.conversation_id}`;if(!i.current.has(c)){i.current.add(c),setTimeout(()=>{i.current.delete(c)},5*60*1e3);try{const{data:d,error:h}=await it.from("conversations").select("*, contacts(*)").eq("id",o.conversation_id).single();if(h||!d)return;const p=d.account_id;if(!p||!t||!t.permissions||!t.permissions.account_access_levels)return;const m=t.permissions.account_access_levels,g=String(p);if((m[p]||m[g]||m[g.trim()])==="aucun"||!e||!e("conversations.view",p)||!yI(p,"messages"))return;const b=document.visibilityState==="visible",y=((f=document.hasFocus)==null?void 0:f.call(document))===!0,x=b&&y,v=n===d.id;if(x&&v)return;await bI(o,d,{checkConversationOpen:!1,force:!1})}catch{}}}).subscribe(()=>{});return s.current=r,()=>{s.current&&(it.removeChannel(s.current),s.current=null),i.current.clear()}},[n,e,t])}const i_="whatsapp_inbox_active_account";function EI(n){try{n?localStorage.setItem(i_,n):localStorage.removeItem(i_)}catch(e){console.error("Erreur lors de la sauvegarde du compte actif:",e)}}function kI(){try{return localStorage.getItem(i_)}catch(n){return console.error("Erreur lors de la rcupration du compte actif:",n),null}}const VH=n=>oe.get(`/broadcast/groups?account_id=${n}`),NI=n=>oe.post("/broadcast/groups",n),QH=(n,e)=>oe.patch(`/broadcast/groups/${n}`,e),JH=n=>oe.delete(`/broadcast/groups/${n}`),qH=n=>oe.get(`/broadcast/groups/${n}/recipients`),r_=(n,e)=>oe.post(`/broadcast/groups/${n}/recipients`,e),ZH=(n,e)=>oe.delete(`/broadcast/groups/${n}/recipients/${e}`),KH=(n,e)=>oe.post(`/broadcast/groups/${n}/send`,e),XH=(n={})=>{const e=new URLSearchParams;return n.groupId&&e.append("group_id",n.groupId),n.accountId&&e.append("account_id",n.accountId),oe.get(`/broadcast/campaigns?${e.toString()}`)},eG=n=>oe.get(`/broadcast/campaigns/${n}/stats`),tG=n=>oe.get(`/broadcast/campaigns/${n}/heatmap`),nG=n=>oe.get(`/broadcast/campaigns/${n}/timeline`);function sG({groups:n,selectedGroupId:e,onSelectGroup:t,onCreateGroup:s,onEditGroup:i,onDeleteGroup:r}){const[a,o]=_.useState({open:!1,x:0,y:0,group:null}),c=(d,h)=>{d.preventDefault(),d.stopPropagation(),o({open:!0,x:d.clientX,y:d.clientY,group:h})},f=()=>{o({open:!1,x:0,y:0,group:null})};return _.useEffect(()=>(window.addEventListener("click",f),()=>window.removeEventListener("click",f)),[]),!n||n.length===0?l.jsxs("div",{className:"broadcast-groups-list empty",children:[l.jsx("p",{children:"Aucun groupe de diffusion"}),l.jsxs("button",{className:"btn-primary",onClick:s,children:[l.jsx(uo,{})," Crer un groupe"]})]}):l.jsxs("div",{className:"broadcast-groups-list",children:[l.jsxs("div",{className:"broadcast-groups-list__header",children:[l.jsx("h3",{children:"Groupes de diffusion"}),l.jsx("button",{className:"btn-icon",onClick:s,title:"Crer un groupe",children:l.jsx(uo,{})})]}),l.jsx("div",{className:"broadcast-groups-list__items",children:n.map(d=>l.jsxs("div",{className:`broadcast-group-item ${e===d.id?"active":""}`,onClick:()=>t(d),onContextMenu:h=>c(h,d),children:[l.jsx("div",{className:"broadcast-group-item__icon",children:l.jsx(Yh,{})}),l.jsxs("div",{className:"broadcast-group-item__content",children:[l.jsx("div",{className:"broadcast-group-item__name",children:d.name}),d.description&&l.jsx("div",{className:"broadcast-group-item__description",children:d.description})]})]},d.id))}),a.open&&l.jsxs("div",{className:"context-menu",style:{top:a.y,left:a.x},onClick:d=>d.stopPropagation(),children:[l.jsxs("button",{onClick:()=>{i(a.group),f()},children:[l.jsx(V8,{})," Modifier"]}),l.jsxs("button",{className:"danger",onClick:()=>{confirm(`Supprimer le groupe "${a.group.name}" ?`)&&r(a.group.id),f()},children:[l.jsx(fo,{})," Supprimer"]})]})]})}function iG({group:n=null,accountId:e,onClose:t,onSave:s}){const[i,r]=_.useState((n==null?void 0:n.name)||""),[a,o]=_.useState((n==null?void 0:n.description)||""),[c,f]=_.useState([]),[d,h]=_.useState([]),[p,m]=_.useState([]),[g,w]=_.useState(""),[b,y]=_.useState(""),[x,v]=_.useState(!1),[C,S]=_.useState(!1);_.useEffect(()=>{n&&L(),k()},[n]);const L=async()=>{if(n)try{const P=await qH(n.id);f(P.data||[])}catch(P){console.error("Error loading recipients:",P)}},k=async()=>{try{const P=await gj();m(P.data||[])}catch(P){console.error("Error loading contacts:",P)}},A=async()=>{var P,Y;if(!i.trim()){alert("Le nom du groupe est requis");return}v(!0);try{if(n)await QH(n.id,{name:i,description:a});else{const X=(await NI({account_id:e,name:i,description:a})).data;if(d.length>0)for(const O of d)try{await r_(X.id,{phone_number:O.phone_number,contact_id:O.contact_id,display_name:O.display_name})}catch(G){console.error("Error adding recipient:",G)}s&&s(X)}t()}catch($){console.error("Error saving group:",$),alert(((Y=(P=$.response)==null?void 0:P.data)==null?void 0:Y.detail)||"Erreur lors de la sauvegarde")}finally{v(!1)}},T=async(P=null,Y=null)=>{var O,G;const $=Y||(P==null?void 0:P.whatsapp_number);if(!$){alert("Numro de tlphone requis");return}if((n?c:d).some(ne=>ne.phone_number===$)){alert("Ce destinataire est dj dans le groupe");return}if(n){v(!0);try{await r_(n.id,{phone_number:$,contact_id:P==null?void 0:P.id,display_name:P==null?void 0:P.display_name}),await L(),y(""),S(!1)}catch(ne){console.error("Error adding recipient:",ne),alert(((G=(O=ne.response)==null?void 0:O.data)==null?void 0:G.detail)||"Erreur lors de l'ajout")}finally{v(!1)}}else h([...d,{phone_number:$,contact_id:P==null?void 0:P.id,display_name:P==null?void 0:P.display_name,contacts:P}]),y(""),S(!1)},I=async(P,Y=null)=>{var $,X;if(confirm("Retirer ce destinataire du groupe ?"))if(n){v(!0);try{await ZH(n.id,P),await L()}catch(O){console.error("Error removing recipient:",O),alert(((X=($=O.response)==null?void 0:$.data)==null?void 0:X.detail)||"Erreur lors de la suppression")}finally{v(!1)}}else h(d.filter(O=>O.phone_number!==Y))},N=p.filter(P=>{const Y=g.toLowerCase(),$=(P.display_name||"").toLowerCase(),X=(P.whatsapp_number||"").toLowerCase();return $.includes(Y)||X.includes(Y)}).sort((P,Y)=>{const $=g.toLowerCase(),X=(P.display_name||"").toLowerCase(),O=(Y.display_name||"").toLowerCase(),G=(P.whatsapp_number||"").toLowerCase(),ne=(Y.whatsapp_number||"").toLowerCase(),de=X===$,le=O===$,H=G===$,me=ne===$;if(de&&!le)return-1;if(!de&&le)return 1;if(H&&!me)return-1;if(!H&&me)return 1;const q=X.startsWith($),ce=O.startsWith($),we=G.startsWith($),Qe=ne.startsWith($);return q&&!ce&&!Qe?-1:!q&&!we&&ce?1:we&&!Qe&&!ce?-1:!we&&!q&&Qe?1:X.localeCompare(O)}),R=P=>(n?c:d).some($=>$.phone_number===P),B=n?c:d;return l.jsxs("div",{className:"broadcast-group-editor",children:[l.jsxs("div",{className:"broadcast-group-editor__header",children:[l.jsx("h2",{children:n?"Modifier le groupe":"Nouveau groupe"}),l.jsx("button",{className:"btn-icon",onClick:t,children:l.jsx(Ms,{})})]}),l.jsxs("div",{className:"broadcast-group-editor__form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nom du groupe *"}),l.jsx("input",{type:"text",value:i,onChange:P=>r(P.target.value),placeholder:"Ex: Clients VIP",disabled:x})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Description"}),l.jsx("textarea",{value:a,onChange:P=>o(P.target.value),placeholder:"Description optionnelle du groupe",rows:3,disabled:x})]}),l.jsxs("div",{className:"broadcast-group-editor__recipients",children:[l.jsxs("div",{className:"recipients-header",children:[l.jsxs("h3",{children:["Destinataires (",B.length,")"]}),l.jsxs("button",{className:"btn-primary btn-sm",onClick:()=>S(!C),children:[l.jsx(uo,{})," Ajouter"]})]}),C&&l.jsx("div",{className:"add-recipient-panel",children:l.jsx("div",{className:"add-recipient-tabs",children:l.jsxs("div",{className:"tab-content",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Rechercher un contact"}),l.jsxs("div",{className:"search-input",children:[l.jsx(xo,{}),l.jsx("input",{type:"text",placeholder:"Nom ou numro...",value:g,onChange:P=>w(P.target.value)})]})]}),l.jsx("div",{className:"contacts-list-mini",children:N.filter(P=>!R(P.whatsapp_number)).map(P=>l.jsxs("div",{className:"contact-item-mini",onClick:()=>T(P),children:[l.jsx("div",{className:"avatar",children:(P.display_name||P.whatsapp_number||"?")[0]}),l.jsxs("div",{className:"contact-info",children:[l.jsx("strong",{children:P.display_name||Pn(P.whatsapp_number)}),l.jsx("small",{children:Pn(P.whatsapp_number)})]})]},P.id))}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Ou ajouter un numro libre"}),l.jsxs("div",{className:"phone-input-group",children:[l.jsx("input",{type:"text",placeholder:"+33612345678",value:b,onChange:P=>y(P.target.value),onKeyDown:P=>{P.key==="Enter"&&b.trim()&&T(null,b.trim())}}),l.jsx("button",{className:"btn-primary",onClick:()=>T(null,b.trim()),disabled:!b.trim()||x,children:"Ajouter"})]})]})]})})}),l.jsx("div",{className:"recipients-list",children:B.length===0?l.jsx("p",{className:"empty",children:"Aucun destinataire. Ajoutez-en pour envoyer des messages groups."}):B.map((P,Y)=>{var G;const $=P.display_name||((G=P.contacts)==null?void 0:G.display_name)||Pn(P.phone_number),X=P.id||`pending-${Y}`,O=P.phone_number;return l.jsxs("div",{className:"recipient-item",children:[l.jsxs("div",{className:"recipient-info",children:[l.jsx("div",{className:"avatar",children:$[0]}),l.jsxs("div",{children:[l.jsx("strong",{children:$}),l.jsx("small",{children:Pn(O)})]})]}),l.jsx("button",{className:"btn-icon btn-danger",onClick:()=>I(X,O),disabled:x,children:l.jsx(fo,{})})]},X)})})]}),l.jsxs("div",{className:"broadcast-group-editor__actions",children:[l.jsx("button",{className:"btn-secondary",onClick:t,disabled:x,children:"Annuler"}),l.jsx("button",{className:"btn-primary",onClick:A,disabled:x||!i.trim(),children:x?"Enregistrement...":n?"Enregistrer":"Crer le groupe"})]})]})]})}function rG({campaignId:n}){const[e,t]=_.useState(null),[s,i]=_.useState(null),[r,a]=_.useState(null),[o,c]=_.useState(!0),[f,d]=_.useState("all");_.useEffect(()=>{h();const C=setInterval(h,5e3);return()=>clearInterval(C)},[n]);const h=async()=>{try{const[C,S,L]=await Promise.all([eG(n),tG(n),nG(n)]);t(C.data),i(S.data),a(L.data)}catch(C){console.error("Error loading stats:",C)}finally{c(!1)}};if(o)return l.jsx("div",{className:"campaign-stats loading",children:"Chargement des statistiques..."});if(!e)return l.jsx("div",{className:"campaign-stats error",children:"Erreur lors du chargement"});const{campaign:p,overview:m,recipients:g}=e,w=g.filter(C=>f==="read"?C.read_at:f==="replied"?C.replied_at:f==="failed"?C.failed_at:!0),b=g.filter(C=>C.time_to_read).map(C=>{const S=C.time_to_read.match(/(\d+):(\d+):(\d+)/);return S?parseInt(S[1])*3600+parseInt(S[2])*60+parseInt(S[3]):0}),y=g.filter(C=>C.time_to_reply).map(C=>{const S=C.time_to_reply.match(/(\d+):(\d+):(\d+)/);return S?parseInt(S[1])*3600+parseInt(S[2])*60+parseInt(S[3]):0}),x=b.length>0?Math.round(b.reduce((C,S)=>C+S,0)/b.length/60):0,v=y.length>0?Math.round(y.reduce((C,S)=>C+S,0)/y.length/60):0;return l.jsxs("div",{className:"campaign-stats",children:[l.jsxs("div",{className:"stats-overview",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:m.total}),l.jsx("div",{className:"stat-label",children:"Destinataires"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:m.delivered}),l.jsx("div",{className:"stat-label",children:"Livrs"}),l.jsxs("div",{className:"stat-rate",children:[m.delivery_rate,"%"]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:m.read}),l.jsx("div",{className:"stat-label",children:"Lus"}),l.jsxs("div",{className:"stat-rate",children:[m.read_rate,"%"]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:m.replied}),l.jsx("div",{className:"stat-label",children:"Rpondu"}),l.jsxs("div",{className:"stat-rate",children:[m.reply_rate,"%"]})]}),m.failed>0&&l.jsxs("div",{className:"stat-card error",children:[l.jsx("div",{className:"stat-value",children:m.failed}),l.jsx("div",{className:"stat-label",children:"chous"})]})]}),x>0&&l.jsxs("div",{className:"stats-timing",children:[l.jsxs("div",{className:"timing-item",children:[l.jsx(vy,{})," Temps moyen de lecture: ",l.jsxs("strong",{children:[x," min"]})]}),v>0&&l.jsxs("div",{className:"timing-item",children:[l.jsx(vy,{})," Temps moyen de rponse: ",l.jsxs("strong",{children:[v," min"]})]})]}),s&&l.jsxs("div",{className:"stats-heatmap",children:[l.jsx("h4",{children:"Activit par heure"}),l.jsx("div",{className:"heatmap-hours",children:s.read_by_hour.map((C,S)=>{const L=Math.max(...s.read_by_hour.map(A=>A.count),...s.reply_by_hour.map(A=>A.count),1),k=C.count/L;return l.jsxs("div",{className:"heatmap-hour",children:[l.jsx("div",{className:"heatmap-bar",style:{height:`${k*100}%`,backgroundColor:`rgba(34, 197, 94, ${.3+k*.7})`},title:`${C.hour}h: ${C.count} lectures`}),l.jsxs("small",{children:[C.hour,"h"]})]},S)})})]}),r&&r.length>0&&l.jsxs("div",{className:"stats-timeline",children:[l.jsx("h4",{children:"volution dans le temps"}),l.jsx("div",{className:"timeline-chart",children:l.jsx("div",{className:"timeline-bars",children:r.slice(-24).map((C,S)=>{const L=Math.max(...r.map(A=>A.reads),1),k=Math.max(...r.map(A=>A.replies),1);return l.jsxs("div",{className:"timeline-bar",children:[l.jsx("div",{className:"bar-reads",style:{height:`${C.reads/L*100}%`},title:`${C.reads} lectures`}),l.jsx("div",{className:"bar-replies",style:{height:`${C.replies/k*100}%`},title:`${C.replies} rponses`})]},S)})})})]}),l.jsxs("div",{className:"stats-recipients",children:[l.jsxs("div",{className:"recipients-header",children:[l.jsxs("h4",{children:["Destinataires (",w.length,")"]}),l.jsxs("div",{className:"filter-buttons",children:[l.jsx("button",{className:f==="all"?"active":"",onClick:()=>d("all"),children:"Tous"}),l.jsx("button",{className:f==="read"?"active":"",onClick:()=>d("read"),children:"Lus"}),l.jsx("button",{className:f==="replied"?"active":"",onClick:()=>d("replied"),children:"Rpondu"}),m.failed>0&&l.jsx("button",{className:f==="failed"?"active":"",onClick:()=>d("failed"),children:"chous"})]})]}),l.jsx("div",{className:"recipients-table",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Destinataire"}),l.jsx("th",{children:"Statut"}),l.jsx("th",{children:"Lu le"}),l.jsx("th",{children:"Rpondu le"}),l.jsx("th",{children:"Dlai"})]})}),l.jsx("tbody",{children:w.map(C=>{var k,A,T;const S=((k=C.broadcast_group_recipients)==null?void 0:k.display_name)||((T=(A=C.broadcast_group_recipients)==null?void 0:A.contacts)==null?void 0:T.display_name)||Pn(C.phone_number),L=()=>C.failed_at?l.jsx(Ms,{className:"status-failed"}):C.replied_at?l.jsx(TN,{className:"status-replied"}):C.read_at?l.jsx(J8,{className:"status-read"}):C.delivered_at?l.jsx(tr,{className:"status-delivered"}):l.jsx(tr,{className:"status-sent"});return l.jsxs("tr",{children:[l.jsxs("td",{children:[l.jsx("strong",{children:S}),l.jsx("br",{}),l.jsx("small",{children:Pn(C.phone_number)})]}),l.jsx("td",{children:L()}),l.jsx("td",{children:C.read_at?jp(C.read_at):C.delivered_at?"Livr":"Envoy"}),l.jsx("td",{children:C.replied_at?jp(C.replied_at):""}),l.jsx("td",{children:C.time_to_read&&l.jsx("span",{className:"time-badge",children:(()=>{const I=C.time_to_read.match(/(\d+):(\d+):(\d+)/);if(I){const N=parseInt(I[1]),R=parseInt(I[2]);return N>0?`${N}h ${R}m`:`${R}m`}return C.time_to_read})()})})]},C.id)})})]})})]})]})}function aG({group:n,accountId:e,onClose:t}){const[s,i]=_.useState(""),[r,a]=_.useState(!1),[o,c]=_.useState([]),[f,d]=_.useState(null),[h,p]=_.useState(!1);_.useEffect(()=>{n&&m()},[n]);const m=async()=>{if(n)try{const w=await XH({groupId:n.id});c(w.data||[])}catch(w){console.error("Error loading campaigns:",w)}},g=async()=>{var w,b;if(!(!s.trim()||!n)){a(!0);try{const y=await KH(n.id,{content_text:s,message_type:"text"});i(""),await m(),y.data&&(d(y.data),p(!0))}catch(y){console.error("Error sending broadcast:",y),alert(((b=(w=y.response)==null?void 0:w.data)==null?void 0:b.detail)||"Erreur lors de l'envoi")}finally{a(!1)}}};return n?l.jsxs("div",{className:"broadcast-group-chat",children:[l.jsxs("div",{className:"broadcast-group-chat__header",children:[l.jsxs("div",{className:"header-info",children:[l.jsxs("h2",{children:[l.jsx(Yh,{})," ",n.name]}),n.description&&l.jsx("p",{className:"description",children:n.description})]}),l.jsx("button",{className:"btn-icon",onClick:t,children:""})]}),l.jsx("div",{className:"broadcast-group-chat__content",children:h&&f?l.jsxs("div",{className:"campaign-stats-view",children:[l.jsxs("div",{className:"stats-header",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:" Retour"}),l.jsx("h3",{children:"Statistiques de la campagne"})]}),l.jsx(rG,{campaignId:f.id})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"campaigns-list",children:[l.jsxs("div",{className:"campaigns-header",children:[l.jsx("h3",{children:"Campagnes prcdentes"}),l.jsx("button",{className:"btn-icon",onClick:()=>m(),title:"Actualiser",children:""})]}),o.length===0?l.jsx("p",{className:"empty",children:"Aucune campagne envoye"}):l.jsx("div",{className:"campaigns-items",children:o.map(w=>l.jsxs("div",{className:"campaign-item",onClick:()=>{d(w),p(!0)},children:[l.jsxs("div",{className:"campaign-content",children:[l.jsx("p",{children:w.content_text}),l.jsxs("div",{className:"campaign-meta",children:[l.jsx("span",{children:jp(w.sent_at)}),l.jsxs("span",{className:"stats-badge",children:[w.read_count||0," lus / ",w.replied_count||0," rponses"]})]})]}),l.jsx("button",{className:"btn-icon",onClick:b=>{b.stopPropagation(),d(w),p(!0)},children:l.jsx(H8,{})})]},w.id))})]}),l.jsxs("div",{className:"message-input-area",children:[l.jsx("textarea",{className:"message-input",placeholder:"Tapez votre message  envoyer  tous les destinataires...",value:s,onChange:w=>i(w.target.value),rows:4,disabled:r,onKeyDown:w=>{w.key==="Enter"&&(w.ctrlKey||w.metaKey)&&g()}}),l.jsxs("div",{className:"message-actions",children:[l.jsx("small",{children:"Ctrl+Entre pour envoyer"}),l.jsxs("button",{className:"btn-primary",onClick:g,disabled:!s.trim()||r,children:[l.jsx(mi,{})," ",r?"Envoi...":"Envoyer  tous"]})]})]})]})})]}):l.jsx("div",{className:"broadcast-group-chat empty",children:l.jsx("p",{children:"Slectionnez un groupe pour envoyer un message"})})}function oG(){const{signOut:n,profile:e,hasPermission:t,refreshProfile:s}=Jg(),[i,r]=_.useState([]),[a,o]=_.useState(null),[c,f]=_.useState([]),[d,h]=_.useState(null),[p,m]=_.useState("chat"),[g,w]=_.useState("all"),[b,y]=_.useState([]),[x,v]=_.useState(""),[C,S]=_.useState(null),[L,k]=_.useState(new Set),[A,T]=_.useState(!1),[I,N]=_.useState(!0),[R,B]=_.useState(""),[P,Y]=_.useState(!1),[$,X]=_.useState([]),[O,G]=_.useState(null),[ne,de]=_.useState(!1),[le,H]=_.useState(null),me=t==null?void 0:t("contacts.view"),q=_.useCallback(async()=>{var U;try{const se=await xN(),_e=Array.isArray(se==null?void 0:se.data)?se.data:Array.isArray((U=se==null?void 0:se.data)==null?void 0:U.data)?se.data.data:[];r(_e);const W=kI(),Me=W&&_e.some(De=>De.id===W);o(De=>{var gt;return Me?W:De&&_e.some(Kn=>Kn.id===De)?De:((gt=_e[0])==null?void 0:gt.id)??null})}catch{r([]),o(null)}},[]),ce=_.useCallback(async(U=a)=>{if(!U)return;let se=[],_e=!0,W=null;const Me=200;for(;_e;)try{const gt=(await bN(U,{limit:Me,cursor:W})).data||[];if(gt.length===0){_e=!1;break}se=[...se,...gt],gt.length<Me?_e=!1:W=gt[gt.length-1].updated_at}catch{_e=!1}f(se),h(De=>De?se.find(gt=>gt.id===De.id)??null:null)},[a]);_.useEffect(()=>{const U=()=>N(!document.hidden);return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)},[]),_.useEffect(()=>{const U=W=>{const{conversationId:Me}=W.detail;Me&&yc(Me).then(()=>{ce(),B1(Me)})},se=W=>{const{conversationIds:Me}=W.detail;Me&&Me.length>0&&Promise.all(Me.map(De=>yc(De))).then(()=>{ce(),Me.forEach(De=>B1(De))})},_e=W=>{const{conversationId:Me}=W.detail;if(Me){const De=c.find(gt=>gt.id===Me);De&&(h(De),De!=null&&De.unread_count&&yc(De.id).then(()=>{ce(),B1(De.id)}))}};return window.addEventListener("markConversationRead",U),window.addEventListener("markAllConversationsRead",se),window.addEventListener("openConversation",_e),()=>{window.removeEventListener("markConversationRead",U),window.removeEventListener("markAllConversationsRead",se),window.removeEventListener("openConversation",_e)}},[c,ce]),SI(d==null?void 0:d.id),_.useEffect(()=>{q()},[q]),_.useEffect(()=>{a&&EI(a)},[a]);const we=_.useCallback(async()=>{if(!a){X([]);return}try{const U=await VH(a);X(U.data||[])}catch(U){console.error("Error loading broadcast groups:",U),X([])}},[a]);_.useEffect(()=>{g==="groups"&&we()},[g,a,we]);const Qe=()=>{H(null),de(!0)},dt=U=>{H(U),de(!0)},Je=async U=>{var se,_e;try{await JH(U),await we(),(O==null?void 0:O.id)===U&&G(null)}catch(W){console.error("Error deleting group:",W),alert(((_e=(se=W.response)==null?void 0:se.data)==null?void 0:_e.detail)||"Erreur lors de la suppression")}},Q=async U=>{await we(),de(!1),H(null),U&&G(U)};_.useEffect(()=>{if(!a){f([]),h(null);return}ce(a)},[a,ce]),_.useEffect(()=>{p==="contacts"&&me?gj().then(U=>{y(U.data),S(se=>se??U.data[0]??null)}):p==="contacts"&&!me&&(y([]),S(null))},[p,me]);const ae=_.useMemo(()=>{if(!x.trim())return b;const U=x.toLowerCase();return b.filter(se=>{var W,Me;const _e=((W=se.display_name)==null?void 0:W.toLowerCase())||((Me=se.whatsapp_number)==null?void 0:Me.toLowerCase());return _e==null?void 0:_e.includes(U)})},[b,x]);_.useEffect(()=>{if(!A){if(!ae.length){S(null);return}(!C||!ae.some(U=>U.id===C.id))&&S(ae[0])}},[ae,C,A]);const Ne=_.useCallback(U=>{k(se=>{const _e=new Set(se);return _e.has(U)?_e.delete(U):_e.add(U),_e})},[]),Re=_.useCallback(async()=>{var U,se;if(!a){alert("Aucun compte WhatsApp actif. Veuillez slectionner un compte.");return}if(L.size===0){alert("Veuillez slectionner au moins un contact.");return}try{const _e=`Campagne - ${new Date().toLocaleDateString("fr-FR")}`,Me=(await NI({account_id:a,name:_e,description:`Campagne cre depuis ${L.size} contact(s) slectionn(s)`})).data,gt=Array.from(L).map(Kn=>b.find(Vs=>Vs.id===Kn)).filter(Boolean);for(const Kn of gt)try{await r_(Me.id,{phone_number:Kn.whatsapp_number,contact_id:Kn.id,display_name:Kn.display_name})}catch(Vs){console.error(`Error adding contact ${Kn.id} to group:`,Vs)}k(new Set),T(!1),await we(),G(Me),w("groups"),alert(`Campagne cre avec ${gt.length} contact(s) !`)}catch(_e){console.error("Error creating campaign:",_e),alert(((se=(U=_e.response)==null?void 0:U.data)==null?void 0:se.detail)||"Erreur lors de la cration de la campagne")}},[a,L,b,we]),Te=U=>{h(U),U!=null&&U.unread_count&&yc(U.id).then(()=>{ce(),B1(U.id)})};_.useEffect(()=>{if(!a||p!=="chat"||!I)return;let U=!1,se;const _e=async()=>{await ce(a),U||(se=setTimeout(_e,7e3))};return _e(),()=>{U=!0,se&&clearTimeout(se)}},[a,p,I,ce]);const $t=_.useMemo(()=>{if(P)return[];switch(g){case"unread":return c.filter(U=>U.unread_count>0);case"groups":return[];case"favorites":return c.filter(U=>U.is_favorite);case"gallery":return c;default:return c}},[c,g,P]),hs=async(U,se)=>{await C8(U.id,se),ce()},jt=async(U,se)=>{var Me;if(!U)return;const W=((Me=(await vN(U.id,se)).data)==null?void 0:Me.conversation)??{...U,bot_enabled:se};f(De=>De.map(gt=>gt.id===W.id?{...gt,...W}:gt)),h(De=>De&&De.id===W.id?{...De,...W}:De)},gn=t==null?void 0:t("accounts.view"),V=t==null?void 0:t("accounts.manage"),he=t==null?void 0:t("roles.manage"),J=t==null?void 0:t("users.manage"),Ae=t==null?void 0:t("permissions.view"),xe=t==null?void 0:t("permissions.manage");t==null||t("settings.manage");const ze=Ae||xe||gn,Ie=_.useMemo(()=>{const U=["chat"];return me&&U.push("contacts"),U.push("whatsapp"),ze&&U.push("assistant"),U.push("settings"),U},[me,ze]);_.useEffect(()=>{Ie.includes(p)||m("chat")},[Ie,p]);const z=d&&d.account_id?t==null?void 0:t("messages.send",d.account_id):!1;return l.jsxs("div",{className:"app-shell",children:[l.jsxs("div",{className:"workspace",children:[l.jsx(yH,{active:p,onSelect:m,allowedItems:Ie,onSignOut:n}),p==="contacts"?me?l.jsx("div",{className:"workspace-main contacts-mode",children:l.jsxs("div",{className:"contacts-pane",children:[l.jsxs("div",{className:"contacts-header",children:[l.jsx("h3",{className:"panel-title",children:"Contacts"}),l.jsx("div",{className:"contacts-actions",children:A?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"selection-count",children:[L.size," slectionn",L.size>1?"s":""]}),L.size>0&&a&&l.jsx("button",{className:"btn-primary btn-sm",onClick:Re,children:"Crer une campagne"}),l.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>{T(!1),k(new Set)},children:"Annuler"})]}):l.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>T(!0),children:"Slection multiple"})})]}),l.jsx("div",{className:"conversation-search",children:l.jsx("input",{placeholder:"Trouver un contact",value:x,onChange:U=>v(U.target.value)})}),l.jsx(bH,{contacts:ae,selected:C,onSelect:S,selectedContacts:L,onToggleSelect:Ne,multiSelect:A})]})}):l.jsx("div",{className:"workspace-main contacts-mode",children:l.jsxs("div",{className:"contacts-pane",children:[l.jsx("h3",{className:"panel-title",children:"Contacts"}),l.jsx("p",{children:"Vous n'avez pas la permission d'afficher les contacts."})]})}):p==="settings"?l.jsx("div",{className:"workspace-main settings-mode",children:l.jsx(BH,{accounts:i,onSignOut:n,currentUser:e,canViewAccounts:gn,canManageAccounts:V,canManageRoles:he,canManageUsers:J,canViewPermissions:Ae,canManagePermissions:xe,onAccountsRefresh:q,refreshProfile:s})}):p==="whatsapp"?l.jsx("div",{className:"workspace-main settings-mode",children:l.jsx(YH,{accountId:a,accounts:i})}):p==="assistant"?l.jsx("div",{className:"workspace-main settings-mode",children:l.jsx(GH,{accountId:a,accounts:i,onAccountChange:o})}):l.jsxs("div",{className:"workspace-main",children:[l.jsxs("div",{className:"sidebar",children:[l.jsx(gH,{accounts:i,value:a,onChange:o,label:"Discussions",conversations:c}),l.jsxs("div",{className:"conversation-filters",children:[l.jsx("button",{className:g==="all"?"active":"",onClick:()=>{w("all"),Y(!1)},children:"Toutes"}),l.jsx("button",{className:g==="unread"?"active":"",onClick:()=>{w("unread"),Y(!1)},children:"Non lues"}),l.jsx("button",{className:g==="groups"?"active":"",onClick:()=>{w("groups"),Y(!1)},children:"Groupes"}),l.jsx("button",{className:g==="gallery"?"active":"",onClick:()=>{w("gallery"),Y(!0),h(null)},children:"Galerie"})]}),!P&&l.jsx("div",{className:"conversation-search",children:l.jsx("input",{placeholder:"Taper un numro et appuyer sur Entre...",value:R,onChange:U=>B(U.target.value),onKeyDown:async U=>{var se,_e;if(U.key==="Enter"&&R.trim()&&a){const W=R.trim();if(/\d/.test(W))try{const Me=await M8(a,W);Me.data&&(h(Me.data),B(""),ce(a))}catch(Me){const De=((_e=(se=Me.response)==null?void 0:se.data)==null?void 0:_e.detail)||Me.message||"Erreur inconnue";alert(`Impossible de crer la conversation: ${De}`)}}}})}),P?l.jsx(xH,{accountId:a,mediaType:"all"}):g==="groups"?l.jsx(sG,{groups:$,selectedGroupId:O==null?void 0:O.id,onSelectGroup:G,onCreateGroup:Qe,onEditGroup:dt,onDeleteGroup:Je}):l.jsx(l.Fragment,{children:l.jsx(B8,{data:$t,selectedId:d==null?void 0:d.id,onSelect:Te,onRefresh:()=>ce(a)})})]}),!P&&g!=="groups"&&l.jsx(mH,{conversation:d,onFavoriteToggle:hs,onBotModeChange:jt,isWindowActive:I&&p==="chat",canSend:z}),g==="groups"&&l.jsx(aG,{group:O,accountId:a,onClose:()=>G(null)})]})]}),ne&&l.jsx("div",{className:"modal-overlay",onClick:()=>de(!1),children:l.jsx("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:l.jsx(iG,{group:le,accountId:a,onClose:()=>{de(!1),H(null)},onSave:Q})})})]})}function lG(n){return ue({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"}}]})(n)}function cG(){return l.jsx("header",{className:"top-bar",children:l.jsxs("div",{className:"top-bar__brand",children:[l.jsx(lG,{size:20}),l.jsx("span",{children:"WHATSAPP LMDCVTC"})]})})}function uG(){const{signIn:n}=Jg(),[e,t]=_.useState(""),[s,i]=_.useState(""),[r,a]=_.useState(""),[o,c]=_.useState(!1),f=async d=>{d.preventDefault(),a(""),c(!0);const{error:h}=await n(e,s);h&&a(h.message),c(!1)};return l.jsx("div",{className:"login-screen",children:l.jsxs("form",{className:"login-card",onSubmit:f,children:[l.jsx("h1",{children:"La Maison Du Chauffeur VTC"}),l.jsx("p",{children:"Connecte-toi avec ton compte entreprise."}),l.jsxs("label",{children:["Email",l.jsx("input",{type:"email",value:e,onChange:d=>t(d.target.value),required:!0})]}),l.jsxs("label",{children:["Mot de passe",l.jsx("input",{type:"password",value:s,onChange:d=>i(d.target.value),required:!0})]}),r&&l.jsx("p",{className:"error",children:r}),l.jsx("button",{type:"submit",disabled:o,children:o?"Connexion...":"Se connecter"})]})})}function fG({onLoginSuccess:n}){const[e,t]=_.useState(""),[s,i]=_.useState(""),[r,a]=_.useState(""),[o,c]=_.useState(!1),[f,d]=_.useState(!0),h=async p=>{p.preventDefault(),a(""),c(!0);try{const{data:m,error:g}=await it.auth.signInWithPassword({email:e,password:s});if(g)throw g;m.session&&(Qk(m.session,f),n(m.session))}catch(m){a(m.message||"Erreur de connexion")}finally{c(!1)}};return l.jsxs("div",{className:"mobile-login",children:[l.jsxs("div",{className:"mobile-login__header",children:[l.jsx("div",{className:"mobile-login__logo",children:l.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",children:[l.jsx("circle",{cx:"30",cy:"30",r:"30",fill:"#00a884"}),l.jsx("path",{d:"M30 15C21.716 15 15 21.716 15 30c0 2.616.67 5.076 1.852 7.221L15 45l8.062-2.116A14.93 14.93 0 0030 45c8.284 0 15-6.716 15-15s-6.716-15-15-15zm0 27c-2.38 0-4.619-.69-6.498-1.882l-.467-.277-4.838 1.27 1.293-4.718-.304-.483A11.916 11.916 0 0118 30c0-6.617 5.383-12 12-12s12 5.383 12 12-5.383 12-12 12z",fill:"white"})]})}),l.jsx("h1",{className:"mobile-login__title",children:"WhatsApp LMDCVTC"}),l.jsx("p",{className:"mobile-login__subtitle",children:"Plateforme de gestion WhatsApp Business"})]}),l.jsxs("form",{className:"mobile-login__form",onSubmit:h,children:[l.jsxs("div",{className:"mobile-login__input-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:p=>t(p.target.value),placeholder:"votre@email.com",required:!0,autoComplete:"email",autoFocus:!0})]}),l.jsxs("div",{className:"mobile-login__input-group",children:[l.jsx("label",{htmlFor:"password",children:"Mot de passe"}),l.jsx("input",{id:"password",type:"password",value:s,onChange:p=>i(p.target.value),placeholder:"",required:!0,autoComplete:"current-password"})]}),l.jsxs("label",{className:"mobile-login__checkbox",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:p=>d(p.target.checked)}),l.jsx("span",{children:"Rester connect"})]}),r&&l.jsx("div",{className:"mobile-login__error",children:r}),l.jsx("button",{type:"submit",className:"mobile-login__button",disabled:o,children:o?"Connexion...":"Se connecter"})]}),l.jsx("div",{className:"mobile-login__footer",children:l.jsx("p",{children:"La Maison Du Chauffeur VTC"})})]})}function dG(n){var e;return(e=n==null?void 0:n.contacts)!=null&&e.profile_picture_url?n.contacts.profile_picture_url:n!=null&&n.profile_picture_url?n.profile_picture_url:null}function hG({accounts:n=[],value:e,onChange:t}){const[s,i]=_.useState(!1),r=_.useRef(null);_.useEffect(()=>{function f(d){r.current&&!r.current.contains(d.target)&&i(!1)}return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[]);const a=_.useMemo(()=>Array.isArray(n)?n:[],[n]),o=_.useMemo(()=>a.length?a.find(f=>f.id===e)??a[0]:null,[a,e]);if(!a.length||a.length<=1)return null;const c=f=>{t(f),i(!1)};return l.jsxs("div",{className:"mobile-account-selector",ref:r,children:[l.jsxs("button",{type:"button",className:"mobile-account-selector__button",onClick:()=>i(f=>!f),children:[l.jsxs("div",{className:"mobile-account-selector__text",children:[l.jsx("span",{className:"mobile-account-selector__name",children:o==null?void 0:o.name}),(o==null?void 0:o.phone_number)&&l.jsx("span",{className:"mobile-account-selector__phone",children:o.phone_number})]}),l.jsx("div",{className:"mobile-account-selector__icon",children:s?l.jsx(SN,{}):l.jsx(yj,{})})]}),s&&l.jsx("div",{className:"mobile-account-selector__menu",children:a.map(f=>l.jsxs("button",{type:"button",className:`mobile-account-selector__option ${f.id===(o==null?void 0:o.id)?"active":""}`,onClick:()=>c(f.id),children:[l.jsxs("div",{className:"mobile-account-selector__option-content",children:[l.jsx("span",{className:"mobile-account-selector__option-name",children:f.name}),f.phone_number&&l.jsx("span",{className:"mobile-account-selector__option-phone",children:f.phone_number})]}),f.id===(o==null?void 0:o.id)&&l.jsx("span",{className:"mobile-account-selector__check",children:""})]},f.id))})]})}function pG(n=6e4){const[e,t]=_.useState(new Date);return _.useEffect(()=>{t(new Date);const s=setInterval(()=>{t(new Date)},n);return()=>clearInterval(s)},[n]),e}function mG({conversation:n,displayName:e}){const[t,s]=_.useState(!1),i=dG(n);return l.jsxs("div",{className:"mobile-conv-item__avatar",children:[i&&!t?l.jsx("img",{src:i,alt:e,className:"mobile-conv-item__avatar-img",onError:()=>s(!0),loading:"lazy"}):null,l.jsx("span",{className:"mobile-conv-item__avatar-initial",children:e.charAt(0).toUpperCase()})]})}function gG({conversations:n,accounts:e,activeAccount:t,onSelectAccount:s,onSelectConversation:i,onConnectedDevices:r,onImportant:a,onMarkAllRead:o,onSettings:c}){const[f,d]=_.useState(!1),[h,p]=_.useState(""),[m,g]=_.useState("all"),w=()=>{a?a():g("favorites")},b=pG(6e4);e.find(C=>C.id===t);const x=_.useMemo(()=>{switch(m){case"unread":return n.filter(C=>C.unread_count>0);case"favorites":return n.filter(C=>C.is_favorite);case"groups":return n.filter(C=>C.is_group);default:return n}},[n,m]).filter(C=>{var k;if(!h)return!0;const S=h.toLowerCase();return(((k=C.contacts)==null?void 0:k.display_name)||C.client_number||"").toLowerCase().includes(S)}),v=C=>{if(!C)return"";const S=typeof C=="string"&&!C.match(/[Z+-]\d{2}:\d{2}$/)?C+"Z":C,L=new Date(S),k=b;k.getTime()-L.getTime();const A=new Date(k);A.setHours(0,0,0,0);const T=new Date(L);T.setHours(0,0,0,0);const I="Europe/Paris";if(T.getTime()===A.getTime())return L.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",timeZone:I});const N=new Date(A);if(N.setDate(N.getDate()-1),T.getTime()===N.getTime())return"Hier";const R=new Date(k);return R.setDate(R.getDate()-7),L>R?["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][L.getDay()]:L.getFullYear()===k.getFullYear()?L.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",timeZone:I}):L.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit",timeZone:I})};return l.jsxs("div",{className:"mobile-conversations",children:[l.jsxs("header",{className:"mobile-conversations__header",children:[l.jsx("h1",{children:"WhatsApp"}),l.jsx("div",{className:"mobile-conversations__actions",children:l.jsx("button",{className:"icon-btn-round",onClick:()=>d(!f),title:"Menu",children:l.jsx(IN,{})})}),f&&l.jsxs("div",{className:"mobile-conversations__menu",children:[r&&l.jsxs("button",{onClick:()=>{r(),d(!1)},children:[l.jsx(PN,{})," Appareils connects"]}),a&&l.jsxs("button",{onClick:()=>{w(),d(!1)},children:[l.jsx(i5,{})," Important"]}),o&&l.jsxs("button",{onClick:()=>{o(),d(!1)},children:[l.jsx(LN,{})," Tout lire"]}),c&&l.jsxs("button",{onClick:()=>{c(),d(!1)},children:[l.jsx(Ib,{})," Paramtres"]})]})]}),l.jsx("div",{className:"mobile-conversations__search",children:l.jsxs("div",{className:"search-box",children:[l.jsx(xo,{}),l.jsx("input",{type:"text",placeholder:"Rechercher...",value:h,onChange:C=>p(C.target.value)})]})}),l.jsx("div",{className:"mobile-conversations__account-selector",children:l.jsx(hG,{accounts:e,value:t,onChange:s})}),l.jsxs("div",{className:"mobile-conversations__filters",children:[l.jsx("button",{className:`mobile-conversations__filter-btn ${m==="all"?"active":""}`,onClick:()=>g("all"),children:"Toutes"}),l.jsx("button",{className:`mobile-conversations__filter-btn ${m==="unread"?"active":""}`,onClick:()=>g("unread"),children:"Non lues"}),l.jsx("button",{className:`mobile-conversations__filter-btn ${m==="favorites"?"active":""}`,onClick:()=>g("favorites"),children:"Favoris"}),l.jsx("button",{className:`mobile-conversations__filter-btn ${m==="groups"?"active":""}`,onClick:()=>g("groups"),children:"Groupes"})]}),l.jsx("div",{className:"mobile-conversations__list",children:x.length===0?l.jsx("div",{className:"mobile-conversations__empty",children:l.jsx("p",{children:"Aucune conversation"})}):x.map(C=>{var T;const S=((T=C.contacts)==null?void 0:T.display_name)||Pn(C.client_number)||C.client_number,L=C.last_message||"",k=v(C.updated_at),A=C.unread_count||0;return l.jsxs("div",{className:"mobile-conv-item",onClick:()=>i(C),children:[l.jsx(mG,{conversation:C,displayName:S}),l.jsxs("div",{className:"mobile-conv-item__content",children:[l.jsxs("div",{className:"mobile-conv-item__header",children:[l.jsxs("div",{className:"mobile-conv-item__header-left",children:[l.jsx("span",{className:"mobile-conv-item__name",children:S}),l.jsx("span",{className:`mobile-conv-item__bot-indicator ${C.bot_enabled?"bot":"human"}`,children:C.bot_enabled?"Bot":"Humain"})]}),l.jsx("span",{className:"mobile-conv-item__time",children:k})]}),l.jsxs("div",{className:"mobile-conv-item__footer",children:[l.jsx("span",{className:"mobile-conv-item__message",children:L==="[image]"?l.jsxs(l.Fragment,{children:[l.jsx(Dr,{})," Image"]}):L==="[video]"?l.jsxs(l.Fragment,{children:[l.jsx(Og,{})," Vido"]}):L==="[audio]"?l.jsxs(l.Fragment,{children:[l.jsx(xy,{})," Audio"]}):L==="[document]"?l.jsxs(l.Fragment,{children:[l.jsx(Ys,{})," Document"]}):L==="[location]"?l.jsxs(l.Fragment,{children:[l.jsx(AN,{})," Localisation"]}):L==="[contact]"?l.jsxs(l.Fragment,{children:[l.jsx(Wh,{})," Contact"]}):L==="[interactive]"?l.jsxs(l.Fragment,{children:[l.jsx(d5,{})," Message interactif"]}):L}),A>0&&l.jsx("span",{className:"mobile-conv-item__badge",children:A})]})]})]},C.id)})})]})}function wG({conversationId:n,accountId:e,onSend:t,onMediaSent:s,disabled:i}){const[r,a]=_.useState(""),[o,c]=_.useState(!1),[f,d]=_.useState(!1),[h,p]=_.useState(!1),m=_.useRef(null),g=Tg(),w=C=>{const S=C.target.value,L=g!=null&&g.emojiReplace?S.replace(/:\)/g,"").replace(/:\("/g,"").replace(/<3/g,"").replace(/;\)/g,""):S;a(L),m.current&&(m.current.style.height="auto",m.current.style.height=Math.min(m.current.scrollHeight,120)+"px")},b=()=>{if(!r.trim()||i)return;const C=r.trim();a(""),m.current&&(m.current.style.height="auto"),t==null||t(C)},y=C=>{C.key==="Enter"&&(g!=null&&g.enterToSend?C.shiftKey||(C.preventDefault(),b()):(C.metaKey||C.ctrlKey)&&(C.preventDefault(),b()))},x=C=>{a(S=>S+C.emoji),c(!1)},v=async C=>{d(!1);const S=document.createElement("input");S.type="file",C==="image"?S.accept="image/*,video/*":C==="document"&&(S.accept=".pdf,.doc,.docx,.xls,.xlsx,.txt"),S.onchange=async L=>{var A,T,I,N;const k=(A=L.target.files)==null?void 0:A[0];if(k){p(!0);try{if(!e)throw new Error("Compte non trouv (account_id manquant)");console.log(" Upload de fichier:",k.name,k.type,"Account:",e);const R=await qj(e,k);console.log(" Upload russi:",R.data);const B=((I=(T=R.data)==null?void 0:T.data)==null?void 0:I.id)||((N=R.data)==null?void 0:N.id);if(!B)throw console.error(" Pas de media_id dans la rponse:",R.data),new Error("Aucun ID de mdia retourn");console.log(" Media ID extrait:",B);let P=C;C==="image"&&k.type.startsWith("video/")&&(P="video"),console.log(" Envoi message mdia:",{mediaType:P,mediaId:B});const Y=URL.createObjectURL(k),$={id:`temp-media-${Date.now()}`,conversation_id:n,direction:"outbound",content_text:r.trim()||`[${P}]`,message_type:P,status:"pending",timestamp:new Date().toISOString(),_localPreview:Y,media_id:B};console.log(" Affichage aperu optimiste"),s&&s($),await zN({conversation_id:n,media_id:B,media_type:P,caption:r.trim()||void 0}),console.log(" Message mdia envoy"),setTimeout(()=>{URL.revokeObjectURL(Y)},5e3),a("")}catch(R){console.error(" Erreur upload/envoi:",R),alert(`Erreur lors de l'envoi du fichier: ${R.message}`)}finally{p(!1)}}},S.click()};return l.jsxs("div",{className:"mobile-simple-input",children:[o&&l.jsx("div",{className:"mobile-emoji-overlay",onClick:()=>c(!1),children:l.jsx("div",{className:"mobile-emoji-picker",onClick:C=>C.stopPropagation(),children:l.jsx(Fj,{onEmojiClick:x,width:"100%",height:"350px"})})}),f&&l.jsx("div",{className:"mobile-menu-overlay",onClick:()=>d(!1),children:l.jsxs("div",{className:"mobile-menu-sheet",onClick:C=>C.stopPropagation(),children:[l.jsxs("button",{onClick:()=>v("document"),children:[l.jsx(Ys,{}),l.jsx("span",{children:"Document"})]}),l.jsxs("button",{onClick:()=>v("image"),children:[l.jsx(Dr,{}),l.jsx("span",{children:"Photos et vidos"})]})]})}),l.jsxs("div",{className:"mobile-input-bar",children:[l.jsx("button",{className:"mobile-input-btn",onClick:()=>c(!o),disabled:i,children:l.jsx(RN,{})}),l.jsx("button",{className:"mobile-input-btn",onClick:()=>d(!f),disabled:i,children:l.jsx(uo,{})}),l.jsx("textarea",{ref:m,value:r,onChange:w,onKeyPress:y,spellCheck:(g==null?void 0:g.spellCheck)??!0,lang:"fr",placeholder:g!=null&&g.enterToSend?"Message":"Message (Ctrl+Entre pour envoyer)",disabled:i||h,rows:1,className:"mobile-input-textarea"}),l.jsx("button",{className:"mobile-input-send",onClick:b,disabled:i||!r.trim()||h,children:l.jsx(mi,{})})]})]})}function AI({contact:n,activeAccount:e,onBack:t,onUpdate:s,onDelete:i}){const[r,a]=_.useState(!1),[o,c]=_.useState((n==null?void 0:n.display_name)||""),[f,d]=_.useState((n==null?void 0:n.whatsapp_number)||""),[h,p]=_.useState(!1),[m,g]=_.useState(null),[w,b]=_.useState(!1);_.useEffect(()=>{n&&(c(n.display_name||""),d(n.whatsapp_number||""))},[n]),_.useEffect(()=>{n&&e&&!r&&(b(!0),R8(n.id,e).then(v=>{var C,S;(C=v.data)!=null&&C.success&&((S=v.data)!=null&&S.data)&&g(v.data.data)}).catch(v=>{console.error("Erreur lors de la rcupration des infos WhatsApp:",v)}).finally(()=>{b(!1)}))},[n,e,r]);const y=async()=>{if(n){p(!0);try{const v=await D8(n.id,{display_name:o||null,whatsapp_number:f});a(!1),s&&s(v.data)}catch(v){console.error("Erreur lors de la mise  jour du contact:",v),alert("Erreur lors de la mise  jour du contact")}finally{p(!1)}}},x=async()=>{if(n&&confirm("tes-vous sr de vouloir supprimer ce contact ?")){p(!0);try{await P8(n.id),i&&i(n.id),t()}catch(v){console.error("Erreur lors de la suppression du contact:",v),alert("Erreur lors de la suppression du contact")}finally{p(!1)}}};return n?l.jsxs("div",{className:"mobile-contact-detail",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:t,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:r?"Modifier le contact":"Dtails du contact"}),r?l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{className:"icon-btn",onClick:()=>{a(!1),c(n.display_name||""),d(n.whatsapp_number||"")},title:"Annuler",children:l.jsx(Ms,{})}),l.jsx("button",{className:"icon-btn",onClick:y,disabled:h,title:"Enregistrer",children:l.jsx(vj,{})})]}):l.jsx("button",{className:"icon-btn",onClick:()=>a(!0),title:"Modifier",children:l.jsx(To,{})})]}),l.jsxs("div",{className:"mobile-contact-detail__content",children:[l.jsxs("div",{className:"mobile-contact-detail__avatar",children:[n.profile_picture_url||m!=null&&m.profile_picture_url?l.jsx("img",{src:n.profile_picture_url||m.profile_picture_url,alt:n.display_name||"Contact",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},onError:v=>{v.target.style.display="none",v.target.nextSibling.style.display="flex"}}):null,l.jsx("div",{style:{display:n.profile_picture_url||m!=null&&m.profile_picture_url?"none":"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:(n.display_name||n.whatsapp_name||"?").charAt(0).toUpperCase()})]}),l.jsxs("div",{className:"mobile-contact-detail__fields",children:[l.jsxs("div",{className:"mobile-contact-detail__field",children:[l.jsx("label",{children:"Nom"}),r?l.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:"Nom du contact"}):l.jsx("div",{className:"mobile-contact-detail__value",children:(m==null?void 0:m.name)||n.display_name||"Sans nom"})]}),l.jsxs("div",{className:"mobile-contact-detail__field",children:[l.jsx("label",{children:"Numro WhatsApp"}),r?l.jsx("input",{type:"text",value:f,onChange:v=>d(v.target.value),placeholder:"Numro de tlphone"}):l.jsx("div",{className:"mobile-contact-detail__value",children:Pn(n.whatsapp_number)})]}),!r&&l.jsxs(l.Fragment,{children:[n.whatsapp_name&&n.whatsapp_name!==n.display_name&&l.jsxs("div",{className:"mobile-contact-detail__field",children:[l.jsx("label",{children:"Nom WhatsApp"}),l.jsx("div",{className:"mobile-contact-detail__value",children:n.whatsapp_name})]}),w&&l.jsx("div",{className:"mobile-contact-detail__field",children:l.jsx("div",{className:"mobile-contact-detail__value",style:{color:"#8696a0",fontStyle:"italic"},children:"Chargement des informations WhatsApp..."})})]})]}),!r&&l.jsx("div",{className:"mobile-contact-detail__actions",children:l.jsxs("button",{className:"mobile-contact-detail__delete-btn",onClick:x,disabled:h,children:[l.jsx(fo,{})," Supprimer le contact"]})})]})]}):null}function TI({onBack:n}){const[e,t]=_.useState(localStorage.getItem("chatTheme")||"default"),[s,i]=_.useState(localStorage.getItem("chatWallpaper")||"default"),[r,a]=_.useState(localStorage.getItem("enterKeySends")==="true"),[o,c]=_.useState(localStorage.getItem("mediaVisibility")!=="false"),[f,d]=_.useState(localStorage.getItem("fontSize")||"medium");_.useEffect(()=>{localStorage.setItem("chatTheme",e)},[e]),_.useEffect(()=>{localStorage.setItem("chatWallpaper",s)},[s]),_.useEffect(()=>{localStorage.setItem("enterKeySends",r.toString())},[r]),_.useEffect(()=>{localStorage.setItem("mediaVisibility",o.toString())},[o]),_.useEffect(()=>{localStorage.setItem("fontSize",f)},[f]);const h=[{id:"default",name:"Par dfaut"},{id:"light",name:"Clair"},{id:"dark",name:"Sombre"},{id:"blue",name:"Bleu"},{id:"green",name:"Vert"}],p=[{id:"default",name:"Par dfaut"},{id:"solid",name:"Couleur unie"},{id:"pattern1",name:"Motif 1"},{id:"pattern2",name:"Motif 2"}],m=[{id:"small",name:"Petit",size:"0.875rem"},{id:"medium",name:"Moyen",size:"1rem"},{id:"large",name:"Grand",size:"1.125rem"}];return l.jsxs("div",{className:"mobile-chat-settings",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Discussions"})]}),l.jsxs("div",{className:"mobile-chat-settings__content",children:[l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Thme"}),l.jsx("div",{className:"mobile-chat-settings__options",children:h.map(g=>l.jsxs("div",{className:`mobile-chat-settings__option ${e===g.id?"active":""}`,onClick:()=>t(g.id),children:[l.jsx("span",{children:g.name}),e===g.id&&l.jsx(tr,{})]},g.id))})]}),l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Fond d'cran"}),l.jsx("div",{className:"mobile-chat-settings__options",children:p.map(g=>l.jsxs("div",{className:`mobile-chat-settings__option ${s===g.id?"active":""}`,onClick:()=>i(g.id),children:[l.jsx("span",{children:g.name}),s===g.id&&l.jsx(tr,{})]},g.id))})]}),l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Envoi de messages"}),l.jsxs("div",{className:"mobile-chat-settings__toggle",children:[l.jsxs("div",{className:"mobile-chat-settings__toggle-info",children:[l.jsx("span",{className:"mobile-chat-settings__toggle-label",children:"Envoyer avec Entre"}),l.jsx("span",{className:"mobile-chat-settings__toggle-description",children:"Appuyez sur Entre pour envoyer. Utilisez Maj+Entre pour un nouveau ligne"})]}),l.jsx("button",{className:`mobile-chat-settings__toggle-btn ${r?"active":""}`,onClick:()=>a(!r),children:l.jsx("span",{className:"mobile-chat-settings__toggle-slider"})})]})]}),l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Mdias et liens"}),l.jsxs("div",{className:"mobile-chat-settings__toggle",children:[l.jsxs("div",{className:"mobile-chat-settings__toggle-info",children:[l.jsx("span",{className:"mobile-chat-settings__toggle-label",children:"Aperu des mdias"}),l.jsx("span",{className:"mobile-chat-settings__toggle-description",children:"Afficher automatiquement les images, vidos et liens dans les discussions"})]}),l.jsx("button",{className:`mobile-chat-settings__toggle-btn ${o?"active":""}`,onClick:()=>c(!o),children:l.jsx("span",{className:"mobile-chat-settings__toggle-slider"})})]})]}),l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Taille de la police"}),l.jsx("div",{className:"mobile-chat-settings__options",children:m.map(g=>l.jsxs("div",{className:`mobile-chat-settings__option ${f===g.id?"active":""}`,onClick:()=>d(g.id),children:[l.jsx("span",{children:g.name}),f===g.id&&l.jsx(tr,{})]},g.id))})]}),l.jsxs("div",{className:"mobile-chat-settings__section",children:[l.jsx("h2",{className:"mobile-chat-settings__section-title",children:"Historique des discussions"}),l.jsxs("div",{className:"mobile-chat-settings__action",children:[l.jsx("span",{children:"Effacer toutes les discussions"}),l.jsx("button",{className:"mobile-chat-settings__action-btn",onClick:()=>{confirm("tes-vous sr de vouloir effacer toutes les discussions ? Cette action est irrversible.")&&alert("Fonctionnalit  implmenter")},children:"Effacer"})]})]})]})]})}function yG({conversation:n,onBack:e,onRefresh:t,onShowContact:s,onToggleBotMode:i}){var Je;const[r,a]=_.useState([]),[o,c]=_.useState(!1),f=_.useRef(null),d=_.useRef(null),[h,p]=_.useState(!1),[m,g]=_.useState(!1),[w,b]=_.useState(localStorage.getItem("chatTheme")||"default"),[y,x]=_.useState(localStorage.getItem("chatWallpaper")||"default"),[v,C]=_.useState(localStorage.getItem("fontSize")||"medium"),[S,L]=_.useState(localStorage.getItem("mediaVisibility")!=="false"),[k,A]=_.useState(!1),[T,I]=_.useState(!1),[N,R]=_.useState(!1),[B,P]=_.useState(!1),[Y,$]=_.useState(""),[X,O]=_.useState([]),[G,ne]=_.useState(!1);_.useEffect(()=>{const Q=()=>{b(localStorage.getItem("chatTheme")||"default"),x(localStorage.getItem("chatWallpaper")||"default"),C(localStorage.getItem("fontSize")||"medium"),L(localStorage.getItem("mediaVisibility")!=="false")};window.addEventListener("storage",Q);const ae=setInterval(Q,500);return()=>{window.removeEventListener("storage",Q),clearInterval(ae)}},[]);const de=((Je=n==null?void 0:n.contacts)==null?void 0:Je.display_name)||Pn(n==null?void 0:n.client_number)||(n==null?void 0:n.client_number),le=_.useCallback(Q=>[...Q].sort((ae,Ne)=>{const Re=new Date(ae.timestamp||ae.created_at||0).getTime(),Te=new Date(Ne.timestamp||Ne.created_at||0).getTime();return Re-Te}),[]),H=_.useCallback(()=>{n!=null&&n.id&&rw(n.id).then(Q=>{var Ne;const ae=Q.data||[];if(console.log(` Refreshed messages for conversation ${n.id}: ${ae.length} messages`),ae.length>0){const Re=ae[ae.length-1];console.log(`   Latest message: ${(Ne=Re.content_text)==null?void 0:Ne.substring(0,50)}... (type: ${Re.message_type}, direction: ${Re.direction})`)}a(le(ae))}).catch(Q=>{console.error(" Erreur refresh messages:",Q)})},[n==null?void 0:n.id,le]),me=_.useCallback(async Q=>{if(!(n!=null&&n.id)||!(Q!=null&&Q.trim()))return;const ae=`temp-${Date.now()}`,Ne={id:ae,client_temp_id:ae,conversation_id:n.id,direction:"outbound",content_text:Q.trim(),message_type:"text",status:"pending",timestamp:new Date().toISOString()};a(Re=>le([...Re,Ne])),setTimeout(()=>{var Re;(Re=f.current)==null||Re.scrollIntoView({behavior:"auto"}),g(!1),p(!1)},50);try{await wx({conversation_id:n.id,content:Q.trim()}),setTimeout(()=>{H()},1500)}catch(Re){console.error(" Erreur envoi message:",Re),a(Te=>Te.filter($t=>$t.id!==ae)),alert("Erreur lors de l'envoi du message")}},[n==null?void 0:n.id,le,H]);_.useEffect(()=>{H(),g(!1)},[H]),_.useEffect(()=>{if(!(n!=null&&n.id))return;const Q=setInterval(()=>{H()},5e3);return()=>{clearInterval(Q)}},[n==null?void 0:n.id,H]),_.useEffect(()=>{if(!(n!=null&&n.id))return;const Q=it.channel(`messages:${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${n.id}`},ae=>{const Ne=ae.new;a(Re=>{if(Re.some(jt=>jt.id===Ne.id))return Re;const $t=Re.filter(jt=>jt.client_temp_id&&Ne.content_text===jt.content_text?Math.abs(new Date(Ne.timestamp).getTime()-new Date(jt.timestamp).getTime())>3e3:!0),hs=le([...$t,Ne]);return m||setTimeout(()=>{var jt;(jt=f.current)==null||jt.scrollIntoView({behavior:"auto"})},100),hs})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`conversation_id=eq.${n.id}`},ae=>{const Ne=ae.new;a(Re=>le(Re.map(Te=>Te.id===Ne.id?Ne:Te)))}).subscribe();return()=>{it.removeChannel(Q)}},[n==null?void 0:n.id,le,m]),_.useEffect(()=>{g(!1),p(!1),c(!1)},[n==null?void 0:n.id]),_.useEffect(()=>{if(!o)return;const Q=Ne=>{var Te,$t;const Re=($t=(Te=d.current)==null?void 0:Te.closest(".mobile-chat"))==null?void 0:$t.querySelector(".mobile-chat__actions");Re&&!Re.contains(Ne.target)&&c(!1)},ae=setTimeout(()=>{document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q)},100);return()=>{clearTimeout(ae),document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[o]),_.useEffect(()=>{const Q=d.current;if(!Q)return;const ae=()=>{const Ne=d.current;if(!Ne)return;const Re=Ne.scrollHeight-Ne.scrollTop-Ne.clientHeight<100;p(!Re),g(!Re)};return Q.addEventListener("scroll",ae),()=>Q.removeEventListener("scroll",ae)},[]),_.useEffect(()=>{if(!m&&r.length>0){const Q=setTimeout(()=>{f.current&&(f.current.scrollIntoView({behavior:"auto"}),p(!1))},50);return()=>clearTimeout(Q)}},[r.length,m]);const q=()=>{var Q;(Q=f.current)==null||Q.scrollIntoView({behavior:"auto"}),g(!1),p(!1)};_.useEffect(()=>{const Q=()=>{setTimeout(()=>{var Ne;(Ne=f.current)==null||Ne.scrollIntoView({behavior:"auto",block:"end"}),g(!1),p(!1)},300)},ae=document.querySelectorAll(".mobile-chat__input input, .mobile-chat__input textarea");return ae.forEach(Ne=>{Ne.addEventListener("focus",Q)}),()=>{ae.forEach(Ne=>{Ne.removeEventListener("focus",Q)})}},[]);const we={"--chat-theme":w,"--chat-wallpaper":y,"--font-size":{small:"0.875rem",medium:"1rem",large:"1.125rem"}[v]||"1rem"},Qe=`mobile-chat--theme-${w}`,dt=`mobile-chat--wallpaper-${y}`;return l.jsxs("div",{className:`mobile-chat ${Qe} ${dt}`,style:we,children:[N?l.jsxs("header",{className:"mobile-chat__header mobile-chat__header--search",children:[l.jsx("button",{className:"mobile-chat__back",onClick:()=>{R(!1),$(""),O([])},children:l.jsx(fs,{})}),l.jsxs("div",{className:"mobile-chat__search-input-container",children:[l.jsx(xo,{className:"mobile-chat__search-icon"}),l.jsx("input",{type:"text",className:"mobile-chat__search-input",placeholder:"Rechercher dans la conversation...",value:Y,onChange:Q=>{const ae=Q.target.value;if($(ae),ae.trim()){const Ne=r.filter(Re=>{var Te;return(Te=Re.content_text)==null?void 0:Te.toLowerCase().includes(ae.toLowerCase())});O(Ne)}else O([])},autoFocus:!0}),Y&&l.jsx("button",{className:"mobile-chat__search-clear",onClick:()=>{$(""),O([])},children:l.jsx(Ms,{})})]})]}):l.jsxs("header",{className:"mobile-chat__header",children:[l.jsx("button",{className:"mobile-chat__back",onClick:e,children:l.jsx(fs,{})}),l.jsxs("div",{className:"mobile-chat__contact",onClick:e,children:[l.jsx("div",{className:"mobile-chat__avatar",children:de.charAt(0).toUpperCase()}),l.jsx("div",{className:"mobile-chat__info",children:l.jsx("span",{className:"mobile-chat__name",children:de})})]}),l.jsxs("div",{className:"mobile-chat__actions",style:{position:"relative"},children:[l.jsx("button",{className:"icon-btn-round",title:"Menu",onClick:()=>c(!o),children:l.jsx(IN,{})}),o&&l.jsxs("div",{className:"mobile-chat__menu",children:[l.jsxs("button",{onClick:()=>{c(!1),s&&(n!=null&&n.contacts)?s(n.contacts):n!=null&&n.contacts&&A(!0)},children:[l.jsx(Wh,{})," Afficher le contact"]}),l.jsxs("button",{onClick:()=>{c(!1),R(!0)},children:[l.jsx(xo,{})," Rechercher"]}),l.jsxs("button",{onClick:()=>{c(!1),alert("Nouveau groupe - Fonctionnalit  venir")},children:[l.jsx(Yh,{})," Nouveau groupe"]}),l.jsxs("button",{onClick:()=>{c(!1),P(!0)},children:[l.jsx(Ys,{})," Mdias, liens et documents"]}),l.jsxs("button",{onClick:()=>{c(!1),I(!0)},children:[l.jsx(s5,{})," Thme de la discussion"]}),l.jsxs("button",{onClick:async()=>{if(c(!1),!(!(n!=null&&n.id)||G)){ne(!0);try{const Q=!n.bot_enabled;await vN(n.id,Q),i&&i(n.id,Q),t&&t()}catch(Q){console.error("Erreur lors du changement de mode:",Q),alert("Erreur lors du changement de mode")}finally{ne(!1)}}},children:[l.jsx(EN,{})," ",n!=null&&n.bot_enabled?"Passer en mode Humain":"Passer en mode Bot"]})]})]})]}),l.jsxs("div",{className:"mobile-chat__messages",ref:d,children:[N&&Y?X.length===0?l.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:"Aucun rsultat trouv"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{padding:"0.75rem 1rem",color:"#8696a0",fontSize:"0.875rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[X.length," rsultat",X.length>1?"s":""," trouv",X.length>1?"s":""]}),X.map(Q=>!S&&Q.message_type&&["image","video","document","audio"].includes(Q.message_type)?l.jsx("div",{style:{padding:"0.5rem 1rem",color:"#8696a0",fontStyle:"italic",fontSize:"0.875rem"},children:"[Mdia masqu - Activez l'aperu dans les paramtres]"},Q.id):l.jsx(X4,{message:Q,conversation:n},Q.id))]}):r.length===0?l.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:"Aucun message"}):r.map(Q=>!S&&Q.message_type&&["image","video","document","audio"].includes(Q.message_type)?l.jsx("div",{style:{padding:"0.5rem 1rem",color:"#8696a0",fontStyle:"italic",fontSize:"0.875rem"},children:"[Mdia masqu - Activez l'aperu dans les paramtres]"},Q.id):l.jsx(X4,{message:Q,conversation:n},Q.id)),l.jsx("div",{ref:f}),h&&l.jsx("button",{className:"mobile-chat__scroll-to-bottom",onClick:q,children:l.jsx(yj,{})})]}),l.jsx("div",{className:"mobile-chat__input",children:l.jsx(wG,{conversationId:n==null?void 0:n.id,accountId:n==null?void 0:n.account_id,onSend:me,onMediaSent:Q=>{Q&&(a(ae=>le([...ae,Q])),setTimeout(()=>{var ae;(ae=f.current)==null||ae.scrollIntoView({behavior:"auto"}),g(!1),p(!1)},50)),setTimeout(()=>{H()},2e3)},disabled:!1})}),k&&(n==null?void 0:n.contacts)&&l.jsx("div",{className:"mobile-chat__overlay",children:l.jsx("div",{style:{width:"100%",height:"100%",background:"#0b1014"},children:l.jsx(AI,{contact:n.contacts,activeAccount:n.account_id,onBack:()=>A(!1)})})}),T&&l.jsx("div",{className:"mobile-chat__overlay",children:l.jsx("div",{style:{width:"100%",height:"100%",background:"#0b1014"},children:l.jsx(TI,{onBack:()=>I(!1)})})}),B&&l.jsxs("div",{className:"mobile-chat__media-overlay",children:[l.jsxs("div",{className:"mobile-chat__media-header",children:[l.jsx("button",{onClick:()=>P(!1),children:l.jsx(fs,{})}),l.jsx("h2",{children:"Mdias, liens et documents"})]}),l.jsx("div",{className:"mobile-chat__media-content",children:(()=>{const Q=r.filter(ae=>["image","video","document","audio"].includes(ae.message_type)||ae.content_text&&ae.content_text.match(/https?:\/\//));return Q.length===0?l.jsxs("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#8696a0"},children:[l.jsx(Ys,{style:{fontSize:"3rem",marginBottom:"1rem",opacity:.5}}),l.jsx("p",{children:"Aucun mdia, lien ou document dans cette conversation"})]}):l.jsx("div",{className:"mobile-chat__media-grid",children:Q.map(ae=>{var Ne;return l.jsx("div",{className:"mobile-chat__media-item",children:ae.message_type&&["image","video","document","audio"].includes(ae.message_type)?l.jsxs("div",{className:"mobile-chat__media-item-content",children:[l.jsxs("div",{className:"mobile-chat__media-item-icon",children:[ae.message_type==="image"&&l.jsx(Dr,{}),ae.message_type==="video"&&l.jsx(Og,{}),ae.message_type==="document"&&l.jsx(Ys,{}),ae.message_type==="audio"&&l.jsx(xy,{})]}),l.jsxs("div",{className:"mobile-chat__media-item-info",children:[l.jsx("div",{className:"mobile-chat__media-item-type",children:ae.message_type}),ae.content_text&&l.jsx("div",{className:"mobile-chat__media-item-text",children:ae.content_text}),l.jsx("div",{className:"mobile-chat__media-item-time",children:(()=>{const Re=ae.timestamp||ae.created_at,Te=typeof Re=="string"&&!Re.match(/[Z+-]\d{2}:\d{2}$/)?Re+"Z":Re;return new Date(Te).toLocaleString("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})()})]})]}):ae.content_text&&ae.content_text.match(/https?:\/\//)?l.jsxs("div",{className:"mobile-chat__media-item-content",children:[l.jsx("div",{className:"mobile-chat__media-item-icon",children:l.jsx(x0,{})}),l.jsxs("div",{className:"mobile-chat__media-item-info",children:[l.jsx("div",{className:"mobile-chat__media-item-link",children:(Ne=ae.content_text.match(/https?:\/\/[^\s]+/))==null?void 0:Ne[0]}),l.jsx("div",{className:"mobile-chat__media-item-time",children:(()=>{const Re=ae.timestamp||ae.created_at,Te=typeof Re=="string"&&!Re.match(/[Z+-]\d{2}:\d{2}$/)?Re+"Z":Re;return new Date(Te).toLocaleString("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})()})]})]}):null},ae.id)})})})()})]})]})}function bG({onBack:n,onCreated:e}){const[t,s]=_.useState(""),[i,r]=_.useState(""),[a,o]=_.useState(!1),c=async f=>{var d,h;if(f.preventDefault(),!i.trim()){alert("Le numro WhatsApp est requis");return}o(!0);try{const p=await I8({whatsapp_number:i,display_name:t||null});e&&e(p.data),n()}catch(p){console.error("Erreur lors de la cration du contact:",p);const m=((h=(d=p.response)==null?void 0:d.data)==null?void 0:h.detail)||"Erreur lors de la cration du contact";alert(m)}finally{o(!1)}};return l.jsxs("div",{className:"mobile-contact-form",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Nouveau contact"})]}),l.jsx("div",{className:"mobile-contact-form__content",children:l.jsxs("form",{onSubmit:c,children:[l.jsxs("div",{className:"mobile-contact-form__field",children:[l.jsx("label",{children:"Nom"}),l.jsx("input",{type:"text",value:t,onChange:f=>s(f.target.value),placeholder:"Nom du contact (optionnel)"})]}),l.jsxs("div",{className:"mobile-contact-form__field",children:[l.jsx("label",{children:"Numro WhatsApp *"}),l.jsx("input",{type:"text",value:i,onChange:f=>r(f.target.value),placeholder:"+33 6 12 34 56 78",required:!0})]}),l.jsxs("div",{className:"mobile-contact-form__actions",children:[l.jsxs("button",{type:"button",className:"mobile-contact-form__cancel-btn",onClick:n,disabled:a,children:[l.jsx(Ms,{})," Annuler"]}),l.jsxs("button",{type:"submit",className:"mobile-contact-form__save-btn",disabled:a||!i.trim(),children:[l.jsx(vj,{})," ",a?"Cration...":"Crer"]})]})]})})]})}function vG({contacts:n,activeAccount:e,onRefresh:t,initialContact:s}){const[i,r]=_.useState(""),[a,o]=_.useState(!1),[c,f]=_.useState(s||null),d=n.filter(g=>{if(!i)return!0;const w=i.toLowerCase(),b=(g.display_name||"").toLowerCase(),y=(g.whatsapp_number||"").toLowerCase();return b.includes(w)||y.includes(w)}),h=()=>{o(!1),t&&t()},p=()=>{f(null),t&&t()},m=()=>{f(null),t&&t()};return _.useEffect(()=>{s&&f(s)},[s]),_.useEffect(()=>{s&&f(s)},[s]),a?l.jsx(bG,{onBack:()=>o(!1),onCreated:h}):c?l.jsx(AI,{contact:c,activeAccount:e,onBack:()=>f(null),onUpdate:p,onDelete:m}):l.jsxs("div",{className:"mobile-contacts",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("h1",{children:"Contacts"}),l.jsx("button",{className:"icon-btn",title:"Nouveau contact",onClick:()=>o(!0),children:l.jsx(u5,{})})]}),l.jsx("div",{className:"mobile-panel-search",children:l.jsxs("div",{className:"search-box",children:[l.jsx(xo,{}),l.jsx("input",{type:"text",placeholder:"Rechercher un contact...",value:i,onChange:g=>r(g.target.value)})]})}),l.jsx("div",{className:"mobile-contacts__list",children:d.length===0?l.jsx("div",{className:"mobile-panel-empty",children:l.jsx("p",{children:"Aucun contact"})}):d.map(g=>l.jsxs("div",{className:"mobile-contact-item",onClick:()=>f(g),children:[l.jsx("div",{className:"mobile-contact-item__avatar",children:(g.display_name||"?").charAt(0).toUpperCase()}),l.jsxs("div",{className:"mobile-contact-item__info",children:[l.jsx("span",{className:"mobile-contact-item__name",children:g.display_name||"Sans nom"}),l.jsx("span",{className:"mobile-contact-item__phone",children:Pn(g.whatsapp_number)})]})]},g.id))})]})}function xG({accounts:n,activeAccount:e}){const t=n.find(s=>s.id===e);return l.jsxs("div",{className:"mobile-whatsapp",children:[l.jsx("header",{className:"mobile-panel-header",children:l.jsx("h1",{children:"WhatsApp Business"})}),l.jsxs("div",{className:"mobile-panel-content",children:[l.jsxs("div",{className:"mobile-panel-card",children:[l.jsx("h3",{children:"Compte actif"}),l.jsx("p",{children:(t==null?void 0:t.name)||"Aucun compte"})]}),l.jsxs("div",{className:"mobile-panel-card",children:[l.jsx("h3",{children:"Accs complet"}),l.jsx("p",{children:"Pour grer vos templates, profil et paramtres WhatsApp Business, veuillez utiliser la version web sur ordinateur."})]})]})]})}function _G({accounts:n,activeAccount:e}){const t=n.find(s=>s.id===e);return l.jsxs("div",{className:"mobile-gemini",children:[l.jsx("header",{className:"mobile-panel-header",children:l.jsx("h1",{children:"Assistant Gemini"})}),l.jsxs("div",{className:"mobile-panel-content",children:[l.jsxs("div",{className:"mobile-panel-card",children:[l.jsx("h3",{children:"Configuration de l'assistant IA"}),l.jsxs("p",{children:["Compte : ",(t==null?void 0:t.name)||"Aucun compte"]})]}),l.jsxs("div",{className:"mobile-panel-card",children:[l.jsx("h3",{children:"Accs complet"}),l.jsx("p",{children:"Pour configurer l'assistant Gemini et ses paramtres, veuillez utiliser la version web sur ordinateur."})]})]})]})}function jG(){const[n,e]=_.useState(!1),[t,s]=_.useState(!1);_.useEffect(()=>{e(ev())},[]);const i=async()=>{if(n){alert(` Pour dsactiver les notifications, allez dans les paramtres de votre navigateur.

Chrome: Paramtres > Confidentialit > Notifications
Firefox: Paramtres > Vie prive > Notifications`);return}s(!0);const c=await qh();e(c),s(!1),c&&setTimeout(()=>{Gy()},500)},r=async()=>{if(!n){alert(" Activez d'abord les notifications");return}await Gy()},o=(()=>{if(!("Notification"in window))return{text:"Non supportes",color:"#94a3b8",icon:l.jsx($8,{})};switch(Notification.permission){case"granted":return{text:"Actives",color:"#10b981",icon:l.jsx(tr,{})};case"denied":return{text:"Bloques",color:"#ef4444",icon:l.jsx(Ms,{})};default:return{text:"Non configures",color:"#f59e0b",icon:l.jsx(e5,{})}}})();return l.jsxs("div",{className:"mobile-notification-settings",children:[l.jsxs("div",{className:"mobile-notification-settings__section",children:[l.jsx("h2",{className:"mobile-notification-settings__section-title",children:"tat"}),l.jsx("div",{className:"mobile-notification-settings__status-item",children:l.jsxs("div",{className:"mobile-notification-settings__status-info",children:[l.jsx("span",{className:"mobile-notification-settings__status-label",children:"Notifications"}),l.jsxs("span",{className:"mobile-notification-settings__status-value",style:{color:o.color},children:[l.jsx("span",{className:"mobile-notification-settings__status-icon",children:o.icon}),o.text]})]})})]}),l.jsxs("div",{className:"mobile-notification-settings__section",children:[l.jsx("h2",{className:"mobile-notification-settings__section-title",children:"Paramtres"}),l.jsxs("div",{className:"mobile-notification-settings__toggle",children:[l.jsxs("div",{className:"mobile-notification-settings__toggle-info",children:[l.jsx("span",{className:"mobile-notification-settings__toggle-label",children:"Activer les notifications"}),l.jsx("span",{className:"mobile-notification-settings__toggle-description",children:"Recevez des notifications pour les nouveaux messages"})]}),l.jsx("button",{className:`mobile-notification-settings__toggle-btn ${n?"active":""}`,onClick:i,disabled:t||Notification.permission==="denied",children:l.jsx("span",{className:"mobile-notification-settings__toggle-slider"})})]})]}),n&&l.jsxs("div",{className:"mobile-notification-settings__section",children:[l.jsx("h2",{className:"mobile-notification-settings__section-title",children:"Actions"}),l.jsxs("div",{className:"mobile-notification-settings__action",onClick:r,children:[l.jsx("span",{children:"Tester une notification"}),l.jsx("button",{className:"mobile-notification-settings__action-btn",children:"Tester"})]})]}),Notification.permission==="denied"&&l.jsx("div",{className:"mobile-notification-settings__section",children:l.jsx("div",{className:"mobile-notification-settings__status-item",children:l.jsxs("div",{className:"mobile-notification-settings__status-info",children:[l.jsxs("span",{className:"mobile-notification-settings__status-label",style:{color:"#f59e0b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(MN,{})," Notifications bloques"]}),l.jsx("span",{className:"mobile-notification-settings__status-value",children:"Pour les ractiver, allez dans les paramtres de votre navigateur."})]})})})]})}const CG="modulepreload",MG=function(n){return"/"+n},ES={},Hw=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=MG(c),c in ES)return;ES[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":CG,f||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),f)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})},LG=n=>oe.put("/auth/me",n),SG=n=>{const e=new FormData;return e.append("file",n),oe.post("/auth/me/profile-picture",e,{headers:{"Content-Type":"multipart/form-data"}})};function EG({onBack:n}){const[e,t]=_.useState(null),[s,i]=_.useState(""),[r,a]=_.useState(""),[o,c]=_.useState(null),[f,d]=_.useState(!1),[h,p]=_.useState(!1),[m,g]=_.useState(!1),w=_.useRef(null);_.useEffect(()=>{(async()=>{var C,S;try{const{data:{session:L}}=await it.auth.getSession();if(L){const{api:k}=await Hw(async()=>{const{api:T}=await Promise.resolve().then(()=>nw);return{api:T}},[]),A=await k.get("/auth/me");A.data&&(t(A.data),i(A.data.display_name||((C=A.data.email)==null?void 0:C.split("@")[0])||""),a(A.data.email||""),c(A.data.profile_picture_url||((S=A.data.profile)==null?void 0:S.profile_picture_url)))}}catch(L){console.error("Erreur lors du chargement du profil:",L)}})()},[]);const b=async()=>{var v,C;d(!0);try{await LG({display_name:s||null});const{api:S}=await Hw(async()=>{const{api:k}=await Promise.resolve().then(()=>nw);return{api:k}},void 0),L=await S.get("/auth/me");L.data&&(t(L.data),i(L.data.display_name||((v=L.data.email)==null?void 0:v.split("@")[0])||""),c(L.data.profile_picture_url||((C=L.data.profile)==null?void 0:C.profile_picture_url))),g(!1)}catch(S){console.error("Erreur lors de la mise  jour du profil:",S),alert("Erreur lors de la mise  jour du profil")}finally{d(!1)}},y=()=>{var v;(v=w.current)==null||v.click()},x=async v=>{var S,L;const C=(S=v.target.files)==null?void 0:S[0];if(C){if(!C.type.startsWith("image/")){alert("Veuillez slectionner une image");return}if(C.size>5*1024*1024){alert("L'image est trop volumineuse (max 5MB)");return}p(!0);try{const k=await SG(C);c(k.data.profile_picture_url);const{api:A}=await Hw(async()=>{const{api:I}=await Promise.resolve().then(()=>nw);return{api:I}},void 0),T=await A.get("/auth/me");T.data&&(t(T.data),c(T.data.profile_picture_url||((L=T.data.profile)==null?void 0:L.profile_picture_url)))}catch(k){console.error("Erreur lors de l'upload de la photo:",k),alert("Erreur lors de l'upload de la photo")}finally{p(!1),w.current&&(w.current.value="")}}};return l.jsxs("div",{className:"mobile-account-settings",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Compte"}),m?l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{className:"icon-btn",onClick:()=>{var v;g(!1),i((e==null?void 0:e.display_name)||((v=e==null?void 0:e.email)==null?void 0:v.split("@")[0])||"")},title:"Annuler",children:l.jsx(Ms,{})}),l.jsx("button",{className:"icon-btn",onClick:b,disabled:f,title:"Enregistrer",children:l.jsx(vj,{})})]}):l.jsx("button",{className:"icon-btn",onClick:()=>g(!0),title:"Modifier",children:l.jsx(To,{})})]}),l.jsxs("div",{className:"mobile-account-settings__content",children:[l.jsxs("div",{className:"mobile-account-settings__avatar-container",children:[l.jsxs("div",{className:"mobile-account-settings__avatar",children:[o?l.jsx("img",{src:o,alt:s||r,onError:v=>{v.target.style.display="none",v.target.nextSibling.style.display="flex"}}):null,l.jsx("div",{className:"mobile-account-settings__avatar-initial",style:{display:o?"none":"flex"},children:(s||r||"?").charAt(0).toUpperCase()})]}),l.jsx("button",{className:"mobile-account-settings__avatar-edit",onClick:y,disabled:h,title:"Changer la photo",children:l.jsx(Dr,{})}),l.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:x,style:{display:"none"}})]}),l.jsxs("div",{className:"mobile-account-settings__fields",children:[l.jsxs("div",{className:"mobile-account-settings__field",children:[l.jsxs("label",{children:[l.jsx(Wh,{})," Nom d'affichage"]}),m?l.jsx("input",{type:"text",value:s,onChange:v=>i(v.target.value),placeholder:"Votre nom"}):l.jsx("div",{className:"mobile-account-settings__value",children:s||"Non renseign"})]}),l.jsxs("div",{className:"mobile-account-settings__field",children:[l.jsxs("label",{children:[l.jsx(NN,{})," Email"]}),l.jsx("div",{className:"mobile-account-settings__value",children:r||"Non renseign"})]})]})]})]})}function kG({onBack:n}){const[e,t]=_.useState([]),[s,i]=_.useState(!0);_.useEffect(()=>{r()},[]);const r=async()=>{var o;try{const c="owner/repo";if(c)try{const f=await fetch(`https://api.github.com/repos/${c}/commits?per_page=20`);if(f.ok){const h=(await f.json()).map(p=>({version:p.sha.substring(0,7),date:new Date(p.commit.author.date),message:p.commit.message.split(`
`)[0],author:p.commit.author.name,url:p.html_url}));t(h),i(!1);return}}catch(f){console.warn("Erreur lors du chargement depuis GitHub:",f)}try{const{api:f}=await Hw(async()=>{const{api:h}=await Promise.resolve().then(()=>nw);return{api:h}},void 0),d=await f.get("/app/updates");if(d.data&&d.data.updates&&d.data.updates.length>0){t(d.data.updates),i(!1);return}}catch(f){((o=f.response)==null?void 0:o.status)!==404&&console.warn("Erreur lors du chargement depuis l'API locale:",f)}t([{version:"1.0.0",date:new Date,message:"Version initiale de l'application",author:"quipe de dveloppement",changes:["Interface mobile complte","Gestion des conversations WhatsApp","Paramtres utilisateur","Notifications push"]}]),i(!1)}catch(c){console.error("Erreur lors du chargement des mises  jour:",c),i(!1)}},a=o=>{if(!o)return"";const c=new Date(o),d=new Date-c,h=Math.floor(d/(1e3*60*60*24));return h===0?"Aujourd'hui":h===1?"Hier":h<7?`Il y a ${h} jours`:h<30?`Il y a ${Math.floor(h/7)} semaines`:h<365?`Il y a ${Math.floor(h/30)} mois`:c.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",timeZone:"Europe/Paris"})};return s?l.jsxs("div",{className:"mobile-app-updates",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Mises  jour"})]}),l.jsx("div",{className:"mobile-app-updates__loading",children:l.jsx("p",{children:"Chargement des mises  jour..."})})]}):l.jsxs("div",{className:"mobile-app-updates",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Mises  jour"})]}),l.jsx("div",{className:"mobile-app-updates__content",children:e.length===0?l.jsx("div",{className:"mobile-app-updates__empty",children:l.jsx("p",{children:"Aucune mise  jour disponible"})}):l.jsx("div",{className:"mobile-app-updates__list",children:e.map((o,c)=>l.jsxs("div",{className:"mobile-app-updates__item",children:[l.jsxs("div",{className:"mobile-app-updates__header",children:[l.jsxs("div",{className:"mobile-app-updates__version",children:[l.jsx(a5,{}),l.jsx("span",{children:o.version})]}),l.jsxs("div",{className:"mobile-app-updates__date",children:[l.jsx(G8,{}),l.jsx("span",{children:a(o.date)})]})]}),l.jsx("div",{className:"mobile-app-updates__message",children:o.message}),o.changes&&o.changes.length>0&&l.jsx("ul",{className:"mobile-app-updates__changes",children:o.changes.map((f,d)=>l.jsx("li",{children:f},d))}),o.author&&l.jsxs("div",{className:"mobile-app-updates__author",children:[l.jsx(q8,{}),l.jsx("span",{children:o.author})]}),o.url&&l.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"mobile-app-updates__link",children:"Voir sur GitHub "})]},c))})})]})}function NG({onBack:n}){const[e,t]=_.useState(""),[s,i]=_.useState(""),[r,a]=_.useState(!1),[o,c]=_.useState(""),[f,d]=_.useState(!1),[h,p]=_.useState([]),[m,g]=_.useState(!1),w=async x=>{var v,C,S,L;if(x.preventDefault(),c(""),d(!1),!e){c("Veuillez entrer une adresse email");return}a(!0);try{(await oe.post("/invitations/invite",{email:e,display_name:s||null})).data.success&&(d(!0),t(""),i(""),b())}catch(k){console.error("Error inviting user:",k),((C=(v=k.response)==null?void 0:v.data)==null?void 0:C.detail)==="user_already_exists"?c("Cet utilisateur existe dj"):c(((L=(S=k.response)==null?void 0:S.data)==null?void 0:L.detail)||"Erreur lors de l'envoi de l'invitation")}finally{a(!1)}},b=async()=>{g(!0);try{const x=await oe.get("/invitations/pending-invites");x.data.success&&p(x.data.invites||[])}catch(x){console.error("Error loading pending invites:",x)}finally{g(!1)}},y=async x=>{var v,C;a(!0);try{(await oe.post("/invitations/resend-invite",{email:x})).data.success&&(d(!0),setTimeout(()=>d(!1),3e3))}catch(S){console.error("Error resending invite:",S),c(((C=(v=S.response)==null?void 0:v.data)==null?void 0:C.detail)||"Erreur lors du renvoi de l'invitation")}finally{a(!1)}};return _.useEffect(()=>{b()},[]),l.jsxs("div",{className:"mobile-invite-user",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Inviter un contact"})]}),l.jsxs("div",{className:"mobile-invite-user__content",children:[l.jsxs("form",{onSubmit:w,className:"mobile-invite-user__form",children:[l.jsxs("div",{className:"mobile-invite-user__field",children:[l.jsxs("label",{children:[l.jsx(NN,{})," Email"]}),l.jsx("input",{type:"email",value:e,onChange:x=>t(x.target.value),placeholder:"email@example.com",required:!0})]}),l.jsxs("div",{className:"mobile-invite-user__field",children:[l.jsxs("label",{children:[l.jsx(Wh,{})," Nom d'affichage (optionnel)"]}),l.jsx("input",{type:"text",value:s,onChange:x=>i(x.target.value),placeholder:"Nom de l'utilisateur"})]}),o&&l.jsx("div",{className:"mobile-invite-user__error",children:o}),f&&l.jsx("div",{className:"mobile-invite-user__success",children:"Invitation envoye avec succs !"}),l.jsxs("button",{type:"submit",className:"mobile-invite-user__submit",disabled:r,children:[l.jsx(mi,{}),r?"Envoi...":"Envoyer l'invitation"]})]}),h.length>0&&l.jsxs("div",{className:"mobile-invite-user__pending",children:[l.jsx("h2",{children:"Invitations en attente"}),l.jsx("div",{className:"mobile-invite-user__list",children:h.map((x,v)=>l.jsxs("div",{className:"mobile-invite-user__item",children:[l.jsxs("div",{className:"mobile-invite-user__item-info",children:[l.jsx("div",{className:"mobile-invite-user__item-email",children:x.email}),l.jsxs("div",{className:"mobile-invite-user__item-date",children:["Invit le ",(()=>{const C=x.invited_at,S=typeof C=="string"&&!C.match(/[Z+-]\d{2}:\d{2}$/)?C+"Z":C;return new Date(S).toLocaleDateString("fr-FR",{timeZone:"Europe/Paris"})})()]})]}),l.jsx("button",{className:"mobile-invite-user__resend-btn",onClick:()=>y(x.email),disabled:r,title:"Renvoyer l'invitation",children:l.jsx(DN,{})})]},v))})]})]})]})}function AG({onBack:n}){const[e,t]=_.useState(""),[s,i]=_.useState("list"),a=[{icon:l.jsx(Wh,{}),title:"Compte",subtitle:"Notifications de scurit, changer de numro",onClick:()=>i("account")},{icon:l.jsx(Hu,{}),title:"Discussions",subtitle:"Thmes, fonds d'cran, historique des discussions",onClick:()=>i("chat")},{icon:l.jsx(wj,{}),title:"Notifications",subtitle:"Sonneries des messages, groupes et appels",onClick:()=>i("notifications")},{icon:l.jsx(kN,{}),title:"Langue de l'application",subtitle:"Franais (langue de l'appareil)",onClick:()=>{alert("La langue de l'application est actuellement en franais. Le support multilingue arrivera prochainement.")}},{icon:l.jsx(iw,{}),title:"Aide et commentaires",subtitle:"Pages d'aide, nous contacter, Politique de confidentialit",onClick:()=>{alert("Cette fonctionnalit arrivera prochainement. Pour toute question, contactez le support.")}},{icon:l.jsx(Yh,{}),title:"Inviter un contact",onClick:()=>i("invite")},{icon:l.jsx(Ib,{}),title:"Mises  jour de l'application",onClick:()=>i("updates")}].filter(o=>{if(!e)return!0;const c=e.toLowerCase();return o.title.toLowerCase().includes(c)||o.subtitle&&o.subtitle.toLowerCase().includes(c)});return s==="account"?l.jsx(EG,{onBack:()=>i("list")}):s==="chat"?l.jsx(TI,{onBack:()=>i("list")}):s==="notifications"?l.jsxs("div",{className:"mobile-settings",children:[l.jsxs("header",{className:"mobile-settings__header",children:[l.jsx("button",{className:"icon-btn",onClick:()=>i("list"),title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Notifications"})]}),l.jsx("div",{className:"mobile-settings__content",style:{padding:"1rem"},children:l.jsx(jG,{})})]}):s==="updates"?l.jsx(kG,{onBack:()=>i("list")}):s==="invite"?l.jsx(NG,{onBack:()=>i("list")}):l.jsxs("div",{className:"mobile-settings",children:[l.jsxs("header",{className:"mobile-settings__header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Paramtres"})]}),l.jsx("div",{className:"mobile-settings__search",children:l.jsxs("div",{className:"search-box",children:[l.jsx(xo,{}),l.jsx("input",{type:"text",placeholder:"Rechercher dans les paramtres...",value:e,onChange:o=>t(o.target.value)})]})}),l.jsx("div",{className:"mobile-settings__content",children:a.map((o,c)=>l.jsxs("div",{className:"mobile-settings__item",onClick:o.onClick,children:[l.jsx("div",{className:"mobile-settings__item-icon",children:o.icon}),l.jsxs("div",{className:"mobile-settings__item-content",children:[l.jsx("div",{className:"mobile-settings__item-title",children:o.title}),o.subtitle&&l.jsx("div",{className:"mobile-settings__item-subtitle",children:o.subtitle})]})]},c))})]})}function TG({accounts:n,activeAccount:e,onBack:t}){const[s,i]=_.useState([]);return _.useEffect(()=>{n&&n.length>0&&i(n.map(r=>({id:r.id,name:r.name||r.phone_number||"Compte WhatsApp",phoneNumber:r.phone_number||"Non renseign",isActive:r.is_active!==!1,isCurrent:r.id===e})))},[n,e]),l.jsxs("div",{className:"mobile-connected-devices",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:t,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Appareils connects"})]}),l.jsx("div",{className:"mobile-connected-devices__content",children:s.length===0?l.jsx("div",{className:"mobile-panel-empty",children:l.jsx("p",{children:"Aucun appareil connect"})}):s.map(r=>l.jsxs("div",{className:`mobile-connected-device ${r.isCurrent?"mobile-connected-device--current":""}`,children:[l.jsx("div",{className:"mobile-connected-device__icon",children:l.jsx(PN,{})}),l.jsxs("div",{className:"mobile-connected-device__info",children:[l.jsxs("div",{className:"mobile-connected-device__name",children:[r.name,r.isCurrent&&l.jsxs("span",{className:"mobile-connected-device__badge",children:[l.jsx(tr,{})," Actuel"]})]}),l.jsx("div",{className:"mobile-connected-device__phone",children:r.phoneNumber})]}),r.isActive&&l.jsxs("div",{className:"mobile-connected-device__status",children:[l.jsx("span",{className:"mobile-connected-device__status-dot"}),"Connect"]})]},r.id))})]})}function IG({onBack:n}){const[e,t]=_.useState([]),[s,i]=_.useState([]),[r,a]=_.useState(!0),[o,c]=_.useState(""),[f,d]=_.useState(null),[h,p]=_.useState(null),[m,g]=_.useState(null);_.useEffect(()=>{b(),w()},[]);const w=async()=>{try{const N=await oe.get("/auth/me");g(N.data)}catch(N){console.error("Error loading current user profile:",N)}},b=async()=>{a(!0);try{const[N,R]=await Promise.all([oe.get("/admin/users"),oe.get("/admin/roles")]);t(N.data||[]),i(R.data||[])}catch(N){console.error("Error loading team data:",N)}finally{a(!1)}},y=N=>{var B;return m?(((B=m.permissions)==null?void 0:B.global)||[]).includes(N):!1},x=y("roles.manage"),v=y("users.manage"),C=y("roles.manage")||y("users.manage"),S=async(N,R)=>{try{await oe.post(`/admin/users/${N}/status`,{is_active:!R}),await b()}catch(B){console.error("Error updating user status:",B),alert("Erreur lors de la mise  jour du statut")}},L=async(N,R)=>{try{await oe.put(`/admin/users/${N}/roles`,{assignments:R}),await b(),p(null)}catch(B){console.error("Error updating user roles:",B),alert("Erreur lors de la mise  jour des rles")}},k=async N=>{var R,B;if(confirm("tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible."))try{await oe.delete(`/admin/users/${N}`),await b(),d(null)}catch(P){console.error("Error deleting user:",P),((B=(R=P.response)==null?void 0:R.data)==null?void 0:B.detail)==="cannot_delete_self"?alert("Vous ne pouvez pas vous supprimer vous-mme"):alert("Erreur lors de la suppression de l'utilisateur")}},A=e.filter(N=>{var B,P;if(!o)return!0;const R=o.toLowerCase();return((B=N.email)==null?void 0:B.toLowerCase().includes(R))||((P=N.display_name)==null?void 0:P.toLowerCase().includes(R))}),T=N=>N.roles||[],I=N=>{const R=s.find(B=>B.id===N);return(R==null?void 0:R.name)||N};return f?l.jsx(DG,{user:f,roles:s,onBack:()=>d(null),onUpdateRoles:L,onToggleStatus:S,onDelete:v?k:null,canManageRoles:x,canManageUsers:v,canViewRoles:C}):r?l.jsxs("div",{className:"mobile-team-panel",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"quipe"})]}),l.jsx("div",{className:"mobile-team-panel__loading",children:l.jsx("p",{children:"Chargement..."})})]}):l.jsxs("div",{className:"mobile-team-panel",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:n,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"quipe"})]}),l.jsx("div",{className:"mobile-panel-search",children:l.jsxs("div",{className:"search-box",children:[l.jsx(xo,{}),l.jsx("input",{type:"text",placeholder:"Rechercher un membre...",value:o,onChange:N=>c(N.target.value)})]})}),l.jsxs("div",{className:"mobile-team-panel__content",children:[l.jsxs("div",{className:"mobile-team-panel__stats",children:[l.jsxs("div",{className:"mobile-team-panel__stat",children:[l.jsx("span",{className:"mobile-team-panel__stat-value",children:e.length}),l.jsx("span",{className:"mobile-team-panel__stat-label",children:"Membres"})]}),l.jsxs("div",{className:"mobile-team-panel__stat",children:[l.jsx("span",{className:"mobile-team-panel__stat-value",children:e.filter(N=>N.is_active).length}),l.jsx("span",{className:"mobile-team-panel__stat-label",children:"Actifs"})]})]}),l.jsx("div",{className:"mobile-team-panel__list",children:A.map(N=>{var R;return l.jsxs("div",{className:"mobile-team-panel__item",onClick:()=>d(N),children:[l.jsx("div",{className:"mobile-team-panel__item-avatar",children:(N.display_name||N.email||"?").charAt(0).toUpperCase()}),l.jsxs("div",{className:"mobile-team-panel__item-content",children:[l.jsx("div",{className:"mobile-team-panel__item-name",children:N.display_name||((R=N.email)==null?void 0:R.split("@")[0])||"Utilisateur"}),l.jsx("div",{className:"mobile-team-panel__item-email",children:N.email}),C&&l.jsx("div",{className:"mobile-team-panel__item-roles",children:T(N).map((B,P)=>l.jsx("span",{className:"mobile-team-panel__role-badge",children:I(B.role_id)},P))})]}),l.jsx("div",{className:"mobile-team-panel__item-status",children:l.jsx("div",{className:`mobile-team-panel__status-indicator ${N.is_active?"active":"inactive"}`})})]},N.user_id)})})]})]})}function DG({user:n,roles:e,onBack:t,onUpdateRoles:s,onToggleStatus:i,onDelete:r,canManageRoles:a,canManageUsers:o,canViewRoles:c}){var m;const[f,d]=_.useState(n.roles&&n.roles.length>0?n.roles[0].role_id:null),h=g=>{d(w=>w===g?null:g)},p=()=>{const g=f?[{role_id:f,account_id:null}]:[];s(n.user_id,g)};return l.jsxs("div",{className:"mobile-team-panel",children:[l.jsxs("header",{className:"mobile-panel-header",children:[l.jsx("button",{className:"icon-btn",onClick:t,title:"Retour",children:l.jsx(fs,{})}),l.jsx("h1",{children:"Membre"})]}),l.jsxs("div",{className:"mobile-team-panel__detail",children:[l.jsx("div",{className:"mobile-team-panel__detail-avatar",children:(n.display_name||n.email||"?").charAt(0).toUpperCase()}),l.jsxs("div",{className:"mobile-team-panel__detail-info",children:[l.jsx("h2",{children:n.display_name||((m=n.email)==null?void 0:m.split("@")[0])||"Utilisateur"}),l.jsx("p",{children:n.email})]}),o&&l.jsxs("div",{className:"mobile-team-panel__detail-section",children:[l.jsx("h3",{children:"Statut"}),l.jsxs("div",{className:"mobile-team-panel__toggle-row",children:[l.jsx("span",{children:n.is_active?"Actif":"Inactif"}),l.jsx("button",{className:`mobile-team-panel__toggle-btn ${n.is_active?"active":""}`,onClick:()=>i(n.user_id,n.is_active),children:l.jsx("span",{className:"mobile-team-panel__toggle-slider"})})]})]}),c&&l.jsxs("div",{className:"mobile-team-panel__detail-section",children:[l.jsx("h3",{children:"Rle"}),a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mobile-team-panel__roles-list",children:e.map(g=>l.jsxs("div",{className:`mobile-team-panel__role-item ${f===g.id?"active":""}`,onClick:()=>h(g.id),children:[l.jsxs("div",{className:"mobile-team-panel__role-info",children:[l.jsx(jy,{}),l.jsx("span",{children:g.name})]}),f===g.id&&l.jsx(tr,{})]},g.id))}),l.jsx("button",{className:"mobile-team-panel__save-btn",onClick:p,children:"Enregistrer les modifications"})]}):l.jsx("div",{className:"mobile-team-panel__roles-list",children:e.map(g=>l.jsxs("div",{className:`mobile-team-panel__role-item ${f===g.id?"active":""}`,children:[l.jsxs("div",{className:"mobile-team-panel__role-info",children:[l.jsx(jy,{}),l.jsx("span",{children:g.name})]}),f===g.id&&l.jsx(tr,{})]},g.id))})]}),o&&r&&l.jsx("div",{className:"mobile-team-panel__detail-section",children:l.jsxs("button",{className:"mobile-team-panel__delete-btn",onClick:()=>r(n.user_id),children:[l.jsx(fo,{}),"Supprimer l'utilisateur"]})})]})]})}function PG({onLogout:n}){const[e,t]=_.useState("conversations"),[s,i]=_.useState([]),[r,a]=_.useState(null),[o,c]=_.useState([]),[f,d]=_.useState(null),[h,p]=_.useState([]),[m,g]=_.useState(null),w=_.useCallback(async()=>{var N,R;try{const{data:{session:B},error:P}=await it.auth.getSession();if(P){console.error(" Erreur session Supabase:",P);return}if(!(B!=null&&B.access_token)){console.warn(" Pas de session ou token manquant, impossible de charger les comptes");return}const Y=await xN(),$=Array.isArray(Y==null?void 0:Y.data)?Y.data:((N=Y==null?void 0:Y.data)==null?void 0:N.data)||[];i($);const X=kI(),O=X&&$.some(G=>G.id===X);$.length>0&&!r&&a(O?X:$[0].id)}catch(B){console.error(" Erreur chargement comptes:",B),((R=B.response)==null?void 0:R.status)===401&&console.error(" 401 Unauthorized - La session a peut-tre expir. Vrifiez votre connexion.")}},[r]),b=_.useCallback(async N=>{if(N)try{console.log(` Refreshing conversations for account: ${N}`);const B=(await bN(N)).data||[];console.log(` Loaded ${B.length} conversations`);const P=B.filter(Y=>Y.unread_count>0);P.length>0&&console.log(` ${P.length} conversation(s) avec messages non lus:`,P.map(Y=>{var $;return{id:Y.id,name:(($=Y.contacts)==null?void 0:$.display_name)||Y.client_number,unread:Y.unread_count}})),c(B)}catch(R){console.error(" Erreur chargement conversations:",R)}},[]),y=_.useCallback(async()=>{try{const N=await gj();p(N.data||[])}catch(N){console.error("Erreur chargement contacts:",N)}},[]);_.useEffect(()=>{w(),y()},[w,y]),_.useEffect(()=>{r&&EI(r)},[r]),_.useEffect(()=>{if(r){b(r);const N=setInterval(()=>{b(r)},5e3);return()=>clearInterval(N)}},[r,b]),SI(f==null?void 0:f.id);const x=async N=>{d(N),N!=null&&N.unread_count&&(await yc(N.id),b(r))},v=()=>{d(null)},C=()=>{t("connected-devices")},S=()=>{},L=async()=>{try{const N=o.filter(R=>R.unread_count>0&&(!R.account_id||R.account_id===r));if(N.length===0)return;await Promise.all(N.map(R=>yc(R.id))),await b(r)}catch(N){console.error("Erreur lors du marquage de toutes les conversations comme lues:",N)}},k=()=>{t("settings")},A=N=>{g(N),t("contacts")},T=async(N,R)=>{c(B=>B.map(P=>P.id===N?{...P,bot_enabled:R}:P))};if(f)return l.jsx(yG,{conversation:f,onBack:v,onRefresh:()=>b(r),onShowContact:A,onToggleBotMode:T});const I=()=>{switch(e){case"conversations":return l.jsx(gG,{conversations:o,accounts:s,activeAccount:r,onSelectAccount:a,onSelectConversation:x,onConnectedDevices:C,onImportant:S,onMarkAllRead:L,onSettings:k});case"contacts":return l.jsx(vG,{contacts:h,activeAccount:r,onRefresh:y,initialContact:m});case"whatsapp":return l.jsx(xG,{accounts:s,activeAccount:r});case"gemini":return l.jsx(_G,{accounts:s,activeAccount:r});case"settings":return l.jsx(AG,{onBack:()=>t("conversations")});case"connected-devices":return l.jsx(TG,{accounts:s,activeAccount:r,onBack:()=>t("conversations")});case"team":return l.jsx(IG,{onBack:()=>t("conversations")});default:return null}};return l.jsxs("div",{className:"mobile-inbox",children:[l.jsx("div",{className:"mobile-inbox__content",children:I()}),l.jsxs("nav",{className:"mobile-inbox__nav",children:[l.jsxs("button",{className:`mobile-inbox__nav-btn ${e==="conversations"?"active":""}`,onClick:()=>t("conversations"),children:[l.jsx(Hu,{}),l.jsx("span",{children:"Discussions"}),(()=>{const N=o.filter(R=>R.unread_count>0).length;return N>0?l.jsx("span",{className:"mobile-inbox__nav-badge",children:N>99?"99+":N}):null})()]}),l.jsxs("button",{className:`mobile-inbox__nav-btn ${e==="contacts"?"active":""}`,onClick:()=>t("contacts"),children:[l.jsx(Yh,{}),l.jsx("span",{children:"Contacts"})]}),l.jsxs("button",{className:`mobile-inbox__nav-btn ${e==="gemini"?"active":""}`,onClick:()=>t("gemini"),children:[l.jsx(TN,{}),l.jsx("span",{children:"Assistant"})]}),l.jsxs("button",{className:`mobile-inbox__nav-btn ${e==="team"?"active":""}`,onClick:()=>t("team"),children:[l.jsx(c5,{}),l.jsx("span",{children:"quipe"})]})]})]})}function II(){const n=()=>{const x=new URLSearchParams(window.location.search);return{token:x.get("token"),token_hash:x.get("token_hash"),type:x.get("type")}},[e,t]=_.useState(""),[s,i]=_.useState(""),[r,a]=_.useState(""),[o,c]=_.useState(""),[f,d]=_.useState(""),[h,p]=_.useState(!1),[m,g]=_.useState(!1),[w,b]=_.useState(!0);_.useEffect(()=>{const x=searchParams.get("token"),v=searchParams.get("type");if(!x||v!=="invite"){d("Lien d'invitation invalide ou expir"),b(!1);return}(async()=>{try{const{data:S,error:L}=await it.auth.getUser(x);if(L||!S.user){d("Lien d'invitation invalide ou expir. Veuillez demander un nouveau lien."),b(!1);return}t(S.user.email||""),g(!0),b(!1)}catch(S){console.error("Error checking token:",S),d("Erreur lors de la vrification du lien d'invitation"),b(!1)}})()},[]);const y=async x=>{if(x.preventDefault(),d(""),s!==r){d("Les mots de passe ne correspondent pas");return}if(s.length<6){d("Le mot de passe doit contenir au moins 6 caractres");return}p(!0);try{const v=n(),C=v.token_hash||v.token;if(C){const{error:k}=await it.auth.verifyOtp({token_hash:C,type:"invite"});k&&console.warn("OTP verification failed, trying direct update:",k)}const{error:S}=await it.auth.updateUser({password:s,data:{display_name:o||void 0}});if(S)throw S;const{data:L}=await it.auth.getSession();if(!L.session){const{error:k}=await it.auth.signInWithPassword({email:e,password:s});if(k)throw k}window.location.href="/"}catch(v){console.error("Registration error:",v),d(v.message||"Erreur lors de l'inscription. Veuillez ressayer.")}finally{p(!1)}};return w?l.jsx("div",{className:"register-page",children:l.jsx("div",{className:"register-card",children:l.jsx("h1",{children:"Vrification du lien d'invitation..."})})}):m?l.jsx("div",{className:"register-page",children:l.jsxs("div",{className:"register-card",children:[l.jsx("h1",{children:"Crer votre compte"}),l.jsx("p",{children:"Compltez votre inscription en dfinissant votre mot de passe"}),l.jsxs("form",{onSubmit:y,children:[l.jsxs("label",{children:["Email",l.jsx("input",{type:"email",value:e,disabled:!0,className:"disabled-input"})]}),l.jsxs("label",{children:["Nom d'affichage (optionnel)",l.jsx("input",{type:"text",value:o,onChange:x=>c(x.target.value),placeholder:"Votre nom"})]}),l.jsxs("label",{children:["Mot de passe",l.jsx("input",{type:"password",value:s,onChange:x=>i(x.target.value),required:!0,minLength:6,placeholder:"Au moins 6 caractres"})]}),l.jsxs("label",{children:["Confirmer le mot de passe",l.jsx("input",{type:"password",value:r,onChange:x=>a(x.target.value),required:!0,minLength:6,placeholder:"Rptez le mot de passe"})]}),f&&l.jsx("p",{className:"error",children:f}),l.jsx("button",{type:"submit",disabled:h,children:h?"Cration du compte...":"Crer mon compte"})]})]})}):l.jsx("div",{className:"register-page",children:l.jsxs("div",{className:"register-card",children:[l.jsx("h1",{children:"Lien d'invitation invalide"}),l.jsx("p",{className:"error",children:f}),l.jsx("p",{children:"Veuillez contacter votre administrateur pour recevoir un nouveau lien d'invitation."})]})})}function RG(){Tg();const[n,e]=_.useState(null),[t,s]=_.useState(!0);_.useEffect(()=>{const o=WO();o?it.auth.setSession({access_token:o.access_token,refresh_token:o.refresh_token}).then(({data:f,error:d})=>{var h;d||!f.session?(console.warn(" Saved session invalid, clearing:",d),fx(),e(null)):(console.log(" Session restored from storage:",(h=f.session.user)==null?void 0:h.id),e(f.session)),s(!1)}):it.auth.getSession().then(({data:f,error:d})=>{var h;d?(console.warn(" Error getting session:",d),e(null)):f.session?(console.log(" Session found:",(h=f.session.user)==null?void 0:h.id),f.session.access_token||console.warn(" Session exists but no access_token!"),e(f.session)):(console.log(" No session found"),e(null)),s(!1)});const{data:{subscription:c}}=it.auth.onAuthStateChange((f,d)=>{e(d),d&&Qk(d,!0)});return()=>c.unsubscribe()},[]);const i=o=>{e(o)},r=async()=>{await it.auth.signOut(),fx(),e(null)},a=window.location.pathname==="/register"||window.location.search.includes("type=invite");return t&&!a?l.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0b141a",color:"#e9edef"},children:l.jsx("div",{children:"Chargement..."})}):a?l.jsx(II,{}):n?l.jsx(PG,{onLogout:r}):l.jsx(fG,{onLoginSuccess:i})}function OG(){const{session:n,loading:e}=Jg();Tg();const t=window.location.pathname==="/register"||window.location.search.includes("type=invite");return e&&!t?l.jsx("div",{className:"loading-screen",children:"Chargement..."}):t?l.jsx(II,{}):n?l.jsxs("div",{className:"app",children:[l.jsx(cG,{}),l.jsx(oG,{})]}):l.jsx(uG,{})}function zG(){const[n,e]=_.useState(null);return _.useEffect(()=>{const t=()=>e(Yk());return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n?n==="mobile"?l.jsx(_S,{children:l.jsx(RG,{})}):l.jsx(_S,{children:l.jsx(OG,{})}):l.jsx("div",{className:"loading-screen",children:"Chargement..."})}if(typeof window<"u"&&Yk()==="desktop"){let e=document.querySelector('meta[name="theme-color"]');e||(e=document.createElement("meta"),e.setAttribute("name","theme-color"),document.head.appendChild(e)),e.setAttribute("content","#000")}oH();lH();pH();r2.createRoot(document.getElementById("root")).render(l.jsx(Fs.StrictMode,{children:l.jsx(zG,{})}));
